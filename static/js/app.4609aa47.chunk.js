(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{366:function(e,t,n){"use strict";var a={};n.r(a),n.d(a,"bleStartup",(function(){return Ke})),n.d(a,"connectBle",(function(){return et})),n.d(a,"readBleDeviceData",(function(){return nt})),n.d(a,"startBleScan",(function(){return it})),n.d(a,"stopBleScan",(function(){return ot}));var r={};n.r(r),n.d(r,"bluetoothStartup",(function(){return vt})),n.d(r,"readBlueDeviceData",(function(){return St})),n.d(r,"startBluetoothScan",(function(){return Ot})),n.d(r,"stopBluetoothScan",(function(){return Ct})),n.d(r,"bluetoothScanAble",(function(){return Pt}));var i=n(0),s=n.n(i),o=n(26),c=n(306),l=n(37),u=n(10),f=n(59),p=n(202),d=n(55),h=n(77),g=n(241),m=n.n(g),b=n(307),v=n.n(b),y=Object(p.a)((function(e,t){return m.a.encode(e)}),(function(e,t){return m.a.decode(e)})),E={key:"root",storage:v.a,transforms:[y],blacklist:[]},S=n(15),D=n.n(S),O=n(17),w=n(56),C=Object(w.createActions)({startup:null}),P=C.Types,j=C.Creators,x=P,k=j,T=Object(w.createActions)({fetchUser:null,fetchUserLoading:null,fetchUserSuccess:["user"],fetchUserFailure:["errorMessage"]}),A=T.Types,I=T.Creators,L=A,N=I,R=n(4),F=n.n(R),U=Object(w.createActions)({bleStartup:null,bleStateUpdated:["bleState"],startBleScan:null,stopBleScan:null,readBleDeviceData:null}),M=U.Types,B=U.Creators,W=Object(w.createActions)({bluetoothStartup:null,startBluetoothScan:null,stopBluetoothScan:null,bluetoothScanAble:null,readBlueDeviceData:null}),V=W.Types,_=W.Creators;function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=Object(w.createActions)({deviceStartup:null,setDeviceError:["errorMessage"],scannerStateUpdated:["scannerState"],addDevice:["device"],removeDevice:["device"],clearDevices:null,connectedDeviceUpdated:["connectedDevice"],connectionStateUpdated:["connectionState"],connectionMethodeUpdated:["connectionMethode"],setDeviceData:["data"],updateDeviceData:["data"],connectDevice:["device"],disconnectDevice:["methode"],readDeviceData:null,fetchDevice:null}),J=z.Types,Y=z.Creators,q=G(G(G({},J),M),V),X=G(G(G({},Y),B),_);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K,$=Object(w.createActions)({firebaseStartup:null,firebaseIsLoading:["loadingstate"],setFirebaseError:["errorMessage"],setViewError:["errorMessage"],viewIsLoading:["loadingstate"],setCurrentData:["data"],actionStarting:["action","ref","params"],fetchStarting:["action","ref","params"],dataFetchSuccess:["params"],fetchSuccess:["data"],fetchFailure:["errorMessage"]}),ee=$.Types,te=$.Creators,ne=Z({},ee),ae=Z({},te),re=n(50);var ie={navigate:function(e,t){e,K.dispatch(re.NavigationActions.navigate({routeName:e,params:t}))},replace:function(e,t){e,K.dispatch(re.StackActions.replace({routeName:e,params:t}))},navigateAndReset:function(e,t){e,K.dispatch(re.StackActions.reset({index:0,key:null,actions:[re.NavigationActions.navigate({routeName:e,params:t})]}))},setTopLevelNavigator:function(e){K=e},nacigationPop:function(){"",K.dispatch(re.NavigationActions.back())}},se=D.a.mark(oe);function oe(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Starting sagas"),"ios"!==u.a.OS&&"android"!==u.a.OS){e.next=4;break}return e.next=4,Object(O.g)(X.deviceStartup());case 4:return e.next=6,Object(O.g)(ae.firebaseStartup());case 6:ie.navigateAndReset("MainStack");case 7:case"end":return e.stop()}}),se)}var ce=n(170),le=n.n(ce),ue={API_URL:"https://jsonplaceholder.typicode.com/users/",CONSYS_CLIENT_ID:"consysapp",CONSYS_CLIENT_SECRET:"Kjsd832n8DIO32kmsdds3",CONSYS_AUTH:".agrisys.cloud/oauthserver/getaccesstoken/?redirect_uri=urn:ietf:wg:oauth:2.0:oob",CONSYS_API:".agrisys.cloud/consys-api-v1/"};function fe(e){return"https://"+e+ue.CONSYS_API+"checkaccesstoken"}function pe(e){return"https://"+e+ue.CONSYS_API+"getconsumptiondata?"}function de(e,t,n){var a=pe(e);return a+=he(t,n,null,null,null,null,null)}function he(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o="consumptiontype="+e+"&systemid="+t;return n&&(o=o+"&offset="+n),a&&(o=o+"&limit="+a),r&&(o=o+"&starttime="+r),i&&(o=o+"&stoptime="+i),s&&(o=o+"&lastid="+s),o}var ge=n(652),me=n(649),be=n(650),ve=Object(ge.a)(3,(function(e,t,n){var a=Object(me.a)(Number);return a(e)&&a(t)&&a(n)&&Object(be.a)(n,e)&&Object(be.a)(t,n)}))(200,299),ye=le.a.create({baseURL:ue.API_URL,headers:{Accept:"application/json","Content-Type":"application/json"},timeout:3e3});var Ee=function(){if(console.log("user fetch test"),Math.random()>.5)return new Promise((function(e,t){console.log("error"),e(null)}));var e=Math.floor(Math.random()/.1)+1;return ye.get(e.toString()).then((function(e){return ve(e.status)?e.data:null}))},Se=D.a.mark(De);function De(){var e;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.g)(N.fetchUserLoading());case 2:return t.next=4,Object(O.c)(Ee);case 4:if(!(e=t.sent)){t.next=10;break}return t.next=8,Object(O.g)(N.fetchUserSuccess(e));case 8:t.next=12;break;case 10:return t.next=12,Object(O.g)(N.fetchUserFailure("There was an error while fetching user informations."));case 12:case"end":return t.stop()}}),Se)}var Oe=n(99);var we=function(){return new Promise((function(e,t){"android"===u.a.OS&&u.a.Version>=23&&(D.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("android"===u.a.OS&&u.a.Version>=23)){e.next=11;break}return e.next=3,D.a.awrap(Oe.a.check(Oe.a.PERMISSIONS.ACCESS_COARSE_LOCATION));case 3:if(e.sent){e.next=11;break}return e.next=7,D.a.awrap(Oe.a.request(Oe.a.PERMISSIONS.ACCESS_COARSE_LOCATION));case 7:if(e.sent===Oe.a.RESULTS.GRANTED){e.next=11;break}return console.log("No Ble Permission granted : Android"),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),null,null,null,Promise)||e("This application needs premissions to be using BLE")),e(null)}))},Ce="IDLE",Pe="AVAILABLE",je="SCANNING",xe="DISCONNECTED",ke="CONNECTING",Te="DISCOVERING",Ae="CONNECTED",Ie="DISCONNECTING",Le="NONE",Ne="BLE",Re="BLUETOOTH",Fe=n(36),Ue=n.n(Fe),Me=n(327),Be=n(87);function We(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var _e=D.a.mark(Ke),He=D.a.mark($e),Ge=D.a.mark(et),ze=D.a.mark(tt),Je=D.a.mark(nt),Ye=D.a.mark(at),qe=D.a.mark(rt),Xe=D.a.mark(it),Qe=D.a.mark(st),Ze=D.a.mark(ot);function Ke(e){var t;return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(O.c)(we);case 2:if(!(t=n.sent)){n.next=8;break}return n.next=6,Object(O.g)(X.setDeviceError(t));case 6:n.next=14;break;case 8:return n.next=10,Object(O.f)(at,e.BLEManager);case 10:return n.next=12,Object(O.f)($e,e.BLEManager);case 12:return n.next=14,Object(O.f)(tt,e.BLEManager);case 14:console.log("BLE Startup : Done");case 15:case"end":return n.stop()}}),_e)}function $e(e){var t,n;return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("Handle BLE State..."),a.next=3,Object(f.c)((function(t){var n=e.onStateChange((function(e){t(e)}),!0);return function(){n.remove()}}),f.a.expanding(1));case 3:t=a.sent,a.prev=4;case 5:return a.next=7,Object(O.j)(t);case 7:return n=a.sent,console.log("New BLE state: "+n),a.next=11,Object(O.g)(B.bleStateUpdated(n));case 11:a.next=5;break;case 13:return a.prev=13,a.next=16,Object(O.e)();case 16:if(!a.sent){a.next=18;break}t.close();case 18:return a.finish(13);case 19:case"end":return a.stop()}}),He,null,[[4,,13,19]])}function et(e){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),Ge)}function tt(e){var t,n,a,r,i,s,o,c;return D.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:console.log("Handle BLE Connection...");case 1:return l.next=3,Object(O.j)("CONNECT_DEVICE");case 3:return t=l.sent,n=t.device,l.next=7,Object(O.i)((function(e){return e.device.connectionMethode}));case 7:if(l.sent==Ne){l.next=10;break}return l.abrupt("continue",87);case 10:return l.next=12,Object(O.i)((function(e){return e.device.connectedDevice}));case 12:if(l.sent,null!==n&&null!==n._manager){l.next=19;break}return l.next=16,Object(O.g)(X.setDeviceError("Could not find device.."));case 16:return l.next=18,Object(O.g)(X.connectionStateUpdated(xe));case 18:return l.abrupt("return");case 19:return n.isConnected()&&console.log("is connected ??"),console.log("Connect device"),l.prev=21,l.next=24,Object(f.c)((function(e){var t=n.onDisconnected((function(t){e({type:"DISCONNECT_DEVICE",error:t})}));return function(){t.remove()}}),f.a.expanding(1));case 24:return a=l.sent,l.next=27,Object(O.a)(["DISCONNECT_DEVICE"]);case 27:return r=l.sent,l.prev=28,l.next=31,Object(O.g)(X.connectionStateUpdated(ke));case 31:return l.next=33,Object(O.c)([n,n.connect]);case 33:return l.next=35,Object(O.g)(X.connectionStateUpdated(Te));case 35:return l.next=37,Object(O.c)([n,n.discoverAllServicesAndCharacteristics]);case 37:return l.next=39,Object(O.g)(X.connectionStateUpdated(Ae));case 39:return l.next=41,Object(O.g)(X.connectionMethodeUpdated(Ne));case 41:return l.next=43,Object(O.g)(X.connectedDeviceUpdated(n));case 43:return i=n,l.next=46,Object(O.f)(nt,e);case 46:return l.next=48,Object(O.h)({deviceAction:Object(O.j)(r),disconnected:Object(O.j)(a)});case 48:if(s=l.sent,o=s.deviceAction,c=s.disconnected,!o){l.next=61;break}if("DISCONNECT_DEVICE"!==o.type){l.next=59;break}return console.log("Disconnected by user..."),l.next=56,Object(O.c)([i,i.cancelConnection]);case 56:return l.next=58,Object(O.g)(X.connectionStateUpdated(Ie));case 58:return l.abrupt("break",67);case 59:l.next=65;break;case 61:if(!c){l.next=65;break}return console.log("Disconnected by device..."),null!=c.error&&console.log("Error ",c.error),l.abrupt("break",67);case 65:l.next=46;break;case 67:l.next=71;break;case 69:l.prev=69,l.t0=l.catch(28);case 71:return l.prev=71,a.close(),l.next=75,Object(O.g)(X.connectedDeviceUpdated(null));case 75:return l.next=77,Object(O.g)(X.connectionStateUpdated(xe));case 77:return l.finish(71);case 78:l.next=87;break;case 80:return l.prev=80,l.t1=l.catch(21),console.log("Error on device actions..."),l.next=85,Object(O.g)(X.removeDevice(n));case 85:return l.next=87,Object(O.g)(X.connectionStateUpdated(Ie));case 87:l.next=1;break;case 89:case"end":return l.stop()}}),ze,null,[[21,80],[28,69,71,78]])}function nt(e){var t,n,a,r,i,s,o,c,l,u,p,d,h,g,m,b,v,y,E,S,w,C,P,j,x,k,T,A,I,L;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=["0000fff0-0000-1000-8000-00805f9b34fb","0000fff1-0000-1000-8000-00805f9b34fb","0000180f-0000-1000-8000-00805f9b34fb","00002a19-0000-1000-8000-00805f9b34fb"],e.next=3,Object(O.i)((function(e){return e.device.connectedDevice}));case 3:if(null!==(n=e.sent)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Object(O.c)([n,n.services]);case 8:a=e.sent,r=n.serviceUUIDs,i=a.filter((function(e){return r.includes(e.uuid)})),s=[],o=We(i);case 13:if((c=o()).done){e.next=22;break}return l=c.value,console.log("Device had service: "+l.uuid),e.next=18,Object(O.c)([l,l.characteristics]);case 18:for(u=e.sent,p=We(u);!(d=p()).done;)h=d.value,console.log("  characteristic: "+h.uuid),t.includes(l.uuid)&&t.includes(h.uuid)&&s.push([l.uuid,h.uuid]);case 20:e.next=13;break;case 22:return e.next=24,Object(f.c)((function(e){return s.forEach((function(t,a){n.monitorCharacteristicForService(t[0],t[1],(function(t,n){(t||null!=n)&&e([t,n])}))})),function(){}}),f.a.expanding(1));case 24:g=e.sent,e.prev=25,m=Be.Buffer.from([]),b=0,v=0;case 29:if(null==g){e.next=81;break}return e.next=32,Object(O.j)(g);case 32:if(y=e.sent,E=Ue()(y,2),S=E[0],w=E[1],null==S){e.next=39;break}return e.next=39,Object(O.g)(X.setDeviceError(S));case 39:if(null==w){e.next=81;break}if("00002a19-0000-1000-8000-00805f9b34fb"!=w.uuid){e.next=47;break}return C=(C=Me.a.decode(w.value)).charCodeAt(0),e.next=45,Object(O.g)(X.updateDeviceData({Battery:C}));case 45:e.next=81;break;case 47:if("0000fff1-0000-1000-8000-00805f9b34fb"!=w.uuid){e.next=80;break}if(P=Be.Buffer.from(w.value,"base64"),0===v&&(j=P.slice(0,4),0==Be.Buffer.compare(j,Be.Buffer.from([170,170,170,170]))&&(b=parseInt(P.slice(4,8).toString("hex"),16)-8,v=parseInt(P.slice(8,12).toString("hex"),16),P=P.slice(12,P.length))),!((x=Be.Buffer.concat([m,P])).length<4||0!=Be.Buffer.compare(x.slice(x.length-4,x.length),Be.Buffer.from([85,85,85,85])))){e.next=55;break}m=x,e.next=78;break;case 55:for(;8*x.length>b||0==Be.Buffer.compare(x.slice(x.length-1,x.length),Be.Buffer.from([85]));)x=x.slice(0,x.length-1);if(251658240!=v){e.next=64;break}return k=(k=x.toString("ascii")).slice(0,3)+"-"+k.slice(3,k.length),console.log("Read Tag: ",k),e.next=62,Object(O.g)(X.updateDeviceData({tagid:k,FatLayers:0,FatL1:0,FatL2:0,FatL3:0}));case 62:e.next=75;break;case 64:if(2315255808!=v){e.next=75;break}return console.log("Fat done"),T=parseInt(x.slice(0,1).toString("hex"),16),A=parseInt(x.slice(3,4).toString("hex"),16),I=parseInt(x.slice(5,6).toString("hex"),16),L=parseInt(x.slice(7,8).toString("hex"),16),console.log("layers: "+T+" layer1: "+A),console.log("layer2: "+I+" layer3: "+L),console.log("NewData: ",x),e.next=75,Object(O.g)(X.updateDeviceData({FatLayers:T,FatL1:A,FatL2:I,FatL3:L}));case 75:v=0,b=0,m=Be.Buffer.from([]);case 78:e.next=81;break;case 80:console.log("unknown char: ",w.uuid);case 81:e.next=29;break;case 83:e.next=87;break;case 85:e.prev=85,e.t0=e.catch(25);case 87:return e.prev=87,e.next=90,Object(O.e)();case 90:if(!e.sent){e.next=92;break}null!=g&&g.close();case 92:return e.finish(87);case 93:case"end":return e.stop()}}),Je,null,[[25,85,87,93]])}function at(e){var t,n,a,r,i,s,o;return D.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return console.log("Handle BLE Scanning..."),t=null,c.next=4,Object(O.i)((function(e){return e.device.bleState}));case 4:return n=c.sent,c.next=7,Object(O.i)((function(e){return e.device.scannerState}));case 7:return a=c.sent,c.next=10,Object(O.i)((function(e){return e.device.connectionMethode}));case 10:return r=c.sent,c.next=13,Object(O.i)((function(e){return e.device.connectionState}));case 13:return i=c.sent,c.next=16,Object(O.a)(["BLE_STATE_UPDATED","SCANNER_STATE_UPDATED","CONNECTION_METHODE_UPDATED","CONNECTION_STATE_UPDATED"]);case 16:s=c.sent;case 17:return c.next=19,Object(O.j)(s);case 19:o=c.sent,c.t0=o.type,c.next="BLE_STATE_UPDATED"===c.t0?23:"SCANNER_STATE_UPDATED"===c.t0?25:"CONNECTION_METHODE_UPDATED"===c.t0?27:"CONNECTION_STATE_UPDATED"===c.t0?29:31;break;case 23:return n=o.bleState,c.abrupt("break",31);case 25:return a=o.scannerState,c.abrupt("break",31);case 27:return r=o.connectionMethode,c.abrupt("break",31);case 29:return i=o.connectionState,c.abrupt("break",31);case 31:if(!(n===h.d.PoweredOn&&(a===Pe||a===je)&&r===Ne&&(i===Ie||i===xe))){c.next=42;break}if(a==je){c.next=40;break}if(null==t){c.next=37;break}return c.next=37,Object(O.d)(t);case 37:return c.next=39,Object(O.f)(rt,e);case 39:t=c.sent;case 40:c.next=46;break;case 42:if(null==t){c.next=46;break}return c.next=45,Object(O.d)(t);case 45:t=null;case 46:c.next=17;break;case 48:case"end":return c.stop()}}),Ye)}function rt(e){var t,n,a,r,i;return D.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(O.g)(X.scannerStateUpdated(je));case 2:return s.next=4,Object(O.g)(X.clearDevices());case 4:return console.log("Scanning started"),s.next=7,Object(f.c)((function(t){return e.startDeviceScan(null,{allowDuplicates:!0},(function(e,n){(e||null!=n&&null!=n.localName)&&t([e,n])})),function(){e.stopDeviceScan()}}),f.a.expanding(1));case 7:t=s.sent,s.prev=8;case 9:return s.next=11,Object(O.j)(t);case 11:if(n=s.sent,a=Ue()(n,2),r=a[0],i=a[1],null==r){s.next=19;break}return console.log("Ble Scan Error: ",r),s.next=19,Object(O.g)(X.setDeviceError(r));case 19:if(null==i){s.next=22;break}return s.next=22,Object(O.g)(X.addDevice(i));case 22:s.next=9;break;case 24:s.next=31;break;case 26:return s.prev=26,s.t0=s.catch(8),console.log("Ble Scan Error: ",s.t0),s.next=31,Object(O.g)(X.setDeviceError(s.t0));case 31:return s.prev=31,s.next=34,Object(O.e)();case 34:if(!s.sent){s.next=39;break}return s.next=37,Object(O.g)(X.scannerStateUpdated(Ce));case 37:console.log("Scanning stopped..."),t.close();case 39:return s.finish(31);case 40:case"end":return s.stop()}}),qe,null,[[8,26,31,40]])}function it(){var e;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.i)((function(e){return e.device.connectionMethode}));case 2:return e=t.sent,t.next=5,Object(O.i)((function(e){return e.device.scannerState}));case 5:if(t.sent,e===Ne){t.next=9;break}return t.next=9,Object(O.g)(X.connectionMethodeUpdated(Ne));case 9:return t.next=11,Object(O.c)(st);case 11:case"end":return t.stop()}}),Xe)}function st(){var e;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.i)((function(e){return e.device.connectionMethode}));case 2:return e=t.sent,t.next=5,Object(O.i)((function(e){return e.device.scannerState}));case 5:if(t.sent!==Ce||e!==Ne){t.next=9;break}return t.next=9,Object(O.g)(X.scannerStateUpdated(Pe));case 9:case"end":return t.stop()}}),Qe)}function ot(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.i)((function(e){return e.device.connectionMethode}));case 2:if(e.sent!==Ne){e.next=6;break}return e.next=6,Object(O.g)(X.scannerStateUpdated(Ce));case 6:case"end":return e.stop()}}),Ze)}var ct=n(103),lt=D.a.mark(vt),ut=D.a.mark(yt),ft=D.a.mark(Et),pt=D.a.mark(St),dt=D.a.mark(Dt),ht=D.a.mark(Ot),gt=D.a.mark(wt),mt=D.a.mark(Ct),bt=D.a.mark(Pt);function vt(e){var t;return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(O.c)(we);case 2:if(!(t=n.sent)){n.next=8;break}return n.next=6,Object(O.g)(X.setDeviceError(t));case 6:n.next=12;break;case 8:return n.next=10,Object(O.f)(yt,e.BlueManager);case 10:return n.next=12,Object(O.f)(Et,e.BlueManager);case 12:console.log("BlueTooth Startup : Done");case 13:case"end":return n.stop()}}),lt)}function yt(e){var t,n,a,r,i,s;return D.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return console.log("Handle Bluetooh Scanning..."),t=null,o.next=4,Object(O.i)((function(e){return e.device.scannerState}));case 4:return n=o.sent,o.next=7,Object(O.i)((function(e){return e.device.connectionMethode}));case 7:return a=o.sent,o.next=10,Object(O.i)((function(e){return e.device.connectionState}));case 10:return r=o.sent,o.next=13,Object(O.a)(["SCANNER_STATE_UPDATED","CONNECTION_METHODE_UPDATED","CONNECTION_STATE_UPDATED"]);case 13:i=o.sent;case 14:return o.next=16,Object(O.j)(i);case 16:s=o.sent,o.t0=s.type,o.next="SCANNER_STATE_UPDATED"===o.t0?20:"CONNECTION_METHODE_UPDATED"===o.t0?22:"CONNECTION_STATE_UPDATED"===o.t0?24:26;break;case 20:return n=s.scannerState,o.abrupt("break",26);case 22:return a=s.connectionMethode,o.abrupt("break",26);case 24:return r=s.connectionState,o.abrupt("break",26);case 26:if(!((n===Pe||n===je)&&a===Re&&(r===Ie||r===xe))){o.next=37;break}if(n==je){o.next=35;break}if(null==t){o.next=32;break}return o.next=32,Object(O.d)(t);case 32:return o.next=34,Object(O.f)(Dt,e);case 34:t=o.sent;case 35:o.next=41;break;case 37:if(null==t){o.next=41;break}return o.next=40,Object(O.d)(t);case 40:t=null;case 41:o.next=14;break;case 43:case"end":return o.stop()}}),ut)}function Et(e){var t,n,a;return D.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:console.log("Handle Bluetooth Connection..."),null;case 2:return r.next=4,Object(O.j)("CONNECT_BLUETOOTH");case 4:return t=r.sent,n=t.device,r.next=8,Object(O.i)((function(e){return e.device.connectionMethode}));case 8:if(r.sent==Re){r.next=11;break}return r.abrupt("continue",52);case 11:if(null!==n){r.next=17;break}return r.next=14,Object(O.g)(X.setDeviceError("Could not find device.."));case 14:return r.next=16,Object(O.g)(X.connectionStateUpdated(xe));case 16:return r.abrupt("return");case 17:return console.log("Connect device"),r.prev=18,r.prev=19,r.next=22,Object(O.g)(X.connectionStateUpdated(ke));case 22:return r.next=24,Object(O.c)(e.PairDevice,n.id);case 24:return a=r.sent,console.log("",a),r.next=28,Object(O.g)(X.connectionStateUpdated(Ae));case 28:return r.next=30,Object(O.g)(X.connectionMethodeUpdated(Ne));case 30:return r.next=32,Object(O.g)(X.connectedDeviceUpdated(n));case 32:r.next=37;break;case 34:r.prev=34,r.t0=r.catch(19),console.log("?: ",r.t0);case 37:return r.prev=37,r.next=40,Object(O.g)(X.connectedDeviceUpdated(null));case 40:return r.next=42,Object(O.g)(X.connectionStateUpdated(xe));case 42:return r.finish(37);case 43:r.next=52;break;case 45:return r.prev=45,r.t1=r.catch(18),console.log("Error on device actions... ",r.t1),r.next=50,Object(O.g)(X.removeDevice(n));case 50:return r.next=52,Object(O.g)(X.connectionStateUpdated(Ie));case 52:r.next=2;break;case 54:case"end":return r.stop()}}),ft,null,[[18,45],[19,34,37,43]])}function St(e){var t,n,a;return D.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("Blue Read"),t=e.BlueManager,r.next=4,Object(O.i)((function(e){return e.device.connectedDevice}));case 4:if(null!==(n=r.sent)){r.next=7;break}return r.abrupt("return");case 7:return r.next=9,Object(O.c)(t.receiveData,n.id);case 9:if(a=r.sent,console.log(a),""==a){r.next=14;break}return r.next=14,Object(O.g)(X.updateDeviceData({TAGId:a}));case 14:case"end":return r.stop()}}),pt)}function Dt(e){var t,n;return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(O.g)(X.scannerStateUpdated(je));case 2:return a.next=4,Object(O.g)(X.clearDevices());case 4:return console.log("Scanning started"),a.next=7,Object(O.c)(e.Discover);case 7:return a.next=9,Object(f.c)((function(t){var n=new ct.a(e).addListener("blueToothDeviceFound",(function(e){if(null!=e){var n=new h.b;n.id=e.address,n.localName=null!=e.name?e.name:"NONE",n.name=e.alias,null!=n.localName?(n.localName,t(n)):null!=e.alias&&""!=e.alias&&(n.name=e.alias,t(n))}}));return function(){n.remove()}}),f.a.expanding(1));case 9:t=a.sent,a.prev=10;case 11:return a.next=13,Object(O.j)(t);case 13:if(null==(n=a.sent)){a.next=18;break}return console.log("Interest Device Found: "+n.localName+" : "+n.id),a.next=18,Object(O.g)(X.addDevice(n));case 18:a.next=11;break;case 20:return a.prev=20,a.next=23,Object(O.e)();case 23:if(!a.sent){a.next=30;break}return a.next=26,Object(O.c)(e.StopDiscovery);case 26:return a.next=28,Object(O.g)(X.scannerStateUpdated(Ce));case 28:console.log("Scanning stopped..."),t.close();case 30:return a.finish(20);case 31:case"end":return a.stop()}}),dt,null,[[10,,20,31]])}function Ot(){var e;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.i)((function(e){return e.device.connectionMethode}));case 2:return e=t.sent,t.next=5,Object(O.i)((function(e){return e.device.scannerState}));case 5:if(t.sent,e===Re){t.next=9;break}return t.next=9,Object(O.g)(X.connectionMethodeUpdated(Re));case 9:return t.next=11,Object(O.c)(wt);case 11:case"end":return t.stop()}}),ht)}function wt(){var e;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.i)((function(e){return e.device.connectionMethode}));case 2:return e=t.sent,t.next=5,Object(O.i)((function(e){return e.device.scannerState}));case 5:if(t.sent!==Ce||e!==Re){t.next=9;break}return t.next=9,Object(O.g)(X.scannerStateUpdated(Pe));case 9:case"end":return t.stop()}}),gt)}function Ct(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.i)((function(e){return e.device.connectionMethode}));case 2:if(e.sent!==Re){e.next=6;break}return e.next=6,Object(O.g)(X.scannerStateUpdated(Ce));case 6:case"end":return e.stop()}}),mt)}function Pt(e){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.c)(e.BlueManager.BluetoothSearchAble);case 2:case"end":return t.stop()}}),bt)}var jt=D.a.mark(It),xt=D.a.mark(Lt),kt=D.a.mark(Nt),Tt=D.a.mark(Rt),At=D.a.mark(Ft);function It(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.g)(X.setDeviceError(""));case 2:return e.next=4,Object(O.g)(X.clearDevices());case 4:return e.next=6,Object(O.g)(X.connectedDeviceUpdated(null));case 6:return e.next=8,Object(O.g)(X.connectionStateUpdated(xe));case 8:return e.next=10,Object(O.g)(X.bleStartup());case 10:return e.next=12,Object(O.g)(X.bluetoothStartup());case 12:console.log("Device Startup : Done");case 13:case"end":return e.stop()}}),jt)}function Lt(e){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.g)(X.scannerStateUpdated(Ce));case 2:case"end":return e.stop()}}),xt)}function Nt(e){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),kt)}function Rt(){var e;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.i)((function(e){return e.device.connectedDevice}));case 2:if(null==t.sent){t.next=15;break}return t.next=6,Object(O.i)((function(e){return e.device.connectionMethode}));case 6:if((e=t.sent)!=Ne){t.next=12;break}return t.next=10,Object(O.g)(X.readBleDeviceData());case 10:t.next=15;break;case 12:if(e!=Re){t.next=15;break}return t.next=15,Object(O.g)(X.readBlueDeviceData());case 15:case"end":return t.stop()}}),Tt)}function Ft(e){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("??");case 1:case"end":return e.stop()}}),At)}var Ut=n(155),Mt="starter",Bt="free",Wt="worker",Vt="owner",_t="admin",Ht="Closed",Gt={FIREBASEUSER:"firebaseuser",USERSDATA:"usersdata",USERS:"users",FARMS:"farms",SECTIONS:"farms_data/$farmid/sections",PENS:"farms_data/$farmid/pens",PIGS:"farms_data/$farmid/pigs",BATCHS:"farms_data/$farmid/batchs",WEIGHING:"farms_data/$farmid/pens/$penid/weighings/",GRAPH:"farms_data/$farmid/Graph/$graphid/",COMMENTS:"farms_data/$farmid/datas/comments/",FARMDATAS:"farms_data/$farmid/datas/",SHARES:"shareData",CONSYS:"consys"},zt={SIGN:"sign",FETCH:"fetch",CREATE:"create",UPDATE:"update",MOVE:"move",DELETE:"delete",CLEAR:"clear",ADD:"add"},Jt="Add pig",Yt="Move pig",qt="Lost pig",Xt="Sold pig",Qt="Pen Note",Zt="System";function Kt(e){return e<10&&(e="0"+e),e}function $t(e){var t=new Date(parseInt(e));return Kt(t.getDate())+"/"+Kt(t.getMonth()+1)+"/"+t.getFullYear()+" "+Kt(t.getHours())+":"+Kt(t.getMinutes())+":"+Kt(t.getSeconds())}var en,tn,nn,an=/[^a-zA-Z]/g,rn=/[^0-9]/g;function sn(e,t){var n=e.replace(an,""),a=t.replace(an,"");if(n===a){var r=parseInt(e.replace(rn,""),10),i=parseInt(t.replace(rn,""),10);return r===i?0:r>i?1:-1}return n>a?1:-1}function on(e){var t,n={},a=[];for(t in e)e.hasOwnProperty(t)&&"__jsogObjectId"!==t&&"update_time"!==t&&a.push(t);for(a.sort(sn),t=0;t<a.length;t++)n[a[t]]=e[a[t]];return n}function cn(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||""===e)return!1;if(t)for(var n=e[0],a="0123456789",r=0;r<a.length;r++)if(n===a[r])return!1;var i="/[`!@#$%^&*()+-=[]{};':\"\\|,.<>/?~]/\xa8\xb4";for(r=0;r<i.length;r++)if(e.indexOf(i[r])>-1)return!1;return!0}function ln(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=null;if(t)for(var i in t[e]){var s=t[e][i];s&&(!r||r.time<s.time)&&(!n||s.time>=n)&&(!a||s.time<=a)&&(r=s)}return r}function un(e,t){if(e.batchs)for(var n in e.batchs){var a=e.batchs[n];if(a.hasOwnProperty("pens")&&null!=a.pens[t])return e.batchs[n]}return null}function fn(e,t,n,a,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=0,o=0,c=0,l=0;if((t.datas&&t.datas.count||t.count)&&(t.count?s+=t.count:s+=t.datas.count),n.weighings&&n.weighings[e]){var u=0,f=0,p=void 0,d=void 0,h=void 0;i||(i=n.weighings[e]),i&&Object.keys(i).forEach((function(e){var t=i[e];t.time>=a&&t.time<=r&&t.time>f&&(o=t.weight,t.count&&(o=t.weight/t.count),void 0!==p&&(c=o-p,u++),f=t.time,p=o,d=t.time,h||(h=t.time))}));var g=(new Date).getTime(),m=!1;if(a&&r){var b=un(n,e),v=dn(b,n.graphs),y=r,E=vn(n,e,b,v);if(null!=E&&E.Now&&g>new Date(f).getDate()){o=E.Now,void 0!==p&&(c+=o-p,u++);var S=new Date(E.lastWeighing.time+E.Addition);S.setDate(S.getDate()+E.days),d=S.getTime(),m=!0}if(E&&E.lastWeighing&&E.days){var D=new Date(r).getTime(),O=new Date(E.lastWeighing.time);O.setDate(O.getDate()+E.days),D=O.getTime(),E.Addition&&(D+=E.Addition),(r===y||r<D)&&(r=D)}}if(u>0){var w=c/u,C=(d-h)/864e5;l+=w/=C}}return{Animals:s,PenWeight:o,AveragePenGrowth:l,EndDate:r,isVirtual:m}}function pn(e,t){var n=!1,a=0,r=0,i=0,s=0,o=!(!e.state||"Closed"!==e.state),c=dn(e,t.graphs);if(!c)return null;var l=e&&e.datas&&e.datas.target?e.datas.target:c.data[c.data.length-1],u=hn(e,c),f=e.time,p=0;e&&e.pens&&t.pens&&Object.keys(e.pens).reverse().filter((function(e){return"__jsogObjectId"!==e})).forEach((function(c){if(t&&t.pens&&t.pens[c]&&t.weighings&&t.weighings[c]||o){var l=o?e.pens[c]:t.pens[c];a++;var d=o?e.closed.weighings[c]:t.weighings[c];if(d){var h=fn(c,l,t,f,u,d);r+=h.Animals;var g=h.PenWeight;0===g?a--:(i+=g,s+=h.AveragePenGrowth,p<h.EndDate&&(p=h.EndDate),n||(n=h.isVirtual))}}})),p>0&&(u=p);var d=i/a;d=parseFloat(d).toFixed(2);var h=s/a;return h=parseFloat(h).toFixed(2),{StartDate:f,EndDate:u,TargetWeight:l,PenCount:a,Animals:r,AverageWeight:d,AverageGrowth:h,isClosed:o,isVirtual:n}}function dn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e){var a=null;if(e.gcurve&&e.state&&e.state===Ht&&(a=e.gcurve),t){if(n&&("string"===typeof n||n.curveId)){var r="string"===typeof n?n:n.curveId;a=t[r]}e.gcurve&&(a=t[e.gcurve])}if(a){var i=[],s=0;return Object.keys(a.data).filter((function(e){return"__jsogObjectId"!==e})).map((function(e){i[e]=a.data[e];for(var t=e-1;t>s;t--)i[t]=null;s=e})),a.data=i,a}}return null}function hn(e,t){if(e&&e.time&&t){for(var n=new Date(e.time),a=0;a<t.data.length;a++)a<t.data.length-1&&(n=new Date(gn(n,t.periode)));return n.getTime()}return null}function gn(e,t){var n=new Date(e.getTime());switch(t){case"Days":n.setDate(n.getDate()+1);break;case"Month":n.setMonth(n.getMonth()+1);break;case"Weeks":default:n.setDate(n.getDate()+7)}return n}function mn(e,t,n,a,r){var i=null,s=null,o=null;if(n){var c=bn(e,t);if(i=(n-e[0])*c+t[0],a&&r)s=i+((r-e[0])*c+t[0]-a),o=(a-t[0])/c,o=e[0]+o,o=Math.floor(o)}return{ExValue:i,VirData:s,ExTime:o}}function bn(e,t){var n=e[0],a=e[1],r=t[0],i=(t[1]-r)/(a-n);return r>n&&(i=-i),i}function vn(e,t,n,a){if(e&&(!t&&n&&n.pens&&(t=Object.keys(n.pens).filter((function(e){return"__jsogObjectId"!==e}))[0]),n||(n=un(e,t)),n&&n.time&&(a||(a=dn(n,e.graphs)),a&&a.data))){var r=hn(n,a),i=ln(t,e.weighings,n.time,r);if(i&&i.weight){var s=i.weight;i.count&&(s/=i.count);var o=ln(t,e.weighings,n.time,i.time-1),c=o?o.weight:0;o&&o.count&&(c/=o.count);var l="none",u={periode:a.periode,data:[]},f=new Date(Date.now());f=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime();for(var p=new Date(n.time),d=0,h=0;h<a.data.length;h++)if(p.getTime()<=f&&(p=new Date(gn(p,a.periode)),d++),s<=a.data[h]){if("none"===l&&(l=h,0===h)){var g=bn([i.time,gn(new Date(i.time),a.periode)],[a.data[0],a.data[1]]),m=(a.data[0]-s)/g;o=i,c=s,i={weight:a.data[0],time:Math.floor(i.time+m)},s=a.data[0]}u.data.push(a.data[h])}s<c&&(l-=1,u.data.unshift(a.data[l]));for(var b=new Date(n.time),v=0;v<l;v++)b=new Date(gn(b,a.periode));if(u.Now=s,u.TempEx=a.data[d],"none"!==l){var y=null;if(o&&(y=mn([o.time,i.time],[c,s],i.time,a.data[l],b.getTime())),y&&y.ExTime?(u.FirstSpot=y.ExTime,u.Addition=y.ExTime-i.time):(u.FirstSpot=new Date(i.time+864e5),u.Addition=864e5),r){var E;f=new Date(Date.now());f=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),p=new Date(i.time);var S,D=0;for(h=0;h<u.data.length;h++)p.getTime()<f&&(E=p,p=new Date(gn(p,a.periode)),D++);D>=u.data.length?S=(y=mn([E,p],[u.data[u.data.length-2],u.data[u.data.length-1]],Date.now())).ExValue:(D--,S=u.data[D]),u.Now=S||s}}var O=0;return"Days"===a.periode?O=u.data.length:"Weeks"===a.periode&&(O=7*u.data.length),u.days=O,u.lastWeighing=i,n.datas.target=n.datas.target?n.datas.target:a.data[a.data.length-1],u.Batch=n,u}}return null}function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}if("ios"===u.a.OS||"android"===u.a.OS)en=n(186).default,tn=n(232).default,nn=n(303).default;else{console.log("firebase load");var Sn=n(152).default;if(n(179).default,n(231).default,n(272).default,!Sn.apps.length){console.log("Starting");var Dn=n(304).default;console.log(Dn.manifest.web.config.firebase),Sn.initializeApp(Dn.manifest.web.config.firebase)}en=Sn.auth,Sn.messaging.isSupported()&&(tn=Sn.messaging),nn=Sn.database,console.log("Started")}function On(e){var t=e.Email,n=e.Pass;return new Promise((function(e,a){en().createUserWithEmailAndPassword(t,n).then((function(){var t=en().currentUser,n=t.displayName?t.displayName:t.email;xn(Gt.USERSDATA,zt.UPDATE,{UserId:t.uid,Data:{name:n,state:Mt}}).then((function(a){t.updateProfile({displayName:n}).then((function(n){t.sendEmailVerification().then((function(){e(null)})).catch((function(t){console.log("error in send EmailVerification",t),e({error:t.code,viewError:"Verification could not be send"})}))})).catch((function(t){console.log("update profile"),e({error:t.code,viewError:"Update error, please refresh"})}))}))})).catch((function(t){console.log("UserCreate Error: ",t),"auth/email-already-in-use"===t.code?e({error:t.code,viewError:"The email address is already in use."}):"auth/invalid-email"===t.code?e({error:t.code,viewError:"The email addres is invalid."}):"auth/weak-password"===t.code?e({error:t.code,viewError:t.message}):e({error:t.code,viewError:"Something went wrong"})}))}))}function wn(e){var t=e.Email,n=e.Pass;if(en().currentUser){if(en().currentUser.email==t)return new Promise((function(e,t){e(!0)}));Pn()}return new Promise((function(e,a){en().signInWithEmailAndPassword(t,n).then((function(){e(!0)})).catch((function(t){console.log("User Signin Error: ",t),"auth/invalid-email"===t.code?e({error:t.code,viewError:"The email addres is invalid."}):e({error:"Could not singin",viewError:"Could not singin"})}))}))}function Cn(e){var t=e.Email;return new Promise((function(e,n){en().sendPasswordResetEmail(t).then((function(){e(!0)})).catch((function(t){console.log("User resetPass error:",t),t.code,e(null)}))}))}function Pn(){return new Promise((function(e,t){en().signOut().then((function(){e({type:zt.UPDATE,path:Gt.FIREBASEUSER,data:null})})).catch((function(t){console.log("User logout error:",t),e({type:zt.UPDATE,path:Gt.FIREBASEUSER,data:null})}))}))}function jn(){return new Promise((function(e,t){var n=en().currentUser;n&&en().currentUser.reload().then((function(e){n=en().currentUser,console.log(e,n)})),e(null)}))}function xn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=en().currentUser;switch(e){case Gt.USERSDATA:switch(t){case zt.FETCH:return An(n);case zt.CREATE:if(n.hasOwnProperty("UserData"))return new Promise((function(e,t){n[0];Rn({Data:{name:n.Farms.name}}).then((function(t){Fn({FarmId:t,Data:{sections:n.Sections,pens:n.Pens}}).then((function(){In({Data:{state:n.UserData.state,farms:F()({},t,!0)}}).then((function(){An(a.uid).then((function(t){var n=t.data;e({type:zt.UPDATE,path:Gt.FIREBASEUSER,data:n})}))}))}))}))}));break;case zt.UPDATE:return In(n);case zt.SIGN:return n?n.hasOwnProperty("refresh")?jn():wn(n):Pn();case zt.CLEAR:return a?{type:zt.CLEAR,path:Gt.USERSDATA,data:{}}:{type:zt.CLEAR,path:Gt.USERS,data:{}}}break;case Gt.USERS:switch(t){case zt.FETCH:return An(n,!0);case zt.CREATE:if(n.hasOwnProperty("Email")&&n.hasOwnProperty("Pass"))return On(n);if(n.hasOwnProperty("Email"))return Cn(n);break;case zt.UPDATE:return{type:zt.UPDATE,path:Gt.FIREBASEUSER,data:n};case zt.CLEAR:return{type:zt.CLEAR,path:Gt.USERS,data:{}}}break;case Gt.FARMS:switch(t){case zt.FETCH:return Ln(n);case zt.CREATE:break;case zt.UPDATE:return Nn(n);case zt.CLEAR:return{type:zt.CLEAR,path:Gt.FARMS,data:{}}}break;case Gt.FARMDATAS:switch(t){case zt.UPDATE:return Fn(n)}break;case Gt.SECTIONS:switch(t){case zt.FETCH:return Un(n);case zt.CREATE:case zt.UPDATE:break;case zt.CLEAR:return{type:zt.CLEAR,path:Gt.SECTIONS,data:{}}}break;case Gt.PENS:switch(t){case zt.FETCH:return Mn(n);case zt.CREATE:return Bn(n);case zt.DELETE:return Wn(n);case zt.UPDATE:return Vn(n);case zt.CLEAR:return{type:zt.CLEAR,path:Gt.PENS,data:{}}}break;case Gt.PIGS:switch(t){case zt.FETCH:return _n(n);case zt.CREATE:return Gn(n);case zt.UPDATE:break;case zt.CLEAR:return{type:zt.CLEAR,path:Gt.PIGS,data:{}}}break;case Gt.BATCHS:switch(t){case zt.FETCH:return zn(n);case zt.CREATE:return Jn(n);case zt.UPDATE:return Yn(n);case zt.DELETE:break;case zt.CLEAR:return{type:zt.CLEAR,path:Gt.BATCHS,data:{}}}break;case Gt.WEIGHING:switch(t){case zt.FETCH:return qn(n);case zt.CREATE:return Xn(n);case zt.UPDATE:break;case zt.CLEAR:return{type:zt.CLEAR,path:Gt.WEIGHING,data:{}}}break;case Gt.COMMENTS:switch(t){case zt.FETCH:return Qn(n);case zt.CREATE:return Zn(n)}break;case Gt.GRAPH:switch(t){case zt.FETCH:return Kn(n);case zt.CREATE:case zt.UPDATE:return $n(n);case zt.CLEAR:return{type:zt.CLEAR,path:Gt.GRAPH,data:{}}}}return new Promise((function(e,t){e({error:"Unknown Action"})}))}function kn(e){return new Promise((function(t,n){console.log("Setting Update Time"),nn().ref(e).update({update_time:nn.ServerValue.TIMESTAMP}).then((function(){t(!0)})).catch((function(e){console.log(e),t(!0)}))}))}function Tn(e,t){return new Promise((function(n,a){t||n(!0),nn().ref(e+"/update_time").once("value").then((function(a){var r=a.val();r?t?"SET"===t?kn(e).then((function(e){n(e)})):n(t<r):n(!0):kn(e).then((function(e){n(!0)}))}))}))}function An(e){var t=e.UserId,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="";if(t?a=t:!n&&en().currentUser&&(a=en().currentUser.uid),a||n){var r="users/"+a;return new Promise((function(e,t){nn().ref(r).once("value").then((function(t){var a=t.val();e(n?{type:zt.UPDATE,path:Gt.USERS,data:{data:a}}:{type:zt.UPDATE,path:Gt.FIREBASEUSER,data:{data:a}})})).catch((function(t){console.log(t),"database/permission-denied"===t.code?console.log("User update was permission denied. "):t.code&&console.log("User update Error: ",t),e({error:"An error occurred"})}))}))}return new Promise((function(e,t){console.log("User uid in fecth unknown"),e(null)}))}function In(e){var t=e.UserId,n=e.Data,a=t||en().currentUser.uid;if(a){var r="users/"+a;return new Promise((function(e,t){nn().ref(r).update(n).then((function(t){e(null)})).catch((function(t){"database/permission-denied"===t.code?console.log("User update was permission denied. "):t.code&&console.log("User update Error: ",t),e({error:"An error occurred"})}))}))}return new Promise((function(e,t){console.log("User uid in fecth unknown"),e(null)}))}function Ln(e){var t=e.FarmId,n="farms/"+t;return nn().ref(n).once("value").then((function(e){var n=e.val();return t&&(n=F()({},t,n)),{type:zt.UPDATE,path:Gt.FARMS,data:n}}))}function Nn(e){var t=e.FarmId,n=e.Data;return new Promise((function(e,a){if(t)nn().ref("farms/"+t).update(En({},n)).then((function(){e(null)})).catch((function(t){console.log("Create Farm Error: ",t),e(!1)}));else{var r=nn().ref("farms/").push(),i=r.key;r.set({Data:n}).then((function(){e(i)})).catch((function(t){console.log("Create Farm Error: ",t),e(!1)}))}}))}function Rn(e){var t=e.Data,n=en().currentUser;n.uid;return new Promise((function(e,a){var r=nn().ref("farms/").push(),i=r.key;r.set({email:n.email,manager:n.displayName?n.displayName:n.email,name:t.name}).then((function(){e(i)})).catch((function(t){console.log("Create Farm Error: ",t),e(!1)}))}))}function Fn(e){var t=e.FarmId,n=e.Data;if(t){var a="farms_data/"+t;return new Promise((function(e,t){nn().ref(a).update(n).then((function(){e(null)})).catch((function(t){"database/permission-denied"===t.code?console.log("Farm data update was permission denied."):t.code&&console.log("User update Error: ",t),e(!1)}))}))}return new Promise((function(e,t){console.log("Farm uid in fecth unknown"),e(null)}))}function Un(e){var t=e.FarmId,n=e.SectionId,a=e.DataTime;if(t){var r="farms_data/"+t+"/sections";return n&&(r+="/"+n),new Promise((function(e,n){Tn("farms_data/"+t+"/sections",a).then((function(t){if(t)return console.log("Sections fetch called"),nn().ref(r).once("value").then((function(t){e({type:zt.UPDATE,path:Gt.SECTIONS,data:t.val()})}));e(null)}))}))}return new Promise((function(e,t){console.log("Fecth Sections Error"),e(null)}))}function Mn(e){var t=e.FarmId,n=e.PenId,a=e.DataTime;if(t){var r="farms_data/"+t+"/pens";return n&&(r+="/"+n),new Promise((function(e,i){Tn("farms_data/"+t+"/pens",a).then((function(t){t?(console.log("Pens fetch Called"),nn().ref(r).once("value").then((function(t){if(n){var a=t.val();a||(a={}),a.datas||(a.datas={});var r=F()({},n,a);e({type:zt.UPDATE,path:Gt.PENS,data:r})}else e({type:zt.UPDATE,path:Gt.PENS,data:t.val()})}))):e(null)}))}))}return new Promise((function(e,t){console.log("Fecth Pens Error"),e(null)}))}function Bn(e){var t=e.FarmId,n=e.PenId,a=e.SectionId;if(t){var r="farms_data/"+t+"/";return new Promise((function(e,i){if(n){var s=r+"pens/"+n+"/";nn().ref(s).set({section:a}).then((function(){nn().ref(r+"sections/"+a+"/pens").update(F()({},n,!0)).then((function(){nn().ref(r+"sections/").update({update_time:nn.ServerValue.TIMESTAMP}).then((function(){Mn({FarmId:t,PenId:n,DataTime:"SET"}).then((function(t){e({type:zt.UPDATE,path:Gt.PENS,data:t.data})}))}))}))}))}}))}}function Wn(e){var t=e.FarmId,n=e.PenId,a=e.SectionId;if(t&&n){var r="farms_data/"+t+"/";return new Promise((function(e,i){nn().ref(r+"pens/"+n).remove().then((function(){a?nn().ref(r+"sections/"+a+"/pens/"+n).remove().then((function(){nn().ref(r+"sections/").update({update_time:nn.ServerValue.TIMESTAMP}).then((function(){Mn({FarmId:t,PenId:n,DataTime:"SET"}).then((function(t){e({type:zt.UPDATE,path:Gt.PENS,data:t.data})}))}))})):e(null)}))}))}}function Vn(e){var t=e.FarmId,n=e.PenId,a=e.Pen;if(t){var r="farms_data/"+t+"/";return new Promise((function(e,i){n&&Mn({FarmId:t,PenId:n}).then((function(t){var i=r+"pens/"+n+"/",s=a.datas,o=En(En({},t.data[n].datas),s);nn().ref(i).update(En(En({},a),{},{datas:o})).then((function(){a.section&&nn().ref(r+"sections/"+SectionId+"/pens").update(F()({},n,!0)).then((function(){nn().ref(r+"sections/").update({update_time:nn.ServerValue.TIMESTAMP}).then((function(){e(null)}))}))}))}))}))}}function _n(e){var t=e.FarmId,n=e.TagId;if(t){var a="farms_data/"+t+"/pigs";return n&&(a+="/"+n),nn().ref(a).once("value").then((function(e){if(n){var t=e.val();if(!t)return null;t.datas||(t.datas={}),t.datas.gcurve||(t.datas.gcurve="default");var a=F()({},n,t);return{type:zt.UPDATE,path:Gt.PIGS,data:a}}return{type:zt.UPDATE,path:Gt.PIGS,data:e.val()}}))}return new Promise((function(e,t){console.log("Fecth Pigs Error"),e(null)}))}function Hn(e){var t=e.FarmId,n=(e.TagId,e.PenId),a=e.Action;if(n){var r="farms_data/"+t+"/pens/"+n+"/datas";return new Promise((function(e,i){nn().ref(r+"/count").once("value").then((function(i){var s=i.val();s||(s=0),s=a&&!isNaN(a)?parseInt(s)+parseInt(a):parseInt(s)+1,nn().ref(r).update({count:s}).then((function(){Mn({FarmId:t,PenId:n}).then((function(t){e({type:zt.UPDATE,path:Gt.PENS,data:t.data})}))}))})).catch((function(t){console.log("Update pig pen Error: ",t),e(null)}))}))}return new Promise((function(e,t){e(null)}))}function Gn(e){var t=e.FarmId,n=e.TagId,a=e.PenId,r=e.Action;if(t){var i="farms_data/"+t+"/";return new Promise(n?function(e,r){var s=i+"pigs/"+n+"/";_n({FarmId:t,TagId:n}).then((function(r){r&&r.data&&(r=r.data[n]?r.data[n]:null),r&&r.hasOwnProperty("pen")?a&&a!=r.pen?Hn({FarmId:t,TagId:n,PenId:r.pen,Action:-1}).then((function(r){Hn({FarmId:t,TagId:n,PenId:a,Action:1}).then((function(n){nn().ref(s).update({pen:a}).then((function(){_n({FarmId:t}).then((function(t){e({type:zt.UPDATE,path:Gt.PIGS,data:t.data})}))}))}))})):e(null):nn().ref(s).update({pen:0}).then((function(){_n({FarmId:t}).then((function(t){console.log("?",t),e(null)}))}))}))}:function(e,i){Hn({FarmId:t,TagId:n,PenId:a,Action:r}).then((function(t){e({type:zt.UPDATE,path:Gt.PENS,data:t.data})}))})}}function zn(e){var t=e.FarmId,n=e.BatchId,a=e.Data,r=e.DataTime;if(t){var i="farms_data/"+t+"/batchs";return n&&(i+="/"+n),new Promise((function(e,s){Tn("farms_data/"+t+"/batchs",r).then((function(t){if(t)if(a){if(n)switch(a){case Gt.BATCHS:return i+="/datas",nn().ref(i).once("value").then((function(t){var a=F()({},n,{datas:t.val()});e({type:zt.UPDATE,path:Gt.BATCHS,data:a})}));case Gt.PENS:return i+="/pens",nn().ref(i).once("value").then((function(t){var a=F()({},n,{pens:t.val()});e({type:zt.UPDATE,path:Gt.BATCHS,data:a})}));case Gt.GRAPH:return i+="/gcurve",nn().ref(i).once("value").then((function(t){var a=F()({},n,{gcurve:t.val()});e({type:zt.UPDATE,path:Gt.BATCHS,data:a})}))}}else nn().ref(i).once("value").then((function(t){if(n){var a=t.val();if(!a)return null;a.datas||(a.datas={}),a.pens||(a.pens=[]),a.datas.gcurve||(a.datas.gcurve="default");var r=F()({},n,a);e({type:zt.UPDATE,path:Gt.BATCHS,data:r})}else e({type:zt.UPDATE,path:Gt.BATCHS,data:t.val()})}));else e(null)}))}))}return new Promise((function(e,t){console.log("Fecth Batchs Error"),e(null)}))}function Jn(e){var t=e.FarmId,n=e.BatchId,a=e.Batch;if(t){var r="farms_data/"+t+"/batchs";return new Promise((function(e,i){a&&a.name?(n=a.name,r+="/"+a.name+"/",delete a.name,nn().ref(r).set(En({},a)).then((function(){Object.keys(a.pens).forEach((function(e){Vn({FarmId:t,PenId:e,Pen:{datas:{batch:n}}})})),e(zn({FarmId:t,DataTime:"SET"}))})).catch((function(t){"database/permission-denied"===t.code?console.log("Batch update was permission denied. "):t.code&&console.log("Batch update Error: ",t),e({error:"An error occurred"})}))):n&&(console.log("???"),r+="/"+n+"/",nn().ref(r).set({time:nn.ServerValue.TIMESTAMP,pens:[],datas:{devianceMin:1,devianceMax:2}}).then((function(){e(zn({FarmId:t,DataTime:"SET"}))})))}))}}function Yn(e){var t=e.FarmId,n=e.BatchId,a=e.Batch;e.Data;if(t){var r="farms_data/"+t+"/batchs";return new Promise((function(e,i){n&&a?(r+="/"+n,zn({FarmId:t,BatchId:n,Data:Gt.PENS}).then((function(i){var s=i.data[n].pens;a.name&&delete a.name;var o={};if(a.pens&&JSON.stringify(a.pens)!==JSON.stringify(s)){s||(s=[]);var c=Object.keys(s).filter((function(e){return!Object.keys(a.pens).includes(e)&&!s[e].enddate})),l=Object.keys(a.pens).filter((function(e){return!Object.keys(s).includes(e)||s[e].enddate})),u=Object.keys(s).filter((function(e){return!Object.keys(c).includes(e)&&!Object.keys(l).includes(e)}));c&&c.length>0&&c.forEach((function(e){if(s[e]){var n=s[e];n.enddate=Date.now(),o[e]=n,Mn({FarmId:t,PenId:e}).then((function(t){var n=0;t.data[e]&&t.data[e].datas&&t.data[e].datas.count&&(n=t.data[e].datas.count),o[e].count=n})),Vn({FarmId:t,PenId:e,Pen:{datas:{batch:""}}})}})),l&&l.length>0&&l.forEach((function(e){var a=s[e]?s[e]:{startdate:Date.now()};a.enddate&&delete a.enddate,o[e]=a,Vn({FarmId:t,PenId:e,Pen:{datas:{batch:n}}})})),u&&u.length>0&&u.forEach((function(e){o[e]=s[e]}))}a.pens=o,a.state&&"Closed"===a.state?zn({FarmId:t,BatchId:n,Data:Gt.GRAPH}).then((function(i){var o=i.data[n].gcurve;Kn({FarmId:t}).then((function(i){a.gcurve=i.data[o],a.closed={comments:[],weighings:[]};for(var c=function(i,o){o=o.then((function(o){return new Promise((function(o){setTimeout((function(){if(i!==Object.keys(s).length){var c=Object.keys(s)[i];a.pens[c]=s[c],Mn({FarmId:t,PenId:c}).then((function(e){var t=0;e.data[c]&&e.data[c].datas&&e.data[c].datas.count&&(t=e.data[c].datas.count),a.pens[c].count=t})),a.pens[c].enddate||(a.pens[c].enddate=Date.now()),Vn({FarmId:t,PenId:c,Pen:{datas:{batch:"",count:0}}}),Qn({FarmId:t,PenId:c}).then((function(e){a.closed.comments[c]=e.data[c],nn().ref("farms_data/"+t+"/datas/comments/"+c).remove(),qn({FarmId:t,PenId:c}).then((function(e){a.closed.weighings[c]=e.data[c],nn().ref("farms_data/"+t+"/weighings/"+c).remove(),o()}))}))}else nn().ref(r).update(En({},a)).then((function(){nn().ref(r+"/closed").set(a.closed).then((function(){zn({FarmId:t,BatchId:n,DataTime:"SET"}).then((function(t){e(t)}))})).catch((function(t){"database/permission-denied"===t.code?console.log("Batch update was permission denied. "):t.code&&console.log("Batch update Error: ",t),console.log(t),e({error:"An error occurred"})}))}))}))}))})),u=o},l=0,u=Promise.resolve();l<=Object.keys(s).length;l++)c(l,u)}))})):nn().ref(r).update(En({},a)).then((function(){zn({FarmId:t,BatchId:n,DataTime:"SET"}).then((function(t){e(t)}))})).catch((function(t){"database/permission-denied"===t.code?console.log("Batch update was permission denied. "):t.code&&console.log("Batch update Error: ",t),console.log(t),e({error:"An error occurred"})}))}))):(console.log("Update Batchs Error"),e(null))}))}}function qn(e){var t=e.FarmId,n=e.PenId,a=e.SectionId,r=(e.limitStart,e.limitTo),i=void 0===r?9999:r,s=e.DataTime,o=e.MemSections;if(t){var c="farms_data/"+t+"/weighings";return new Promise((function(e,r){Tn("farms_data/"+t+"/weighings",s).then((function(r){r?n?(console.log("Weight fetch called, getting Pen"),c+="/"+n,nn().ref(c).orderByChild("time").limitToLast(i).once("value",(function(t){var n=F()({},t.key,{});t.forEach((function(e){n[t.key][e.key]=e.val()})),e({type:zt.UPDATE,path:Gt.WEIGHING,data:n})}))):(console.log("Weight fetch called, getting Sections"),nn().ref(c+"/update_time").once("value").then((function(n){var r=n.val();Un({FarmId:t,SectionId:a,DataTime:o?o.update_time:null}).then((function(n){var a=0,s=0,c={},l=n?n.data:o;Object.keys(l).forEach((function(n){l[n]&&l[n].pens&&(s+=Object.keys(l[n].pens).filter((function(e){return"__jsogObjectId"!==e})).length,Object.keys(l[n].pens).filter((function(e){return"__jsogObjectId"!==e})).forEach((function(n){qn({FarmId:t,PenId:n,limitStart:0,limitTo:i}).then((function(t){a++,c=En(En({},c),t.data),a===s&&(c.update_time=r,e({type:zt.UPDATE,path:Gt.WEIGHING,data:c}))})).catch((function(t){console.log(t),e({type:zt.UPDATE,path:Gt.WEIGHING,data:c})}))})))}))})).catch((function(e){console.log(e)}))}))):e(null)}))}))}return new Promise((function(e,t){console.log("Fecth Weights Error"),e(null)}))}function Xn(e){var t=e.FarmId,n=e.PenId,a=e.Weight,r=e.Quantity,i=e.Date;if(t){var s="farms_data/"+t+"/weighings";if(n)return s+="/"+n+"/",new Promise((function(e,o){var c=nn().ref(s).push();c.key;c.set({time:i,weight:a,count:r}).then((function(){qn({FarmId:t,PenId:n,DataTime:"SET"}).then((function(t){e(t)}))})).catch((function(t){console.log("Create Weight Error: ",t),e(null)}))}))}}function Qn(e){var t=e.FarmId,n=e.PenId,a=(e.limitStart,e.limitTo),r=void 0===a?5:a;if(t){var i="farms_data/"+t+"/datas/comments";return new Promise((function(e,t){n&&(i+="/"+n,nn().ref(i).orderByChild("time").limitToLast(r).once("value",(function(t){var n=F()({},t.key,{});t.forEach((function(e){n[t.key][e.key]=e.val()})),e({type:zt.UPDATE,path:Gt.COMMENTS,data:n})})))}))}return new Promise((function(e,t){console.log("Fecth Weights Error"),e(null)}))}function Zn(e){var t=e.FarmId,n=e.PenId,a=e.Action,r=e.Data,i=e.Quantity,s=e.Weight;if(t){var o="farms_data/"+t+"/datas/comments";if(n)return o+="/"+n+"/",new Promise((function(e,c){var l=nn().ref(o).push();l.key;l.set({time:nn.ServerValue.TIMESTAMP,user:en().currentUser.email,action:a,quantity:i,weight:s,data:r}).then((function(){Qn({FarmId:t,PenId:n}).then((function(t){e(t)}))})).catch((function(t){console.log("Create Comment Error: ",t),e(null)}))}))}return new Promise((function(e,t){console.log("Fecth Graph Error"),e(null)}))}function Kn(e){var t=e.FarmId,n=e.GraphId,a=e.DataTime;if(t){var r="farms_data/"+t+"/graph";return r=r+"/"+n,new Promise((function(e,i){Tn("farms_data/"+t+"/graph",a).then((function(t){console.log("Doing Graphs fetch",t,"Always.."),nn().ref(r).once("value").then((function(t){var a=null,r=t.val();if(r)if(n){var i=F()({},t.key,r);a=En(En({},a),i)}else a=En(En({},a),r);n?e({type:zt.UPDATE,path:Gt.GRAPH,data:a}):nn().ref("farms_data/Agrisys/graph").once("value").then((function(t){var n=t.val();n&&(a=En(En({},n),a)),e({type:zt.UPDATE,path:Gt.GRAPH,data:a})})).catch((function(t){console.log("Get Agrisys graph Error: ",t),e({type:zt.UPDATE,path:Gt.GRAPH,data:a})}))})).catch((function(t){console.log("Get farm graph Error: ",t),e(null)}))}))}))}return new Promise((function(e,t){console.log("Fecth Graph Error"),e(null)}))}function $n(e){var t=e.FarmId,n=e.Graph;if(t){var a="farms_data/"+t+"/graph";if(n.name)return a+="/"+n.name+"/",new Promise((function(e,r){nn().ref(a).update({data:n.data,periode:n.periode}).then((function(){Kn({FarmId:t,GraphId:n.name}).then((function(t){e(t)}))})).catch((function(t){console.log("Create Graph Error: ",t),e(null)}))}))}}var ea=function(){return new Promise((function(e,t){"ios"!==u.a.OS&&"android"!=u.a.OS||function(){var e;return D.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("permit test"),!tn){t.next=9;break}return t.next=4,D.a.awrap(tn().requestPermission());case 4:if(e=t.sent,e===tn.AuthorizationStatus.AUTHORIZED||e===tn.AuthorizationStatus.PROVISIONAL){t.next=9;break}return console.log("Authorization status:",e),t.abrupt("return",!1);case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),null,null,null,Promise)}()||e("This application needs premissions to be using notifications"),e(null)}))},ta=function(e,t,n,a){return new Promise((function(r){Ut.a.alert(e,t,[{text:n,onPress:function(){r()}}],{cancelable:a,onDismiss:function(){r()}})}))},na=xn;function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object(ge.a)(3,(function(e,t,n){var a=Object(me.a)(Number);return a(e)&&a(t)&&a(n)&&Object(be.a)(n,e)&&Object(be.a)(t,n)}))(200,299);function ia(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?le.a.create({baseURL:e,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t},timeout:3e3}):le.a.create({baseURL:e,headers:{Accept:"application/json","Content-Type":"application/json"},timeout:3e3})}function sa(e,t){return new Promise((function(n,a){ia(function(e,t){var n="https://"+e+ue.CONSYS_AUTH;return n=n+"&client_id="+ue.CONSYS_CLIENT_ID+"&client_secret="+ue.CONSYS_CLIENT_SECRET+"&refresh_token="+t}(e,t)).get().then((function(e){e&&e.data&&e.data.access_token?n(e.data.access_token):n(null)}))}))}function oa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(a,r){n?ia(fe(e),n).get().then((function(r){200===r.status?a(n):a(sa(e,t))})):a(sa(e,t))}))}var ca,la,ua=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return new Promise((function(c,l){oa(e,t,o).then((function(t){t?ia(de(e,700,a,i,n,r,null,s),t).get().then((function(e){e&&e.data?c(ra(ra({},e.data),{},{token:t})):c(null)})).catch((function(e){console.log("fetch AutoPig Error: ",e),c(null)})):c(null)}))}))},fa=D.a.mark(va),pa=D.a.mark(ya),da=D.a.mark(Ea),ha=D.a.mark(Sa),ga=D.a.mark(Da);if("ios"===u.a.OS||"android"===u.a.OS)ca=n(186).default,la=n(232).default,n(303).default;else{var ma=n(152).default;if(n(179).default,n(231).default,n(272).default,!ma.apps.length){console.log("Starting");var ba=n(304).default;console.log(ba.manifest.web.config.firebase),ma.initializeApp(ba.manifest.web.config.firebase)}ca=ma.auth,ma.messaging.isSupported()&&(la=ma.messaging),ma.database,console.log("Started")}function va(){var e;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Starting firebase saga"),t.next=3,Object(O.g)(ae.setFirebaseError(null));case 3:return t.next=5,Object(O.c)(ea);case 5:if(!(e=t.sent)){t.next=11;break}return t.next=9,Object(O.g)(ae.fetchFailure(e));case 9:t.next=29;break;case 11:return console.log("Starting handlers"),t.next=14,Object(O.f)(ya);case 14:return t.next=16,Object(O.f)(Ea);case 16:if(console.log("auth & actions"),!la||!la.isSupported()){t.next=29;break}if("ios"!==u.a.OS&&"android"!==u.a.OS){t.next=25;break}return t.next=21,Object(O.f)(Sa);case 21:return t.next=23,Object(O.f)(Da);case 23:t.next=29;break;case 25:return t.next=27,Object(O.f)(Sa);case 27:return t.next=29,Object(O.f)(Da);case 29:console.log("Firebase Startup : Done"),"ios"!==u.a.OS&&"android"!==u.a.OS||(console.log("Firebase will disable yellow box debug"),console.disableYellowBox=!0);case 31:case"end":return t.stop()}}),fa)}function ya(){var e,t,n,a;return D.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(f.c)((function(e){var t=ca().onAuthStateChanged((function(t){e(null==t?"NONE":t)}));return function(){t()}}),f.a.expanding(1));case 2:e=r.sent,r.prev=3;case 4:return r.next=6,Object(O.j)(e);case 6:if(t=r.sent,!(n="NONE"===t?null:t)){r.next=19;break}return r.next=11,Object(O.c)(na,Gt.USERSDATA,zt.FETCH,{UserId:n.uid});case 11:if(!(a=r.sent).data){r.next=17;break}return n.farms=a.data.data.farms,n.state=a.data.data.state,r.next=17,Object(O.g)(ae.dataFetchSuccess({type:zt.UPDATE,path:Gt.FIREBASEUSER,data:n}));case 17:r.next=21;break;case 19:return r.next=21,Object(O.g)(ae.dataFetchSuccess({type:zt.UPDATE,path:Gt.FIREBASEUSER,data:{}}));case 21:r.next=4;break;case 23:return r.prev=23,r.next=26,Object(O.e)();case 26:if(!r.sent){r.next=28;break}e.close();case 28:return r.finish(23);case 29:case"end":return r.stop()}}),pa,null,[[3,,23,29]])}function Ea(){var e,t,n,a,r,i,s,o,c,l;return D.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(O.a)(["ACTION_STARTING"]);case 2:e=u.sent;case 3:return u.next=5,Object(O.j)(e);case 5:if(t=u.sent,!Object.values(zt).includes(t.action)){u.next=53;break}if(t.ref!==Gt.CONSYS){u.next=31;break}return u.next=10,Object(O.i)((function(e){return e.firebase.firebaseUser}));case 10:if(!(n=u.sent)||!n.farms){u.next=29;break}return u.next=14,Object(O.i)((function(e){return e.firebase.localDataStore.farms}));case 14:if(!(a=u.sent)||!a[Object.keys(n.farms)[0]]){u.next=29;break}if(!(r=a[Object.keys(n.farms)[0]]).site||!r.refToken){u.next=29;break}return i=r.token?r.token:null,s=t.params,u.next=22,Object(O.c)(ua,r.site,r.refToken,s.limit,s.sysId,s.start,s.offset,s.lastId,i);case 22:if("OK"!==(o=u.sent).result){u.next=29;break}if(console.log(o),!o.token){u.next=29;break}return r.token=o.token,u.next=29,Object(O.g)(ae.dataFetchSuccess({type:zt.UPDATE,path:Gt.FARMS,data:{FarmData:r}}));case 29:u.next=53;break;case 31:if(!Object.values(Gt).includes(t.ref)){u.next=53;break}return u.next=34,Object(O.i)((function(e){return e.firebase.firebaseUser}));case 34:return c=u.sent,t.action!=zt.SIGN&&c&&c.farms&&(t.params||(t.params={}),t.params.FarmId||(t.params.FarmId=[Object.keys(c.farms)[0]])),u.next=38,Object(O.c)(na,t.ref,t.action,t.params);case 38:if(!(l=u.sent)||!l.error&&!l.viewError){u.next=46;break}return u.next=42,Object(O.g)(ae.fetchFailure(l.error));case 42:return u.next=44,Object(O.g)(ae.setViewError(l.viewError));case 44:u.next=53;break;case 46:if(!(l&&l.hasOwnProperty("type")&&l.hasOwnProperty("path")&&l.hasOwnProperty("data"))){u.next=51;break}return u.next=49,Object(O.g)(ae.dataFetchSuccess(l));case 49:u.next=53;break;case 51:return u.next=53,Object(O.g)(ae.fetchSuccess({localDataStore:l}));case 53:u.next=3;break;case 55:case"end":return u.stop()}}),da)}function Sa(){var e,t;return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!la){n.next=23;break}return n.next=3,Object(f.c)((function(e){var t=la().onMessage((function(t){e(t)}));return function(){t()}}),f.a.expanding(1));case 3:e=n.sent,n.prev=4;case 5:return n.next=7,Object(O.j)(e);case 7:if(t=n.sent,console.log("New Firebase message: ",t),!(t.notification&&t.notification.title&&t.notification.body)){n.next=14;break}return n.next=12,Object(O.c)(ta,t.notification.title,t.notification.body,"Ok",!1);case 12:n.next=15;break;case 14:console.log("New Firebase data message: ",t);case 15:n.next=5;break;case 17:return n.prev=17,n.next=20,Object(O.e)();case 20:if(!n.sent){n.next=22;break}e.close();case 22:return n.finish(17);case 23:case"end":return n.stop()}}),ha,null,[[4,,17,23]])}function Da(){var e,t;return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("ios"!==u.a.OS&&"android"!==u.a.OS||!la){n.next=18;break}return la().onNotificationOpenedApp((function(e){console.log("Notification caused app to open from background state:",e.notification)})),n.next=4,Object(f.c)((function(e){return la().setBackgroundMessageHandler((function(t){e(t)})),function(){}}),f.a.expanding(1));case 4:e=n.sent,n.prev=5;case 6:return n.next=8,Object(O.j)(e);case 8:t=n.sent,console.log("New background Firebase message: ",t);case 10:n.next=6;break;case 12:return n.prev=12,n.next=15,Object(O.e)();case 15:if(!n.sent){n.next=17;break}e.close();case 17:return n.finish(12);case 18:case"end":return n.stop()}}),ga,null,[[5,,12,18]])}var Oa=D.a.mark(wa);function wa(e){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.b)([Object(O.k)(x.STARTUP,oe),Object(O.k)(L.FETCH_USER,De),Object(O.k)(q.DEVICE_STARTUP,It),Object(O.k)(q.CONNECT_DEVICE,Lt),Object(O.k)(q.DISCONNECT_DEVICE,Nt),Object(O.k)(q.READ_DEVICE_DATA,Rt),Object(O.k)(q.FETCH_DEVICE,Ft,e),Object(O.k)(q.BLE_STARTUP,a.bleStartup,e),Object(O.k)(q.START_BLE_SCAN,a.startBleScan),Object(O.k)(q.STOP_BLE_SCAN,a.stopBleScan),Object(O.k)(q.READ_BLE_DEVICE_DATA,a.readBleDeviceData,e),Object(O.k)(q.BLUETOOTH_STARTUP,r.bluetoothStartup,e),Object(O.k)(q.START_BLUETOOTH_SCAN,r.startBluetoothScan),Object(O.k)(q.STOP_BLUETOOTH_SCAN,r.stopBluetoothScan),Object(O.k)(q.BLUETOOTH_SCAN_ABLE,r.bluetoothScanAble,e),Object(O.k)(q.READ_BLUE_DEVICE_DATA,r.readBlueDeviceData,e),Object(O.k)(ne.FIREBASE_STARTUP,va)]);case 2:case"end":return t.stop()}}),Oa)}var Ca;function Pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xa=Object(w.createReducer)({user:{},userIsLoading:!1,userErrorMessage:null},(Ca={},F()(Ca,L.FETCH_USER_LOADING,(function(e){return ja(ja({},e),{},{userIsLoading:!0,userErrorMessage:null})})),F()(Ca,L.FETCH_USER_SUCCESS,(function(e,t){var n=t.user;return ja(ja({},e),{},{user:n,userIsLoading:!1,userErrorMessage:null})})),F()(Ca,L.FETCH_USER_FAILURE,(function(e,t){var n=t.errorMessage;return ja(ja({},e),{},{user:{},userIsLoading:!1,userErrorMessage:n})})),Ca)),ka=n(25),Ta=n.n(ka),Aa={bleState:h.d.PoweredOff},Ia={};function La(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Na(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?La(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):La(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ra=Na(Na({deviceIsLoading:!1,deviceErrorMessage:null,scannerState:Ce,DeviceList:[],connectedDevice:{},connectionState:xe,connectionMethode:Le,deviceData:{}},Aa),Ia);function Fa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fa(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ma,Ba=F()({},M.BLE_STATE_UPDATED,(function(e,t){var n=t.bleState;return Ua(Ua({},e),{},{bleState:n})})),Wa=(Object(w.createReducer)(Aa,Ba),{});Object(w.createReducer)(Ia,Wa);function Va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Va(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ha,Ga=_a(_a((Ma={},F()(Ma,q.SET_DEVICE_ERROR,(function(e,t){var n=t.errorMessage;return _a(_a({},e),{},{deviceErrorMessage:n})})),F()(Ma,q.SCANNER_STATE_UPDATED,(function(e,t){var n=t.scannerState;return _a(_a({},e),{},{scannerState:n})})),F()(Ma,q.ADD_DEVICE,(function(e,t){var n=t.device;if(e.DeviceList.some((function(e){return e.id===n.id})))return _a({},e);var a=Ta()(e.DeviceList);return a.push(n),_a(_a({},e),{},{DeviceList:a})})),F()(Ma,q.REMOVE_DEVICE,(function(e,t){for(var n=t.device,a=Ta()(e.DeviceList),r=0;r<a.length;r++)a[r]===n&&a.splice(r,1);return _a(_a({},e),{},{DeviceList:a})})),F()(Ma,q.CLEAR_DEVICES,(function(e){return _a(_a({},e),{},{DeviceList:[],deviceData:{}})})),F()(Ma,q.CONNECTED_DEVICE_UPDATED,(function(e,t){var n=t.connectedDevice;return _a(_a({},e),{},{connectedDevice:n})})),F()(Ma,q.CONNECTION_STATE_UPDATED,(function(e,t){var n=t.connectionState;return _a(_a({},e),{},{connectionState:n})})),F()(Ma,q.CONNECTION_METHODE_UPDATED,(function(e,t){var n=t.connectionMethode;return _a(_a({},e),{},{connectionMethode:n})})),F()(Ma,q.SET_DEVICE_DATA,(function(e,t){var n=t.data;return _a(_a({},e),{},{deviceData:n})})),F()(Ma,q.UPDATE_DEVICE_DATA,(function(e,t){var n=t.data,a=_a(_a({},e.deviceData),n);return _a(_a({},e),{},{deviceData:a})})),Ma),Ba),Wa),za=Object(w.createReducer)(Ra,Ga),Ja=n(18),Ya=n.n(Ja),qa=n(14),Xa=n.n(qa),Qa=n(331);function Za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ka(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $a=(Ha={},F()(Ha,ne.FIREBASE_IS_LOADING,(function(e,t){var n=t.loadingstate;return Ka(Ka({},e),{},{firebaseIsLoading:n})})),F()(Ha,ne.SET_FIREBASE_ERROR,(function(e,t){var n=t.errorMessage;return Ka(Ka({},e),{},{firebaseErrorMessage:n})})),F()(Ha,ne.SET_VIEW_ERROR,(function(e,t){var n=t.errorMessage;return Ka(Ka({},e),{},{viewError:n})})),F()(Ha,ne.VIEW_IS_LOADING,(function(e,t){var n=t.loadingstate;return Ka(Ka({},e),{},{viewIsLoading:n})})),F()(Ha,ne.SET_CURRENT_DATA,(function(e,t){var n=t.data;return Ka(Ka({},e),{},{currentData:n})})),F()(Ha,ne.ACTION_STARTING,(function(e){return Ka(Ka({},e),{},{firebaseErrorMessage:null})})),F()(Ha,ne.FETCH_STARTING,(function(e){return Ka(Ka({},e),{},{firebaseErrorMessage:null})})),F()(Ha,ne.DATA_FETCH_SUCCESS,(function(e,t){var n=t.params,a=n.type,r=n.path,i=n.data,s=e.localDataStore,o=Ka({},e.firebaseUser);switch(a){case zt.UPDATE:case zt.ADD:var c=Ka({},i);if(r===Gt.FIREBASEUSER)if(i&&i.data&&(c=Ka({},i.data)),i&&i._user&&(Object.keys(i._user).forEach((function(e){c[e]=i._user[e]})),delete c._user,delete c._auth),c&&Object.keys(c).length>0){var l=["displayName","name","lastN","email","emailVerified","address","country","farms","isAnonymous","phoneNumber","photoURL","refreshToken","state","uid"];Object.keys(c).forEach((function(e){for(var t=0;t<l.length;t++)if(l[t]===e){o[e]=c[e];break}}))}else o=c;if(!i)break;switch(r){case Gt.FIREBASEUSER:break;case Gt.USERSDATA:Object.keys(c).forEach((function(e){s.userData||(s.userData={}),s.userData[e]=c[e]}));break;case Gt.USERS:s.users||(s.users={}),i.data&&(c=i.data),c.users&&(c=c.users),Object.keys(c).forEach((function(e){s.users[e]=c[e]}));break;case Gt.FARMS:s.farms||(s.farms={}),i.farms&&(c=i.farms),Object.keys(c).forEach((function(e){s.farms[e]=c[e]}));break;case Gt.BATCHS:s.batchs||(s.batchs={}),i.batchs&&(c=i.batchs),Object.keys(c).forEach((function(e){s.batchs[e]=c[e]}));break;case Gt.SECTIONS:s.sections||(s.sections={}),i.sections&&(c=i.sections),Object.keys(c).forEach((function(e){s.sections[e]=c[e]}));break;case Gt.PENS:s.pens||(s.pens={}),i.pens&&(c=i.pens),Object.keys(c).forEach((function(e){s.pens[e]=c[e]}));break;case Gt.PIGS:s.pigs||(s.pigs={}),i.pigs&&(c=i.pigs),Object.keys(c).forEach((function(e){s.pigs[e]=c[e]}));break;case Gt.COMMENTS:s.comments||(s.comments={}),i.comments&&(c=i.comments),Object.keys(c).forEach((function(e){s.comments[e]=c[e]}));break;case Gt.GRAPH:s.graphs||(s.graphs={}),i.graphs&&(c=i.graphs),Object.keys(c).forEach((function(e){s.graphs[e]=c[e]}));break;case Gt.WEIGHING:s.weighings||(s.weighings={}),i.weighings&&(c=i.weighings),Object.keys(c).forEach((function(e){s.weighings[e]=c[e]}))}break;case zt.CLEAR:switch(r){case Gt.USERS:s.userData||(s.userData={}),s.userData.action="CLEAR";break;case Gt.USERSDATA:console.log("CLEAR"),s.batchs&&(s.batchs={}),s.sections&&(s.sections={}),s.pens&&(s.pens={}),s.pigs&&(s.pigs={}),s.graphs&&(s.graphs={}),s.weighings&&(s.weighings={}),s.userData&&s.userData.action&&(s.userData.action={})}break;default:console.log("DataFetch Not created / default")}return Ka(Ka({},e),{},{firebaseUser:o,localDataStore:s,firebaseIsLoading:!1,firebaseErrorMessage:null,viewIsLoading:!1})})),F()(Ha,ne.FETCH_SUCCESS,(function(e,t){var n=t.data,a=Ka({},e.localDataStore),r=Ka({},e);if(n){var i=n.localDataStore,s=Ya()(n,["localDataStore"]);i&&(a=0!==Object.keys(i).length?function e(t,n){var a=function(e){return e&&"object"===typeof e};return a(t)&&a(n)?(Object.keys(n).forEach((function(r){var i=t[r],s=n[r];Array.isArray(i)&&Array.isArray(s)||(a(i)&&a(s)?t[r]=e(Xa()({},i),s):t[r]=s)})),t):n}(i,a):Ka({},i)),r=Object(Qa.a)(e,s)}return Ka(Ka({},r),{},{localDataStore:a,firebaseIsLoading:!1,firebaseErrorMessage:null,viewIsLoading:!1})})),F()(Ha,ne.FETCH_FAILURE,(function(e,t){var n=t.errorMessage;return Ka(Ka({},e),{},{firebaseIsLoading:!1,firebaseErrorMessage:n,viewIsLoading:!1})})),Ha),er=Object(w.createReducer)({firebaseIsLoading:!1,firebaseErrorMessage:null,firebaseUser:null,localDataStore:{},currentData:null,viewIsLoading:!1,viewError:null},$a),tr=n(2),nr=n(651),ar=n(7),rr=n.n(ar),ir=n(8),sr=n.n(ir),or=n(11),cr=n.n(or),lr=n(12),ur=n.n(lr),fr=n(5),pr=n.n(fr),dr=n(29),hr=n(3),gr="rgba(0,0,0,0)",mr="#ffffff",br="#a6a6a6",vr="#ffffff",yr="#a3b9cf",Er="#03a489",Sr="#dc3545",Dr="#4cafea",Or="#FFAA95",wr="#86939e",Cr="#03a489",Pr="#4463ab",jr={h1:{fontSize:38},h2:{fontSize:34},h3:{fontSize:30},normal:{fontSize:17}},xr={tiny:5,small:10,normal:15,medium:30,tinyBottomMargin:{marginBottom:5},smallBottomMargin:{marginBottom:10},bottomMargin:{marginBottom:15},mediumBottomMargin:{marginBottom:30},tinyVerticalMargin:{marginVertical:5},smallVerticalMargin:{marginVertical:10},verticalMargin:{marginVertical:15},mediumVerticalMargin:{marginVertical:30},tinyHorizontalMargin:{marginHorizontal:5},smallHorizontalMargin:{marginHorizontal:10},horizontalMargin:{marginHorizontal:15},mediumHorizontalMargin:{marginHorizontal:30},tinyHorizontalPadding:{paddingHorizontal:5},smallHorizontalPadding:{paddingHorizontal:10},horizontalPadding:{paddingHorizontal:15},mediumHorizontalPadding:{paddingHorizontal:30},tinyVerticalPadding:{paddingVertical:5},smallVerticalPadding:{paddingVertical:10},verticalPadding:{paddingVertical:15},mediumVerticalPadding:{paddingVertical:30}},kr={Home:n(497),DashBoard:n(498),System:n(499),Curves:n(500),GCurves:n(501),User:n(502),Sow:n(503),Section:n(504),Pens:n(505),AutoPig:n(506),Feed:n(507),Haxa_globe:n(508),Hexa_icon:n(509),Logo:n(510),logo:n(511)};function Tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ir={column:{flexDirection:"column"},colMain:{flexDirection:"column",justifyContent:"center"},colCenter:{flexDirection:"column",alignItems:"center",justifyContent:"center"},colCross:{flexDirection:"column",alignItems:"center"},columnReverse:{flexDirection:"column-reverse"},row:{flexDirection:"row"},rowMain:{flexDirection:"row",justifyContent:"center"},rowCenter:{flexDirection:"row",alignItems:"center",justifyContent:"center"},rowCross:{flexDirection:"row",alignItems:"center"},rowReverse:{flexDirection:"row-reverse"},center:{alignItems:"center",justifyContent:"center"},crossCenter:{alignItems:"center"},crossEnd:{alignItems:"flex-end"},crossStart:{alignItems:"flex-start"},crossStretch:{alignItems:"stretch"},fill:{flex:1},fillCenter:{flex:1,alignItems:"center",justifyContent:"center"},fillCol:{flex:1,flexDirection:"column"},fillColCenter:{flex:1,flexDirection:"column",alignItems:"center",justifyContent:"center"},fillColCross:{flex:1,flexDirection:"column",alignItems:"center"},fillColMain:{flex:1,flexDirection:"column",justifyContent:"center"},fillColReverse:{flex:1,flexDirection:"column-reverse"},fillRow:{flex:1,flexDirection:"row"},fillRowCenter:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center"},fillRowCross:{flex:1,flexDirection:"row",alignItems:"center"},fillRowMain:{flex:1,flexDirection:"row",justifyContent:"center"},fillRowReverse:{flex:1,flexDirection:"row-reverse"},fullSize:{height:"100%",width:"100%"},halvWidth:{width:"50%"},midWidth:{width:"75%"},fullWidth:{width:"100%"},mainCenter:{justifyContent:"center"},mainEnd:{justifyContent:"flex-end"},mainSpaceAround:{justifyContent:"space-around"},mainSpaceBetween:{justifyContent:"space-between"},mainStart:{justifyContent:"flex-start"},mainContainer:Ar({flex:1,flexDirection:"column",alignItems:"center"},xr.mediumHorizontalMargin),contentContainer:Ar(Ar({flex:1,flexDirection:"column",alignItems:"center"},xr.mediumHorizontalMargin),{},{marginTop:xr.small},xr.bottomMargin),borderContainer:Ar(Ar(Ar({borderWidth:1,borderColor:"#000",borderRadius:15},xr.tinyHorizontalPadding),xr.tinyVerticalPadding),{},{maxWidth:450,zIndex:1}),textContainer:Ar(Ar({},jr.normal),{},{marginBottom:xr.normal,alignItems:"center"}),buttonContainer:{marginBottom:xr.small,maxWidth:450},loadingContainer:{position:"absolute",left:0,right:0,top:0,bottom:0,alignItems:"center",justifyContent:"center",backgroundColor:"#F5FCFF88"},logoContainer:{width:"100%",height:220},backgroundReset:{backgroundColor:gr},rotate90:{transform:[{rotate:"90deg"}]},rotate90Inverse:{transform:[{rotate:"-90deg"}]},mirror:{transform:[{scaleX:-1}]},scrollSpaceAround:{flexGrow:1,justifyContent:"space-around"},scrollSpaceBetween:{flexGrow:1,justifyContent:"space-between"},selfStretch:{alignSelf:"stretch"},textCenter:{textAlign:"center"},textJustify:{textAlign:"justify"},textLeft:{textAlign:"left"},textRight:{textAlign:"right"}};function Lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lr(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rr,Fr={button:{backgroundColor:yr,color:vr},buttonText:{color:vr},error:Nr(Nr({},jr.normal),{},{color:Sr,marginBottom:xr.tiny,textAlign:"center"}),result:Nr(Nr({},jr.normal),{},{marginBottom:xr.tiny,textAlign:"center"}),text:Nr(Nr({},jr.normal),{},{marginBottom:xr.tiny,textAlign:"center"}),input:Nr(Nr({},jr.normal),{},{height:24}),navigationHeader:{textAlign:"center",alignSelf:"center",flexGrow:1}},Ur=hr.a.create({container:{backgroundColor:yr}});function Mr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}if("ios"===u.a.OS||"android"===u.a.OS)Rr=n(232).default;else{var Br=n(152).default;n(231).default,Br.messaging.isSupported()&&(Rr=Br.messaging())}var Wr=function(e){cr()(n,e);var t=Mr(n);function n(e){return rr()(this,n),t.call(this,e)}return sr()(n,[{key:"getData",value:function(){"android"!==u.a.OS&&"ios"!==u.a.OS||!Rr||(Rr().onNotificationOpenedApp((function(e){console.log("Notification caused app to open from background state:",e.notification),ie.navigate(e.data.type)})),Rr().getInitialNotification().then((function(e){e&&(console.log("Notification caused app to open from quit state:",e.notification),ie.navigate(e.data.type))})))}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.checkData(this.props)}},{key:"render",value:function(){return s.a.createElement(tr.a,{style:[Ir.fillRowCenter,Ur.container]},s.a.createElement(tr.a,{style:[Ir.center,Ir.logoContainer]},s.a.createElement(dr.a,{style:Ir.fullSize,source:kr.Hexa_icon,resizeMode:"contain"})))}}]),n}(i.Component),Vr=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{}}))(Wr),_r=n(16),Hr=function(){return s.a.createElement(tr.a,{style:[Ir.fillCenter,Ir.rowMain,xr.mediumHorizontalMargin]},s.a.createElement(_r.a,null,"This is deep linking example screen which can be accessed using agrissysapp://deeplink scheme!"))},Gr=n(27);function zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yr=hr.a.create({boxContainer:Jr(Jr({},Ir.center),xr.tinyVerticalMargin),button:Jr(Jr(Jr(Jr({borderRadius:15},Ir.center),Ir.fullWidth),xr.horizontalPadding),Fr.button),text:Jr(Jr(Jr(Jr({},Fr.buttonText),xr.verticalPadding),Ir.center),{},{textAlign:"center"}),icon:Jr(Jr(Jr({},Ir.colCenter),xr.smallVerticalMargin),{},{width:"25%",height:50})}),qr=function(e){var t=[s.a.createElement(_r.a,{style:[Yr.text,e.textStyle],key:0},e.Text)],n=[];if(e.icon){var a=s.a.createElement(dr.a,{style:Ir.fullSize,source:e.icon,resizeMode:"contain"});n=s.a.createElement(tr.a,{style:[Yr.icon,e.iconStyle]},a)}return s.a.createElement(Gr.a,{style:[Yr.boxContainer,e.boxStyle],onPress:e.onPress},e.icon?s.a.createElement(tr.a,{style:[Yr.button,e.buttonStyle,Ir.rowCenter]},s.a.createElement(tr.a,{style:[Ir.colCenter,Ir.fill]},t),n):s.a.createElement(tr.a,{style:[Yr.button,e.buttonStyle]},t))},Xr=function(e){var t=e.Texts,n=e.Images,a=e.onPress,r=[];return t.forEach((function(t,i){var o=null;n&&n[i]&&(o=n[i]),r.push(s.a.createElement(qr,{key:i,Text:t,icon:o,iconStyle:e.iconStyle,itemStyle:e.itemStyle,onPress:function(){a&&a({index:i,text:t})}}))})),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth,{marginBottom:30},e.style]},r)},Qr=function(e){return s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth,xr.bottomMargin]},s.a.createElement(qr,{Text:e.Text,icon:e.icon,buttonStyle:{backgroundColor:Pr},onPress:function(){e.onPress&&e.onPress()}}))},Zr=n(24);function Kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kr(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ei=hr.a.create({listitem:$r($r($r({flex:1},Ir.borderContainer),Ir.center),{},{backgroundColor:"#fff",paddingVertical:5,paddingHorizontal:5})}),ti=function(e){var t=e.key?e.key:0;return s.a.createElement(Zr.c,{key:t,containerStyle:[ei.listitem,{flexDirection:"column",borderRadius:0},e.itemStyle],button:!0,onPress:e.onPress},s.a.createElement(Zr.c.Content,null,s.a.createElement(Zr.c.Title,null,e.Title),e.hasOwnProperty("Subtitle")?s.a.createElement(Zr.c.Subtitle,null,e.Subtitle):s.a.createElement(s.a.Fragment,null)))};function ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ai(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ni(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ni(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ri=hr.a.create({contentBox:ai(ai(ai(ai({},Ir.fill),Ir.colCenter),Ir.borderContainer),{},{borderRadius:0,minHeight:30})}),ii=function(e){var t=[];e.texts&&e.texts.forEach((function(n,a){t.push(s.a.createElement(tr.a,{style:[ri.contentBox,e.textsStyle],key:"text_"+a},s.a.createElement(_r.a,null,n)))}));var n=[];e.datas&&e.datas.forEach((function(t,a){n.push(s.a.createElement(Gr.a,{style:[ri.contentBox,e.datasStyle],onLongPress:function(){e.onPress&&e.onPress({data:t,index:a})},key:"data_"+a},s.a.createElement(_r.a,null,t)))}));for(var a=t.length>n.length?t.length:n.length,r=[],i=0;i<a;i++){var o=[];i<t.length?o.push(t[i]):o.push(s.a.createElement(tr.a,{style:[Ir.fill,Ir.colCenter],key:"leftSpace_"+i})),n.length>0&&(o.push(s.a.createElement(tr.a,{style:[Ir.fill,Ir.colCenter,{maxWidth:20}],key:"seperator_"+r.length})),i<n.length?o.push(n[i]):o.push(s.a.createElement(tr.a,{style:[Ir.fill,Ir.colCenter],key:"rightSpace_"+i}))),r.push(s.a.createElement(tr.a,{style:[e.datas?Ir.rowCenter:Ir.halvWidth,xr.tinyVerticalMargin],key:"row_"+r.length},o))}return r},si=(hr.a.create({container:{backgroundColor:yr}}),n(32));function oi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var ci=function(e){cr()(n,e);var t=oi(n);function n(e){var a;return rr()(this,n),(a=t.call(this,e)).state={View:1},a}return sr()(n,[{key:"getPenAndSection",value:function(){var e,t=void 0;if(this.props.pig&&this.props.pigTag&&this.props.PigsList&&this.props.PigsList[this.props.pigTag]&&this.props.PigsList[this.props.pigTag].pen&&0!=this.props.PigsList[this.props.pigTag].pen){t=this.props.PigsList[this.props.pigTag].pen;var n=this.props.firebase.localDataStore;if(n&&n.pens&&n.pens[t])e=n.pens[t].section}return{Section:e,Pen:t}}},{key:"getData",value:function(){}},{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props}},{key:"render",value:function(){var e=this,t=this.props.firebase.currentData;if(this.props.pig)return s.a.createElement(tr.a,{style:[Ir.buttonContainer]},s.a.createElement(qr,{Text:"Add Pig",onPress:function(){""!==e.props.pigTag?Object.keys(e.props.PigsList).filter((function(t){return t===e.props.pigTag})).length>0?e.props.setFirebaseError("Can not add Tag already exist"):(e.props.setFirebaseError(""),e.props.newPig(e.props.pigTag)):e.props.setFirebaseError("A Tag is needed")}}),s.a.createElement(qr,{Text:"Move Pig",onPress:function(){var t=e.getPenAndSection(),n=t.Section,a=t.Pen;e.props.setCurrentPig(e.props.pigTag,n,a),ie.navigate("DataEditor")}}));if(this.props.section)return s.a.createElement(tr.a,{style:[Ir.buttonContainer]},s.a.createElement(qr,{Text:"Weight",onPress:function(){ie.navigate("WeighingOperations")}}),s.a.createElement(tr.a,{style:[{marginTop:40}]},s.a.createElement(qr,{Text:"Add Pen",onPress:function(){e.props.editPens(zt.CREATE),ie.navigate("DataEditor")}}),s.a.createElement(qr,{Text:"Remove Pen",onPress:function(){e.props.editPens(zt.DELETE),ie.navigate("DataEditor")}})));var n=1;switch(this.state.View){case Yt:case qt:case Xt:n=-1;case Jt:return s.a.createElement(yi,{Title:"Operations comment:",Quantity:!0,Weight:!0,onDone:function(a){if(a.res){var r=e.state.View;r=r.charAt(0).toUpperCase()+r.slice(1);var i=a.quantity;if(isNaN(i)&&(i=1),n*=i,a.weight&&""!==a.weight){var s=a.weight;e.state.View===Jt&&e.props.newWeight(t.penId,s,Date.now(),1)}e.props.newComment(t.penId,r,a.data,i,s),e.props.newPigCount(t.penId,n)}e.setState({View:1})}});case Qt:return s.a.createElement(yi,{Title:"Pen Note:",onDone:function(n){if(n.res&&n.data){var a=e.state.View;a=a.charAt(0).toUpperCase()+a.slice(1),e.props.newComment(t.penId,a,n.data)}e.setState({View:1})}});default:return s.a.createElement(si.a,{style:{paddingRight:5}},s.a.createElement(tr.a,{style:[Ir.buttonContainer]},s.a.createElement(qr,{Text:"Weight",onPress:function(){ie.navigate("WeighingOperations")}}),s.a.createElement(qr,{Text:"Note",onPress:function(){e.setState({View:Qt})}}),s.a.createElement(tr.a,{style:[{marginTop:10}]},s.a.createElement(qr,{Text:"Add Pig",onPress:function(){e.setState({View:Jt})}}),s.a.createElement(qr,{Text:"Move Pig",onPress:function(){e.setState({View:Yt})}}),s.a.createElement(qr,{Text:"Lost Pig",onPress:function(){e.setState({View:qt})}}),s.a.createElement(qr,{Text:"Sold Pig",onPress:function(){e.setState({View:Xt})}}))))}}}]),n}(i.Component),li=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(ae.setFirebaseError(t))},setCurrentData:function(t){return e(ae.setCurrentData({type:Gt.PENS,penId:t}))},setCurrentDataElement:function(t){return e(ae.setCurrentData(t))},editPens:function(t){return e(ae.setCurrentData({type:Gt.PENS,action:t}))},setCurrentPig:function(t,n,a){return e(ae.setCurrentData({type:Gt.PIGS,action:zt.CREATE,pigtag:t,data:{section:n},dataId:a}))},newPig:function(t){return e(ae.actionStarting(zt.CREATE,Gt.PIGS,{TagId:t}))},newPigCount:function(t,n){return e(ae.actionStarting(zt.CREATE,Gt.PIGS,{PenId:t,Action:n}))},newComment:function(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return e(ae.actionStarting(zt.CREATE,Gt.COMMENTS,{PenId:t,Action:n,Data:a,Quantity:r,Weight:i}))},newWeight:function(t,n,a,r){return e(ae.actionStarting(zt.CREATE,Gt.WEIGHING,{PenId:t,Weight:n,Quantity:r,Date:a}))}}}))(ci),ui=n(20),fi=function(e){var t=Object(i.useRef)(new ui.a.Value(0)),n=e.progress,a=e.color?e.color:"#8BED4F";Object(i.useEffect)((function(){ui.a.timing(t.current,{toValue:n,duration:100}).start()}),[n]);var r=t.current.interpolate({inputRange:[0,100],outputRange:["0%","100%"],extrapolate:"clamp"});return s.a.createElement(tr.a,{style:[Ir.borderContainer,Ir.fullWidth,{borderWidth:0,minHeight:45,paddingBottom:10}]},s.a.createElement(tr.a,{style:[Ir.fill,Ir.fullWidth,Ir.colMain,{alignContent:"center"}]},e.text?s.a.createElement(_r.a,{style:{alignSelf:"flex-start",minHeight:20}},e.text):s.a.createElement(s.a.Fragment,null),s.a.createElement(tr.a,{style:pi.progressBar},s.a.createElement(ui.a.View,{style:(hr.a.absoluteFill,{backgroundColor:a,width:r})}))))},pi=hr.a.create({container:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",paddingTop:5,padding:8},progressBar:{flexDirection:"row",height:20,width:"100%",borderColor:"#000",borderWidth:2,borderRadius:5}}),di=n(49);function hi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var gi=["January","February","March","April","May","June","July","August","September","October","November","December"],mi=function(e){cr()(n,e);var t=hi(n);function n(e){var a;rr()(this,n);var r=(a=t.call(this,e)).getStates(e),i=r.year,s=r.month,o=r.day;return a.state={year:i,month:s,day:o},a}return sr()(n,[{key:"getStates",value:function(e){new Date;var t,n,a,r=new Date;return e.Selected&&(r=new Date(e.Selected)),t=r.getFullYear(),n=r.getMonth(),a=r.getDate(),e.Selected||(e.Year&&(t=this.props.Year),e.Month&&(n=this.props.Month),e.Day&&(a=this.props.Day)),{year:t,month:n,day:a}}},{key:"componentDidUpdate",value:function(e,t){if(e.Selected){if(e.Selected!=this.props.Selected){var n=this.getStates(this.props),a=n.year,r=n.month,i=n.day;this.setState({year:a,month:r,day:i},this.forceUpdate())}}else{var s=!1;e.Year!=this.props.Year&&(s=!0),e.Month!=this.props.Month&&(s=!0),e.Day!=this.props.Day&&(s=!0),s&&this.forceUpdate()}}},{key:"render",value:function(){for(var e=this,t=new Date,n=t.getFullYear(),a=[],r=n+25;r>n-25;r--){var i=String(r);a.push(s.a.createElement(di.a.Item,{key:"Year_"+r,value:r,label:i}))}for(var o=[],c=t.getMonth(),l=0;l<gi.length;l++){i=String(l);o.push(s.a.createElement(di.a.Item,{key:"Month_"+l,value:l,label:gi[l]}))}for(var u=[],f=new Date(n,c+1,0).getDate(),p=1;p<=f;p++){i=String(p);u.push(s.a.createElement(di.a.Item,{key:"Day_"+p,value:p,label:i}))}return s.a.createElement(tr.a,{style:[Ir.fullWidth,Ir.row,{marginBottom:-10},this.props.style]},s.a.createElement(di.a,{selectedValue:this.state.year,style:[{minWidth:101,marginRight:5}],onValueChange:function(t){n=t,e.props.onValueChange(new Date(n,e.state.month,e.state.day))}},a),s.a.createElement(di.a,{selectedValue:this.state.month,style:[{minWidth:110,marginRight:5}],onValueChange:function(t){c=t,e.props.onValueChange(new Date(e.state.year,c,e.state.day))}},o),s.a.createElement(di.a,{selectedValue:this.state.day,style:[{minWidth:83}],onValueChange:function(t){f=parseInt(t),e.props.onValueChange(new Date(e.state.year,e.state.month,f))}},u))}}]),n}(i.Component),bi=n(41),vi=hr.a.create({textAreaContainer:{borderColor:br,borderWidth:1,padding:5},textArea:{height:150,justifyContent:"flex-start",borderColor:"black",borderWidth:.5,padding:5}}),yi=function(e){var t=e.Title,n=!!e.Quantity&&e.Quantity,a=!!e.Weight&&e.Weight,r=e.onDone,o=Object(i.useState)(""),c=Ue()(o,2),l=c[0],f=c[1],p=Object(i.useState)("1"),d=Ue()(p,2),h=d[0],g=d[1],m=Object(i.useState)(""),b=Ue()(m,2),v=b[0],y=b[1],E="android"===u.a.OS||"ios"===u.a.OS;return s.a.createElement(tr.a,{style:[Ir.buttonContainer,e.style]},s.a.createElement(tr.a,{style:vi.textAreaContainer},s.a.createElement(tr.a,{style:[E?{}:Ir.row]},t?s.a.createElement(_r.a,{style:[jr.normal,{height:24,color:wr}]},t):s.a.createElement(s.a.Fragment,null),n?s.a.createElement(tr.a,{style:[Ir.row,E?{}:{marginLeft:50,marginBottom:4}]},s.a.createElement(_r.a,{style:[jr.normal,{height:24,color:wr}]},"Quantity:"),s.a.createElement(bi.a,{style:[vi.textArea,{marginLeft:10,height:22,width:80,paddingBottom:-10}],multiline:!1,onChangeText:function(e){""!==e&&isNaN(e)||g(e)},value:h})):s.a.createElement(s.a.Fragment,null)),a?s.a.createElement(tr.a,{style:[Ir.row,E?{}:{marginBottom:4}]},s.a.createElement(_r.a,{style:[jr.normal,{height:24,color:wr}]},"Average Weight:"),s.a.createElement(bi.a,{style:[vi.textArea,{marginLeft:10,height:22,width:80,paddingBottom:-10}],multiline:!1,onChangeText:function(e){""!==e&&isNaN(e)||y(e)},value:v})):s.a.createElement(s.a.Fragment,null),s.a.createElement(bi.a,{style:vi.textArea,underlineColorAndroid:"transparent",placeholder:"Type something",placeholderTextColor:"grey",numberOfLines:10,multiline:!0,onChangeText:function(e){return f(e)},value:l})),s.a.createElement(qr,{key:"_Done",Text:"Done",onPress:function(){r&&r({res:!0,data:l,quantity:h,weight:v})}}),s.a.createElement(qr,{key:"_Cancel",Text:"Cancel",onPress:function(){r&&r({res:!1,data:l})}}))};function Ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ei(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ei(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Di=hr.a.create({logoContainer:Si(Si({},Ir.fullWidth),{},{height:190,marginTop:2*xr.medium,marginBottom:xr.medium})});function Oi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var wi=function(e){cr()(n,e);var t=Oi(n);function n(e){var a;return rr()(this,n),(a=t.call(this,e)).state={ShowMainError:!1,FocusSubscription:null},a}return sr()(n,[{key:"setData",value:function(e){}},{key:"getData",value:function(){}},{key:"checkData",value:function(e){}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&(this.checkData(this.props),this.props.firebase.viewError!=e.firebase.viewError&&this.forceUpdate())}},{key:"componentDidMount",value:function(){var e=this;this.props.setFirebaseError(null),this.checkData(this.props),this.getData();var t=this.props.navigation.addListener("willFocus",(function(t){e.props.setViewLoading(!1),e.props.setViewError(null)}));this.setState({FocusSubscription:t})}},{key:"componentWillUnmount",value:function(){this.state.FocusSubscription&&this.state.FocusSubscription.remove()}},{key:"render",value:function(){var e=this.props.firebase.viewError,t=this.props.firebase.firebaseErrorMessage;return s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Di.logoContainer]},s.a.createElement(dr.a,{style:[Ir.fullSize],source:kr.Logo,resizeMode:"contain"})),s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize]},s.a.createElement(tr.a,{style:[Ir.textContainer,Ir.fullWidth]},this.state.ShowMainError&&t?s.a.createElement(_r.a,{style:Fr.error},t):s.a.createElement(s.a.Fragment,null),e?s.a.createElement(_r.a,{style:Fr.error},e):s.a.createElement(s.a.Fragment,null),s.a.createElement(_r.a,{style:Fr.text},"Welcome to Agrisys App"),s.a.createElement(_r.a,{style:Fr.text},"Please choose your action")),s.a.createElement(Xr,{Texts:["Connect to Agrisys Cloud","Connect to Device"],Images:[kr.Haxa_globe,null],onPress:function(e){switch(e.index){case 0:ie.navigate("AuthStack");break;case 1:"ios"!==u.a.OS&&"android"!==u.a.OS||ie.navigate("DeviceScreen")}}})))}}]),n}(i.Component),Ci=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(ae.setFirebaseError(t))},setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))}}}))(wi),Pi=n(162),ji=n(28),xi=function(e){if(Object.entries(e.example.user).length<=0)return null;return["Gwenborough","Wisokyburgh","McKenziehaven","South Elvis","Roscoeview"].includes(e.example.user.address.city)};function ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ti(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ai=hr.a.create({error:Ti(Ti({},jr.normal),{},{color:Sr,marginBottom:xr.tiny,textAlign:"center"}),instructions:Ti(Ti({},jr.normal),{},{fontStyle:"italic",marginBottom:xr.tiny,textAlign:"center"}),logoContainer:Ti(Ti({},Ir.fullWidth),{},{height:300,marginBottom:25}),result:Ti(Ti({},jr.normal),{},{marginBottom:xr.tiny,textAlign:"center"}),text:Ti(Ti({},jr.normal),{},{marginBottom:xr.tiny,textAlign:"center"})}),Ii=u.a.select({ios:"Press Cmd+R to reload,\nCmd+D or shake for dev menu.",android:"Double tap R on your keyboard to reload,\nShake or press menu button for dev menu."}),Li=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.example.user})),n=Object(o.d)((function(e){return e.example.userIsLoading})),a=Object(o.d)((function(e){return e.example.userErrorMessage}));return Object(i.useEffect)((function(){e(N.fetchUser())}),[]),s.a.createElement(tr.a,{style:[Ir.fillCenter,Ir.rowMain,xr.mediumHorizontalMargin,xr.mediumVerticalMargin]},n?s.a.createElement(ji.a,{size:"large",color:"#0000ff"}):s.a.createElement(tr.a,null,s.a.createElement(tr.a,{style:Ai.logoContainer},s.a.createElement(dr.a,{style:Ir.fullSize,source:kr.logo,resizeMode:"contain"})),s.a.createElement(_r.a,{style:Ai.text},"To get started, edit App.js"),s.a.createElement(_r.a,{style:Ai.instructions},Ii),a?s.a.createElement(_r.a,{style:Ai.error},a):s.a.createElement(tr.a,null,s.a.createElement(_r.a,{style:Ai.result},"I'm a fake user, my name is ",t.name),s.a.createElement(_r.a,{style:Ai.result},xi?"I live in Europe !":"I don't live in Europe.")),s.a.createElement(Pi.a,{style:Fr.button,onPress:function(){return e(N.fetchUser())},title:"Refresh"}),s.a.createElement(Pi.a,{style:Fr.button,onPress:function(){return ie.navigate("TestScreen")},title:"Test"})))};function Ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ni(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ni(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fi=hr.a.create({logoContainer:Ri(Ri({},Ir.fullWidth),{},{height:220,marginBottom:xr.small}),textContainer:Ri(Ri({},jr.normal),{},{marginBottom:xr.small}),buttonContainer:{marginBottom:xr.normal},deviceContainer:{flex:1,marginBottom:xr.tiny},deviceDataContainer:{borderWidth:1,borderColor:"#000",marginTop:xr.normal,paddingTop:xr.small,paddingHorizontal:xr.normal},error:Ri(Ri({},jr.normal),{},{color:Sr,marginBottom:xr.tiny,textAlign:"center"}),result:Ri(Ri({},jr.normal),{},{marginBottom:xr.tiny,textAlign:"center"}),text:Ri(Ri({},jr.normal),{},{marginBottom:xr.tiny,textAlign:"center"}),text2:Ri(Ri({},jr.normal),{},{marginRight:xr.small,marginBottom:xr.tiny})}),Ui=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.device.deviceErrorMessage})),n=Object(o.d)((function(e){return e.device.connectedDevice})),a=Object(o.d)((function(e){return e.device.deviceData})),r=Object(o.d)((function(e){return e.device.scannerState})),c=Object(o.d)((function(e){return e.device.connectionMethode})),l=Object(o.d)((function(e){return e.device.DeviceList}));return Object(i.useEffect)((function(){}),[]),s.a.createElement(tr.a,{style:[Ir.fill,Ir.rowMain,xr.mediumHorizontalMargin,xr.mediumVerticalMargin]},s.a.createElement(tr.a,null,s.a.createElement(tr.a,{style:Fi.textContainer},t?s.a.createElement(tr.a,null,s.a.createElement(_r.a,null,"There was a error while retrieving conected device")):s.a.createElement(tr.a,null,s.a.createElement(_r.a,{style:Fi.text},"Corrently connected:"),s.a.createElement(_r.a,{style:Fi.text},n&&n.name?n.name:"None"))),s.a.createElement(tr.a,{style:Fi.buttonContainer},n?s.a.createElement(tr.a,null,s.a.createElement(qr,{buttonStyle:Fr.button,Text:"Disconnect Device",onPress:function(){return e(X.disconnectDevice(c))}})):s.a.createElement(tr.a,null,c==Ne&&r!=Ce?s.a.createElement(qr,{buttonStyle:Fr.button,Text:"Stop BLE Search",onPress:function(){return e(X.stopBleScan())}}):s.a.createElement(qr,{buttonStyle:Fr.button,Text:"Search BLE devices",onPress:function(){return e(X.startBleScan())}}),"ios"===u.a.OS?s.a.createElement(s.a.Fragment,null):s.a.createElement(tr.a,null,c==Re&&r!=Ce?s.a.createElement(qr,{buttonStyle:Fr.button,Text:"Stop Bluetooth Search",onPress:function(){return e(X.stopBluetoothScan())}}):s.a.createElement(qr,{buttonStyle:Fr.button,Text:"Search Bluetooth devices",onPress:function(){return e(X.startBluetoothScan())}}),s.a.createElement(qr,{buttonStyle:Fr.button,Text:"Make Discoverable (Blu 30sec)",onPress:function(){return e(X.bluetoothScanAble())}}),s.a.createElement(qr,{buttonStyle:Fr.button,Text:"OnDevice-serial",onPress:function(){}})))),s.a.createElement(tr.a,{style:Fi.deviceContainer},s.a.createElement(_r.a,{style:Fi.text2},"Device List:"),n?function(e,t){var n=Object(o.c)();return s.a.createElement(tr.a,null,s.a.createElement(ti,{Title:e.localName,Subtitle:e.id,itemStyle:{marginBottom:10},onPress:function(){return n(X.disconnectDevice())}}),t&&Object.keys(t).length>1?s.a.createElement(tr.a,{style:Fi.deviceDataContainer},t&&t.Battery?s.a.createElement(tr.a,{style:Fi.textContainer},s.a.createElement(_r.a,null,"Device battery level"),s.a.createElement(_r.a,null,t.Battery+"%")):s.a.createElement(s.a.Fragment,null),t.tagid?s.a.createElement(tr.a,{style:Fi.textContainer},s.a.createElement(_r.a,null,"TAG Id:"),s.a.createElement(_r.a,null,t.tagid)):s.a.createElement(s.a.Fragment,null),t.FatLayers&&t.FatLayers>0?s.a.createElement(tr.a,{style:Fi.textContainer},s.a.createElement(_r.a,null,"Layers received: ",t.FatLayers),s.a.createElement(_r.a,null,"Layer 1: ",t.FatL1),s.a.createElement(_r.a,null,"Layer 2: ",t.FatL2),s.a.createElement(_r.a,null,"Layer 3: ",t.FatL3)):s.a.createElement(s.a.Fragment,null),t.Unknown?s.a.createElement(tr.a,{style:Fi.textContainer},s.a.createElement(_r.a,null,"unknon Id:"),s.a.createElement(_r.a,null,t.Unknown)):s.a.createElement(s.a.Fragment,null)):s.a.createElement(s.a.Fragment,null))}(n,a):s.a.createElement(si.a,{style:{paddingRight:5}},l.map((function(t,n){return s.a.createElement(ti,{key:n,Title:t.localName,Subtitle:t.id,onPress:function(){return e(X.connectDevice(t))}})}))))))};function Mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Bi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wi,Vi=Object(nr.a)({FrontScreen:{screen:Ci,navigationOptions:function(){return{headerMode:"none",headerShown:!1}},path:"main"},DeviceScreen:{screen:Ui,navigationOptions:function(){return{title:"Device",headerTitleStyle:Bi({},Fr.navigationHeader)}}},ExampleScreen:{screen:Li,navigationOptions:function(){return{headerMode:"none"}},path:"example"}},{initialRouteName:"FrontScreen",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerRight:function(){return s.a.createElement(tr.a,{style:{padding:6}})}}});hr.a.create({});function _i(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}if("ios"===u.a.OS||"android"===u.a.OS)Wi=n(186).default;else{var Hi=n(152).default;n(179).default,Wi=Hi.auth}var Gi=function(e){switch(e){case _t:return"AdminPanel";case Vt:return"ConsysPanel";case Bt:return"UserPanel";case Mt:return"CreateUserData";default:return"LoginUser"}},zi=function(e){cr()(n,e);var t=_i(n);function n(e){var a;return rr()(this,n),(a=t.call(this,e)).state={ISLOADPAGE:!0,FocusSubscription:null},a}return sr()(n,[{key:"getData",value:function(){}},{key:"checkData",value:function(e){var t=this.props.firebase;if(!t)return this.props.setFirebaseError("Internal rootdata Error"),void ie.navigate("MainStack");var n="LoginUser",a=t.firebaseUser;a&&Object.keys(a).length>1&&(n=a.state!==Mt||a.emailVerified||Wi().currentUser.emailVerified?Gi(a.state):"VerifyScreen");ie.navigate(n)}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&this.props.firebase.firebaseUser!=e.firebase.firebaseUser){var n=this.props.firebase.firebaseUser,a=e.firebase.firebaseUser;(!n||n.uid!==a.uid||n.state!==a.state&&a.state!==Mt||n.emailVerified!=a.emailVerified)&&(console.log("UserLoading"),this.checkData(this.props))}}},{key:"componentDidMount",value:function(){var e=this;this.props.setFirebaseError(null),this.props.getUser(null),this.checkData(this.props),this.getData();var t=this.props.navigation.addListener("willFocus",(function(t){e.props.setViewLoading(!1),e.props.setViewError(null)}));this.setState({FocusSubscription:t})}},{key:"componentWillUnmount",value:function(){this.state.FocusSubscription&&this.state.FocusSubscription.remove()}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=this.state.ISLOADPAGE;return s.a.createElement(tr.a,{style:[Ir.mainContainer]},t?s.a.createElement(tr.a,{style:[Ir.fillRowCenter,Ir.center,Ir.logoContainer]},s.a.createElement(dr.a,{style:Ir.fullSize,source:kr.Hexa_icon,resizeMode:"contain"})):s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fillColMain]},s.a.createElement(_r.a,{style:Fr.text},"This page contains an error."),s.a.createElement(_r.a,{style:Fr.text},"If you are going back, please press back again.")),(e||t)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"}))}}]),n}(i.Component),Ji=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(ae.setFirebaseError(t))},setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},clearDataMem:function(){return e(ae.actionStarting(zt.CLEAR,Gt.USERSDATA))},getUser:function(t){return e(ae.actionStarting(zt.FETCH,Gt.USERSDATA,{UserId:t}))}}}))(zi);function Yi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var qi,Xi=function(e){cr()(n,e);var t=Yi(n);function n(e){var a;return rr()(this,n),(a=t.call(this,e)).state={Email:"",Pass:"",CreateUser:!1},a}return sr()(n,[{key:"getData",value:function(){}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&(this.checkData(this.props),this.props.firebase.viewError!=e.firebase.viewError&&this.forceUpdate())}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,n=this.props.firebase.viewError;return s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fillColMain]},n?s.a.createElement(_r.a,{style:Fr.error},n):s.a.createElement(s.a.Fragment,null),this.state.CreateUser?s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fillColMain]},s.a.createElement(tr.a,{style:[Ir.borderContainer,Ir.midWidth,{marginBottom:20}]},s.a.createElement(Zr.b,{label:"Email",style:Fr.input,onChangeText:function(t){e.setState({Email:t})},value:this.state.Email}),s.a.createElement(Zr.b,{label:"Password",style:Fr.input,onChangeText:function(t){e.setState({Pass:t})},value:this.state.Pass,secureTextEntry:!0})),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth]},s.a.createElement(qr,{Text:"Create User",onPress:function(){e.state.Email&&""!==e.state.Email?e.state.Pass&&""!==e.state.Pass?(e.props.setViewLoading(!0),e.props.createUser(e.state.Email,e.state.Pass)):e.props.setFirebaseError("Password is needed"):e.props.setFirebaseError("Email is needed")}}))):s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fillColMain]},s.a.createElement(tr.a,{style:[Ir.borderContainer,Ir.midWidth,{marginBottom:20}]},s.a.createElement(Zr.b,{label:"Username",style:Fr.input,onChangeText:function(t){e.setState({Email:t})},value:this.state.Email}),s.a.createElement(Zr.b,{label:"Password",style:Fr.input,onChangeText:function(t){e.setState({Pass:t})},value:this.state.Pass,secureTextEntry:!0}),s.a.createElement(qr,{Text:"Login",icon:kr.User,onPress:function(){e.state.Email&&""!==e.state.Email?"CLEAR"===e.state.Email?e.props.clearDataMem():e.state.Pass&&""!==e.state.Pass?(e.props.setViewLoading(!0),e.props.signIN(e.state.Email,e.state.Pass)):e.props.setViewError("Password is needed"):e.props.setViewError("Email is needed")}})),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth]},s.a.createElement(qr,{Text:"Send reset password",onPress:function(){e.props.setViewError(null),e.state.Email?(e.props.setViewLoading(!0),e.props.resetPass(e.state.Email)):e.props.setViewError("Please provide an Email")}}),s.a.createElement(qr,{Text:"Create New User",onPress:function(){e.props.setViewError(null),e.setState({Email:"",Pass:"",CreateUser:!0})}}))),(t||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"})))}}]),n}(i.Component),Qi=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},clearDataMem:function(){return e(ae.actionStarting(zt.CLEAR,Gt.USERSDATA))},signIN:function(t,n){return e(ae.actionStarting(zt.SIGN,Gt.USERSDATA,{Email:t,Pass:n}))},resetPass:function(t){return e(ae.actionStarting(zt.CREATE,Gt.USERS,{Email:t}))},createUser:function(t,n){return e(ae.actionStarting(zt.CREATE,Gt.USERS,{Email:t,Pass:n}))}}}))(Xi);function Zi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}if("ios"===u.a.OS||"android"===u.a.OS)qi=n(186).default;else{var Ki=n(152).default;n(179).default,qi=Ki.auth}var $i=function(e){cr()(n,e);var t=Zi(n);function n(e){var a;return rr()(this,n),(a=t.call(this,e)).state={},a}return sr()(n,[{key:"setData",value:function(e){}},{key:"getData",value:function(){}},{key:"checkData",value:function(e){var t=this;if(e.firebase&&e.firebase.firebaseUser){var n=qi().currentUser;!n||e.firebase.firebaseUser.emailVerified||e.firebase.viewIsLoading||n.reload().then((function(e){n.emailVerified&&(t.props.setViewLoading(!0),t.props.setUser(n.emailVerified),console.log("Verified"),ie.navigate("AuthStack"))})),e.firebase.firebaseUser.emailVerified&&ie.navigate("AuthStack")}}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.checkData(this.props)}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,n=this.props.firebase.firebaseUser,a=this.props.firebase.viewError;return s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fillColMain]},a?s.a.createElement(_r.a,{style:Fr.error},a):s.a.createElement(s.a.Fragment,null),s.a.createElement(tr.a,null,s.a.createElement(_r.a,null,"Please verify your account by accepting the email, sent to your current account"),s.a.createElement(_r.a,null,"This page will not refresh itself..."),s.a.createElement(qr,{Text:"Resend verification",onPress:function(){console.log("send",n,e.state.User),n&&e.state.User&&e.state.User.sendEmailVerification()}}),s.a.createElement(qr,{Text:"Refresh",onPress:function(){e.checkData(e.props,e.state)}}))),(t||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"}))}}]),n}(i.Component),es=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},setFirebaseError:function(t){return e(ae.setFirebaseError(t))},setUser:function(t){return e(ae.actionStarting(zt.UPDATE,Gt.USERS,{emailVerified:t}))}}}))($i);hr.a.create({});function ts(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var ns=function(e){cr()(n,e);var t=ts(n);function n(e){var a;rr()(this,n);var r=(a=t.call(this,e)).setData(e),i=r.FirstN,s=r.LastN,o=r.Contact,c=r.ContactP,l=r.Address;return a.state={FirstN:i,LastN:s,Contact:o,ContactP:c,Address:l,Country:""},a}return sr()(n,[{key:"setData",value:function(e){var t="",n="",a="",r="",i="",s=this.props.firebase;if(s){var o=s.firebaseUser;o&&(o.name&&cn(o.name)&&(t=o.name),o.lastN&&(n=o.lastN),o.contact&&(a=o.contact),o.phoneNumber&&(r=o.phoneNumber),o.address&&(i=o.address))}return{FirstN:t,LastN:n,Contact:a,ContactP:r,Address:i}}},{key:"getData",value:function(){}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.props.getUser(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.firebaseUser&&(this.props.firebase.firebaseUser.name!=this.state.FirstN&&""===this.state.FirstN||this.props.firebase.firebaseUser.lastN!=this.state.lastN&&""===this.state.lastN||this.props.firebase.firebaseUser.contact!=this.state.Contact&&""===this.state.Contact||this.props.firebase.firebaseUser.address!=this.state.Address&&""===this.state.Address))){var n=this.setData(this.props),a=n.FirstN,r=n.LastN,i=n.Contact,s=n.ContactP,o=n.Address;this.setState({FirstN:a,LastN:r,Contact:i,ContactP:s,Address:o})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,n=this.props.firebase.viewError,a=s.a.createRef(),r=s.a.createRef(),i=s.a.createRef(),o=s.a.createRef(),c=s.a.createRef();return s.a.createElement(si.a,{style:[xr.verticalMargin,{paddingRight:5}]},s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fillColMain]},!n||n.type&&n.type!==Zt?s.a.createElement(s.a.Fragment,null):s.a.createElement(_r.a,{style:Fr.error},n.message?n.message:n),s.a.createElement(Qr,{Text:"User Informations"}),s.a.createElement(tr.a,{style:[Ir.borderContainer,Ir.midWidth,{marginBottom:20}]},s.a.createElement(Zr.b,{ref:a,label:"First Name",style:Fr.input,onChangeText:function(t){t?cn(t)&&e.setState({FirstN:t}):e.setState({FirstN:t})},value:this.state.FirstN}),s.a.createElement(Zr.b,{ref:r,label:"Last Name",style:Fr.input,onChangeText:function(t){t?cn(t)&&e.setState({LastN:t}):e.setState({LastN:t})},value:this.state.LastN}),s.a.createElement(Zr.b,{ref:i,label:"Contact Email",style:Fr.input,onChangeText:function(t){if(t){var n=t;cn(n=(n=n.replace("@","a")).replace(".","d"))&&e.setState({Contact:t})}else e.setState({Contact:t})},value:this.state.Contact}),s.a.createElement(Zr.b,{ref:o,label:"Contact Phone",style:Fr.input,onChangeText:function(t){t?cn(t,!1)&&e.setState({ContactP:t}):e.setState({ContactP:t})},value:this.state.ContactP}),s.a.createElement(Zr.b,{ref:c,label:"Address",style:Fr.input,onChangeText:function(t){t?cn(t)&&e.setState({Address:t}):e.setState({Address:t})},value:this.state.Address}),s.a.createElement(Zr.b,{label:"Country",style:Fr.input,onChangeText:function(t){t?cn(t)&&e.setState({Country:t}):e.setState({Country:t})},value:this.state.Country})),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth]},s.a.createElement(qr,{Text:"Save User information",onPress:function(){var t={};e.state.FirstN&&""!==e.state.FirstN?cn(e.state.FirstN)?e.state.LastN&&""!==e.state.LastN?cn(e.state.LastN)?(t={name:e.state.FirstN,lastN:e.state.LastN},""!==e.state.Contact&&(t.contact=e.state.Contact),""!==e.state.ContactP&&(t.phone=e.state.ContactP),""!==e.state.Address&&(t.address=e.state.Address),""!==e.state.Country&&(t.country=e.state.Country),e.props.setViewLoading(!0),e.props.updateUser(t),e.props.OnDone&&e.props.OnDone(!0)):e.props.setViewError("Last name contains invalid characters"):e.props.setViewError("Last name is needed"):e.props.setViewError("First name contains invalid characters"):e.props.setViewError("First name is needed")}}))),(t||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"})))}}]),n}(i.Component),as=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},getUser:function(t){return e(ae.actionStarting(zt.FETCH,Gt.USERSDATA,{UserId:t}))},updateUser:function(t){return e(ae.actionStarting(zt.UPDATE,Gt.USERSDATA,{Data:t}))}}}))(ns),rs=n(31),is=n(126);function ss(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var os=rs.a.get("window"),cs=rs.a.get("screen"),ls=function(e){cr()(n,e);var t=ss(n);function n(e){var a;rr()(this,n),(a=t.call(this,e)).onChange=function(e){var t=e.window,n=e.screen;a.setState({dimensions:{window:t,screen:n}})};var r=a.setData(e).CurrentSub;return a.state={dimensions:{window:os,screen:cs},CurrentSub:r,Billing:0},a}return sr()(n,[{key:"setData",value:function(e){var t="",n=this.props.firebase;if(n){var a=n.firebaseUser;a&&a.state&&a.state!=Mt&&(t=a.state)}return{CurrentSub:t}}},{key:"getData",value:function(){}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){rs.a.addEventListener("change",this.onChange),this.props.setViewLoading(!1),this.props.setViewError(null),this.props.getUser(null),this.checkData(this.props),this.getData()}},{key:"componentWillUnmount",value:function(){rs.a.removeEventListener("change",this.onChange)}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.firebaseUser&&this.props.firebase.firebaseUser.state!=this.state.CurrentSub&&""===this.state.CurrentSub)){var n=this.setData(this.props).CurrentSub;this.setState({CurrentSub:n})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,n=this.props.firebase.viewError,a=this.state.dimensions.window.width>900,r="ios"===u.a.OS||"android"===u.a.OS||!a;return s.a.createElement(si.a,{style:[xr.verticalMargin,{paddingRight:5}]},s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fillColMain]},!n||n.type&&n.type!==Zt?s.a.createElement(s.a.Fragment,null):s.a.createElement(_r.a,{style:Fr.error},n.message?n.message:n),s.a.createElement(Qr,{Text:"Subscription plan"}),s.a.createElement(tr.a,{style:[r?{}:Ir.fillRowCenter,{marginBottom:20}]},s.a.createElement(Gr.a,{style:[Ir.borderContainer,{width:200,height:300},this.state.CurrentSub===Wt?{backgroundColor:Cr}:{}],onPress:function(){e.setState({CurrentSub:Wt},e.forceUpdate())}},s.a.createElement(tr.a,{style:[Ir.row,Ir.fullWidth,{alignContent:"center",alignItems:"center",justifyContent:"center",height:35}]},s.a.createElement(_r.a,{style:{fontWeight:"bold",fontSize:20}},"Farm Staff"),this.state.CurrentSub===Wt?s.a.createElement(is.a,{value:this.state.CurrentSub===Wt}):s.a.createElement(s.a.Fragment,null)),s.a.createElement(tr.a,{style:[Ir.fill,Ir.borderContainer]}),s.a.createElement(tr.a,{style:[Ir.borderContainer,{height:75}]},s.a.createElement(_r.a,{style:{fontWeight:"bold"}},"Free"),s.a.createElement(_r.a,null,"Access to assign as staff of an existing farm"))),s.a.createElement(Gr.a,{style:[Ir.borderContainer,{width:200,height:300},this.state.CurrentSub===Bt?{backgroundColor:Cr}:{}],onPress:function(){e.setState({CurrentSub:Bt},e.forceUpdate())}},s.a.createElement(tr.a,{style:[Ir.row,Ir.fullWidth,{alignContent:"center",alignItems:"center",justifyContent:"center",height:35}]},s.a.createElement(_r.a,{style:{fontWeight:"bold",fontSize:20}},"Farm Owner"),this.state.CurrentSub===Bt?s.a.createElement(is.a,{value:this.state.CurrentSub===Bt}):s.a.createElement(s.a.Fragment,null)),s.a.createElement(tr.a,{style:[Ir.fill,Ir.borderContainer]}),s.a.createElement(tr.a,{style:[Ir.borderContainer,{height:75}]},s.a.createElement(_r.a,{style:{fontWeight:"bold"}},"Free"),s.a.createElement(_r.a,null,"Access to create and manage own farm"))),s.a.createElement(Gr.a,{style:[Ir.borderContainer,{width:200,height:300},this.state.CurrentSub===Vt?{backgroundColor:Cr}:{}],onPress:function(){e.setState({CurrentSub:Vt},e.forceUpdate())}},s.a.createElement(tr.a,{style:[Ir.row,Ir.fullWidth,{alignContent:"center",alignItems:"center",justifyContent:"center",height:35}]},s.a.createElement(_r.a,{style:{fontWeight:"bold",fontSize:20}},"Farm Manager"),this.state.CurrentSub===Vt?s.a.createElement(is.a,{value:this.state.CurrentSub===Vt}):s.a.createElement(s.a.Fragment,null)),s.a.createElement(tr.a,{style:[Ir.fill,Ir.borderContainer]}),s.a.createElement(tr.a,{style:[Ir.borderContainer,{height:75}]},s.a.createElement(_r.a,{style:{fontWeight:"bold"}},"9999.99\u20ac"),s.a.createElement(_r.a,null,"Access to manage own farm, and assing staff"))),s.a.createElement(Gr.a,{style:[Ir.borderContainer,{width:200,height:300},"Contact"===this.state.CurrentSub?{backgroundColor:Cr}:{}],onPress:function(){e.setState({CurrentSub:"Contact"},e.forceUpdate())}},s.a.createElement(tr.a,{style:[Ir.row,Ir.fullWidth,{alignContent:"center",alignItems:"center",justifyContent:"center",height:35}]},s.a.createElement(_r.a,{style:{fontWeight:"bold",fontSize:20}},"Get contacted"),"Contact"===this.state.CurrentSub?s.a.createElement(is.a,{value:"Contact"===this.state.CurrentSub}):s.a.createElement(s.a.Fragment,null)),s.a.createElement(tr.a,{style:[Ir.fill,Ir.borderContainer]}),s.a.createElement(tr.a,{style:[Ir.borderContainer,{height:75}]},s.a.createElement(_r.a,{style:{fontWeight:"bold",height:20}}),s.a.createElement(_r.a,null,"We will contact you, and tell more about our offers")))),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth]},s.a.createElement(qr,{Text:"Submit",onPress:function(){e.state.CurrentSub&&""!==e.state.CurrentSub?e.props.OnDone&&e.props.OnDone(e.state.CurrentSub):e.props.setViewError("Please choose a subscription type.")}}))),(t||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"})))}}]),n}(i.Component),us=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},getUser:function(t){return e(ae.actionStarting(zt.FETCH,Gt.USERSDATA,{UserId:t}))}}}))(ls);function fs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var ps=function(e){cr()(n,e);var t=fs(n);function n(e){var a;rr()(this,n);var r=(a=t.call(this,e)).setData(e),i=r.FarmName,s=r.Address,o=r.Country,c=r.Cvr,l=r.Manager;return a.state={FarmName:i,Address:s,Country:o,Cvr:c,Manager:l,Sections:"0",Pens:"0"},a}return sr()(n,[{key:"setData",value:function(e){var t="",n="",a="",r="",i="",s=e.firebase.localDataStore,o=this.props.firebase.firebaseUser;if(o&&(""!==o.lastN&&(t=o.lastN),""!==o.address&&(n=o.address),o.country&&(a=o.country),""!=o.email&&(i=o.email)),s&&o&&s.farms&&o.farms&&s.farms[Object.keys(o.farms)[0]]){var c=s.farms[Object.keys(o.farms)[0]];c.name&&(t=c.name),c.address&&(n=c.address),c.country&&(a=c.country),c.cvr&&(r=c.cvr),c.manager&&(i=c.manager)}return{FarmName:t,Address:n,Country:a,Cvr:r,Manager:i}}},{key:"getData",value:function(){}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.props.getUser(null),this.props.getFarm(),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&(this.checkData(this.props),this.props.firebase.firebaseUser)}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,n=this.props.firebase.viewError;return s.a.createElement(si.a,{style:[xr.verticalMargin,{paddingRight:5}]},s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fillColMain]},!n||n.type&&n.type!==Zt?s.a.createElement(s.a.Fragment,null):s.a.createElement(_r.a,{style:Fr.error},n.message?n.message:n),s.a.createElement(Qr,{Text:"Farm Informations"}),s.a.createElement(tr.a,{style:[Ir.borderContainer,Ir.midWidth,{marginBottom:20}]},s.a.createElement(Zr.b,{label:"Farm Name",style:Fr.input,onChangeText:function(t){t?cn(t)&&e.setState({FarmName:t}):e.setState({FarmName:t})},value:this.state.FarmName}),s.a.createElement(Zr.b,{label:"Address",style:Fr.input,onChangeText:function(t){e.setState({Address:t})},value:this.state.Address}),s.a.createElement(Zr.b,{label:"Country",style:Fr.input,onChangeText:function(t){e.setState({Country:t})},value:this.state.Country}),s.a.createElement(Zr.b,{label:"Cvr",style:Fr.input,onChangeText:function(t){isNaN(t)||e.setState({Cvr:t})},value:this.state.Cvr}),s.a.createElement(Zr.b,{label:"Manager contact",style:Fr.input,onChangeText:function(t){if(t){var n=t;cn(n=(n=n.replace("@","a")).replace(".","d"))&&e.setState({Manager:t})}else e.setState({Manager:t})},value:this.state.Manager}),s.a.createElement(Zr.b,{label:"Number of Sections",style:Fr.input,onChangeText:function(t){isNaN(t)||e.setState({Sections:t})},value:this.state.Sections}),s.a.createElement(Zr.b,{label:"Number of Pens in each Sections",style:Fr.input,onChangeText:function(t){isNaN(t)||e.setState({Pens:t})},value:this.state.Pens})),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth]},s.a.createElement(qr,{Text:"Save Farm information",onPress:function(){var t={},n={},a={};if(e.state.FarmName&&""!==e.state.FarmName)if(cn(e.state.FarmName)){if(t={name:e.state.FarmName},""!==e.state.Address&&(t.address=e.state.Address),""!==e.state.Country&&(t.country=e.state.Country),""!==e.state.Cvr&&(t.cvr=e.state.Cvr),""!==e.state.Manager&&(t.manager=e.state.Manager),e.props.setViewLoading(!0),e.props.updateFarm(t),e.state.Sections&&e.state.Pens){e.props.setViewLoading(!0);var r,i,s=1;for(r=1;r<=e.state.Sections;r++){var o={};for(i=1;i<=e.state.Pens;i++)a["Pen_"+s]={section:"Section_"+r},o["Pen_"+s]=!0,s++;n["Section_"+r]={pens:o}}console.log("Set",n,a),e.props.updateFarmData(n,a)}e.props.OnDone&&e.props.OnDone(!0)}else e.props.setViewError("First name contains invalid characters");else e.props.setViewError("Farm name is needed")}}))),(t||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"})))}}]),n}(i.Component),ds=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},getUser:function(t){return e(ae.actionStarting(zt.FETCH,Gt.USERSDATA,{UserId:t}))},getFarm:function(){return e(ae.actionStarting(zt.FETCH,Gt.FARMS,{}))},updateFarm:function(t){return e(ae.actionStarting(zt.UPDATE,Gt.FARMS,{Data:t}))},updateFarmData:function(t,n){return e(ae.actionStarting(zt.UPDATE,Gt.FARMDATAS,{Data:{sections:t,pens:n}}))}}}))(ps);function hs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var gs=function(e){cr()(n,e);var t=hs(n);function n(e){var a;return rr()(this,n),(a=t.call(this,e)).state={ViewState:1},a}return sr()(n,[{key:"getData",value:function(){}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&(this.checkData(this.props),this.props.firebase.firebaseUser!==e.firebase.firebaseUser&&e.firebase.firebaseUser.state!==Mt&&3!==this.state.ViewState&&ie.nacigationPop())}},{key:"render",value:function(){var e=this,t=(this.props.firebase.firebaseIsLoading,[]);return 1===this.state.ViewState?t=[s.a.createElement(as,{key:"View1",OnDone:function(t){t?e.setState({ViewState:2},e.forceUpdate()):ie.nacigationPop()}})]:2===this.state.ViewState?t=[s.a.createElement(us,{key:"View2",OnDone:function(t){if(t&&""!=t){var n="Not set";e.props.firebase.firebaseUser.lastN&&(n=e.props.firebase.firebaseUser.lastN),e.props.precreateUserData(t,n),e.setState({ViewState:3},e.forceUpdate())}else ie.nacigationPop()}})]:3===this.state.ViewState?t=[s.a.createElement(ds,{key:"View3",OnDone:function(t){t&&""!=t&&(e.props.clearDataMem(),ie.navigateAndReset("AuthStack"))}})]:(this.props.clearDataMem(),ie.navigateAndReset("AuthStack")),s.a.createElement(tr.a,null,t)}}]),n}(i.Component),ms=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(ae.viewIsLoading(t))},clearDataMem:function(){return e(ae.actionStarting(zt.CLEAR,Gt.USERSDATA))},updateUser:function(t){return e(ae.actionStarting(zt.UPDATE,Gt.USERSDATA,{Data:t}))},precreateUserData:function(t,n){return e(ae.actionStarting(zt.CREATE,Gt.USERSDATA,{UserData:{state:t},Farms:{name:n},Sections:{},Pens:{}}))}}}))(gs);function bs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var vs=Object(nr.a)({UserLoadingScreen:{screen:Ji,navigationOptions:function(){return{title:"User loading"}}},LoginUser:{screen:Qi,navigationOptions:function(){return{title:"User Login",headerLeft:function(){return s.a.createElement(tr.a,{style:{padding:6,paddingLeft:15}},s.a.createElement(Zr.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){return ie.navigate("MainStack")}}))}}}},VerifyScreen:{screen:es,navigationOptions:function(){return{title:"User Verification"}}},CreateUserData:{screen:ms,navigationOptions:function(){return{title:"Create Data"}}}},{initialRouteName:"UserLoadingScreen",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerTitleStyle:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bs(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Fr.navigationHeader),headerLeft:function(){return s.a.createElement(tr.a,{style:{padding:6,paddingLeft:15}},s.a.createElement(Zr.a,{type:"ionicon",name:"md-arrow-back",size:25,color:"black",onPress:function(){return ie.navigate("MainStack")}}))},headerRight:function(){return s.a.createElement(tr.a,{style:{padding:6}})}}});function ys(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var Es=function(e){cr()(n,e);var t=ys(n);function n(e){var a;return rr()(this,n),(a=t.call(this,e)).state={ISLOADPAGE:!0},a}return sr()(n,[{key:"getData",value:function(){}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&(this.checkData(this.props),this.props.firebase.viewError!=e.firebase.viewError&&this.forceUpdate())}},{key:"render",value:function(){var e=this,t=this.props.firebase,n=t.firebaseIsLoading,a=t.firebaseErrorMessage,r=(this.props.firebase.viewError,t.firebaseUser);return s.a.createElement(si.a,{style:[Ir.fullSize,Ir.fill]},s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fillColMain]},a?s.a.createElement(_r.a,{style:Fr.error},a):s.a.createElement(s.a.Fragment,null),r?s.a.createElement(tr.a,{style:Ir.textContainer},s.a.createElement(_r.a,{style:Fr.text},"Welcome: ",r.displayName?r.displayName:r.email)):s.a.createElement(s.a.Fragment,null),s.a.createElement(Xr,{Texts:["Dashboard","Pens","Batchs","Growth curves","Operations","AutoPigs","Feeding","Pigs"],Images:[kr.DashBoard,kr.Pens,kr.Section,kr.GCurves,kr.System,kr.AutoPig,kr.Feed,kr.Sow],onPress:function(t){switch(t.text){case"Dashboard":ie.navigate("UserDashBoard");break;case"Pens":ie.navigate("UserPens");break;case"Batchs":ie.navigate("UserBatchs");break;case"Growth curves":ie.navigate("UserCurves");break;case"Operations":ie.navigate("UserOperations");break;case"AutoPigs":e.props.getAutoPig();break;case"Feeding":break;case"Pigs":ie.navigate("UserPigs")}}}),r&&"admin"===r.state?s.a.createElement(s.a.Fragment,null):s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth]},s.a.createElement(qr,{Text:"LogOut",onPress:function(){e.props.logOut()}}))),(n||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"})))}}]),n}(i.Component),Ss=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(ae.setFirebaseError(t))},setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},logOut:function(){return e(ae.actionStarting(zt.SIGN,Gt.USERSDATA))},getAutoPig:function(){return e(ae.actionStarting(zt.FETCH,Gt.CONSYS,{sysId:2}))}}}))(Es),Ds=n(38);function Os(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var ws=function(e){cr()(n,e);var t=Os(n);function n(e){var a;rr()(this,n);var r=(a=t.call(this,e)).setData(e),i=r.Name,s=r.Manager,o=r.Mail,c=(r.SectionsList,r.BatchList),l=r.MaxCap,u=r.CurCap;return a.state={farmName:i,farmManager:s,farmMail:o,BatchList:c,MaxCap:l,CurCap:u},a}return sr()(n,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,n=this.props.firebase.firebaseUser,a="Not set",r="Not set",i="Not set";if(t&&t.farms&&n.farms&&t.farms[Object.keys(n.farms)[0]]){var s=t.farms[Object.keys(n.farms)[0]];a=s.name?s.name:a,r=s.name?s.manager:r,i=s.name?s.email:i}var o={},c=0,l=0;return t.batchs&&Object.keys(t.batchs).filter((function(e){return"__jsogObjectId"!==e&&"update_time"!==e})).map((function(e){var n=t.batchs[e],a=pn(n,t);if(a){a.StartDate;var r=a.EndDate,i=a.TargetWeight,s=(a.PenCount,a.Animals),u=a.AverageWeight;a.AverageGrowth,a.isClosed,a.isVirtual;n.pens&&(c+=1*Object.keys(n.pens).reverse().filter((function(e){return"__jsogObjectId"!==e})).length),l+=s,n.count=s,n.weight=u,n.target=i,n.End=r,o[e]=n}})),0===c&&c++,{Name:a,Manager:r,Mail:i,BatchList:o,MaxCap:c,CurCap:l}}},{key:"getData",value:function(){var e=this.props.firebase.localDataStore;e.sections||(e.sections={}),e.pens||(e.pens={}),this.props.getFarm(),this.props.getSections(e.sections?e.sections.update_time:null),this.props.getPens(e.pens?e.pens.update_time:null),this.props.getBatch(),this.props.getWeights(e.weighings?e.weighings.update_time:null,e.sections),this.props.getCurve()}},{key:"checkData",value:function(e){}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&e.firebase.localDataStore)){var a=this.props.firebase.firebaseUser,r=this.props.firebase.localDataStore;if(r.farms&&a.farms&&r.farms[Object.keys(a.farms)[0]]){var i=r.farms[Object.keys(a.farms)[0]];if(this.state.farmName!==i.name||this.state.farmManager!==i.manager||this.state.farmMail!==i.email||r.batchs&&JSON.stringify(this.state.BatchList)!==JSON.stringify(r.batchs)||r.graphs&&r.graphs!==e.firebase.localDataStore.graphs){var s=this.setData(this.props),o=s.Name,c=s.Manager,l=s.Mail,u=s.BatchList,f=s.MaxCap,p=s.CurCap;this.setState({farmName:o,farmManager:c,farmMail:l,BatchList:u,MaxCap:f,CurCap:p},(function(){n.forceUpdate()}))}}}}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,n=this.props.firebase.localDataStore,a=0;if(this.state.BatchList){var r=Object.keys(this.state.BatchList).filter((function(t){return"__jsogObjectId"!==t&&"update_time"!==t&&(!e.state.BatchList[t].state||"Closed"!==e.state.BatchList[t].state)}));r.forEach((function(t){var n=e.state.BatchList[t];a+=n.weight/n.target*100})),a=a/(100*r.length)*100}return s.a.createElement(si.a,{style:[xr.verticalMargin,{paddingRight:5}]},s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullWidth,Ir.fill]},s.a.createElement(Qr,{Text:"Farm description"}),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.fullWidth,{height:110}]},s.a.createElement(ii,{texts:["Farm name","Manager","E-mail"],datas:[this.state.farmName,this.state.farmManager,this.state.farmMail]})),s.a.createElement(tr.a,{style:{height:20}}),s.a.createElement(fi,{text:"Farm capacity: "+this.state.CurCap+" of "+this.state.MaxCap,progress:this.state.CurCap/this.state.MaxCap*100}),s.a.createElement(fi,{text:"Farm performance:",progress:a}),this.state.BatchList?s.a.createElement(tr.a,{style:[Ir.borderContainer,Ir.fullWidth,{borderWidth:0,marginTop:10}]},s.a.createElement(_r.a,null,"Batches:"),s.a.createElement(Ds.a,{data:Object.keys(this.state.BatchList).filter((function(t){return"__jsogObjectId"!==t&&"update_time"!==t&&(!e.state.BatchList[t].state||"Closed"!==e.state.BatchList[t].state)})),renderItem:function(t){var a=t.item,r=(t.i,e.state.BatchList[a]),i=hn(r,dn(r,n.graphs)),o=r.End,c=Cr;o>i&&(c=Sr);var l=r.count;l||(l=0);var u=r.weight/r.target*100;o=new Date(o).getDate()+"/"+(new Date(o).getMonth()+1)+"/"+new Date(o).getFullYear();var f=new Date(r.time).getDate()+"/"+(new Date(r.time).getMonth()+1)+"/"+new Date(r.time).getFullYear();return s.a.createElement(fi,{text:a+" Startdate: "+f+" EndForcast: "+o+", "+l+" pigs",progress:u,color:c})},keyExtractor:function(e,t){return t.toString()}})):s.a.createElement(s.a.Fragment,null),s.a.createElement(qr,{Text:"Clear local datastore",onPress:function(){e.props.clearDataMem(),e.getData()}})),(t||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"})))}}]),n}(i.Component),Cs=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(ae.setFirebaseError(t))},setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},clearDataMem:function(){return e(ae.actionStarting(zt.CLEAR,Gt.USERSDATA))},getFarm:function(){return e(ae.actionStarting(zt.FETCH,Gt.FARMS,{}))},getSections:function(t){return e(ae.actionStarting(zt.FETCH,Gt.SECTIONS,{DataTime:t}))},getPens:function(t){return e(ae.actionStarting(zt.FETCH,Gt.PENS,{DataTime:t}))},getBatch:function(){return e(ae.actionStarting(zt.FETCH,Gt.BATCHS,{}))},getCurve:function(){return e(ae.actionStarting(zt.FETCH,Gt.GRAPH,{}))},getWeights:function(t,n){return e(ae.actionStarting(zt.FETCH,Gt.WEIGHING,{DataTime:t,MemSections:n}))}}}))(ws),Ps=n(76);function js(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function xs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?js(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):js(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ks=hr.a.create({loading:{position:"absolute",left:0,right:0,top:0,bottom:0,alignItems:"center",justifyContent:"center",backgroundColor:"#F5FCFF88"},textContainer:xs(xs({},jr.normal),{},{marginBottom:xr.normal}),inputContainer:{marginBottom:xr.small},input:xs(xs({},jr.normal),{},{height:24})}),Ts=n(96);function As(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Is(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?As(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):As(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ls(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var Ns=function(e){cr()(n,e);var t=Ls(n);function n(e){var a;rr()(this,n);var r=(a=t.call(this,e)).setData(e).PigsList;return a.state={PigsList:r,PigTag:""},a}return sr()(n,[{key:"getData",value:function(){var e=this.props.firebase.localDataStore;e.pens||(e.pens={}),this.props.getPigs(),this.props.getPens(e.pens.update_time)}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,n=null;return t&&t.pigs&&(n=on(t.pigs)),{PigsList:n}}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase&&this.props.firebase.localDataStore&&this.props.firebase.localDataStore.pigs&&JSON.stringify(this.state.PigsList)!==JSON.stringify(on(this.props.firebase.localDataStore.pigs)))){var n=this.setData(this.props).PigsList;this.setState({PigsList:n})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,n=this.props.firebase.localDataStore;return s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullWidth,Ir.fill]},s.a.createElement(tr.a,{style:[Ir.fill,Ir.buttonContainer,Ir.fullWidth,xr.bottomMargin,Ir.column]},s.a.createElement(Fs,{connectedState:null}),s.a.createElement(Us,{DeviceData:null}),this.state.PigsList?s.a.createElement(tr.a,{style:[Ir.fill,Ir.borderContainer,xr.smallHorizontalPadding,xr.smallVerticalPadding,{maxWidth:800,marginTop:10}]},s.a.createElement(Ps.a,{style:Ms.container},s.a.createElement(Ds.a,{data:Object.keys(this.state.PigsList),renderItem:function(t){var a=t.item,r="-",i="-";if(e.state.PigsList[a].pen&&0!=e.state.PigsList[a].pen&&(r=e.state.PigsList[a].pen,n.pens&&n.pens[r])){var o=n.pens[r];i=o.section}return s.a.createElement(tr.a,{style:[Ir.fill,Ir.rowCenter,Ir.fullWidth,{height:35}]},s.a.createElement(ti,{Title:a,itemStyle:[{height:35}],onPress:function(){e.props.setData(a,i,r),ie.navigate("DataDisplay")}}),s.a.createElement(ti,{itemStyle:[{width:70,height:35,justifyContent:"center"}],Title:r,onPress:function(){e.setState({PigTag:a})}}),s.a.createElement(ti,{itemStyle:[{width:90,height:35}],Title:i,onPress:function(){e.setState({PigTag:a})}}))},keyExtractor:function(e){return"PigTag_"+e}}))):s.a.createElement(s.a.Fragment,null),s.a.createElement(Zr.b,{label:"Pig-tag:",containerStyle:[{borderWidth:1,marginTop:10}],style:[Fr.input],onChangeText:function(t){e.setState({PigTag:t})},value:this.state.PigTag}),s.a.createElement(li,{pig:!0,pigTag:this.state.PigTag,PigsList:this.state.PigsList}))),(t||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"}))}}]),n}(i.Component),Rs=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},getPens:function(t){return e(ae.actionStarting(zt.FETCH,Gt.PENS,{DataTime:t}))},getPigs:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e(ae.actionStarting(zt.FETCH,Gt.PIGS,{TagId:t}))},setData:function(t,n,a){return e(ae.setCurrentData({pigId:t,type:Gt.PIGS,section:n,dataId:a}))}}}))(Ns),Fs=function(e){return"ios"===u.a.OS||"android"===u.a.OS?s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.fullWidth,xr.bottomMargin,Ir.rowCenter]},s.a.createElement(tr.a,{style:[Ir.fill,Ir.fullWidth,Ir.rowMain]},s.a.createElement(tr.a,{style:[Ir.fill,Ir.column,{backgroundColor:"red"}]},s.a.createElement(tr.a,{style:[Ir.fill,Ir.row,Ir.fullWidth,{backgroundColor:"blue"}]},s.a.createElement(tr.a,{style:{justifyContent:"center",alignItems:"center"}})),s.a.createElement(tr.a,{style:[Ir.fill,Ir.row,Ir.fullWidth]},s.a.createElement(_r.a,null,"Messages"),s.a.createElement(_r.a,null,"Errors"))),s.a.createElement(tr.a,{style:[Ir.fill,Ir.fullWidth,Ir.rowCenter,{maxWidth:150}]},e&&e.connectedState===Ae?s.a.createElement(tr.a,{style:Is(Is({},Ms.circle),{},{backgroundColor:"green",justifyContent:"center",alignItems:"center"})},s.a.createElement(_r.a,null,"Device is"),s.a.createElement(_r.a,null,"connected")):s.a.createElement(tr.a,{style:Is(Is({},Ms.circle),{},{backgroundColor:"red",justifyContent:"center",alignItems:"center"})},s.a.createElement(_r.a,null,"No Device"),s.a.createElement(_r.a,null,"connected"))))):s.a.createElement(s.a.Fragment,null)},Us=function(e){if("ios"===u.a.OS||"android"===u.a.OS){var t=Object(o.c)(),n=e&&e.DeviceData?e.DeviceData:null;return s.a.createElement(tr.a,{style:{flexDirection:"row",justifyContent:"space-between",borderWidth:1,borderColor:"#000",borderRadius:25,paddingHorizontal:15,paddingVertical:10,marginBottom:10}},s.a.createElement(tr.a,{style:(ks.textContainer,{paddingTop:10})},n&&n.tagid?s.a.createElement(tr.a,{style:{marginBottom:5}},s.a.createElement(_r.a,null,"TAG Id:"),s.a.createElement(_r.a,null,n.tagid)):s.a.createElement(s.a.Fragment,null),n&&n.FatLayers&&n.FatLayers>0?s.a.createElement(tr.a,{style:{marginBottom:5}},s.a.createElement(_r.a,null,"Layers received: ",n.FatLayers),s.a.createElement(_r.a,null,"Layer 1: ",n.FatL1),s.a.createElement(_r.a,null,"Layer 2: ",n.FatL2),s.a.createElement(_r.a,null,"Layer 3: ",n.FatL3)):s.a.createElement(s.a.Fragment,null)),n&&n.tagid?s.a.createElement(tr.a,{style:{flexDirection:"row",justifyContent:"space-between"}},known?s.a.createElement(qr,{buttonStyle:{minWidth:0},Text:"Open data",onPress:function(){t(ae.setCurrentData({pigId:known,type:Gt.PIGS})),ie.navigate("DataDisplay")}}):s.a.createElement(s.a.Fragment,null),s.a.createElement(qr,{buttonStyle:{minWidth:0},Text:"Save Tag",onPress:function(){}})):s.a.createElement(s.a.Fragment,null))}return s.a.createElement(s.a.Fragment,null)},Ms=hr.a.create({circle:{width:125,height:125,borderRadius:62.5,marginTop:xr.tiny,marginLeft:xr.tiny}});function Bs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var Ws=function(e){cr()(n,e);var t=Bs(n);function n(e){var a;rr()(this,n);var r=(a=t.call(this,e)).setData(e),i=r.Sections,s=r.Weighings,o=r.Mid;return a.state={Mid:o,Sections:i,Weighings:s},a}return sr()(n,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,n={};t&&t.sections&&(n=on(e.firebase.localDataStore.sections));var a=0,r={};if(t&&t.weighings)for(var i in r=t.weighings,t.weighings)if(t.weighings[i]&&Object.keys(t.weighings[i]).length>0){var s=t.weighings[i][Object.keys(t.weighings[i])[0]].weight;s&&(a>0?a=(a+s)/2:a+=s)}return{Sections:n,Weighings:r,Mid:a}}},{key:"getData",value:function(){var e=this.props.firebase.localDataStore;e.sections||(e.sections={}),e.pens||(e.pens={}),e.weighings||(e.weighings={}),e.batchs||(e.batchs={}),e.graphs||(e.graphs={}),this.props.getSections(e.sections.update_time),this.props.getPens(e.pens.update_time),this.props.getWeights(e.weighings.update_time,e.sections),this.props.getBatch(e.batchs.update_time),this.props.getCurve(e.graphs.update_time)}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&(this.props.firebase.localDataStore.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(on(this.props.firebase.localDataStore.sections))||this.props.firebase.localDataStore.weighings&&JSON.stringify(this.state.Weighings)!==JSON.stringify(on(this.props.firebase.localDataStore.weighings))))){var n=this.setData(this.props),a=n.Sections,r=n.Mid;this.setState({Mid:r,Sections:a})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,n=this.props.firebase.localDataStore;return s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.fullSize,Ir.fill]},this.state.Sections?s.a.createElement(si.a,{style:[xr.verticalMargin,{paddingRight:5}]},s.a.createElement(Ts.b,{itemDimension:70,spacing:10,sections:Object.keys(this.state.Sections).filter((function(e){return"update_time"!==e})).map((function(t){var n=on(e.state.Sections[t].pens);return{title:t,data:Object.keys(n)}})),renderSectionHeader:function(e){var t=e.section;return s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth,{marginBottom:0}]},s.a.createElement(qr,{Text:t.title,buttonStyle:{backgroundColor:Pr},onPress:function(){}}))},renderItem:function(t){var a=t.item,r=br,i=null,o=vn(n,a);if(null!=o&&(r=Or),o&&o.Now){var c=o.Batch,l=2,u=5;c.datas.devianceMin&&(l=c.datas.devianceMin),c.datas.devianceMax&&(u=c.datas.devianceMax);var f=o.TempEx,p=o.Now;if(p>=(c.datas.target?c.datas.target:o.Batch.datas.target))r=Or;else r=f&&p<f&&p<f-f/100*l?Sr:f&&p>f&&p>f+f/100*u?Dr:Er;i=Math.round(100*p)/100}return s.a.createElement(Gr.a,{style:[Ir.borderContainer,{width:70,height:70,alignItems:"center",justifyContent:"center",backgroundColor:r}],onPress:function(){e.props.setCurrentData(a),ie.navigate("DataDisplay")}},s.a.createElement(_r.a,null,a),i?s.a.createElement(_r.a,null,i+" kg"):s.a.createElement(s.a.Fragment,null))}})):s.a.createElement(tr.a,{style:[Ir.fillRowCenter,Ir.center,Ir.logoContainer]},s.a.createElement(dr.a,{style:Ir.fullSize,source:kr.Hexa_icon,resizeMode:"contain"}))),(t||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"}))}}]),n}(i.Component),Vs=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},getSections:function(t){return e(ae.actionStarting(zt.FETCH,Gt.SECTIONS,{DataTime:t}))},getPens:function(t){return e(ae.actionStarting(zt.FETCH,Gt.PENS,{DataTime:t}))},getWeights:function(t,n){return e(ae.actionStarting(zt.FETCH,Gt.WEIGHING,{DataTime:t,MemSections:n}))},getBatch:function(t){return e(ae.actionStarting(zt.FETCH,Gt.BATCHS,{DataTime:t}))},getCurve:function(t){return e(ae.actionStarting(zt.FETCH,Gt.GRAPH,{GraphId:"",DataTime:t}))},setCurrentData:function(t){return e(ae.setCurrentData({type:Gt.PENS,penId:t}))}}}))(Ws),_s=(n(628),n(367)),Hs=n(72);function Gs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var zs=rs.a.get("window"),Js=rs.a.get("screen"),Ys=function(e){cr()(n,e);var t=Gs(n);function n(e){var a;rr()(this,n),(a=t.call(this,e)).onChange=function(e){var t=e.window,n=e.screen;a.setState({dimensions:{window:t,screen:n}})},a.onMultiChange=function(e){var t=Object(Hs.xorBy)(a.state.selectedPens,[e],"id");a.setState({selectedPens:t})};var r=a.setData(e),i=r.BatchList,s=r.freePens;return a.state={dimensions:{window:zs,screen:Js},BatchList:i,Display:0,BatchName:"",ShowPicker:!1,StartD:(new Date).getTime(),Curve:"",TargetWeight:"",DevianceMin:"",DevianceMax:"",freePens:s,avaiblePens:s,selectedPens:[]},a}return sr()(n,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,n=t.batchs,a=[];return n&&t.sections&&Object.keys(t.sections).forEach((function(e){if(t.sections[e].pens){Object.keys(t.sections[e].pens).filter((function(e){return"__jsogObjectId"!==e&&"update_time"!==e})).forEach((function(t){var r=!0;if(Object.keys(n).forEach((function(e){n[e].state&&"Closed"===n[e].state||n[e].pens&&n[e].pens[t]&&!n[e].pens[t].enddate&&(r=!1)})),r){var i={item:t,id:e+"_"+t};a.push(i)}}))}})),{BatchList:n,freePens:a}}},{key:"getData",value:function(){var e=this.props.firebase.localDataStore;e.sections||(e.sections={}),e.pens||(e.pens={}),this.props.getBatch(e.batchs?e.batchs.update_time:null),this.props.getSections(e.sections?e.sections.update_time:null),this.props.getPens(e.pens?e.pens.update_time:null),this.props.getCurve()}},{key:"checkData",value:function(e){}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&(this.props.firebase.localDataStore.batchs&&JSON.stringify(this.state.BatchList)!==JSON.stringify(this.props.firebase.localDataStore.batchs)||this.props.firebase.localDataStore.pens&&JSON.stringify(this.state.pens)!==JSON.stringify(this.props.firebase.localDataStore.pens)))){var n=this.setData(this.props),a=n.BatchList,r=n.freePens;this.setState({freePens:r,BatchList:a})}}},{key:"componentDidMount",value:function(){rs.a.addEventListener("change",this.onChange),this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentWillUnmount",value:function(){rs.a.removeEventListener("change",this.onChange)}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,n=this.props.firebase.viewError,a=this.props.firebase.localDataStore,r=this.state.dimensions.window.width>900,i="ios"===u.a.OS||"android"===u.a.OS||!r;return s.a.createElement(si.a,{style:[xr.verticalMargin,{paddingRight:5}]},s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fill]},n?s.a.createElement(_r.a,{style:Fr.error},n):s.a.createElement(s.a.Fragment,null),0===this.state.Display?s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,{marginHorizontal:0,paddingHorizontal:-20}]},this.state.BatchList?s.a.createElement(tr.a,{style:[Ir.fill,Ir.fullWidth,xr.smallHorizontalPadding,xr.smallVerticalPadding,{maxWidth:800,marginTop:10}]},s.a.createElement(Ds.a,{scrollEnabled:!0,style:[Ir.fill],data:Object.keys(this.state.BatchList).filter((function(e){return"__jsogObjectId"!==e&&"update_time"!==e})),renderItem:function(t){var n=t.item,a=(t.i,n);return e.state.BatchList[n]&&e.state.BatchList[n].state&&"Closed"===e.state.BatchList[n].state&&(a+="  Closed"),s.a.createElement(qr,{Text:a,onPress:function(){var t="default";e.state.BatchList[n]&&e.state.BatchList[n].gcurve&&"string"!==typeof(t=e.state.BatchList[n].gcurve)&&(t=null),e.props.setCurrentData(n,t),ie.navigate("DataPlotter")}})},keyExtractor:function(e,t){return t.toString()}})):s.a.createElement(s.a.Fragment,null),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.borderContainer,Ir.midWidth]},s.a.createElement(qr,{Text:"New Batch",onPress:function(){var t=0;a&&a.graphs&&(t=Object.keys(a.graphs).filter((function(e){return"__jsogObjectId"!==e&&"update_time"!==e}))[0]),e.setState({Display:1,DevianceMin:String(2),DevianceMax:String(2),Curve:t,freePens:e.state.freePens,avaiblePens:e.state.freePens,selectedPens:[]})}}),this.state.BatchList?s.a.createElement(qr,{Text:"Edit or Close Batch",onPress:function(){var t=Object.keys(e.state.BatchList).filter((function(t){return"__jsogObjectId"!==t&&"update_time"!==t&&(!e.state.BatchList[t].state||"Closed"!==e.state.BatchList[t].state)}))[0],n=e.state.BatchList[t];if(n){var r=[],i=on(n.pens);Object.keys(i).forEach((function(e){if(!n.pens[e].enddate&&a.pens&&a.pens[e]){var t=a.pens[e],i={};i.item=e,i.id=t.section+"_"+e,r.push(i)}})),e.setState({Display:2,BatchName:t,StartD:n.time,Curve:n.gcurve,TargetWeight:String(n.datas.target),DevianceMin:String(n.datas.devianceMin),DevianceMax:String(n.datas.devianceMax),avaiblePens:e.state.freePens.concat(r),selectedPens:r})}}}):s.a.createElement(s.a.Fragment,null))):s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,{marginHorizontal:0,paddingHorizontal:-20}]},1===this.state.Display?s.a.createElement(Zr.b,{label:"BatchName",containerStyle:[{borderWidth:1,marginTop:10}],style:[Fr.input],onChangeText:function(t){t?cn(t)&&e.setState({BatchName:t}):e.setState({BatchName:t})},value:this.state.BatchName}):s.a.createElement(tr.a,{style:[Ir.borderContainer,Ir.fullWidth,{height:60,borderRadius:0,alignItems:"center"}]},s.a.createElement(di.a,{mode:"dropdown",selectedValue:this.state.BatchName,style:[Ir.fullWidth,{height:50,justifyContent:"flex-end"}],onValueChange:function(t,n){if(e.state.BatchList&&e.state.BatchList[t]){var r=e.state.BatchList[t],i=[],s=on(r.pens);Object.keys(s).forEach((function(e){if(!r.pens[e].enddate&&a.pens&&a.pens[e]){var t=a.pens[e],n={};n.item=e,n.id=t.section+"_"+e,i.push(n)}})),e.setState({BatchName:t,StartD:r.time,Curve:r.gcurve,DevianceMin:String(r.datas.devianceMin),DevianceMax:String(r.datas.devianceMax),avaiblePens:e.state.freePens.concat(i),selectedPens:i})}}},Object.keys(this.state.BatchList).filter((function(t){return"__jsogObjectId"!==t&&"update_time"!==t&&(!e.state.BatchList[t].state||"Closed"!==e.state.BatchList[t].state)})).map((function(e,t){return s.a.createElement(di.a.Item,{label:e,value:e,key:t})})))),s.a.createElement(tr.a,{style:[Ir.fullWidth,i?{}:Ir.row,{zIndex:999}]},s.a.createElement(tr.a,{style:[i?{}:Ir.halvWidth,{borderWidth:1,marginTop:10,paddingHorizontal:5,paddingTop:0,borderRadius:0,alignItems:"center",zIndex:1}]},s.a.createElement(tr.a,{style:[Ir.fullWidth,{alignItems:"flex-start",marginBottom:-5}]},s.a.createElement(_r.a,{style:[Fr.text,{marginHorizontal:5,marginTop:2,color:wr,fontSize:15,fontWeight:"bold"}]},"Start date:")),s.a.createElement(tr.a,{style:[Ir.fullWidth,i?{marginBottom:10}:{},{alignItems:"flex-start"}]},s.a.createElement(mi,{Selected:this.state.StartD,onValueChange:function(t){e.setState({StartD:t.getTime()})}}))),s.a.createElement(tr.a,{style:[i?{}:Ir.halvWidth,{borderWidth:1,marginTop:10,paddingHorizontal:5,paddingTop:0,borderRadius:0,alignItems:"center",zIndex:1}]},s.a.createElement(tr.a,{style:[Ir.fullWidth,{alignItems:"flex-start",marginBottom:-5}]},s.a.createElement(_r.a,{style:[Fr.text,{marginHorizontal:5,marginTop:2,color:wr,fontSize:15,fontWeight:"bold"}]},"Growth curve:")),s.a.createElement(tr.a,{style:[Ir.fullWidth,{alignItems:"center"}]},s.a.createElement(di.a,{mode:"dropdown",selectedValue:this.state.Curve,style:[Ir.fullWidth,{height:30}],onValueChange:function(t,n){e.setState({Curve:t})}},Object.keys(a.graphs).filter((function(e){return"__jsogObjectId"!==e&&"update_time"!==e})).map((function(e,t){return s.a.createElement(di.a.Item,{label:e,value:e,key:t})})))))),s.a.createElement(tr.a,{style:[Ir.fullWidth,Ir.row]},s.a.createElement(Zr.b,{label:"Target weight",type:"number",step:"0.1",containerStyle:[Ir.halvWidth,{borderWidth:1,marginTop:10}],style:[Fr.input,{marginBottom:-10}],onChangeText:function(t){(!isNaN(t)||t.endsWith(".")&&t.split(".").length<=2)&&e.setState({TargetWeight:t})},value:this.state.TargetWeight})),s.a.createElement(tr.a,{style:[Ir.fullWidth,Ir.row]},s.a.createElement(Zr.b,{label:"Deviance Min alert procentage",type:"number",step:"0.1",containerStyle:[Ir.halvWidth,{borderWidth:1,marginTop:10}],style:[Fr.input,{marginBottom:-10}],onChangeText:function(t){(!isNaN(t)||t.endsWith(".")&&t.split(".").length<=2)&&e.setState({DevianceMin:t})},value:this.state.DevianceMin}),s.a.createElement(Zr.b,{label:"Deviance Max alert procentage",type:"number",step:"0.1",containerStyle:[Ir.halvWidth,{borderWidth:1,marginTop:10}],style:[Fr.input,{marginBottom:-10}],onChangeText:function(t){(!isNaN(t)||t.endsWith(".")&&t.split(".").length<=2)&&e.setState({DevianceMax:t})},value:this.state.DevianceMax})),s.a.createElement(tr.a,{style:[Ir.fullWidth,{borderWidth:1,marginTop:10,paddingHorizontal:10,paddingTop:5}]},s.a.createElement(_s.a,{label:"Pens in Batch..",labelStyle:{color:wr,fontSize:15,fontWeight:"bold"},optionsLabelStyle:{minWidth:100,color:"black",fontSize:12,fontWeight:"bold"},options:this.state.avaiblePens,selectedValues:this.state.selectedPens,onMultiSelect:this.onMultiChange,onTapClose:this.onMultiChange,isMulti:!0})),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.borderContainer,Ir.midWidth,{marginTop:10}]},2===this.state.Display?s.a.createElement(qr,{Text:"Close Batch",onPress:function(){var t=a.batchs[e.state.BatchName];if(t){var n=pn(t,a),r=(n.StartDate,n.EndDate,n.TargetWeight,n.PenCount,n.Animals);n.AverageWeight,n.AverageGrowth,n.isClosed,n.isVirtual;if(r)e.props.setViewError("The batch still contains active pens, please clear pens before closing the batch");else{var i={name:e.state.BatchName,state:"Closed"};e.props.updateBatch(i),e.setState({Display:0}),e.props.getPens(a.pens.update_time)}}}}):s.a.createElement(s.a.Fragment,null),s.a.createElement(qr,{Text:"Save",onPress:function(){var t,n=!0;if(""!==e.state.BatchName){var r=e.state.BatchName;Object.keys(e.state.BatchList).includes(r)?1===e.state.Display&&(n=!1,e.props.setViewError("BatchName error, batch allready exists")):2===e.state.Display&&(n=!1,e.props.setViewError("BatchName error, batch does not exists"))}else n=!1,e.props.setViewError("BatchName error");(""!==e.state.StartD||(n=!1,e.props.setViewError("Startdate error")),""!==e.state.TargetWeight)?((t=e.state.TargetWeight).length>3||isNaN(t))&&(n=!1):(n=!1,e.props.setViewError("Tartget weight setting error"));""!==e.state.DevianceMin?((t=e.state.DevianceMin).length>3||isNaN(t)||t>100)&&(n=!1):(n=!1,e.props.setViewError("DevianceMin setting error"));""!==e.state.DevianceMax?((t=e.state.DevianceMax).length>3||isNaN(t)||t>100)&&(n=!1):(n=!1,e.props.setViewError("DevianceMax setting error"));""===e.state.Curve&&(n=!1,e.props.setViewError("Growth curve setting error, please reselect a curve"));var i={};if(e.state.selectedPens&&e.state.selectedPens.length>0&&e.state.selectedPens.forEach((function(e){i[e.item]=!0})),Object.keys(i).length!==e.state.selectedPens.length&&(n=!1,e.props.setViewError("An error occurred during Pen assigning (please update the page)")),n){e.props.setViewLoading(!0);var s=new Date(e.state.StartD),o=new Date(s.getFullYear(),s.getMonth(),s.getDate()).getTime(),c={name:e.state.BatchName,gcurve:e.state.Curve,pens:i,time:o,datas:{target:e.state.TargetWeight,devianceMin:e.state.DevianceMin,devianceMax:e.state.DevianceMax}};1===e.state.Display?e.props.setBatch(c):2===e.state.Display&&e.props.updateBatch(c),e.setState({Display:0}),e.props.getPens(a.pens.update_time),e.props.setViewError(null),e.props.setViewLoading(!1)}}})))),(t||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"})))}}]),n}(i.Component),qs=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},getCurve:function(){return e(ae.actionStarting(zt.FETCH,Gt.GRAPH,{}))},getSections:function(t){return e(ae.actionStarting(zt.FETCH,Gt.SECTIONS,{DataTime:t}))},getPens:function(t){return e(ae.actionStarting(zt.FETCH,Gt.PENS,{DataTime:t}))},getBatch:function(t){return e(ae.actionStarting(zt.FETCH,Gt.BATCHS,{DataTime:t}))},setBatch:function(t){return e(ae.actionStarting(zt.CREATE,Gt.BATCHS,{Batch:t}))},updateBatch:function(t){return e(ae.actionStarting(zt.UPDATE,Gt.BATCHS,{BatchId:t.name,Batch:t}))},setCurrentData:function(t,n){return e(ae.setCurrentData({type:Gt.PENS,batchId:t,curveId:n}))}}}))(Ys),Xs=n(238);function Qs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Zs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qs(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ks(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}function $s(e,t){return Math.floor(Math.random()*(t-e+1))+e}function eo(){var e=[10,250],t=[10,250],n=[10,250],a=[.2,1],r=$s(e[0],e[1]),i=$s(t[0],t[1]),s=$s(n[0],n[1]),o=$s(100*a[0],100*a[1])/100;return{r:r,g:i,b:s,a:o,rgbaValue:"rgba("+r+","+i+","+s+","+o+")"}}var to=rs.a.get("window"),no=rs.a.get("screen");var ao=function(e){cr()(n,e);var t=Ks(n);function n(e){var a;if(rr()(this,n),(a=t.call(this,e)).onChange=function(e){var t=e.window,n=e.screen;a.setState({dimensions:{window:t,screen:n}})},a.props.Display)a.state={dimensions:{window:to,screen:no}};else{var r=a.setData(e),i=r.TempGraph,s=r.Legends,o=r.DataSets,c=r.StartDate,l=r.EndDate;a.state={dimensions:{window:to,screen:no},TempGraph:i,Legends:s,DataSets:o,StartDate:c,EndDate:l,Labels:[],ActiveIndex:0,ActiveLength:"Batch",ActiveDataSets:o,ActiveStartDate:c,ActiveEndDate:l,ViewPoint:null}}return a}return sr()(n,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,n=e.firebase.currentData,a={periode:"Days",data:[]},r=[],i=[],s=new Date,o=s.getTime(),c=new Date(s.setDate(s.getDate()+56));if(t&&t.batchs&&n&&n.batchId){var l=t.batchs[n.batchId];if(a=dn(l,t.graphs,n.curveId)){n.curveId?a.name=n.curveId:a.name="Template",o=l.time,l.pens&&(r=r.concat(Object.keys(l.pens).reverse().filter((function(e){return"__jsogObjectId"!==e}))));for(var u=[],f=new Date(o),p=0;p<a.data.length;p++)u.push(f.getTime()),p<a.data.length-1&&(f=new Date(gn(f,a.periode)));if(c=f.getTime(),u.push(c),i.push({data:a.data,dataX:u,color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;return"rgba(0, 0, 0, "+e+")"}}),t.weighings){var d=i,h=c,g=new Date(gn(new Date(h),a.periode)).getTime(),m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=[],o=0,c=!(!t||t.state&&"Closed"===t.state),l=[];return t.pens&&(l=Object.keys(t.pens).filter((function(e){return"__jsogObjectId"!==e})).reverse()),l.forEach((function(l){var u=t.pens[l],f=eo(),p=[],d=[];if(e.weighings[l]||t.state&&"Closed"===t.state){var h=e.weighings[l];if(t.state&&"Closed"===t.state&&(h=t.closed.weighings[l]),h&&Object.keys(h).length>=1&&(Object.keys(h).sort((function(e,t){return h[e].time-h[t].time})).forEach((function(e){var t=h[e];if(t.weight&&(!a||t.time>=a)&&(!r||t.time<=r)&&(!u.startdate||t.time>=u.startdate)&&(!u.enddate||t.time<=u.enddate)){var n=t.weight;t.count&&(n/=t.count),p.push(n);var i=new Date(t.time);d.push(i),!r&&t.time>o&&(o=t.time)}})),c&&i)){var g=vn(e,l);if(g&&g.lastWeighing){var m=g.FirstSpot?new Date(g.FirstSpot):new Date(g.lastWeighing.time);g.data.forEach((function(e,t){p.push(e),m=0===t&&g.FirstSpot?m:gn(m,n.periode),d.push(m)}))}}}for(;p.length<n.data.length;)p.push(null),d.push(null);s.push({Pen:l,data:p,dataX:d,color:function(){return f.rgbaValue}})})),{DataSets:s,EndDate:o}}(t,l,a,o,g,this.props.Predict);i=m.DataSets,c=m.EndDate;i=d.concat(i),h>c&&(c=h),(r=r.filter((function(e){return"__jsogObjectId"!==e&&(e===a.name||i.some((function(t){return t.Pen===e})))}))).unshift(a.name)}}}return{TempGraph:a,Legends:r,DataSets:i,StartDate:o,EndDate:c}}},{key:"setGraphPeriode",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.ActiveLength,n=[],a=this.state.StartDate,r=this.state.EndDate,i=this.state.ActiveIndex,s="Weeks";this.state.TempGraph&&this.state.TempGraph.periode&&(s=this.state.TempGraph.periode);var o=new Date(a),c=(this.state.ActiveDataSets,(new Date).getTime());switch(this.state.ActiveLength){case"Days":for(var l=0;l<i||-1===i;l++){var u=new Date(gn(o,this.state.ActiveLength));if(-1===i&&u>c){i=l-1;break}o=u}a=o.getTime(),n.push(o.getDate()+"/"+(o.getMonth()+1)),o=new Date(gn(o,this.state.ActiveLength)),n.push(o.getDate()+"/"+(o.getMonth()+1)),r=o.getTime(),o=new Date(gn(o,this.state.ActiveLength));break;case"Weeks":for(l=0;l<i||-1===i;l++){u=new Date(gn(o,this.state.ActiveLength));if(-1===i&&u>c){i=l;break}o=u}a=o.getTime();for(l=0;l<=7;l++)n.push(o.getDate()+"/"+(o.getMonth()+1)),r=o.getTime(),o=new Date(gn(o,"Days"));break;case"Batch":default:for(;o.getTime()<=r;){switch(s){case"Days":case"Month":n.push(o.getDate()+"/"+(o.getMonth()+1));break;case"Weeks":default:n.push(o.getDate()+"/"+(o.getMonth()+1))}o=new Date(gn(o,s))}}var f=[];if(t&&"Batch"!==t){var p=gn(new Date(r),this.state.ActiveLength).getTime();this.state.DataSets.forEach((function(t){var n=Zs(Zs({},t),{},{data:[],dataX:[]}),i=null;if(new Date(t.dataX[0]).getTime()<=r){for(var s=0;s<t.data.length;s++){if(new Date(t.dataX[s]).getTime()>=a){if(n.data.push(t.data[s]),n.dataX.push(t.dataX[s]),gn(new Date(t.dataX[s]),e.state.ActiveLength).getTime()>p){t.dataX.length-1>=s&&s;break}}else null!==t.dataX[s]&&(i=s)}if(null!==i&&n.dataX[0]>a&&t.data.length>=i+1){var o=mn([t.dataX[i],t.dataX[i+1]],[t.data[i],t.data[i+1]],a,t.data[i],t.dataX[i]);console.log(o),n.data.unshift(o.ExValue),n.dataX.unshift(a)}}f.push(n)}))}else f=this.state.DataSets;if(this.state.ActiveIndex>0&&0===f[0].data.length){l=this.state.ActiveIndex;l-=1,this.setState({ActiveIndex:l})}else this.setState({ActiveLength:t,Labels:n,ActiveDataSets:f,ActiveStartDate:a,ActiveEndDate:r,ActiveIndex:i},(function(){e.forceUpdate()}))}},{key:"getData",value:function(){this.props.firebase.localDataStore,this.props.firebase.currentData}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(!this.props.Display&&this.props!==e&&this.props.firebase.localDataStore&&(JSON.stringify(e.firebase.localDataStore.weighings)!==JSON.stringify(this.props.firebase.localDataStore.weighings)||JSON.stringify(e.firebase.localDataStore.pens)!==JSON.stringify(this.props.firebase.localDataStore.pens)||JSON.stringify(e.firebase.localDataStore.graphs)!==JSON.stringify(this.props.firebase.localDataStore.graphs)||e.Predict!==this.props.Predict||e.weighings!==this.props.weighings)){var a=this.setData(this.props),r=a.TempGraph,i=a.Legends,s=a.DataSets,o=a.StartDate,c=a.EndDate;JSON.stringify(this.state.TempGraph)===JSON.stringify(r)&&JSON.stringify(this.state.Legends)===JSON.stringify(i)&&JSON.stringify(this.state.DataSets)===JSON.stringify(s)&&JSON.stringify(this.state.StartDate)===JSON.stringify(o)&&JSON.stringify(this.state.EndDate)===JSON.stringify(c)||this.setState({TempGraph:r,Legends:i,DataSets:s,StartDate:o,EndDate:c},(function(){n.setGraphPeriode(n.state.ActiveLength)}))}this.props.Display||this.state===t||this.state.ActiveLength==t.ActiveLength&&this.state.ActiveIndex==t.ActiveIndex||this.setGraphPeriode(this.state.ActiveLength)}},{key:"componentDidMount",value:function(){this.getData(),this.props.height||rs.a.addEventListener("change",this.onChange),this.props.Display||this.setGraphPeriode(this.state.ActiveLength)}},{key:"componentWillUnmount",value:function(){this.props.height||rs.a.removeEventListener("change",this.onChange)}},{key:"render",value:function(){var e=this,t=this.props.firebase.localDataStore,n=!1;t.batchs&&this.props.firebase.currentData&&this.props.firebase.currentData.batchId&&(n=!(!t.batchs||!t.batchs[this.props.firebase.currentData.batchId]||t.batchs[this.props.firebase.currentData.batchId].state&&"Closed"===t.batchs[this.props.firebase.currentData.batchId].state));var a=this.state.dimensions.window.width>1e3;this.props.Display&&(a=!1);var r="ios"===u.a.OS||"android"===u.a.OS||!a,i=this.state.dimensions.window.height;i=this.props.Height?this.props.Height:500;var o=2*this.state.dimensions.window.width;this.props.Width?o=this.props.Width:(o-=4*xr.normal,o/=a?2.05:1);var c=this.props.Display?[{color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;return"rgba(0, 0, 0, "+e+")"},data:[],dataX:[]}]:this.state.ActiveDataSets,l=this.props.Display?[]:this.state.Legends.slice(0,c.length),f=this.props.Display?1:this.state.ActiveStartDate,p=this.props.Display?this.props.DataPoints.length:this.state.ActiveEndDate,d=[];return this.props.Display?this.props.DataPoints.forEach((function(e,t){c[0].data.push(e.value),c[0].dataX.push(t+1),d.push(t)})):d=this.state.Labels,s.a.createElement(tr.a,{style:[Ir.fullWidth,Ir.fill]},s.a.createElement(tr.a,{style:[Ir.fullWidth,Ir.fill]},s.a.createElement(si.a,{horizontal:!0,showsHorizontalScrollIndicator:!a&&!this.props.Display,style:[Ir.fullSize,r&&!this.props.Display?{maxWidth:o/2,maxHeight:540}:{}]},this.state.TempGraph||this.props.Display&&d&&d.length>0&&c&&c.length>0?s.a.createElement(Xs.a,{style:[{marginLeft:-15,minHeight:i,minWidth:o}],width:o,height:i,data:{labels:d,xMinMax:[f,p,d.length-1],legend:l,datasets:c},onDataPointClick:function(t){e.setState({ViewPoint:t})},withShadow:!1,withVerticalLines:!0,fromZero:!1,segments:15,verticalLabelRotation:0,xLabelsOffset:0,chartConfig:{backgroundColor:mr,backgroundGradientFrom:mr,backgroundGradientTo:mr,decimalPlaces:1,color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba(0, 0, 0, "+e+")"},labelColor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba(0, 0, 0, "+e+")"},style:{borderRadius:16,height:i},propsForDots:{r:"5",strokeWidth:"0.5",stroke:mr}}}):s.a.createElement(s.a.Fragment,null))),this.props.Display?s.a.createElement(s.a.Fragment,null):s.a.createElement(tr.a,{style:[Ir.fullWidth,Ir.mainCenter]},s.a.createElement(tr.a,{style:[Ir.fill,Ir.fullWidth,Ir.rowCenter]},s.a.createElement(tr.a,{style:{paddingRight:2.5}},s.a.createElement(Zr.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){if(0!=e.state.ActiveIndex){var t=e.state.ActiveIndex;t-=1,e.setState({ActiveIndex:t})}}})),s.a.createElement(qr,{Text:"Day view",buttonStyle:{width:a?100:80},onPress:function(){e.setState({ActiveIndex:-1,ActiveLength:"Days"})}}),s.a.createElement(qr,{Text:"Week view",buttonStyle:{width:a?100:80,marginLeft:2.5},onPress:function(){e.setState({ActiveIndex:-1,ActiveLength:"Weeks"})}}),s.a.createElement(qr,{Text:"Full Batch",buttonStyle:{width:a?100:80,marginLeft:2.5},onPress:function(){e.setState({ActiveIndex:0,ActiveLength:"Batch"})}}),s.a.createElement(tr.a,{style:{paddingLeft:2.5}},s.a.createElement(Zr.a,{name:"md-arrow-forward",type:"ionicon",size:25,color:"black",onPress:function(){var t=e.state.ActiveIndex;t+=1,e.setState({ActiveIndex:t})}}))),n&&!r?s.a.createElement(tr.a,{style:[Ir.fullWidth,Ir.rowCenter]},s.a.createElement(ro,{control:this,props:this.props,state:this.state})):s.a.createElement(s.a.Fragment,null)))}}]),n}(i.Component),ro=function(e){if("ios"===u.a.OS||"android"===u.a.OS){if(e.state.ViewPoint){var t=e.state.Labels[e.state.ViewPoint.index];if(e.state.ViewPoint.dataset.dataX){var n=new Date(e.state.ViewPoint.dataset.dataX[e.state.ViewPoint.index]);t=n.getFullYear()+"."+(n.getMonth()+1)+"."+n.getDate()}var a=e.state.ViewPoint.value;return s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.fullWidth,Ir.rowCenter,{maxHeight:100}]},s.a.createElement(tr.a,{style:[Ir.colCenter,Ir.borderContainer,{borderRadius:0}]},s.a.createElement(_r.a,null,t)),s.a.createElement(tr.a,{style:[Ir.colCenter,Ir.borderContainer,{borderRadius:0}]},s.a.createElement(_r.a,null,a," Kg.")))}return s.a.createElement(s.a.Fragment,null)}var r=s.a.useState(0),i=Ue()(r,2),o=i[0],c=i[1];return e.state.TempGraph?s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.fullWidth,Ir.rowCenter,{maxHeight:100,marginTop:10}]},s.a.createElement(tr.a,{style:{padding:6,paddingRight:15}},s.a.createElement(Zr.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){var t=o;(t-=1)<0&&(t=e.state.TempGraph.data.length-1),c(t)}})),s.a.createElement(Zr.b,{type:"number",step:"0.1",label:e.state.Labels[o],containerStyle:[{width:"auto",borderWidth:1}],style:[Fr.input,Ir.borderContainer,{borderRadius:0}],onChange:function(t){var n=t.target.value;if(!isNaN(n)||n.endsWith(".")&&n.split(".").length<=2){var a=e.state.TempGraph.data;a[o]=n,e.control.setState({state:e.state,TempGraph:Zs(Zs({},e.state.TempGraph),{},{data:a})}),e.control.setGraphPeriode(e.state.ActiveLength)}},value:e.state.TempGraph.data[o]}),s.a.createElement(tr.a,{style:{padding:6,paddingRight:15}},s.a.createElement(Zr.a,{name:"md-arrow-forward",type:"ionicon",size:25,color:"black",onPress:function(){var t=o;(t+=1)>e.state.TempGraph.data.length-1&&(t=0),c(t)}})),s.a.createElement(Zr.b,{label:"Curve Name",containerStyle:[{width:"auto",borderWidth:1}],style:[Fr.input,Ir.borderContainer,{borderRadius:0}],onChangeText:function(e){},value:e.state.TempGraph.name})):s.a.createElement(s.a.Fragment,null)},io=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{getPen:function(t,n){return e(ae.actionStarting(zt.FETCH,Gt.PENS,{PenId:t,DataTime:n}))},getWeights:function(t,n,a){return e(ae.actionStarting(zt.FETCH,Gt.WEIGHING,{PenId:t,DataTime:n,MemSections:a}))},getCurve:function(t){return e(ae.actionStarting(zt.FETCH,Gt.GRAPH,{GraphId:t}))},setCurve:function(t){return e(ae.actionStarting(zt.CREATE,Gt.GRAPH,{Graph:t}))}}}))(ao);function so(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var oo=function(e){cr()(n,e);var t=so(n);function n(e){var a;rr()(this,n);var r=(a=t.call(this,e)).setData(e).CurveList;new Date;return a.state={CurveList:r,Display:0,CurveName:"",DataPoints:[],Periode:"Days",Selected:{dataindex:null,index:null,error:!1}},a}return sr()(n,[{key:"setData",value:function(e){return{CurveList:e.firebase.localDataStore.graphs}}},{key:"getData",value:function(){this.props.getCurve()}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&this.props.firebase.localDataStore.graphs&&JSON.stringify(this.state.CurveList)!==JSON.stringify(this.props.firebase.localDataStore.graphs))){var n=this.setData(this.props).CurveList;this.setState({CurveList:n})}}},{key:"render",value:function(){for(var e=this,t=this.props.firebase.firebaseIsLoading,n=this.props.firebase.viewError,a=0,r=0;r<this.state.DataPoints.length;r++)if(this.state.DataPoints[r]&&this.state.DataPoints[r].hasOwnProperty("value")){var i=this.state.DataPoints[r].value;""!==i&&null!==i||(i=0),i=parseFloat(i);for(var o=r-1;o>=0;o--)if(this.state.DataPoints[o]&&this.state.DataPoints[o].hasOwnProperty("value")){a=(a+(i-this.state.DataPoints[o].value))/2;break}}a=a.toFixed(3);var c="android"===u.a.OS||"ios"===u.a.OS;return s.a.createElement(si.a,{style:[Ir.fullSize,Ir.fill],nestedScrollEnabled:!0},s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fillColMain]},n?s.a.createElement(_r.a,{style:Fr.error},n):s.a.createElement(s.a.Fragment,null),0===this.state.Display?s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,{marginHorizontal:0,paddingHorizontal:-20}]},this.state.CurveList?s.a.createElement(tr.a,{style:[Ir.fill,Ir.fullWidth,xr.smallHorizontalPadding,xr.smallVerticalPadding,{maxWidth:800,marginTop:10}]},s.a.createElement(Ds.a,{nestedScrollEnabled:!0,data:Object.keys(this.state.CurveList).filter((function(e){return"__jsogObjectId"!==e&&"update_time"!==e})),renderItem:function(t){var n=t.item;return s.a.createElement(qr,{Text:n,onPress:function(){var t=e.state.CurveList[n],a=[];if(t&&t.hasOwnProperty("data")){var r=0;Object.keys(t.data).filter((function(e){return"__jsogObjectId"!==e})).map((function(e){a[e]={value:t.data[e]};for(var n=e-1;n>r;n--)a[n]={value:null};r=e}))}else e.props.viewError("DataFetch error, please try to refresh");e.setState({Display:2,CurveName:n,DataPoints:a,Periode:t.periode})}})},keyExtractor:function(e,t){return t.toString()}})):s.a.createElement(s.a.Fragment,null),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.borderContainer,Ir.midWidth]},s.a.createElement(qr,{Text:"New Curve",onPress:function(){e.setState({Display:1,DataPoints:[{value:"0"},{value:"0"}]})}}))):s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,{marginHorizontal:0,paddingHorizontal:-20}]},1===this.state.Display?s.a.createElement(Zr.b,{label:"CurveName",containerStyle:[{borderWidth:1,marginTop:10}],style:[Fr.input],onChangeText:function(t){t?cn(t)&&e.setState({CurveName:t}):e.setState({CurveName:t})},value:this.state.CurveName}):s.a.createElement(Qr,{Text:this.state.CurveName}),s.a.createElement(tr.a,{style:[Ir.fill,Ir.fullWidth]},s.a.createElement(ii,{texts:["Periode: "+this.state.Periode],datas:["Average Growth: "+a]}),s.a.createElement(tr.a,{style:[Ir.borderContainer,Ir.fillCenter,Ir.fullWidth,{alignSelf:"center"}]},s.a.createElement(io,{Display:!0,DataPoints:this.state.DataPoints,Height:200,Width:455})),s.a.createElement(tr.a,null,s.a.createElement(Ds.a,{nestedScrollEnabled:!0,data:this.state.DataPoints,style:[c?co.AppStyle:co.WebStyle],renderItem:function(t){var n=t.item,a=t.index;if(!n||null===n.value||void 0===n.value)return null;var r=a===e.state.Selected.dataindex;return s.a.createElement(tr.a,{style:[Ir.fullWidth,Ir.row],onFocus:function(){e.setState({Selected:{dataindex:a,index:a,error:!1}})},onBlur:function(){e.setState({Selected:{dataindex:null,index:null,error:!1}})}},s.a.createElement(Zr.b,{label:"Day:",type:"number",step:"0.1",containerStyle:[{width:120,borderWidth:1,marginTop:10,marginRight:10}],style:[Fr.input,{width:100}],errorMessage:r&&e.state.Selected.error?"Value error":"",editable:0!==a,onChangeText:function(t){if(!isNaN(t)){var n=e.state.Selected;n.index=t,n.error=!1,e.state.DataPoints[t]&&e.state.DataPoints[t].hasOwnProperty("value")&&e.state.DataPoints[t].value&&(n.error=!0),e.setState({Selected:n})}},onBlur:function(){if(!e.state.Selected.error&&e.state.Selected.dataindex!==e.state.Selected.index){var t=Ta()(e.state.DataPoints);t[e.state.Selected.index]={value:n.value.toString()},t[e.state.Selected.dataindex].value=null;for(var a=!1,r=t.length-1;r>1;r--)t[r]&&t[r].hasOwnProperty("value")&&t[r].value?a=!0:a?t[r]={value:null}:t.pop();e.setState({DataPoints:t})}},value:""+(r?e.state.Selected.index:a)}),s.a.createElement(Zr.b,{label:"Weight:",type:"number",step:"0.1",containerStyle:[Ir.fill,{borderWidth:1,marginTop:10}],style:[Fr.input],onChangeText:function(t){if(!isNaN(t)||t.endsWith(".")&&t.split(".").length<=2){var n=Ta()(e.state.DataPoints);n[a].value=t,e.setState({DataPoints:n})}},onBlur:function(t){var n=t.nativeEvent.text;if(void 0===n||null===n||""===n){var r=Ta()(e.state.DataPoints);r[a].value="0",e.setState({DataPoints:r})}},value:""+n.value}))},keyExtractor:function(e,t){return t.toString()},numColumns:1})),s.a.createElement(tr.a,{style:{height:20}}),s.a.createElement(qr,{Text:"New Point",onPress:function(){var t=Ta()(e.state.DataPoints),n=e.state.DataPoints&&e.state.DataPoints.length>=1?e.state.DataPoints[e.state.DataPoints.length-1].value:"0";t.push({value:n}),e.setState({DataPoints:t})}})),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.borderContainer,Ir.midWidth,{marginTop:10}]},s.a.createElement(qr,{Text:"Save",onPress:function(){var t=!0;if(""!==e.state.CurveName){var n=e.state.CurveName;Object.keys(e.state.CurveList).includes(n)?1===e.state.Display&&(e.props.setViewError("Cannot create allready existing Curve."),t=!1):2===e.state.Display&&(e.props.setViewError("Cannot update non-existing Curve. (Please refresh)"),t=!1)}else e.props.setViewError("Curve template need a name."),t=!1;var a=0;if(e.state.DataPoints.forEach((function(n,r){if(t&&null!==n.value&&void 0!==n.value)if(r>0&&parseInt(n.value)<=parseInt(e.state.DataPoints[a].value)){var i=a;n.value===e.state.DataPoints[a].value&&(i=r),e.props.setViewError("Curve template needs to be incremental: error at day: "+i),t=!1}else a=r})),t){e.props.setViewError(null),e.props.setViewLoading(!0);var r={name:e.state.CurveName,periode:e.state.Periode},i=[],s=0;e.state.DataPoints.forEach((function(e){e.value&&(i[s]=parseFloat(e.value)),s++})),r.data=i,e.props.updateCurve(r),e.setState({Display:0})}}})))),(t||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"})))}}]),n}(i.Component),co=hr.a.create({AppStyle:{},WebStyle:{height:400}}),lo=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},getCurve:function(){return e(ae.actionStarting(zt.FETCH,Gt.GRAPH,{GraphId:""}))},updateCurve:function(t){return e(ae.actionStarting(zt.UPDATE,Gt.GRAPH,{Graph:t}))}}}))(oo);function uo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var fo=function(e){cr()(n,e);var t=uo(n);function n(e){var a;return rr()(this,n),(a=t.call(this,e)).state={},a}return sr()(n,[{key:"getData",value:function(){this.props.setCurrentData({})}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=this.props.firebase.viewError;return s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fill]},t?s.a.createElement(_r.a,{style:Fr.error},t):s.a.createElement(s.a.Fragment,null),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth,xr.bottomMargin,{marginBottom:60}]}),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.halvWidth,Ir.fillColMain]},s.a.createElement(li,{section:!0}))),(e||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"}))}}]),n}(i.Component),po=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},setCurrentData:function(t){return e(ae.setCurrentData({type:Gt.PENS,action:t}))}}}))(fo);function ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function go(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ho(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var bo=function(e){cr()(n,e);var t=mo(n);function n(e){var a;rr()(this,n);var r=(a=t.call(this,e)).setData(a.props),i=r.Sections,s=r.Section,o=r.Pens,c=r.Pen,l=r.quantity;return a.state={Sections:i,Section:s,Pens:o,Pen:c,weight:"",quantity:l,date:(new Date).getTime()},a}return sr()(n,[{key:"getData",value:function(){var e=this.props.firebase.localDataStore;e.sections||(e.sections={}),this.props.getSections(e.sections.update_time)}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,n=!1;t&&t.sections&&t.sections!==n&&(n=on(t.sections));var a=e.firebase.currentData,r=n?Object.keys(n)[0]:"";a&&a.data&&a.data.section&&n[a.data.section]&&a.data.section!=r&&(r=a.data.section);var i=n?on(n[r].pens):{},s=n?Object.keys(i)[0]:"";a&&a.penId&&i[a.penId]&&a.penId!=s&&(s=a.penId);var o=1;if(t&&t.pens){var c=t.pens[s];c&&c.datas&&c.datas.count&&(o=c.datas.count)}return n||(n={}),{Sections:n,Section:r,Pens:i,Pen:s,quantity:o}}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&this.props.firebase.localDataStore.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(on(this.props.firebase.localDataStore.sections)))){var n=this.setData(this.props),a=n.Sections,r=n.Section,i=n.Pens,s=n.Pen,o=n.quantity;this.setState({Sections:a,Section:r,Pens:i,Pen:s,quantity:o,weight:""})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,n=this.props.firebase.viewError,a=this.props.firebase.localDataStore;return s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fill]},n?s.a.createElement(_r.a,{style:Fr.error},n):s.a.createElement(s.a.Fragment,null),s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fill]},s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth,xr.bottomMargin]},s.a.createElement(qr,{Text:"Weighing",buttonStyle:{backgroundColor:Pr},onPress:function(){}})),s.a.createElement(tr.a,{style:[Ir.borderContainer,Ir.fullWidth,{marginBottom:20}]},s.a.createElement(di.a,{mode:"dropdown",selectedValue:this.state.Section,style:{height:50,width:150},onValueChange:function(t,n){if(e.state.Sections[t]){var r=on(e.state.Sections[t].pens),i=1;if(a&&a.pens){var s=a.pens[Object.keys(r)[0]];s&&s.datas&&s.datas.count&&(i=s.datas.count)}e.setState({Section:t,Pens:r,Pen:Object.keys(r)[0],quantity:i})}}},Object.keys(this.state.Sections).map((function(e,t){return s.a.createElement(di.a.Item,{label:e,value:e,key:t})}))),s.a.createElement(di.a,{mode:"dropdown",selectedValue:this.state.Pen,style:{height:50,width:150},onValueChange:function(t,n){var r=1;if(a&&a.pens){var i=a.pens[t];i&&i.datas&&i.datas.count&&(r=i.datas.count)}e.setState({quantity:r,Pen:t})}},Object.keys(this.state.Pens).map((function(e,t){return s.a.createElement(di.a.Item,{label:e,value:e,key:t})}))),s.a.createElement(tr.a,{style:[Ir.fullWidth,{borderWidth:0,height:65,marginTop:10,paddingHorizontal:5,paddingTop:0,borderRadius:0,alignItems:"center"}]},s.a.createElement(tr.a,{style:[Ir.fullWidth,{alignItems:"flex-start"}]},s.a.createElement(_r.a,{style:[Fr.text,{marginHorizontal:5,marginTop:2,color:wr,fontSize:15,fontWeight:"bold"}]},"Weight date:")),s.a.createElement(tr.a,{style:[Ir.fullWidth,{alignItems:"flex-start"}]},s.a.createElement(mi,{Selected:this.state.date,onValueChange:function(t){e.setState({date:t.getTime()})}}))),s.a.createElement(Zr.b,{label:"Animal quantity",style:go({},ks.input),onChangeText:function(t){isNaN(t)||e.setState({quantity:t})},value:this.state.quantity}),s.a.createElement(Zr.b,{label:"Total Weight",style:go({},ks.input),onChangeText:function(t){e.setState({weight:t})},value:this.state.weight})),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth]},s.a.createElement(qr,{Text:"Submit",onPress:function(){e.state.Section?e.state.Pen?isNaN(e.state.quantity)||""===e.state.quantity||e.state.quantity<=0?e.props.setViewError("Quantity have to be a number bigger than 0"):isNaN(e.state.weight)||""===e.state.weight?e.props.setViewError("Weight have to be a number"):(e.props.setViewLoading(!0),e.props.setViewError(null),e.props.newWeight(e.state.Pen,parseFloat(e.state.weight),e.state.date,parseFloat(e.state.quantity)),e.setState({weight:"",date:(new Date).getTime()})):e.props.setViewError("A pen is needed"):e.props.setViewError("A section is needed")}})))),(t||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"}))}}]),n}(i.Component),vo=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},getSections:function(t){return e(ae.actionStarting(zt.FETCH,Gt.SECTIONS,{DataTime:t}))},newWeight:function(t,n,a,r){return e(ae.actionStarting(zt.CREATE,Gt.WEIGHING,{PenId:t,Weight:n,Quantity:r,Date:a}))}}}))(bo);function yo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yo(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function So(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var Do=function(e){cr()(n,e);var t=So(n);function n(e){var a;rr()(this,n);var r=(a=t.call(this,e)).setData(e),i=r.Sections,s=r.Section,o=r.Pens,c=r.Pen;return a.state={Sections:i,Section:s,Pens:o,Pen:c,NewSection:!(i&&Object.keys(i).length>0)},a}return sr()(n,[{key:"getData",value:function(){var e=this.props.firebase.localDataStore;e.sections||(e.sections={}),this.props.getSections(e.sections.update_time)}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,n=!1;t&&t.sections&&t.sections!==n&&(n=on(t.sections));var a=e.firebase.currentData,r=n?Object.keys(n)[0]:"";a&&a.data&&a.data.section&&n[a.data.section]&&a.data.section!=r&&(r=a.data.section);var i=n&&n[r]?on(n[r].pens):{},s=n?Object.keys(i)[0]:"";return a&&a.dataId&&i[a.dataId]&&a.dataId!=s&&(s=a.dataId),n||(n={}),{Sections:n,Section:r,Pens:i,Pen:s}}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase)){if(this.props.firebase.localDataStore&&this.props.firebase.localDataStore.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(on(this.props.firebase.localDataStore.sections))){var n=this.setData(this.props),a=n.Sections,r=n.Section,i=n.Pens,s=n.Pen;this.setState({Sections:a,Section:r,Pens:i,Pen:s,NewSection:!(a&&Object.keys(a).length>0)})}this.props.firebase.currentData&&this.props.firebase.currentData!=e.firebase.currentData&&this.forceUpdate()}}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=this.props.firebase.viewError,n=this.props.firebase.localDataStore,a=this.props.firebase.currentData,r=s.a.createElement(tr.a,null);switch(a.type){case Gt.PENS:r=Oo(this,a,n);break;case Gt.PIGS:r=Co(this,a,n)}return s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fill]},t?s.a.createElement(_r.a,{style:Fr.error},t):s.a.createElement(s.a.Fragment,null),r),(e||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"}))}}]),n}(i.Component),Oo=function(e,t,n){var a=e.state.Sections;return t.action===zt.CREATE&&(a["New Section"]={}),s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fill]},s.a.createElement(wo,{CurrentAction:t.action}),s.a.createElement(tr.a,{style:[Ir.borderContainer,Ir.midWidth,{marginBottom:20}]},s.a.createElement(Po,{Control:e,CurrentData:t,localDataStore:n}),t.action===zt.CREATE?s.a.createElement(Zr.b,{label:"Pen name",style:Eo({},ks.input),onChangeText:function(t){t?cn(t)&&e.setState({Pen:t}):e.setState({Pen:t})},value:e.state.Pen}):s.a.createElement(s.a.Fragment,null),t.action===zt.DELETE?s.a.createElement(di.a,{mode:"dropdown",selectedValue:e.state.Pen,style:{height:50,width:150},onValueChange:function(t,n){e.setState({Pen:t})}},Object.keys(e.state.Pens).map((function(e,t){return s.a.createElement(di.a.Item,{label:e,value:e,key:t})}))):s.a.createElement(s.a.Fragment,null)),t.action===zt.CREATE||t.action===zt.DELETE?s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth]},s.a.createElement(qr,{Text:"Submit",onPress:function(){if(e.state.Section&&""!==e.state.Section)if(e.state.Pen&&""!==e.state.Pen)if(isNaN(e.state.Section)&&isNaN(e.state.Section[0]))if(isNaN(e.state.Pen)&&isNaN(e.state.Pen[0])){var n=!1;Object.keys(e.state.Sections).map((function(t,a){e.state.Sections[t].pens&&(Object.keys(e.state.Sections[t].pens).filter((function(t){return t===e.state.Pen})).length&&(n=!0))})),n&&t.action===zt.CREATE?e.props.setViewError("Given pen name already exists"):n||t.action!==zt.DELETE?(e.props.setViewError(null),e.props.setViewLoading(!0),e.props.penAction(t.action,e.state.Section,e.state.Pen),ie.navigate("UserOperations")):e.props.setViewError("Cannot remove non-existing pen")}else e.props.setViewError("Pen name cannot be or start with a number");else e.props.setViewError("Section name cannot be or start with a number");else e.props.setViewError("A pen name is needed");else e.props.setViewError("A section is needed")}})):s.a.createElement(s.a.Fragment,null))},wo=function(e){switch(e.CurrentAction){case zt.CREATE:return s.a.createElement(Qr,{Text:"Add Pen"});case zt.DELETE:return s.a.createElement(Qr,{Text:"Remove Pen"});default:return s.a.createElement(s.a.Fragment,null)}},Co=function(e,t,n){e.state.Sections;return t.action,s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fill]},s.a.createElement(Qr,{Text:"Add Pig: "+t.pigtag}),s.a.createElement(tr.a,{style:[Ir.borderContainer,Ir.midWidth,{marginBottom:20}]},s.a.createElement(Po,{Control:e,CurrentData:t,localDataStore:n}),e.state.NewSection?s.a.createElement(Zr.b,{label:"Pen name",style:Eo({},ks.input),onChangeText:function(t){t?cn(t)&&e.setState({Pen:t}):e.setState({Pen:t})},value:e.state.Pen}):s.a.createElement(di.a,{mode:"dropdown",selectedValue:e.state.Pen,style:{height:50,width:150},onValueChange:function(t,n){e.setState({Pen:t})}},Object.keys(e.state.Pens).map((function(e,t){return s.a.createElement(di.a.Item,{label:e,value:e,key:t})}))),t.action===zt.CREATE?s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth]},s.a.createElement(qr,{Text:"Submit",onPress:function(){if(e.state.Section&&""!==e.state.Section)if(e.state.Pen&&""!==e.state.Pen)if(isNaN(e.state.Section)&&isNaN(e.state.Section[0]))if(isNaN(e.state.Pen)&&isNaN(e.state.Pen[0])){var n=!1;Object.keys(e.state.Sections).map((function(t,a){e.state.Sections[t].pens&&(Object.keys(e.state.Sections[t].pens).filter((function(t){return t===e.state.Pen})).length&&(n=!0))})),n&&t.action===zt.CREATE&&e.state.NewSection?e.props.setViewError("Given pen name already exists"):(e.props.setViewLoading(!0),e.props.setViewError(null),e.props.pigAction(t.action,t.pigtag,e.state.Pen),ie.navigate("UserPigs"))}else e.props.setViewError("Pen name cannot be or start with a number");else e.props.setViewError("Section name cannot be or start with a number");else e.props.setViewError("A pen name is needed");else e.props.setViewError("A section is needed")}})):s.a.createElement(s.a.Fragment,null)))},Po=function(e){var t=e.Control,n=e.CurrentData;e.localDataStore;return t.state.NewSection&&n.action===zt.CREATE?s.a.createElement(Zr.b,{label:"Section Name",style:Eo({},ks.input),onChangeText:function(e){e?cn(e)&&t.setState({Section:e}):t.setState({Section:e})},value:t.state.Section}):s.a.createElement(di.a,{mode:"dropdown",selectedValue:t.state.Section,style:{height:50,width:150},onValueChange:function(e,a){var r=e,i=t.state.NewSection,s=t.state.Pens,o=t.state.Pen;"New Section"===e?(i=!0,r="Section_"+Object.keys(t.state.Sections).length):(s=on(t.state.Sections[e].pens),o=n.action===zt.DELETE?Object.keys(s)[Object.keys(s).length-1]:n.type==Gt.PIGS?Object.keys(s)[0]:"Pen_"+(Object.keys(s).length+1)),t.setState({Section:r,NewSection:i,Pens:s,Pen:o})}},Object.keys(t.state.Sections).map((function(e,t){return s.a.createElement(di.a.Item,{label:e,value:e,key:t})})))},jo=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(ae.setFirebaseError(t))},setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},getSections:function(t){return e(ae.actionStarting(zt.FETCH,Gt.SECTIONS,{DataTime:t}))},penAction:function(t,n,a){return e(ae.actionStarting(t,Gt.PENS,{SectionId:n,PenId:a}))},pigAction:function(t,n,a){return e(ae.actionStarting(t,Gt.PIGS,{TagId:n,PenId:a}))}}}))(Do);function xo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var ko=function(e){cr()(n,e);var t=xo(n);function n(e){var a;rr()(this,n),(a=t.call(this,e)).state={currentData:e.currentData};var r=a.setData(e),i=r.CurrentData,s=r.WeighingsList,o=r.Weighings,c=r.CommentsList,l=r.Comments;return a.state={currentData:i,WeighingsList:s,Weighings:o,CommentsList:c,Comments:l,action:""},a}return sr()(n,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,n=this.state.currentData,a=on(t.pens);a[n.penId]&&(n.data=a[n.penId]);var r=[],i=[],s="android"===u.a.OS||"ios"===u.a.OS;if(t&&t.weighings&&t.weighings[n.penId]){r=t.weighings[n.penId];for(var o=0;o<Object.keys(r).length;o++){if(f=Object.keys(r)[o])(p=r[f])&&p.time&&i.push(F()({},f,p))}i=i.sort((function(e,t){return e.time>t.time?1:-1})),s&&(i=i.slice(0,5))}var c=[],l=[];if(t&&t.comments&&t.comments[n.penId]){c=t.comments[n.penId];for(o=0;o<Object.keys(c).length;o++){var f,p;if(f=Object.keys(c)[o])(p=c[f])&&p.time&&l.push(F()({},f,p))}l=l.sort((function(e,t){return e.time>t.time?1:-1})),s&&(l=l.slice(0,5))}return n.data&&!n.data.datas&&(n.data.datas={}),{CurrentData:n,WeighingsList:r,Weighings:i,CommentsList:c,Comments:l}}},{key:"getData",value:function(){if(this.props.firebase&&this.props.firebase.localDataStore&&this.state.currentData.penId){var e=this.props.firebase.localDataStore;e.pens||(e.pens={}),this.props.getPens(e.pens.update_time);var t=null;e.weighings&&e.weighings[this.state.currentData.penId]&&(t=e.weighings.update_time),this.props.getWeights(this.state.currentData.penId,t,e.sections),this.props.getComments(this.state.currentData.penId),this.props.getBatch(e.batchs.update_time)}}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore)){var n=this.props.firebase.localDataStore;if(JSON.stringify(e.currentData)!==JSON.stringify(this.state.currentData)||n.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(on(n.sections))||n.weighings&&JSON.stringify(this.state.Weighings)!==JSON.stringify(on(localDataStoree.weighings))||n.comments&&JSON.stringify(this.state.Comments)!==JSON.stringify(on(localDataStoree.comments))){var a=this.setData(this.props),r=a.CurrentData,i=a.WeighingsList,s=a.Weighings,o=a.CommentsList,c=a.Comments;this.setState({currentData:r,WeighingsList:i,Weighings:s,CommentsList:o,Comments:c})}}}},{key:"render",value:function(){var e=this,t=(this.props.firebase.firebaseIsLoading,this.props.firebase.localDataStore),n=this.state.currentData;if(n.data){var a=n.data.datas.count?n.data.datas.count:0,r=[];this.state.Weighings.length>0&&(r=this.state.Weighings[0][Object.keys(this.state.Weighings[0])].weight/this.state.Weighings[0][Object.keys(this.state.Weighings[0])].count);var i=n.data.datas.batch?n.data.datas.batch:"No Batch",o={},c="",l=r;if(n.data.datas.batch&&t.batchs&&t.batchs[n.data.datas.batch]){var f=(o=t.batchs[n.data.datas.batch]).time;c=Math.floor((Date.now()-f)/864e5),n.data.datas.gcurve=o.gcurve;var p=vn(t,n.penId);p&&p.Now&&(l=p.Now)}o.datas||(o.datas={}),o.datas.devianceMin||(o.datas.devianceMin=0),o.datas.devianceMax||(o.datas.devianceMax=0),l=Math.round(1e3*l)/1e3;var d="android"===u.a.OS||"ios"===u.a.OS;return s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fill]},s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth,xr.bottomMargin,Ir.rowCenter]},s.a.createElement(tr.a,{style:{padding:6,paddingRight:15}},s.a.createElement(Zr.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){return To(e,t,n,!1)}})),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth]},s.a.createElement(qr,{Text:n.penId,buttonStyle:{backgroundColor:Pr},onPress:function(){}})),s.a.createElement(tr.a,{style:{padding:6,paddingLeft:15}},s.a.createElement(Zr.a,{name:"md-arrow-forward",type:"ionicon",size:25,color:"black",onPress:function(){return To(e,t,n,!0)}}))),s.a.createElement(tr.a,{style:[Ir.fullWidth]},s.a.createElement(ii,{texts:["Pig count","Batch","Age Days","Weight","Growth Cruve","Alarm Max","Alarm Min","Mixtur","Correction","Portion in kg"],onPress:function(e){return function(e,t){switch(e){case 1:switch(t.index){case 0:console.log("test")}}}(1,e)},datas:[a,i,c,l,n.data.datas.gcurve?n.data.datas.gcurve:"default",o.datas.devianceMin+" %",o.datas.devianceMax+" %","-","-","-"]})),s.a.createElement(tr.a,{style:{height:20}}),s.a.createElement(tr.a,{style:[Ir.fill,d?Ir.fullWidth:Ir.midWidth,d?{}:{height:215}]},s.a.createElement(ii,{texts:["Control weighings"],datas:[]}),s.a.createElement(tr.a,{style:{height:10}}),s.a.createElement(Ds.a,{data:this.state.Weighings,renderItem:function(t){var n=t.item;t.index;if("__jsogObjectId"===n)return s.a.createElement(s.a.Fragment,null);var a=e.state.WeighingsList[Object.keys(n)[0]];return s.a.createElement(ii,{texts:[$t(a.time)],datas:[a.weight+"   : "+a.count+" pigs"]})},numColumns:1,keyExtractor:function(e,t){return String(t)}})),s.a.createElement(tr.a,{style:{height:20}}),s.a.createElement(tr.a,{style:[Ir.fill,d?Ir.fullWidth:Ir.midWidth,d?{}:{height:215}]},s.a.createElement(ii,{texts:["Action log"],datas:[]}),s.a.createElement(tr.a,{style:{height:10}}),s.a.createElement(Ds.a,{data:this.state.Comments,renderItem:function(t){var n=t.item;t.index;if("__jsogObjectId"===n)return s.a.createElement(s.a.Fragment,null);var a=e.state.CommentsList[Object.keys(n)[0]];return s.a.createElement(ii,{texts:[$t(a.time)+":\n"+a.user],datas:[(a.quantity?a.quantity+" * ":"")+a.action+":\n"+a.data]})},numColumns:1,keyExtractor:function(e,t){return String(t)}})),s.a.createElement(tr.a,{style:{height:30}}),s.a.createElement(tr.a,{style:[Ir.borderContainer,Ir.midWidth]},s.a.createElement(li,null)))}return s.a.createElement(tr.a,{style:[Ir.fillRowCenter,Ir.center,Ir.logoContainer]},s.a.createElement(dr.a,{style:Ir.fullSize,source:kr.Hexa_icon,resizeMode:"contain"}))}}]),n}(i.Component);function To(e,t,n,a){var r=t.pens[n.penId].section,i=on(t.sections[r].pens);if(n.type===Gt.PENS&&n.data&&i[n.penId]){var s=Object.keys(i).indexOf(n.penId);switch(a){case!0:s+=1;break;case!1:s-=1}s<0?s=Object.keys(i).length-1:s>=Object.keys(i).length&&(s=0),e.props.setCurrentData(Object.keys(i)[s]),ie.replace("DataDisplay")}}var Ao=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},getPens:function(t){return e(ae.actionStarting(zt.FETCH,Gt.PENS,{DataTime:t}))},getWeights:function(t,n,a){return e(ae.actionStarting(zt.FETCH,Gt.WEIGHING,{PenId:t,DataTime:n,MemSections:a}))},getComments:function(t){return e(ae.actionStarting(zt.FETCH,Gt.COMMENTS,{PenId:t}))},getBatch:function(t){return e(ae.actionStarting(zt.FETCH,Gt.BATCHS,{DataTime:t}))},setCurrentData:function(t){return e(ae.setCurrentData({type:Gt.PENS,penId:t}))},setCurrentDataElement:function(t){return e(ae.setCurrentData(t))}}}))(ko);function Io(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var Lo=function(e){cr()(n,e);var t=Io(n);function n(e){var a;rr()(this,n),(a=t.call(this,e)).state={currentData:e.currentData};var r=a.setData(e),i=r.CurrentData,s=r.WeighingsList,o=r.Weighings;return a.state={currentData:i,WeighingsList:s,Weighings:o},a}return sr()(n,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,n=this.state.currentData,a=on(t.pigs);a[n.TagId]&&(n.data=a[n.TagId]);var r=[],i=[],s="android"===u.a.OS||"ios"===u.a.OS;if(t&&t.weighings&&t.weighings[n.penId]){r=t.weighings[n.penId];for(var o=0;o<Object.keys(r).length;o++){var c=Object.keys(r)[o];if(c){var l=r[c];l&&l.time&&i.push(F()({},c,l))}}i=i.sort((function(e,t){return e.time>t.time?1:-1})),s&&(i=i.slice(0,5))}return n.data&&!n.data.datas&&(n.data.datas={}),{CurrentData:n,WeighingsList:r,Weighings:i}}},{key:"getData",value:function(){if(this.props.firebase&&this.props.firebase.localDataStore&&this.state.currentData.penId){var e=this.props.firebase.localDataStore;e.pens||(e.pens={}),this.props.getPens(e.pens.update_time),this.props.getWeights(this.state.currentData.penId),this.props.getBatch(null)}}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore)){var n=this.props.firebase.localDataStore;if(JSON.stringify(e.currentData)!==JSON.stringify(this.state.currentData)||n.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(on(n.sections))||n.weighings&&JSON.stringify(this.state.Weighings)!==JSON.stringify(on(localDataStoree.weighings))){var a=this.setData(this.props),r=a.CurrentData,i=a.WeighingsList,s=a.Weighings;this.setState({currentData:r,WeighingsList:i,Weighings:s})}}}},{key:"render",value:function(){var e=this,t=(this.props.firebase.firebaseIsLoading,this.props.firebase.localDataStore),n=this.state.currentData;if(n.data){var a=n.data.datas.count?n.data.datas.count:0,r=[];if(this.state.Weighings.length>0){r=this.state.Weighings[0][Object.keys(this.state.Weighings[0])].weight/this.state.Weighings[0][Object.keys(this.state.Weighings[0])].count}var i=n.data.datas.batch?n.data.datas.batch:"No Batch",o={},c="",l=r;if(n.data.datas.batch&&t.batchs&&t.batchs[n.data.datas.batch]){var u=(o=t.batchs[n.data.datas.batch]).time;c=Math.floor((Date.now()-u)/864e5),n.data.datas.gcurve=o.gcurve,l=CurvePredict(t,n.penId).Now}return o.datas||(o.datas={}),o.datas.devianceMin||(o.datas.devianceMin=0),o.datas.devianceMax||(o.datas.devianceMax=0),s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fill]},s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth,xr.bottomMargin,Ir.rowCenter]},s.a.createElement(tr.a,{style:{padding:6,paddingRight:15}},s.a.createElement(Zr.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){return No(e,t,n,!1)}})),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth]},s.a.createElement(qr,{Text:n.penId,buttonStyle:{backgroundColor:Pr},onPress:function(){}})),s.a.createElement(tr.a,{style:{padding:6,paddingLeft:15}},s.a.createElement(Zr.a,{name:"md-arrow-forward",type:"ionicon",size:25,color:"black",onPress:function(){return No(e,t,n,!0)}}))),s.a.createElement(tr.a,{style:[Ir.fullWidth]},s.a.createElement(ii,{texts:["Pig count","Batch","Age Days","Weight","Growth Cruve","Alarm Max","Alarm Min","Mixtur","Correction","Portion in kg"],onPress:function(e){return function(e,t){switch(e){case 1:switch(t.index){case 0:console.log("test")}}}(1,e)},datas:[a,i,c,l,n.data.datas.gcurve?n.data.datas.gcurve:"default",o.datas.devianceMin+" %",o.datas.devianceMax+" %","-","-","-"]})),s.a.createElement(tr.a,{style:{height:20}}),s.a.createElement(tr.a,{style:[Ir.fill,App?Ir.fullWidth:Ir.midWidth,App?{}:{height:215}]},s.a.createElement(ii,{texts:["Last weighings"],datas:[]}),s.a.createElement(tr.a,{style:{height:10}}),s.a.createElement(Ds.a,{data:this.state.Weighings,renderItem:function(t){var n=t.item;t.index;if("__jsogObjectId"===n)return s.a.createElement(s.a.Fragment,null);var a=e.state.WeighingsList[Object.keys(n)[0]];return s.a.createElement(ii,{texts:[$t(a.time)],datas:[a.weight]})},numColumns:1,keyExtractor:function(e,t){return String(t)}})),s.a.createElement(tr.a,{style:{height:30}}),s.a.createElement(tr.a,{style:[Ir.borderContainer,Ir.midWidth]},s.a.createElement(li,null)))}return s.a.createElement(tr.a,{style:[Ir.fillRowCenter,Ir.center,Ir.logoContainer]},s.a.createElement(dr.a,{style:Ir.fullSize,source:kr.Hexa_icon,resizeMode:"contain"}))}}]),n}(i.Component);function No(e,t,n,a){var r=t.pens[n.penId].section,i=on(t.sections[r].pens);if(n.type===Gt.PENS&&n.data&&i[n.penId]){var s=Object.keys(i).indexOf(n.penId);switch(a){case!0:s+=1;break;case!1:s-=1}s<0?s=Object.keys(i).length-1:s>=Object.keys(i).length&&(s=0),e.props.setCurrentData(Object.keys(i)[s]),ie.replace("DataDisplay")}}Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},getPens:function(t){return e(ae.actionStarting(zt.FETCH,Gt.PENS,{DataTime:t}))},getWeights:function(t){return e(ae.actionStarting(zt.FETCH,Gt.WEIGHING,{PenId:t}))},getBatch:function(t){return e(ae.actionStarting(zt.FETCH,Gt.BATCHS,{BatchId:t}))},setCurrentData:function(t){return e(ae.setCurrentData({type:Gt.PENS,penId:t}))},setCurrentDataElement:function(t){return e(ae.setCurrentData(t))}}}))(Lo);function Ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ro(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var Mo=function(e){cr()(n,e);var t=Uo(n);function n(e){var a;return rr()(this,n),(a=t.call(this,e)).state={currentData:{}},a}return sr()(n,[{key:"getData",value:function(){if(this.props.firebase&&this.props.firebase.localDataStore){this.props.firebase.localDataStore;if(this.props.firebase.currentData&&this.props.firebase.currentData.type)this.props.firebase.currentData.type}}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore)){var n=this.props.firebase.localDataStore;if(this.props.firebase.currentData&&this.props.firebase.currentData.type&&JSON.stringify(this.state.currentData)!==JSON.stringify(this.props.firebase.currentData)){var a=this.props.firebase.currentData;switch(a.type){case Gt.PENS:if(n.pens){var r=on(n.pens);r[a.penId]&&(JSON.stringify(a.data)!==JSON.stringify(r[a.penId])&&(a.data=r[a.penId]),this.props.setCurrentDataElement(a))}this.setState({currentData:a});break;case Gt.PIGS:default:this.setState({currentData:a})}}}}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=this.props.firebase.localDataStore,n=this.props.firebase.viewError,a=this.state.currentData,r=s.a.createElement(tr.a,null);switch(a.type){case Gt.PENS:r=s.a.createElement(Ao,{currentData:this.state.currentData});break;case Gt.PIGS:r=Bo(this,a,t)}return s.a.createElement(si.a,{style:[Ir.fullSize,Ir.fill]},s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fill]},n?s.a.createElement(_r.a,{style:Fr.error},n):s.a.createElement(s.a.Fragment,null),r),(e||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"})))}}]),n}(i.Component);var Bo=function(e,t,n){var a;if(n&&n.pigs&&(a=on(n.pigs))[t.TagId]&&(t.data=a[t.TagId]),t.data&&!t.data.datas&&(t.data.datas={}),!t.data)return s.a.createElement(tr.a,{style:[Ir.fillRowCenter,Ir.center,Ir.logoContainer]},s.a.createElement(dr.a,{style:Ir.fullSize,source:kr.Hexa_icon,resizeMode:"contain"}));var r="android"===u.a.OS||"ios"===u.a.OS;return s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fill]},r?s.a.createElement(tr.a,{style:[Ir.fill,Ir.row,Ir.fullWidth]},s.a.createElement(tr.a,{style:[Ir.fill,Ir.column,{backgroundColor:"red"}]},s.a.createElement(tr.a,{style:[Ir.fill,Ir.row,Ir.fullWidth,{backgroundColor:"blue"}]},s.a.createElement(tr.a,{style:{justifyContent:"center",alignItems:"center"}})),s.a.createElement(tr.a,{style:[Ir.fill,Ir.row,Ir.fullWidth]},s.a.createElement(_r.a,null,"Messages"),s.a.createElement(_r.a,null,"Errors"))),s.a.createElement(tr.a,{style:[Ir.fill,Ir.column]},connectedState===Ae?s.a.createElement(tr.a,{style:Fo(Fo({},Wo.circle),{},{backgroundColor:"green",justifyContent:"center",alignItems:"center"})},s.a.createElement(_r.a,null,"Device is"),s.a.createElement(_r.a,null,"connected")):s.a.createElement(tr.a,{style:Fo(Fo({},Wo.circle),{},{backgroundColor:"red",justifyContent:"center",alignItems:"center"})},s.a.createElement(_r.a,null,"No Device"),s.a.createElement(_r.a,null,"connected")))):s.a.createElement(s.a.Fragment,null),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth]},s.a.createElement(qr,{Text:t.TagId,buttonStyle:{backgroundColor:Pr},onPress:function(){}})),s.a.createElement(tr.a,{style:[Ir.fullWidth]},s.a.createElement(ii,{ingrid:!0,texts:["Section","Pen"],datas:[t.data.section,t.data.pen]}),s.a.createElement(tr.a,{style:{height:20}}),s.a.createElement(tr.a,{style:Ir.colCenter},s.a.createElement(Zr.b,{label:"Comment:",multiline:!0,containerStyle:[{borderWidth:1}],style:[Fr.input],onChangeText:function(e){},value:"NONE"}))))},Wo=hr.a.create({circle:{width:125,height:125,borderRadius:62.5,marginTop:xr.tiny,marginLeft:xr.tiny}}),Vo=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},getWeights:function(t){return e(ae.actionStarting(zt.FETCH,Gt.WEIGHING,{PenId:t}))},setCurrentData:function(t){return e(ae.setCurrentData({type:Gt.PENS,penId:t}))},setCurrentDataElement:function(t){return e(ae.setCurrentData(t))}}}))(Mo);function _o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var Ho=function(e){cr()(n,e);var t=_o(n);function n(e){var a;rr()(this,n);var r=(a=t.call(this,e)).setData(e),i=r.isClosed,s=r.isVirtual,o=r.StartDate,c=r.EndDate,l=r.Animals,u=r.TargetWeight,f=r.AverageWeight,p=r.AverageGrowth,d=r.Comments_List,h=r.Comments;return a.state={Prediction:!1,isClosed:i,isVirtual:s,StartDate:o,EndDate:c,Animals:l,TargetWeight:u,AverageWeight:f,AverageGrowth:p,Comments_List:d,Comments:h},a}return sr()(n,[{key:"setData",value:function(e){var t,n,a,r,i,s,o,c,l=e.firebase.localDataStore,u=(e.firebase.currentData,l.batchs[this.props.firebase.currentData.batchId]),f=pn(u,l);f&&(t=f.StartDate,n=f.EndDate,a=f.TargetWeight,f.PenCount,r=f.Animals,i=f.AverageWeight,s=f.AverageGrowth,o=f.isClosed,c=f.isVirtual);var p=null,d=[];return u&&u.state&&"Closed"===u.state&&u.closed&&u.closed.comments&&(p=[],Object.keys(u.pens).reverse().filter((function(e){return"__jsogObjectId"!==e})).forEach((function(e){var t=[];if(u.closed.comments[e]){t=u.closed.comments[e];for(var n=0;n<Object.keys(t).length;n++){var a=Object.keys(t)[n];if(a){var r=t[a];r&&r.time&&(r.pen=e,d.push(F()({},a,r)))}}}p=p.concat(t)}))),d=d.sort((function(e,t){return e.time>t.time?1:-1})),{isClosed:o,isVirtual:c,StartDate:t,EndDate:n,Animals:r,TargetWeight:a,AverageWeight:i,AverageGrowth:s,Comments_List:p,Comments:d}}},{key:"getData",value:function(){var e=this,t=this.props.firebase.localDataStore,n=this.props.firebase.currentData;if(n&&n.batchId&&t.batchs[n.batchId]){var a=t.batchs[n.batchId];this.props.getWeights(t.weighings?t.weighings.update_time:null,t.sections);var r=null;t.pens&&(r=t.pens.update_time),a.pens&&Object.keys(a.pens).filter((function(e){return"__jsogObjectId"!==e})).forEach((function(t){e.props.getPen(t,r)}));var i="";n.curveId&&(i=n.curveId),this.props.getCurve(i)}}},{key:"checkData",value:function(e){}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore)){var n=this.setData(this.props),a=n.isClosed,r=n.isVirtual,i=n.StartDate,s=n.EndDate,o=n.Animals,c=n.TargetWeight,l=n.AverageWeight,u=n.AverageGrowth,f=n.Comments_List,p=n.Comments;this.setState({Prediction:!1,isClosed:a,isVirtual:r,StartDate:i,EndDate:s,Animals:o,TargetWeight:c,AverageWeight:l,AverageGrowth:u,Comments_List:f,Comments:p})}}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,n=this.props.firebase.viewError,a=this.props.firebase.localDataStore,r=(this.props.firebase.currentData,this.state.StartDate),i=((new Date).getTime()-r)/864e5;i=i.toFixed(0),r=new Date(r).getDate()+"/"+(new Date(r).getMonth()+1)+"/"+new Date(r).getFullYear();var o=this.state.EndDate;o=new Date(o).getDate()+"/"+(new Date(o).getMonth()+1)+"/"+new Date(o).getFullYear();var c=String(this.state.isVirtual);return c=c.charAt(0).toUpperCase()+c.slice(1),s.a.createElement(si.a,{style:[Ir.fullSize,Ir.fill]},s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fill]},n?s.a.createElement(_r.a,{style:Fr.error},n):s.a.createElement(s.a.Fragment,null),s.a.createElement(Qr,{Text:this.props.firebase.currentData.batchId?this.props.firebase.currentData.batchId:"-NON-"}),s.a.createElement(tr.a,null,s.a.createElement(tr.a,{style:[Ir.fullWidth,{justifyContent:"center"}]},s.a.createElement(Ts.a,{itemDimension:120,spacing:10,data:[{title:"Start",data:r},{title:"End Forecast",data:o},{title:"Target Weight",data:this.state.TargetWeight}],renderItem:function(e){var t=e.item;return s.a.createElement(tr.a,{style:[Ir.borderContainer,{textAlign:"center"}]},s.a.createElement(_r.a,null,t.title),s.a.createElement(_r.a,null,t.data))}})),s.a.createElement(tr.a,{style:[Ir.fullWidth,{justifyContent:"center"}]},s.a.createElement(Ts.a,{itemDimension:120,spacing:10,data:[{title:"Animals",data:this.state.Animals},{title:"Day",data:i},{title:"Avarage weight",data:this.state.AverageWeight},{title:"Average growth",data:this.state.AverageGrowth}],renderItem:function(e){var t=e.item;return s.a.createElement(tr.a,{style:[Ir.borderContainer,{textAlign:"center"}]},s.a.createElement(_r.a,null,t.title),s.a.createElement(_r.a,null,t.data))}})),s.a.createElement(qr,{Text:"Show Predict",onPress:function(){e.setState({Prediction:!e.state.Prediction})}})),s.a.createElement(tr.a,{style:[Ir.fill,Ir.fullWidth,{minHeight:750}]},s.a.createElement(io,{Predict:this.state.Prediction,weighings:a.weighings})),this.state.Comments_List?s.a.createElement(tr.a,{style:[Ir.fill,Ir.midWidth,{height:415}]},s.a.createElement(ii,{texts:["Action log"],datas:[]}),s.a.createElement(tr.a,{style:{height:10}}),s.a.createElement(Ds.a,{data:this.state.Comments.filter((function(e){return"__jsogObjectId"!==e})),renderItem:function(t){var n=t.item,a=(t.index,e.state.Comments_List[0][Object.keys(n)[0]]);return a?s.a.createElement(ii,{texts:[$t(a.time)+":\n"+a.user],datas:[a.pen+": "+a.action+":\n"+a.data]}):null},numColumns:1,keyExtractor:function(e,t){return String(t)}})):s.a.createElement(s.a.Fragment,null)),(t||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"})))}}]),n}(i.Component),Go=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},getPen:function(t,n){return e(ae.actionStarting(zt.FETCH,Gt.PENS,{PenId:t,DataTime:n}))},getWeights:function(t,n){return e(ae.actionStarting(zt.FETCH,Gt.WEIGHING,{DataTime:t,MemSections:n}))},getBatch:function(t){return e(ae.actionStarting(zt.FETCH,Gt.BATCHS,{}))},getCurve:function(t){return e(ae.actionStarting(zt.FETCH,Gt.GRAPH,{GraphId:t}))},setCurve:function(t){return e(ae.actionStarting(zt.CREATE,Gt.GRAPH,{Graph:t}))}}}))(Ho);function zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Jo=Object(nr.a)({UserFront:{screen:Ss,navigationOptions:function(){return{title:"User Data",headerLeft:function(e){return s.a.createElement(tr.a,{style:{padding:6,paddingLeft:15}},s.a.createElement(Zr.a,{type:"ionicon",name:"md-arrow-back",size:25,color:"black",onPress:function(){"System Board"===e.label?ie.nacigationPop():ie.navigate("MainStack")}}))}}},path:"user_front"},UserDashBoard:{screen:Cs,navigationOptions:function(){return{title:"Dash Board"}},path:"user_dashboard"},UserPigs:{screen:Rs,navigationOptions:function(){return{title:"Pigs"}},path:"user_pigs"},UserPens:{screen:Vs,navigationOptions:function(){return{title:"Pens"}},path:"user_pens"},UserBatchs:{screen:qs,navigationOptions:function(){return{title:"Batchs"}},path:"user_batchs"},UserCurves:{screen:lo,navigationOptions:function(){return{title:"Curves"}},path:"user_curves"},UserOperations:{screen:po,navigationOptions:function(){return{title:"Operations"}},path:"user_operations"},WeighingOperations:{screen:vo,navigationOptions:function(){return{title:"Operations"}},path:"user_operations"},DataEditor:{screen:jo,navigationOptions:function(){return{title:"User Data"}},path:"user_dataedtior"},DataDisplay:{screen:Vo,navigationOptions:function(){return{title:"User Data"}},path:"user_datadisplay"},DataPlotter:{screen:Go,navigationOptions:function(){return{title:"Batch Data"}},path:"user_dataplotter"}},{initialRouteName:"UserFront",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerTitleStyle:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zo(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Fr.navigationHeader),headerRight:function(){return s.a.createElement(tr.a,{style:{padding:6}})}}});hr.a.create({});function Yo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var qo=function(e){cr()(n,e);var t=Yo(n);function n(e){var a;return rr()(this,n),(a=t.call(this,e)).state={ISLOADPAGE:!0},a}return sr()(n,[{key:"getData",value:function(){}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.props.clearDataMem(),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.checkData(this.props)}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,n=this.props.firebase.firebaseUser;return s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullSize,Ir.fillColMain]},n?s.a.createElement(tr.a,{style:Ir.textContainer},s.a.createElement(_r.a,{style:Fr.text},"Welcome: ",n.displayName?n.displayName:n.email)):s.a.createElement(s.a.Fragment,null),s.a.createElement(Xr,{Texts:["User Board","Systems"],Images:[kr.DashBoard,kr.System],onPress:function(e){switch(e.text){case"User Board":ie.navigate("UserBoard");break;case"Systems":ie.navigate("SystemBoard")}e.text}}),s.a.createElement(tr.a,{style:[Ir.buttonContainer,Ir.midWidth]},s.a.createElement(qr,{Text:"LogOut",onPress:function(){e.props.logOut()}}))),(t||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"}))}}]),n}(i.Component),Xo=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(ae.setFirebaseError(t))},setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},clearDataMem:function(){return e(ae.actionStarting(zt.CLEAR,Gt.USERSDATA))},logOut:function(){return e(ae.actionStarting(zt.SIGN,Gt.USERSDATA))}}}))(qo);function Qo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var Zo=function(e){cr()(n,e);var t=Qo(n);function n(e){var a;rr()(this,n);var r=(a=t.call(this,e)).setData(e).UserList;return a.state={UserList:r,User:""},a}return sr()(n,[{key:"getData",value:function(){this.props.getUsers()}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,n=null;return t&&t.users&&(n=on(t.users)),{UserList:n}}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase&&this.props.firebase.localDataStore&&this.props.firebase.localDataStore.users&&JSON.stringify(this.state.UserList)!==JSON.stringify(on(this.props.firebase.localDataStore.users)))){var n=this.setData(this.props).UserList;this.setState({UserList:n})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading;return s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullWidth,Ir.fill]},s.a.createElement(tr.a,{style:[Ir.fill,Ir.buttonContainer,Ir.fullWidth,xr.bottomMargin,Ir.column]},this.state.UserList?s.a.createElement(tr.a,{style:[Ir.fill,Ir.borderContainer,xr.smallHorizontalPadding,xr.smallVerticalPadding,{maxWidth:800,marginTop:10}]},s.a.createElement(Ps.a,{style:Ko.container},s.a.createElement(Ds.a,{data:Object.keys(this.state.UserList).filter((function(e){return"__jsogObjectId"!==e})),renderItem:function(t){var n=t.item,a=(t.index,e.state.UserList[n]);return s.a.createElement(tr.a,{style:[Ir.fill,Ir.rowCenter,Ir.fullWidth,{height:35}]},s.a.createElement(ti,{Title:a.name,itemStyle:[{minWidth:190,height:35}],onPress:function(){}}),s.a.createElement(ti,{itemStyle:[{width:70,height:35,justifyContent:"center"}],Title:"",onPress:function(){e.setState({User:a.name})}}),s.a.createElement(ti,{itemStyle:[{width:90,height:35}],Title:a.state,onPress:function(){e.setState({User:a.name})}}))},keyExtractor:function(e,t){return t.toString()}}))):s.a.createElement(s.a.Fragment,null),s.a.createElement(Zr.b,{label:"User-tag:",containerStyle:[{borderWidth:1,marginTop:10}],style:[Fr.input],onChangeText:function(t){e.setState({User:t})},value:this.state.User}))),(t||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"}))}}]),n}(i.Component),Ko=hr.a.create({circle:{width:125,height:125,borderRadius:62.5,marginTop:xr.tiny,marginLeft:xr.tiny}}),$o=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(ae.setFirebaseError(t))},setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},getUsers:function(){return e(ae.actionStarting(zt.FETCH,Gt.USERS,{UserId:""}))}}}))(Zo);function ec(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr()(e);if(t){var r=pr()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ur()(this,n)}}var tc=function(e){cr()(n,e);var t=ec(n);function n(e){var a;rr()(this,n);var r=(a=t.call(this,e)).setData(e).FarmList;return a.state={FarmList:r,Farm:{name:""}},a}return sr()(n,[{key:"getData",value:function(){this.props.getFarms()}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,n=null;return t&&t.farms&&(n=on(t.farms)),{FarmList:n}}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase&&this.props.firebase.localDataStore&&this.props.firebase.localDataStore.farms&&JSON.stringify(this.state.FarmList)!==JSON.stringify(on(this.props.firebase.localDataStore.farms)))){var n=this.setData(this.props).FarmList;this.setState({FarmList:n})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading;return s.a.createElement(tr.a,{style:[Ir.mainContainer]},s.a.createElement(tr.a,{style:[Ir.contentContainer,Ir.fullWidth,Ir.fill]},s.a.createElement(tr.a,{style:[Ir.fill,Ir.buttonContainer,Ir.fullWidth,xr.bottomMargin,Ir.column]},this.state.FarmList?s.a.createElement(tr.a,{style:[Ir.fill,Ir.borderContainer,xr.smallHorizontalPadding,xr.smallVerticalPadding,{maxWidth:800,marginTop:10}]},s.a.createElement(Ps.a,{style:nc.container},s.a.createElement(Ds.a,{data:Object.keys(this.state.FarmList).filter((function(e){return"__jsogObjectId"!==e})),renderItem:function(t){var n=t.item,a=(t.index,e.state.FarmList[n]);return a.id=n,s.a.createElement(tr.a,{style:[Ir.fill,Ir.rowCenter,Ir.fullWidth,{height:35}]},s.a.createElement(ti,{Title:a.name,itemStyle:[{minWidth:100,height:35}],onPress:function(){}}),s.a.createElement(ti,{itemStyle:[{minWidth:150,height:35,justifyContent:"center"}],Title:a.manager,onPress:function(){e.setState({Farm:a})}}),s.a.createElement(ti,{itemStyle:[{minWidth:150,height:35}],Title:a.email,onPress:function(){e.setState({Farm:a})}}))},keyExtractor:function(e,t){return t.toString()}}))):s.a.createElement(s.a.Fragment,null),s.a.createElement(tr.a,{style:[Ir.rowCenter,Ir.fullWidth,{height:120}]},s.a.createElement(Zr.b,{label:"Farm-tag:",containerStyle:[Ir.halvWidth,{borderWidth:1,marginTop:10}],style:[Fr.input],editable:!1,onChangeText:function(t){var n=e.state.Farm;n.name=t,e.setState({Farm:n})},value:this.state.Farm.name}),s.a.createElement(qr,{Text:"Consys",boxStyle:[{marginLeft:10}],onPress:function(){}}),s.a.createElement(qr,{Text:"Farm Panel",boxStyle:[{marginLeft:10}],onPress:function(){""!==e.state.Farm.id&&(e.props.clearDataMem(),e.props.setUserFarm(e.state.Farm.id),ie.navigate("UserPanel"))}})))),(t||this.props.firebase.viewIsLoading)&&s.a.createElement(ji.a,{style:Ir.loadingContainer,size:"large"}))}}]),n}(i.Component),nc=hr.a.create({circle:{width:125,height:125,borderRadius:62.5,marginTop:xr.tiny,marginLeft:xr.tiny}}),ac=Object(o.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(ae.setFirebaseError(t))},setViewLoading:function(t){return e(ae.viewIsLoading(t))},setViewError:function(t){return e(ae.setViewError(t))},clearDataMem:function(){return e(ae.actionStarting(zt.CLEAR,Gt.USERSDATA))},getFarms:function(){return e(ae.actionStarting(zt.FETCH,Gt.FARMS,{FarmId:""}))},setUserFarm:function(t){return e(ae.actionStarting(zt.UPDATE,Gt.USERS,{farms:F()({},t,!0)}))}}}))(tc);function rc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var ic=Object(nr.a)({AdminFront:{screen:Xo,navigationOptions:function(){return{title:"Admin Panel",headerLeft:function(){return s.a.createElement(tr.a,{style:{padding:6,paddingLeft:15}},s.a.createElement(Zr.a,{type:"ionicon",name:"md-arrow-back",size:25,color:"black",onPress:function(){return ie.navigate("MainStack")}}))}}},path:"admin_front"},UserBoard:{screen:$o,navigationOptions:function(){return{title:"User Board"}},path:"admin_user_board"},SystemBoard:{screen:ac,navigationOptions:function(){return{title:"System Board"}},path:"admin_system_board"},UserPanel:{screen:Jo,navigationOptions:function(){return{title:"Admin Panel",headerLeft:function(){return s.a.createElement(tr.a,{style:{padding:6,paddingLeft:15}},s.a.createElement(Zr.a,{type:"ionicon",name:"md-arrow-back",size:25,color:"black",onPress:function(){return ie.navigate("SystemBoard")}}))}}},path:"admin_front"}},{initialRouteName:"AdminFront",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerTitleStyle:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rc(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Fr.navigationHeader),headerRight:function(){return s.a.createElement(tr.a,{style:{padding:6}})}}}),sc=Object(nr.a)({SplashScreen:{screen:Vr,navigationOptions:function(){return{headerShown:!1}}},MainStack:{screen:Vi,path:"Front"},AuthStack:vs,UserPanel:Jo,AdminPanel:ic,DeepLinkingScreen:{screen:Hr,path:"deeplink"}},{initialRouteName:"SplashScreen",headerMode:"none",defaultNavigationOptions:{headerTitleAlign:"center",headerRight:function(){return s.a.createElement(tr.a,{style:{padding:6}})}}}),oc=Object(re.createAppContainer)(sc),cc=function(){var e=Object(o.c)();return Object(i.useEffect)((function(){e(k.startup())}),[]),s.a.createElement(tr.a,{style:Ir.fill},s.a.createElement(oc,{ref:function(e){ie.setTopLevelNavigator(e)},uriPrefix:"agrisysapp://"}))},lc=function(e,t){var n=[],a=[],r=Object(f.b)();n.push(r),a.push(l.a.apply(void 0,n));var i=Object(p.b)(E,e),s=Object(l.e)(i,l.d.apply(void 0,a)),o=Object(p.c)(s);if("ios"===u.a.OS||"android"===u.a.OS){var c=new h.a;c.setLogLevel(h.c.Verbose);var g={BLEManager:c,BlueManager:d.a.BlueToothControl};r.run(t,g)}else r.run(t);return{store:s,persistor:o}}(Object(l.c)({example:xa,device:za,firebase:er}),wa),uc=lc.store,fc=lc.persistor;t.a=function(){return s.a.createElement(o.a,{store:uc},s.a.createElement(c.PersistGate,{loading:null,persistor:fc},s.a.createElement(cc,null)))}},370:function(e,t,n){e.exports=n(629)},497:function(e,t,n){e.exports=n.p+"static/media/Home.1fff8434.png"},498:function(e,t,n){e.exports=n.p+"static/media/Dashboard.26766c7a.png"},499:function(e,t,n){e.exports=n.p+"static/media/System.7e4af00c.png"},500:function(e,t,n){e.exports=n.p+"static/media/Feed-Curves.da739887.png"},501:function(e,t,n){e.exports=n.p+"static/media/Growth-curve.7f9a7fea.png"},502:function(e,t,n){e.exports=n.p+"static/media/User.d73be9fd.png"},503:function(e,t,n){e.exports=n.p+"static/media/Sow.beff0aff.png"},504:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABRCAYAAACuepoLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAq9JREFUeNrsnT1Lw1AUhk9FRFEhDhV0qgouLlrcjYOLi3XpasEfYjo62X/Quorg5iS0P0D8GBzVOAkWP6CVigg1197E0Naa3ER7b/K+cLig3tP4eJJz8g5XIig0JRS8Zr3Pn1+JUgE0JYgjK1JRqEz2y9DE1IJwgrdalRr1BxoZm6Th8aTvfVwvVqxacaE8zLXtQ+EEN+cHdH12QHPpLM0uZX3tbdSrdHmyS7VH0wY6w1caQNvwp5GxJC2v57+q2pJmRc7+HmAKaHBolGbTTkVvAGYIFdoBucfPp7p1rH8efwr280iJiu3ytUUr9iSY5+yZrqIqTAayzB+sIgOqHtJgq7vGD1IRpsaHUY3PTptWmCJjC5+/Ao8/7hlONZgZ/ow0OQylqkIGubv5Cl/3ATI4zFQUX+T7BRMCTMCM5mumqhf+fH8lvLdRqzqraJ7aU++pscznuyBvPk3XjEh/lKcpWZSVr8x+mMNufby/2p6m+rc58xRFZZvD0/O6b3PY/Zg5Pd5BA0I3B0yMRlsU3Ms0ALOlXAh5dwCzpZIVdwEh5uP4x+gGk1lwlYAQjDjCRAMCTMAETAgwARMwoZ5zphJiNpqonri73lrF8thu/U+C0x5Dpz0v2fWYKlcmGhC6OQSYMo1GMjnthkSsfr2WRFsD0lFfnlh5rswSyeO0y5BHyKiO4mgURh7POdCA0M0BEzAhwARMwIQAEzABEzAhwARMwIQ6FRen3fgPmHDaxVh5rswSwWnvlsOX4LQHzIEGhG4OmIAJASZgAiYEmIAJmPGEafJVBxZHi21sPCvH30Fv8W7uqMj3F/1uZCe6PtP3vxvQYg7TcO33dLe6LTh2ACk7Gpe5RxkeFcELKYd0m/UrT4q+zxMtBODgHOLcjHnc8oLyrMQvUDWKr3xX46cAAwCxt3YCfnN46AAAAABJRU5ErkJggg=="},505:function(e,t,n){e.exports=n.p+"static/media/Area_Colour.f4a4e098.png"},506:function(e,t,n){e.exports=n.p+"static/media/AutoPig.ec16c410.png"},507:function(e,t,n){e.exports=n.p+"static/media/Feed-Components.224ca1b3.png"},508:function(e,t,n){e.exports=n.p+"static/media/Hexagon-globe.fce26805.png"},509:function(e,t,n){e.exports=n.p+"static/media/Hexa-icon.5129d536.png"},510:function(e,t,n){e.exports=n.p+"static/media/Logo.9b051259.png"},511:function(e,t,n){e.exports=n.p+"static/media/TOM.c88886f3.png"}},[[370,1,2]]]);
//# sourceMappingURL=app.4609aa47.chunk.js.map