(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{374:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(23),o=n(315),c=n(63),s=n(121),l=n(207),u=n(241),f=n.n(u),m=n(316),g=n.n(m),b=Object(l.a)((function(e,t){return f.a.encode(e)}),(function(e,t){return f.a.decode(e)})),d={key:"root",storage:g.a,transforms:[b],blacklist:[]},p=n(24),h=n.n(p),y=n(30),O=n(88),E=Object(O.createActions)({startup:null}),v=E.Types,j=E.Creators,S=v,w=j,P=Object(O.createActions)({fetchUser:null,fetchUserLoading:null,fetchUserSuccess:["user"],fetchUserFailure:["errorMessage"]}),C=P.Types,x=P.Creators,D=C,k=x,I=n(5),A=n.n(I);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F,R=Object(O.createActions)({firebaseStartup:null,firebaseIsLoading:["loadingstate"],setFirebaseError:["errorMessage"],setCurrentData:["data"],actionStarting:["initdata"],fetchStarting:["action","ref","params"],fetchSuccess:["data"],fetchFailure:["errorMessage"]}),U=R.Types,N=R.Creators,z=T({},U),H=T({},N),L=n(52);var W={navigate:function(e,t){F.dispatch(L.NavigationActions.navigate({routeName:e,params:t}))},replace:function(e,t){F.dispatch(L.StackActions.replace({routeName:e,params:t}))},navigateAndReset:function(e,t){F.dispatch(L.StackActions.reset({index:0,key:null,actions:[L.NavigationActions.navigate({routeName:e,params:t})]}))},setTopLevelNavigator:function(e){F=e}},G=h.a.mark(_);function _(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.e)(H.firebaseStartup());case 2:W.navigateAndReset("MainStack");case 3:case"end":return e.stop()}}),G)}var B=n(337),V=n.n(B),J=n(636),Z=n(633),Y=n(634),q=Object(J.a)(3,(function(e,t,n){var r=Object(Z.a)(Number);return r(e)&&r(t)&&r(n)&&Object(Y.a)(n,e)&&Object(Y.a)(t,n)}))(200,299),Q=V.a.create({baseURL:"https://jsonplaceholder.typicode.com/users/",headers:{Accept:"application/json","Content-Type":"application/json"},timeout:3e3});var X=function(){if(console.log("user fetch test"),Math.random()>.5)return new Promise((function(e,t){console.log("error"),e(null)}));var e=Math.floor(Math.random()/.1)+1;return Q.get(e.toString()).then((function(e){return q(e.status)?e.data:null}))},K=h.a.mark($);function $(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.e)(k.fetchUserLoading());case 2:return t.next=4,Object(y.b)(X);case 4:if(!(e=t.sent)){t.next=10;break}return t.next=8,Object(y.e)(k.fetchUserSuccess(e));case 8:t.next=12;break;case 10:return t.next=12,Object(y.e)(k.fetchUserFailure("There was an error while fetching user informations."));case 12:case"end":return t.stop()}}),K)}var ee=n(152),te=n(35),ne=(n(278),n(313),n(279),"starter"),re="free",ae="owner",ie="admin",oe={USERS:"users",FARMS:"farms",SECTIONS:"farms_data/$farmid/sections",PENS:"farms_data/$farmid/pens",PIGS:"farms_data/$farmid/pigs",WEIGHING:"farms_data/$farmid/pens/$penid/weighings/",GRAPH:"farms_data/$farmid/Graph/$graphid/",FARMDATAS:"farms_data/$farmid/datas/",SHARES:"shareData"},ce="create",se="sign",le="fetch",ue="move",fe="delete",me=/[^a-zA-Z]/g,ge=/[^0-9]/g;function be(e,t){var n=e.replace(me,""),r=t.replace(me,"");if(n===r){var a=parseInt(e.replace(ge,""),10),i=parseInt(t.replace(ge,""),10);return a===i?0:a>i?1:-1}return n>r?1:-1}function de(e){var t,n={},r=[];for(t in e)e.hasOwnProperty(t)&&"__jsogObjectId"!==t&&r.push(t);for(r.sort(be),t=0;t<r.length;t++)n[r[t]]=e[r[t]];return n}function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t){return new Promise((function(n,r){te.a.auth().createUserWithEmailAndPassword(e,t).then((function(){var e=te.a.auth().currentUser,t="users/"+e.uid;te.a.database().ref(t).set({name:e.displayName?e.displayName:e.email,state:ne}).then((function(){n(null)})).catch((function(e){console.log("UserCreate database Error: ",e),n({error:"Database error"})}))})).catch((function(e){console.log("UserCreate Error: ",e),"auth/email-already-in-use"===e.code&&n({error:"The email address is already in use."}),"aith/invalid-email"===e.code&&n({error:"The email addres is invalid."})}))}))}function Oe(){return new Promise((function(e,t){te.a.auth().signOut().then((function(){e(!0)}))}))}function Ee(e,t){if(e){var n="farms_data/"+e+"/sections";return t&&(n+="/"+t),te.a.database().ref(n).once("value").then((function(e){return{sections:e.val()}}))}return new Promise((function(e,t){console.log("Fecth Pigs Error"),e(null)}))}function ve(e,t){if(e){var n="farms_data/"+e+"/pens";return t&&(n+="/"+t),te.a.database().ref(n).once("value").then((function(e){if(t){var n=e.val();return n.datas||(n.datas={}),n.datas.gcurve||(n.datas.gcurve="default"),{pens:A()({},t,n)}}return{pens:e.val()}}))}return new Promise((function(e,t){console.log("Fecth Pens Error"),e(null)}))}function je(e,t){if(e){var n="farms_data/"+e+"/pigs";return t&&(n+="/"+t),new Promise((function(e,r){te.a.database().ref(n).once("value",(function(n){var r=A()({},n.key,{}),a={};n.forEach((function(e){a[e.key]=e.val(),r[n.key]=a})),e(t?{pigs:r}:r)}))}))}return new Promise((function(e,t){console.log("Fecth Pigs Error"),e(null)}))}function Se(e,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;if(e){var r="farms_data/"+e+"/weighings";if(t)return r+="/"+t,new Promise((function(e,t){te.a.database().ref(r).orderByChild("time").limitToLast(n).once("value",(function(t){var n=A()({},t.key,{});t.forEach((function(e){n[t.key][e.key]=e.val()})),e({weighings:n})}))}))}return new Promise((function(e,t){console.log("Fecth Pens Error"),e(null)}))}function we(e,t){if(e){var n="farms_data/"+e+"/graph";if(t)return n=n+"/"+t,new Promise((function(e,r){te.a.database().ref(n).once("value").then((function(n){var r=n.val();r?(console.log("test fetch user graph",r),e(null)):("default"===t&&(t="gcurve"),te.a.database().ref("farms_data/Agrisys/graph/"+t).once("value").then((function(t){var n=t.val();if(n){var r=A()({},t.key,n);e({graphs:r})}else e(null)})).catch((function(t){console.log("Get Agrisys graph Error: ",t),e(null)})))})).catch((function(t){console.log("Get farm graph Error: ",t),e(null)}))}))}return new Promise((function(e,t){console.log("Fecth Graph Error"),e(null)}))}var Pe=function(){return new Promise((function(e,t){e(null)}))},Ce=function(){return new Promise((function(e,t){var n;try{n=function(){var e;return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e="",t.prev=1,t.next=4,h.a.awrap(te.a.messaging().getToken());case 4:e=t.sent,console.log("Device_token: ",e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:return t.abrupt("return",e);case 12:case"end":return t.stop()}}),null,null,[[1,8]],Promise)}()}catch(r){}n||e("Could not find Firebase Token"),e(n)}))},xe=function(e,t){if(te.a.auth().currentUser){if(te.a.auth().currentUser.email==e)return new Promise((function(e,t){e(!0)}));Oe()}return new Promise((function(n,r){te.a.auth().signInWithEmailAndPassword(e,t).then((function(){n(!0)})).catch((function(e){console.log("User Signin Error: ",e),"auth/email-already-in-use"===e.code&&n("The email address is already in use."),"aith/invalid-email"===e.code?n("The email addres is invalid."):n("Could not singin")}))}))},De=Oe,ke=function e(t,n){switch(t){case oe.USERS:return function(e){var t=e||te.a.auth().currentUser;if(t.uid){var n="users/"+t.uid;return te.a.database().ref(n).once("value").then((function(e){return e.val()}))}return new Promise((function(e,t){console.log("User uid in fecth unknown"),e(null)}))}(n);case oe.FARMS:return function(e){var t="farms";if(e)return t+="/"+e,te.a.database().ref(t).once("value").then((function(e){return{farms:e.val()}}));return new Promise((function(e,t){console.log("Fecth Farm Error"),e(null)}))}(n);case oe.SECTIONS:return Ee(n);case oe.PENS:return ve(n[0],n[1]);case oe.PIGS:return je(n);case oe.WEIGHING:return Se(n[0],n[1]);case oe.GRAPH:return we(n[0],n[1]);case oe.PENS+oe.WEIGHING:return new Promise((function(e,t){var r={};ve(n[0],n[1]).then((function(t){r=he(he({},r),t),Se(n[0],n[1]).then((function(t){r=he(he({},r),t),e(r)})).catch((function(t){e(r)}))})).catch((function(t){e(r)}))}));case oe.SECTIONS+oe.WEIGHING:return new Promise((function(e,t){var r={};Ee(n[0]).then((function(t){r=he(he({},r),t);var a=0,i=0;Object.keys(r.sections).forEach((function(t){i+=Object.keys(r.sections[t].pens).length,Object.keys(r.sections[t].pens).forEach((function(t){var o=n[1]&&!isNaN(n[1])?n[1]:1;Se(n[0],t,0,o).then((function(t){a++;var n=he(he({},r.weighings),t.weighings);r=he(he({},r),{},{weighings:n}),a===i&&e(r)})).catch((function(t){console.log(t),e(r)}))}))}))})).catch((function(t){console.log(t),e(null)}))}));case oe.GRAPH+oe.WEIGHING:return new Promise((function(t,r){var a={};we(n[0],n[1]).then((function(r){a=he(he({},a),r),e(oe.SECTIONS+oe.WEIGHING,[n[0],n[2]]).then((function(e){a=he(he({},a),e),t(a)})).catch((function(e){console.log(e),t(a)}))})).catch((function(e){t(null)}))}));default:return new Promise((function(e,n){console.log("fecth unknown",t),e(null)}))}},Ie=function(e,t){switch(e){case oe.USERS:return ye(t[0],t[1]);case oe.PIGS:return function(e,t,n,r){if(e){var a="farms_data/"+e+"/";return new Promise((function(i,o){if(t){var c=a+"pigs/"+t+"/";te.a.database().ref(c).set({pen:n||0}).then((function(){console.log("Firebase Service.. not tested.."),je(e,t).then((function(e){i(e)}))}))}else!function(e,t,n,r,a){if(n){var i="farms_data/"+e+"/pens/"+n+"/datas";te.a.database().ref(i+"/count").once("value").then((function(t){var o=t.val();o=r&&!isNaN(r)?parseInt(o)+parseInt(r):parseInt(o)+1,te.a.database().ref(i).update({count:o}).then((function(){ve(e,n).then((function(e){a(e)}))}))})).catch((function(e){console.log("Create new pig Error: ",e),a(null)}))}}(e,0,n,r,i)}))}}(t[0],t[1],t[2],t[3]);case oe.WEIGHING:return function(e,t,n){if(e){var r="farms_data/"+e+"/weighings";if(t)return r+="/"+t+"/",new Promise((function(a,i){var o=te.a.database().ref(r).push();o.key;o.set({time:te.a.database.ServerValue.TIMESTAMP,weight:n}).then((function(){Se(e,t).then((function(e){a(e)}))})).catch((function(e){console.log("Create Weight Error: ",e),a(null)}))}))}}(t[0],t[1],t[2]);case oe.PENS:if(console.log(t),!(t.length>=4))return function(e,t,n){if(e){var r="farms_data/"+e+"/";return new Promise((function(e,a){if(t){var i=r+"pens/"+t+"/";te.a.database().ref(i).set({section:n}).then((function(){te.a.database().ref(r+"sections/"+n+"/pens").update(A()({},t,!0)).then((function(){e(null)}))}))}}))}}(t[0],t[2],t[1]);var n="farms_data/"+t[0]+"/";if(t[3]==fe)return new Promise((function(e,r){te.a.database().ref(n+"pens/"+t[2]).remove().then((function(){te.a.database().ref(n+"sections/"+t[1]+"/pens/"+t[2]).remove().then((function(){e(null)}))}))}));default:return new Promise((function(t,n){console.log("create unknown",e),t(null)}))}},Ae=function(e,t,n,r){return new Promise((function(a){ee.a.alert(e,t,[{text:n,onPress:function(){a()}}],{cancelable:r,onDismiss:function(){a()}})}))},Me=n(252),Te=h.a.mark(He),Fe=h.a.mark((function(e){var t;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t={to:e,messageId:"test1",messageType:"test2",notification:{title:"Foo",body:"Bar"}},te.a.messaging().sendMessage(t).then((function(e){console.log(e)}));case 2:case"end":return n.stop()}}),Fe)})),Re=h.a.mark(Le),Ue=h.a.mark(We),Ne=h.a.mark(Ge),ze=h.a.mark(_e);function He(){var e,t;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(y.e)(H.setFirebaseError(null));case 2:return console.log(Me.a.manifest.web.config.firebase),te.a.initializeApp(Me.a.manifest.web.config.firebase),n.next=6,Object(y.b)(Pe);case 6:if(!(e=n.sent)){n.next=12;break}return n.next=10,Object(y.e)(H.fetchFailure(e));case 10:n.next=22;break;case 12:return n.next=14,Object(y.d)(Le);case 14:return n.next=16,Object(y.d)(Ge);case 16:return n.next=18,Object(y.d)(_e);case 18:return n.next=20,Object(y.b)(Ce);case 20:t=n.sent,console.log("Firebase Token: ",t);case 22:console.log("Firebase Startup : Done");case 23:case"end":return n.stop()}}),Te)}function Le(){var e,t,n,r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(s.c)((function(e){var t=te.a.auth().onAuthStateChanged((function(t){e(null==t?"NONE":t)}));return function(){t()}}),s.a.expanding(1));case 2:e=a.sent,a.prev=3;case 4:return t={localDataStore:{}},a.next=7,Object(y.g)(e);case 7:if(n=a.sent,t.firebaseUser="NONE"===n?null:n,!t.firebaseUser){a.next=14;break}return a.next=12,Object(y.b)(ke,oe.USERS,n);case 12:r=a.sent,t.localDataStore.userData=r;case 14:return a.next=16,Object(y.e)(H.fetchSuccess(t));case 16:console.log("New auth: ",t);case 17:a.next=4;break;case 19:return a.prev=19,a.next=22,Object(y.c)();case 22:if(!a.sent){a.next=24;break}e.close();case 24:return a.finish(19);case 25:case"end":return a.stop()}}),Re,null,[[3,,19,25]])}function We(e){var t,n,r,a,i,o,c,s;return h.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:t=e.action,n=e.ref,r=e.params,l.t0=t,l.next=l.t0===le?4:l.t0===ce?11:l.t0===ue?23:l.t0===fe?24:l.t0===se?46:70;break;case 4:if(!Object.values(oe).includes(n)&&n!==oe.PENS+oe.WEIGHING&&n!==oe.SECTIONS+oe.WEIGHING&&n!==oe.GRAPH+oe.WEIGHING){l.next=10;break}return l.next=7,Object(y.b)(ke,n,r);case 7:return a=l.sent,l.next=10,Object(y.e)(H.fetchSuccess({localDataStore:a}));case 10:return l.abrupt("break",71);case 11:if(!Object.values(oe).includes(n)){l.next=22;break}return l.next=14,Object(y.b)(Ie,n,r);case 14:if(!(i=l.sent)||!i.error){l.next=20;break}return l.next=18,Object(y.e)(H.fetchFailure(i.error));case 18:l.next=22;break;case 20:return l.next=22,Object(y.e)(H.fetchSuccess({localDataStore:i}));case 22:case 23:return l.abrupt("break",71);case 24:if(!Object.values(oe).includes(n)){l.next=45;break}return r.push(t),l.next=28,Object(y.b)(Ie,n,r);case 28:if(!(o=l.sent)||!o.error){l.next=34;break}return l.next=32,Object(y.e)(H.fetchFailure(o.error));case 32:l.next=45;break;case 34:l.t1=n,l.next=l.t1===oe.PENS?37:42;break;case 37:return l.next=39,Object(y.e)(H.fetchStarting(le,oe.PENS,[r[0]]));case 39:return l.next=41,Object(y.e)(H.fetchStarting(le,oe.SECTIONS,[r[0]]));case 41:return l.abrupt("break",45);case 42:return l.next=44,Object(y.e)(H.fetchSuccess({localDataStore:o}));case 44:return l.abrupt("break",45);case 45:return l.abrupt("break",71);case 46:return l.next=48,Object(y.f)((function(e){return e.firebase.firebaseUser}));case 48:return c=l.sent,l.next=51,Object(y.e)(H.actionStarting());case 51:if(!c){l.next=61;break}return l.next=54,Object(y.b)(De);case 54:if(l.sent){l.next=59;break}return l.next=58,Object(y.e)(H.fetchFailure("Could not LogOut"));case 58:return l.abrupt("return");case 59:l.next=67;break;case 61:return l.next=63,Object(y.b)(xe,r[0],r[1]);case 63:if("string"!==typeof(s=l.sent)){l.next=67;break}return l.next=67,Object(y.e)(H.fetchFailure(s));case 67:return l.next=69,Object(y.e)(H.fetchSuccess());case 69:case 70:return l.abrupt("break",71);case 71:case"end":return l.stop()}}),Ue)}function Ge(){var e,t;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(s.c)((function(e){var t=te.a.messaging().onMessage((function(t){e(t)}));return function(){t()}}),s.a.expanding(1));case 2:e=n.sent,n.prev=3;case 4:return n.next=6,Object(y.g)(e);case 6:if(t=n.sent,console.log("New Firebase message: ",t),!(t.notification&&t.notification.title&&t.notification.body)){n.next=13;break}return n.next=11,Object(y.b)(Ae,t.notification.title,t.notification.body,"Ok",!1);case 11:n.next=14;break;case 13:console.log("New Firebase data message: ",t);case 14:n.next=4;break;case 16:return n.prev=16,n.next=19,Object(y.c)();case 19:if(!n.sent){n.next=21;break}e.close();case 21:return n.finish(16);case 22:case"end":return n.stop()}}),Ne,null,[[3,,16,22]])}function _e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),ze)}var Be=h.a.mark(Ve);function Ve(e){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)([Object(y.h)(S.STARTUP,_),Object(y.h)(D.FETCH_USER,$),Object(y.h)(z.FIREBASE_STARTUP,He),Object(y.h)(z.FETCH_STARTING,We)]);case 2:case"end":return e.stop()}}),Be)}var Je;function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qe,Qe=Object(O.createReducer)({user:{},userIsLoading:!1,userErrorMessage:null},(Je={},A()(Je,D.FETCH_USER_LOADING,(function(e){return Ye(Ye({},e),{},{userIsLoading:!0,userErrorMessage:null})})),A()(Je,D.FETCH_USER_SUCCESS,(function(e,t){var n=t.user;return Ye(Ye({},e),{},{user:n,userIsLoading:!1,userErrorMessage:null})})),A()(Je,D.FETCH_USER_FAILURE,(function(e,t){var n=t.errorMessage;return Ye(Ye({},e),{},{user:{},userIsLoading:!1,userErrorMessage:n})})),Je)),Xe=n(13),Ke=n.n(Xe);function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tt=(qe={},A()(qe,z.FIREBASE_IS_LOADING,(function(e,t){var n=t.loadingstate;return et(et({},e),{},{firebaseIsLoading:n})})),A()(qe,z.SET_FIREBASE_ERROR,(function(e,t){var n=t.errorMessage;return et(et({},e),{},{firebaseErrorMessage:n})})),A()(qe,z.SET_CURRENT_DATA,(function(e,t){var n=t.data;return et(et({},e),{},{currentData:n})})),A()(qe,z.ACTION_STARTING,(function(e,t){var n=t.initdata,r=et(et({},e),n);return et(et({},r),{},{firebaseIsLoading:!0,firebaseErrorMessage:null})})),A()(qe,z.FETCH_STARTING,(function(e){return et(et({},e),{},{firebaseErrorMessage:null})})),A()(qe,z.FETCH_SUCCESS,(function(e,t){var n=t.data,r=et({},e.localDataStore),a=et({},e);if(n){var i=n.localDataStore,o=Ke()(n,["localDataStore"]);i&&(r=0!==Object.keys(i).length?et(et({},e.localDataStore),i):et({},i)),a=et(et({},e),o)}return et(et({},a),{},{localDataStore:r,firebaseIsLoading:!1,firebaseErrorMessage:null})})),A()(qe,z.FETCH_FAILURE,(function(e,t){var n=t.errorMessage;return et(et({},e),{},{firebaseIsLoading:!1,firebaseErrorMessage:n})})),qe),nt=Object(O.createReducer)({firebaseIsLoading:!1,firebaseErrorMessage:null,firebaseUser:null,localDataStore:{},currentViewData:null},tt),rt=n(2),at=n(635),it=n(31),ot=n(3),ct="rgba(0,0,0,0)",st="#ffffff",lt="#ffffff",ut="#a3b9cf",ft="03a489",mt="#dc3545",gt="#4463ab",bt={h1:{fontSize:38},h2:{fontSize:34},h3:{fontSize:30},normal:{fontSize:17}},dt={tiny:5,small:10,normal:15,medium:30,tinyBottomMargin:{marginBottom:5},smallBottomMargin:{marginBottom:10},bottomMargin:{marginBottom:15},mediumBottomMargin:{marginBottom:30},tinyVerticalMargin:{marginVertical:5},smallVerticalMargin:{marginVertical:10},verticalMargin:{marginVertical:15},mediumVerticalMargin:{marginVertical:30},tinyHorizontalMargin:{marginHorizontal:5},smallHorizontalMargin:{marginHorizontal:10},horizontalMargin:{marginHorizontal:15},mediumHorizontalMargin:{marginHorizontal:30},tinyHorizontalPadding:{paddingHorizontal:5},smallHorizontalPadding:{paddingHorizontal:10},horizontalPadding:{paddingHorizontal:15},mediumHorizontalPadding:{paddingHorizontal:30},tinyVerticalPadding:{paddingVertical:5},smallVerticalPadding:{paddingVertical:10},verticalPadding:{paddingVertical:15},mediumVerticalPadding:{paddingVertical:30}},pt={Home:n(498),DashBoard:n(499),System:n(500),Curves:n(501),User:n(502),Sow:n(503),Section:n(504),Haxa_globe:n(505),Hexa_icon:n(506),Logo:n(507),logo:n(508)};function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ot={column:{flexDirection:"column"},colMain:{flexDirection:"column",justifyContent:"center"},colCenter:{flexDirection:"column",alignItems:"center",justifyContent:"center"},colCross:{flexDirection:"column",alignItems:"center"},columnReverse:{flexDirection:"column-reverse"},row:{flexDirection:"row"},rowMain:{flexDirection:"row",justifyContent:"center"},rowCenter:{flexDirection:"row",alignItems:"center",justifyContent:"center"},rowCross:{flexDirection:"row",alignItems:"center"},rowReverse:{flexDirection:"row-reverse"},center:{alignItems:"center",justifyContent:"center"},crossCenter:{alignItems:"center"},crossEnd:{alignItems:"flex-end"},crossStart:{alignItems:"flex-start"},crossStretch:{alignItems:"stretch"},fill:{flex:1},fillCenter:{flex:1,alignItems:"center",justifyContent:"center"},fillCol:{flex:1,flexDirection:"column"},fillColCenter:{flex:1,flexDirection:"column",alignItems:"center",justifyContent:"center"},fillColCross:{flex:1,flexDirection:"column",alignItems:"center"},fillColMain:{flex:1,flexDirection:"column",justifyContent:"center"},fillColReverse:{flex:1,flexDirection:"column-reverse"},fillRow:{flex:1,flexDirection:"row"},fillRowCenter:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center"},fillRowCross:{flex:1,flexDirection:"row",alignItems:"center"},fillRowMain:{flex:1,flexDirection:"row",justifyContent:"center"},fillRowReverse:{flex:1,flexDirection:"row-reverse"},fullSize:{height:"100%",width:"100%"},halvWidth:{width:"50%"},midWidth:{width:"75%"},fullWidth:{width:"100%"},mainCenter:{justifyContent:"center"},mainEnd:{justifyContent:"flex-end"},mainSpaceAround:{justifyContent:"space-around"},mainSpaceBetween:{justifyContent:"space-between"},mainStart:{justifyContent:"flex-start"},mainContainer:yt(yt({flex:1,flexDirection:"column",alignItems:"center"},dt.mediumHorizontalMargin),dt.mediumBottomMargin),contentContainer:yt(yt({flex:1,flexDirection:"column",alignItems:"center"},dt.mediumHorizontalMargin),dt.mediumVerticalMargin),borderContainer:yt(yt(yt({borderWidth:1,borderColor:"#000",borderRadius:15},dt.tinyHorizontalPadding),dt.tinyVerticalPadding),{},{maxWidth:450}),textContainer:yt(yt({},bt.normal),{},{marginBottom:dt.normal,alignItems:"center"}),buttonContainer:{marginBottom:dt.small,maxWidth:450},loadingContainer:{position:"absolute",left:0,right:0,top:0,bottom:0,alignItems:"center",justifyContent:"center",backgroundColor:"#F5FCFF88"},logoContainer:{width:"100%",height:220},backgroundReset:{backgroundColor:ct},rotate90:{transform:[{rotate:"90deg"}]},rotate90Inverse:{transform:[{rotate:"-90deg"}]},mirror:{transform:[{scaleX:-1}]},scrollSpaceAround:{flexGrow:1,justifyContent:"space-around"},scrollSpaceBetween:{flexGrow:1,justifyContent:"space-between"},selfStretch:{alignSelf:"stretch"},textCenter:{textAlign:"center"},textJustify:{textAlign:"justify"},textLeft:{textAlign:"left"},textRight:{textAlign:"right"}};function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jt={button:{backgroundColor:ut,color:lt},buttonText:{color:lt},error:vt(vt({},bt.normal),{},{color:mt,marginBottom:dt.tiny,textAlign:"center"}),result:vt(vt({},bt.normal),{},{marginBottom:dt.tiny,textAlign:"center"}),text:vt(vt({},bt.normal),{},{marginBottom:dt.tiny,textAlign:"center"}),input:vt(vt({},bt.normal),{},{height:24}),navigationHeader:{textAlign:"center",alignSelf:"center",flexGrow:1}},St=ot.a.create({container:{backgroundColor:ut}}),wt=function(){return Object(r.useEffect)((function(){}),[]),a.a.createElement(rt.a,{style:[Ot.fillRowCenter,St.container]},a.a.createElement(rt.a,{style:[Ot.center,Ot.logoContainer]},a.a.createElement(it.a,{style:Ot.fullSize,source:pt.Hexa_icon,resizeMode:"contain"})))},Pt=n(21),Ct=function(){return a.a.createElement(rt.a,{style:[Ot.fillCenter,Ot.rowMain,dt.mediumHorizontalMargin]},a.a.createElement(Pt.a,null,"This is deep linking example screen which can be accessed using agrissysapp://deeplink scheme!"))},xt=n(28);function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var It=ot.a.create({boxContainer:kt(kt({},Ot.center),dt.tinyVerticalMargin),button:kt(kt(kt(kt({borderRadius:15},Ot.center),Ot.fullWidth),dt.horizontalPadding),jt.button),text:kt(kt(kt(kt({},jt.buttonText),dt.verticalPadding),Ot.center),{},{textAlign:"center"}),icon:kt(kt(kt({},Ot.colCenter),dt.smallVerticalMargin),{},{width:"25%",height:50})}),At=function(e){var t=[a.a.createElement(Pt.a,{style:[It.text,e.textStyle],key:0},e.Text)],n=[];if(e.icon){var r=a.a.createElement(it.a,{style:Ot.fullSize,source:e.icon,resizeMode:"contain"});n=a.a.createElement(rt.a,{style:[It.icon,e.iconStyle]},r)}return a.a.createElement(xt.a,{style:[It.boxContainer,e.boxStyle],onPress:e.onPress},e.icon?a.a.createElement(rt.a,{style:[It.button,e.buttonStyle,Ot.rowCenter]},a.a.createElement(rt.a,{style:[Ot.colCenter,Ot.fill]},t),n):a.a.createElement(rt.a,{style:[It.button,e.buttonStyle]},t))},Mt=n(46);function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rt=ot.a.create({listitem:{borderWidth:1,borderColor:"#000",borderRadius:25,backgroundColor:"#fff",paddingVertical:10,paddingHorizontal:25}}),Ut=function(e){var t=e.key?e.key:0;return a.a.createElement(Mt.c,{key:t,containerStyle:Ft(Ft({},Rt.listitem),e.itemStyle),button:!0,onPress:e.onPress},a.a.createElement(Mt.c.Content,null,a.a.createElement(Mt.c.Title,null,e.Title),a.a.createElement(Mt.c.Subtitle,null,e.Subtitle)))};function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ht=ot.a.create({contentBox:zt(zt(zt(zt({},Ot.fill),Ot.colCenter),Ot.borderContainer),{},{borderRadius:0,minHeight:30})}),Lt=function(e){var t=[];e.texts&&e.texts.forEach((function(n,r){t.push(a.a.createElement(rt.a,{style:[Ht.contentBox,e.textsStyle],key:"text_"+r},a.a.createElement(Pt.a,null,n)))}));var n=[];e.datas&&e.datas.forEach((function(t){n.push(a.a.createElement(rt.a,{style:[Ht.contentBox,e.datasStyle],key:"data_"+o},a.a.createElement(Pt.a,null,t)))}));for(var r=t.length>n.length?t.length:n.length,i=[],o=0;o<r+1;o++){var c=[];o<t.length?c.push(t[o]):c.push(a.a.createElement(rt.a,{style:[Ot.fill,Ot.colCenter],key:"leftSpace_"+o})),c.push(a.a.createElement(rt.a,{style:[Ot.fill,Ot.colCenter,{maxWidth:20}],key:"seperator_"+i.length})),o<n.length?c.push(n[o]):c.push(a.a.createElement(rt.a,{style:[Ot.fill,Ot.colCenter],key:"rightSpace_"+o})),i.push(a.a.createElement(rt.a,{style:[Ot.rowCenter,dt.tinyVerticalMargin],key:"row_"+i.length},c))}return i};ot.a.create({container:{backgroundColor:ut}});function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _t=ot.a.create({logoContainer:Gt(Gt({},Ot.fullWidth),{},{height:190,marginTop:2*dt.medium,marginBottom:dt.medium})}),Bt=function(){var e=Object(i.c)();return Object(r.useEffect)((function(){e(H.setFirebaseError(null))}),[]),a.a.createElement(rt.a,{style:[Ot.mainContainer]},a.a.createElement(rt.a,{style:[_t.logoContainer]},a.a.createElement(it.a,{style:[Ot.fullSize],source:pt.Logo,resizeMode:"contain"})),a.a.createElement(rt.a,{style:[Ot.contentContainer,Ot.fullSize]},a.a.createElement(rt.a,{style:[Ot.textContainer,Ot.fullWidth]},a.a.createElement(Pt.a,{style:jt.text},"Wellcome to Agrisys App"),a.a.createElement(Pt.a,{style:jt.text},"Please choose your action")),a.a.createElement(rt.a,{style:[Ot.buttonContainer,Ot.fullWidth]},a.a.createElement(At,{Text:"Connect to Agrisys Cloud",icon:pt.Haxa_globe,onPress:function(){return W.navigate("AuthStack")}}),a.a.createElement(At,{Text:"Conect to Device",onPress:function(){return W.navigate("DeviceScreen")}}))))},Vt=n(11),Jt=n(187),Zt=n(32),Yt=function(e){if(Object.entries(e.example.user).length<=0)return null;return["Gwenborough","Wisokyburgh","McKenziehaven","South Elvis","Roscoeview"].includes(e.example.user.address.city)};function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xt=ot.a.create({error:Qt(Qt({},bt.normal),{},{color:mt,marginBottom:dt.tiny,textAlign:"center"}),instructions:Qt(Qt({},bt.normal),{},{fontStyle:"italic",marginBottom:dt.tiny,textAlign:"center"}),logoContainer:Qt(Qt({},Ot.fullWidth),{},{height:300,marginBottom:25}),result:Qt(Qt({},bt.normal),{},{marginBottom:dt.tiny,textAlign:"center"}),text:Qt(Qt({},bt.normal),{},{marginBottom:dt.tiny,textAlign:"center"})}),Kt=Vt.a.select({ios:"Press Cmd+R to reload,\nCmd+D or shake for dev menu.",android:"Double tap R on your keyboard to reload,\nShake or press menu button for dev menu."}),$t=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){return e.example.user})),n=Object(i.d)((function(e){return e.example.userIsLoading})),o=Object(i.d)((function(e){return e.example.userErrorMessage}));return Object(r.useEffect)((function(){e(k.fetchUser())}),[]),a.a.createElement(rt.a,{style:[Ot.fillCenter,Ot.rowMain,dt.mediumHorizontalMargin,dt.mediumVerticalMargin]},n?a.a.createElement(Zt.a,{size:"large",color:"#0000ff"}):a.a.createElement(rt.a,null,a.a.createElement(rt.a,{style:Xt.logoContainer},a.a.createElement(it.a,{style:Ot.fullSize,source:pt.logo,resizeMode:"contain"})),a.a.createElement(Pt.a,{style:Xt.text},"To get started, edit App.js"),a.a.createElement(Pt.a,{style:Xt.instructions},Kt),o?a.a.createElement(Pt.a,{style:Xt.error},o):a.a.createElement(rt.a,null,a.a.createElement(Pt.a,{style:Xt.result},"I'm a fake user, my name is ",t.name),a.a.createElement(Pt.a,{style:Xt.result},Yt?"I live in Europe !":"I don't live in Europe.")),a.a.createElement(Jt.a,{style:jt.button,onPress:function(){return e(k.fetchUser())},title:"Refresh"})))},en=Object(at.a)({FrontScreen:{screen:Bt,navigationOptions:function(){return{headerMode:"none",headerShown:!1}},path:"main"},ExampleScreen:{screen:$t,navigationOptions:function(){return{headerMode:"none"}},path:"example"}},{initialRouteName:"FrontScreen",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerRight:function(){return a.a.createElement(rt.a,{style:{padding:6}})}}}),tn=n(8),nn=n.n(tn),rn=n(9),an=n.n(rn),on=n(12),cn=n.n(on),sn=n(14),ln=n.n(sn),un=n(6),fn=n.n(un);ot.a.create({});function mn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fn()(e);if(t){var a=fn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ln()(this,n)}}var gn=function(e){cn()(n,e);var t=mn(n);function n(e){var r;return nn()(this,n),(r=t.call(this,e)).state={ISLOADPAGE:!0},r}return an()(n,[{key:"getData",value:function(){var e=this;setTimeout((function(){e.props.setFirebaseError(null)}),1e3)}},{key:"componentDidMount",value:function(){this.getData();var e=this.props.firebase.firebaseUser,t=this.props.firebase.localDataStore;e&&t.userData?W.navigate(function(e){switch(e){case ie:return"AdminPannel";case ae:return"ConsysPannel";case re:return"UserPanel";case ne:return"CreateUserData";default:return"LoginUser"}}(t.userData.state)):W.replace("LoginUser")}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=this.state.ISLOADPAGE;return a.a.createElement(rt.a,{style:[Ot.mainContainer]},t?a.a.createElement(rt.a,{style:[Ot.fillRowCenter,Ot.center,Ot.logoContainer]},a.a.createElement(it.a,{style:Ot.fullSize,source:pt.Hexa_icon,resizeMode:"contain"})):a.a.createElement(rt.a,{style:[Ot.contentContainer,Ot.fullSize,Ot.fillColMain]},a.a.createElement(Pt.a,{style:jt.text},"This page contains an error."),a.a.createElement(Pt.a,{style:jt.text},"If you are going back, please press back again.")),(e||t)&&a.a.createElement(Zt.a,{style:Ot.loadingContainer,size:"large"}))}}]),n}(r.Component),bn=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(H.setFirebaseError(t))}}}))(gn),dn=n(29),pn=n.n(dn),hn=function(){null!==Object(i.d)((function(e){return e.firebase.firebaseUser}))&&W.navigate("UserLoadingScreen");var e=a.a.useState(""),t=pn()(e,2),n=t[0],o=t[1],c=a.a.useState(""),s=pn()(c,2),l=s[0],u=s[1],f=Object(i.d)((function(e){return e.firebase.firebaseIsLoading})),m=Object(i.d)((function(e){return e.firebase.firebaseErrorMessage})),g=Object(i.c)();return Object(r.useEffect)((function(){}),[]),a.a.createElement(rt.a,{style:[Ot.mainContainer]},a.a.createElement(rt.a,{style:[Ot.contentContainer,Ot.fullSize,Ot.fillColMain]},m?a.a.createElement(Pt.a,{style:jt.error},m):a.a.createElement(a.a.Fragment,null),a.a.createElement(rt.a,{style:[Ot.borderContainer,Ot.midWidth,{marginBottom:20}]},a.a.createElement(Mt.b,{label:"Username",style:jt.input,onChangeText:function(e){o(e)},value:n}),a.a.createElement(Mt.b,{label:"Password",style:jt.input,onChangeText:function(e){u(e)},value:l}),a.a.createElement(At,{Text:"Login",icon:pt.User,onPress:function(){g(n&&""!==n?l&&""!==l?H.fetchStarting(se,oe.USER,[n,l]):H.setFirebaseError("Password is needed"):H.setFirebaseError("Email is needed"))}})),a.a.createElement(rt.a,{style:[Ot.buttonContainer,Ot.midWidth]},a.a.createElement(At,{Text:"Create New User",onPress:function(){g(H.setFirebaseError(null)),W.navigate("CreateNewUser")}}))),f&&a.a.createElement(Zt.a,{style:Ot.loadingContainer,size:"large"}))},yn=function(){var e=a.a.useState(""),t=pn()(e,2),n=t[0],o=t[1],c=a.a.useState(""),s=pn()(c,2),l=s[0],u=s[1];null!==Object(i.d)((function(e){return e.firebase.firebaseUser}))&&W.navigate("UserLoadingScreen");var f=Object(i.d)((function(e){return e.firebase.firebaseIsLoading})),m=Object(i.d)((function(e){return e.firebase.firebaseErrorMessage})),g=Object(i.c)();return Object(r.useEffect)((function(){}),[]),a.a.createElement(rt.a,{style:[Ot.mainContainer]},a.a.createElement(rt.a,{style:[Ot.contentContainer,Ot.fullSize,Ot.fillColMain]},m?a.a.createElement(Pt.a,{style:jt.error},m):a.a.createElement(a.a.Fragment,null),a.a.createElement(rt.a,{style:[Ot.borderContainer,Ot.midWidth,{marginBottom:20}]},a.a.createElement(Mt.b,{label:"Email",style:jt.input,onChangeText:function(e){o(e)},value:n}),a.a.createElement(Mt.b,{label:"Password",style:jt.input,onChangeText:function(e){u(e)},value:l})),a.a.createElement(rt.a,{style:[Ot.buttonContainer,Ot.midWidth]},a.a.createElement(At,{Text:"Create User",onPress:function(){g(n&&""!==n?l&&""!==l?H.fetchStarting(ce,oe.USERS,[n,l]):H.setFirebaseError("Password is needed"):H.setFirebaseError("Email is needed"))}}))),f&&a.a.createElement(Zt.a,{style:Ot.loadingContainer,size:"large"}))},On=function(){var e=a.a.useState("Test"),t=pn()(e,2),n=t[0],o=t[1],c=a.a.useState("1"),s=pn()(c,2),l=s[0],u=s[1],f=a.a.useState("1"),m=pn()(f,2),g=m[0],b=m[1],d=Object(i.d)((function(e){return e.firebase.firebaseUser})),p=Object(i.d)((function(e){return e.firebase.localDataStore}));null!==d&&p.userData&&p.userData.state==ne||W.navigate("UserLoadingScreen");var h=Object(i.d)((function(e){return e.firebase.firebaseIsLoading})),y=Object(i.d)((function(e){return e.firebase.firebaseErrorMessage})),O=Object(i.c)();return Object(r.useEffect)((function(){}),[]),a.a.createElement(rt.a,{style:[Ot.mainContainer]},a.a.createElement(rt.a,{style:[Ot.contentContainer,Ot.fullSize,Ot.fillColMain]},y?a.a.createElement(Pt.a,{style:jt.error},y):a.a.createElement(a.a.Fragment,null),a.a.createElement(rt.a,{style:[Ot.borderContainer,Ot.midWidth,{marginBottom:20}]},a.a.createElement(Mt.b,{label:"Farm Name",style:jt.input,onChangeText:function(e){o(e)},value:n}),a.a.createElement(Mt.b,{label:"Number of Sections",style:jt.input,onChangeText:function(e){u(e)},value:l}),a.a.createElement(Mt.b,{label:"Number of Pens in Sections",style:jt.input,onChangeText:function(e){b(e)},value:g})),a.a.createElement(rt.a,{style:[Ot.buttonContainer,Ot.midWidth]},a.a.createElement(At,{Text:"Create User",onPress:function(){var e={},t={},r={};if(n&&""!==n)if(isNaN(l))O(H.setFirebaseError("Number of Sections have to be a number"));else if(isNaN(g))O(H.setFirebaseError("Number of Pens in Sections have to be a number"));else{e={state:re,farms:{}};var a,i,o=1;for(a=1;a<=l;a++){var c={};for(i=1;i<=g;i++)r["Pen_"+o]={section:"Section_"+a},c["Pen_"+o]=!0,o++;t["Section_"+a]={pens:c}}O(H.updateUserData({userData:e,farms:{name:n},sections:t,pens:r}))}else O(H.setFirebaseError("Farm name is needed"))}}))),h&&a.a.createElement(Zt.a,{style:Ot.loadingContainer,size:"large"}))};function En(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var vn=Object(at.a)({UserLoadingScreen:{screen:bn,navigationOptions:function(){return{title:"User loading"}}},LoginUser:{screen:hn,navigationOptions:function(){return{title:"User Login",headerLeft:function(){return a.a.createElement(rt.a,{style:{padding:6,paddingLeft:15}},a.a.createElement(Mt.a,{type:"ionicon",name:"md-arrow-back",size:25,color:"black",onPress:function(){return W.navigate("MainStack")}}))}}}},CreateNewUser:{screen:yn,navigationOptions:function(){return{title:"Create User"}}},CreateUserData:{screen:On,navigationOptions:function(){return{title:"Create Data"}}}},{initialRouteName:"UserLoadingScreen",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerTitleStyle:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?En(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},jt.navigationHeader),headerRight:function(){return a.a.createElement(rt.a,{style:{padding:6}})}}});ot.a.create({});function jn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fn()(e);if(t){var a=fn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ln()(this,n)}}var Sn=function(e){cn()(n,e);var t=jn(n);function n(e){var r;return nn()(this,n),(r=t.call(this,e)).state={ISLOADPAGE:!0},r}return an()(n,[{key:"getData",value:function(){var e=this;setTimeout((function(){e.props.setFirebaseError(null)}),1e3)}},{key:"checkData",value:function(e){null===e.firebase.firebaseUser&&W.navigate("LoginUser")}},{key:"componentDidMount",value:function(){this.getData(),this.checkData(this.props)}},{key:"componentDidUpdate",value:function(e,t){this.checkData(e)}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,n=this.props.firebase.firebaseUser;return a.a.createElement(rt.a,{style:[Ot.mainContainer]},a.a.createElement(rt.a,{style:[Ot.contentContainer,Ot.fullSize,Ot.fillColMain]},n?a.a.createElement(rt.a,{style:Ot.textContainer},a.a.createElement(Pt.a,{style:jt.text},"Wellcome: ",n.displayName?n.displayName:n.email)):a.a.createElement(a.a.Fragment,null),a.a.createElement(rt.a,{style:[Ot.buttonContainer,Ot.midWidth,{marginBottom:30}]},a.a.createElement(At,{Text:"Dashboard",icon:pt.DashBoard,onPress:function(){return W.navigate("UserDashBoard")}}),a.a.createElement(At,{Text:"Pigs",icon:pt.Sow,onPress:function(){return W.navigate("UserPigs")}}),a.a.createElement(At,{Text:"Pens",icon:pt.Section,onPress:function(){return W.navigate("UserPens")}}),a.a.createElement(At,{Text:"Batchs",icon:pt.Curves,onPress:function(){return W.navigate("DataPlotter")}}),a.a.createElement(At,{Text:"Operations",icon:pt.System,onPress:function(){return W.navigate("UserOperations")}})),a.a.createElement(rt.a,{style:[Ot.buttonContainer,Ot.midWidth]},a.a.createElement(At,{Text:"LogOut",onPress:function(){e.props.logOut()}}))),t&&a.a.createElement(Zt.a,{style:Ot.loadingContainer,size:"large"}))}}]),n}(r.Component),wn=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(H.setFirebaseError(t))},logOut:function(){return e(H.fetchStarting(se,oe.USER))}}}))(Sn),Pn=function(){null===Object(i.d)((function(e){return e.firebase.firebaseUser}))&&W.navigate("Auth");var e=Object(i.d)((function(e){return e.firebase.firebaseIsLoading})),t=Object(i.d)((function(e){return e.firebase.localDataStore})),n=Object(i.d)((function(e){return e.firebase.firebaseErrorMessage})),o="Not set",c="Not set",s="Not set";t&&t.farms&&(o=t.farms.name?t.farms.name:o,c=t.farms.name?t.farms.manager:c,s=t.farms.name?t.farms.email:s);var l=Object(i.c)();return Object(r.useEffect)((function(){l(H.fetchStarting(le,oe.FARMS,Object.keys(t.userData.farms)[0]))}),[]),a.a.createElement(rt.a,{style:[Ot.mainContainer]},a.a.createElement(rt.a,{style:[Ot.contentContainer,Ot.fullWidth,Ot.fill]},n?a.a.createElement(Pt.a,{style:jt.error},n):a.a.createElement(a.a.Fragment,null),a.a.createElement(rt.a,{style:[Ot.buttonContainer,Ot.midWidth,dt.bottomMargin]},a.a.createElement(At,{Text:"Farm description",buttonStyle:{backgroundColor:gt},onPress:function(){}})),a.a.createElement(rt.a,{style:[Ot.buttonContainer,Ot.fullWidth,{height:110}]},a.a.createElement(Lt,{texts:["Farm name","Manager","E-mail"],datas:[o,c,s]}))),e&&a.a.createElement(Zt.a,{style:Ot.loadingContainer,size:"large"}))},Cn=n(48);function xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kn=ot.a.create({loading:{position:"absolute",left:0,right:0,top:0,bottom:0,alignItems:"center",justifyContent:"center",backgroundColor:"#F5FCFF88"},textContainer:Dn(Dn({},bt.normal),{},{marginBottom:dt.normal}),inputContainer:{marginBottom:dt.small},input:Dn(Dn({},bt.normal),{},{height:24})}),In=n(73),An=(ot.a.create({circle:{width:125,height:125,borderRadius:62.5,marginTop:dt.tiny,marginLeft:dt.tiny}}),function(){var e=Object(i.d)((function(e){return e.firebase.firebaseUser}));null===e&&W.navigate("Auth");Object(i.d)((function(e){return e.firebase.firebaseIsLoading}));var t=Object(i.d)((function(e){return e.firebase.localDataStore})),n=null;t&&t.pigs&&(console.log(t),n=de(t.pigs));var o=Object(i.c)();return Object(r.useEffect)((function(){o(H.fetchStarting(le,oe.PIGS,Object.keys(t.userData.farms)[0]))}),[]),a.a.createElement(rt.a,{style:[Ot.fillCenter,Ot.rowMain,dt.mediumHorizontalMargin,dt.mediumVerticalMargin]},e?a.a.createElement(In.b,null,a.a.createElement(In.c,{size:4},a.a.createElement(rt.a,{style:{flex:1,marginTop:20}},a.a.createElement(rt.a,{style:{flex:1,borderWidth:1,borderColor:"#000",borderRadius:25,paddingHorizontal:15,paddingVertical:10}},n?a.a.createElement(Cn.a,{style:{paddingRight:5}},console.log(n),Object.keys(n).map((function(e,t){return a.a.createElement(Ut,{key:t,Title:e,Subtitle:"",onPress:function(){o(H.setCurrentData({dataId:e,type:oe.PIGS})),W.navigate("DataDisplay")}})}))):a.a.createElement(a.a.Fragment,null))))):a.a.createElement(a.a.Fragment,null))}),Mn=(n(624),function(e){var t=e.name,n=e.pens,r=[],i=[];for(Object.keys(n).forEach((function(t){4===i.length&&(r.push(a.a.createElement(In.c,null,i)),i=[]),i.push(a.a.createElement(Tn,{name:t,mid:e.mid}))}));i.length<4;)i.push(a.a.createElement(In.a,null));return r.push(a.a.createElement(In.c,null,i)),a.a.createElement(rt.a,{style:[Ot.fullSize,Ot.fill]},a.a.createElement(rt.a,{style:[Ot.buttonContainer,Ot.midWidth]},a.a.createElement(At,{Text:t,buttonStyle:{backgroundColor:gt},onPress:function(){}})),a.a.createElement(rt.a,null,r))}),Tn=function(e){var t=Object(i.d)((function(e){return e.firebase.localDataStore})),n="white",r=e.name;if(t.weighings&&t.weighings[r]&&t.weighings[r][Object.keys(t.weighings[r])[0]]){var o=t.weighings[r][Object.keys(t.weighings[r])[0]].weight;if(o&&!isNaN(o)){n=ft;var c=e.mid;(o>c+10||o<c-10)&&(n=mt)}}var s=Object(i.c)();return a.a.createElement(In.a,null,a.a.createElement(xt.a,{style:[Ot.fillColCenter,Ot.borderContainer,{margin:5,width:70,height:70,backgroundColor:n}],onPress:function(){s(H.setCurrentData({dataId:r,type:oe.PENS})),W.navigate("DataDisplay")}},a.a.createElement(Pt.a,null,r)))},Fn=function(){var e=a.a.useState(0),t=pn()(e,2),n=t[0],o=t[1],c=Object(i.d)((function(e){return e.firebase.firebaseUser}));null===c&&W.navigate("Auth");var s=Object(i.d)((function(e){return e.firebase.firebaseIsLoading})),l=Object(i.d)((function(e){return e.firebase.localDataStore})),u=Object(i.d)((function(e){return e.firebase.firebaseErrorMessage})),f=null;l&&l.sections&&(f=de(l.sections));var m=Object(i.c)();return Object(r.useEffect)((function(){if(m(H.fetchStarting(le,oe.SECTIONS+oe.WEIGHING,[Object.keys(l.userData.farms)[0]])),l&&l.weighings){var e=0;for(var t in l.weighings)if(l.weighings[t]){var n=l.weighings[t][Object.keys(l.weighings[t])[0]].weight;n&&(e>0?e=(e+n)/2:e+=n)}o(e)}}),[]),a.a.createElement(rt.a,{style:[Ot.mainContainer]},a.a.createElement(rt.a,{style:[Ot.fullSize,Ot.fill]},u?a.a.createElement(Pt.a,{style:jt.error},u):a.a.createElement(a.a.Fragment,null),c&&f?a.a.createElement(Cn.a,{style:[dt.verticalMargin,{paddingRight:5}]},Object.keys(f).map((function(e,t){var r=de(f[e].pens);return a.a.createElement(Mn,{name:e,pens:r,mid:n})}))):a.a.createElement(rt.a,{style:[Ot.fillRowCenter,Ot.center,Ot.logoContainer]},a.a.createElement(it.a,{style:Ot.fullSize,source:pt.Hexa_icon,resizeMode:"contain"}))),s&&a.a.createElement(Zt.a,{style:Ot.loadingContainer,size:"large"}))},Rn=function(e){var t=Object(i.c)();return a.a.createElement(Cn.a,{style:{paddingRight:5}},a.a.createElement(rt.a,{style:[Ot.buttonContainer]},a.a.createElement(At,{Text:"Weight",onPress:function(){return W.navigate("WeighingOperations")}}),e.farm&&e.penid?a.a.createElement(rt.a,null,a.a.createElement(At,{Text:"Add Pig",onPress:function(){t(H.fetchStarting(ce,oe.PIGS,[e.farm,null,e.penid,"1"]))}}),a.a.createElement(At,{Text:"Move Pig",onPress:function(){t(H.fetchStarting(ce,oe.PIGS,[e.farm,null,e.penid,"-1"]))}})):a.a.createElement(a.a.Fragment,null),e.farm&&e.section?a.a.createElement(rt.a,{style:[{marginTop:40}]},a.a.createElement(At,{Text:"Add Pen",onPress:function(){t(H.setCurrentData({type:oe.PENS,action:ce})),W.navigate("DataEditor")}}),a.a.createElement(At,{Text:"Remove Pen",onPress:function(){t(H.setCurrentData({type:oe.PENS,action:fe})),W.navigate("DataEditor")}})):a.a.createElement(a.a.Fragment,null)))},Un=function(){null===Object(i.d)((function(e){return e.firebase.firebaseUser}))&&W.navigate("Auth");var e=Object(i.d)((function(e){return e.firebase.firebaseIsLoading})),t=Object(i.d)((function(e){return e.firebase.firebaseErrorMessage})),n=Object(i.d)((function(e){return e.firebase.localDataStore})),o=Object(i.c)();return Object(r.useEffect)((function(){o(H.setCurrentData({}))}),[]),a.a.createElement(rt.a,{style:[Ot.mainContainer]},a.a.createElement(rt.a,{style:[Ot.contentContainer,Ot.fullSize,Ot.fill]},t?a.a.createElement(Pt.a,{style:jt.error},t):a.a.createElement(a.a.Fragment,null),a.a.createElement(rt.a,{style:[Ot.buttonContainer,Ot.midWidth,dt.bottomMargin,{marginBottom:60}]}),a.a.createElement(rt.a,{style:[Ot.halvWidth,Ot.fillColMain]},a.a.createElement(Rn,{farm:Object.keys(n.userData.farms)[0],section:!0}))),e&&a.a.createElement(Zt.a,{style:Ot.loadingContainer,size:"large"}))},Nn=n(82);function zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ln=function(){var e=a.a.useState(!0),t=pn()(e,2),n=t[0],o=t[1],c=Object(i.d)((function(e){return e.firebase.firebaseUser}));null===c&&W.navigate("Auth");var s=Object(i.d)((function(e){return e.firebase.firebaseIsLoading})),l=Object(i.d)((function(e){return e.firebase.firebaseErrorMessage})),u=Object(i.d)((function(e){return e.firebase.localDataStore})),f=Object(i.d)((function(e){return e.firebase.currentData})),m={};u&&u.sections&&(m=de(u.sections));var g=a.a.useState(""),b=pn()(g,2),d=b[0],p=b[1],h=a.a.useState(""),y=pn()(h,2),O=y[0],E=y[1],v=a.a.useState(""),j=pn()(v,2),S=j[0],w=j[1],P=a.a.useState(""),C=pn()(P,2),x=C[0],D=C[1],k=Object(i.c)();return Object(r.useEffect)((function(){if(f&&f.data&&f.data.section&&m[f.data.section]){p(f.data.section);var e=de(m[f.data.section].pens);E(e),f.dataId&&e[f.dataId]&&w(f.dataId)}if(n)k(H.fetchStarting(le,oe.SECTIONS,Object.keys(u.userData.farms)[0])),o(!1);else if(""===S){var t=Object.keys(m)[0];e=de(m[t].pens);p(t),E(e),w(Object.keys(e)[0])}}),[]),a.a.createElement(rt.a,{style:[Ot.mainContainer]},a.a.createElement(rt.a,{style:[Ot.contentContainer,Ot.fullSize,Ot.fill]},l?a.a.createElement(Pt.a,{style:jt.error},l):a.a.createElement(a.a.Fragment,null),c?a.a.createElement(rt.a,{style:[Ot.contentContainer,Ot.fullSize,Ot.fill]},a.a.createElement(rt.a,{style:[Ot.buttonContainer,Ot.midWidth,dt.bottomMargin]},a.a.createElement(At,{Text:"Weighing",buttonStyle:{backgroundColor:gt},onPress:function(){}})),a.a.createElement(rt.a,{style:[Ot.borderContainer,Ot.midWidth,{marginBottom:20}]},a.a.createElement(Nn.a,{mode:"dropdown",selectedValue:d,style:{height:50,width:150},onValueChange:function(e,t){var n=de(m[e].pens);p(e),E(n),w(Object.keys(n)[0])}},Object.keys(m).map((function(e,t){return a.a.createElement(Nn.a.Item,{label:e,value:e,key:t})}))),a.a.createElement(Nn.a,{mode:"dropdown",selectedValue:S,style:{height:50,width:150},onValueChange:function(e,t){w(e)}},Object.keys(O).map((function(e,t){return a.a.createElement(Nn.a.Item,{label:e,value:e,key:t})}))),a.a.createElement(Mt.b,{label:"Weight",style:Hn({},kn.input),onChangeText:function(e){D(e)},value:x})),a.a.createElement(rt.a,{style:[Ot.buttonContainer,Ot.midWidth]},a.a.createElement(At,{Text:"Submit",onPress:function(){d?S?isNaN(x)||""===x?k(H.setFirebaseError("Weight have to be a number")):(k(H.setFirebaseError(null)),k(H.fetchStarting(ce,oe.WEIGHING,[Object.keys(u.userData.farms)[0],S,parseInt(x)])),D("")):k(H.setFirebaseError("A pen is needed")):k(H.setFirebaseError("A section is needed"))}}))):a.a.createElement(a.a.Fragment,null)),s&&a.a.createElement(Zt.a,{style:Ot.loadingContainer,size:"large"}))};function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _n=function(e,t){var n=a.a.useState(!0),o=pn()(n,2),c=o[0],s=o[1],l={};t&&t.sections&&(l=de(t.sections),e.action===ce&&(l["New Section"]={}));var u=a.a.useState(""),f=pn()(u,2),m=f[0],g=f[1],b=a.a.useState(""),d=pn()(b,2),p=d[0],h=d[1],y=a.a.useState(""),O=pn()(y,2),E=O[0],v=O[1],j=a.a.useState(!1),S=pn()(j,2),w=S[0],P=S[1],C=Object(i.c)();return Object(r.useEffect)((function(){if(c)C(H.fetchStarting(le,oe.SECTIONS,[Object.keys(t.userData.farms)[0]])),s(!1);else if(""===E){var e=Object.keys(l)[0],n=de(l[e].pens);g(e),h(n),v(Object.keys(n)[0])}}),[C]),a.a.createElement(rt.a,{style:[Ot.contentContainer,Ot.fullSize,Ot.fill]},a.a.createElement(rt.a,{style:[Ot.buttonContainer,Ot.midWidth,dt.bottomMargin]},e.action===ce?a.a.createElement(At,{Text:"Add Pen",buttonStyle:{backgroundColor:gt},onPress:function(){}}):a.a.createElement(a.a.Fragment,null),e.action===fe?a.a.createElement(At,{Text:"Remove Pen",buttonStyle:{backgroundColor:gt},onPress:function(){}}):a.a.createElement(a.a.Fragment,null)),a.a.createElement(rt.a,{style:[Ot.borderContainer,Ot.midWidth,{marginBottom:20}]},w&&e.action===ce?a.a.createElement(Mt.b,{label:"Section Name",style:Gn({},kn.input),onChangeText:function(e){g(e)},value:m}):a.a.createElement(Nn.a,{mode:"dropdown",selectedValue:m,style:{height:50,width:150},onValueChange:function(t,n){if(g(t),"New Section"===t)P(!0),g("Section_"+Object.keys(l).length);else{var r=de(l[t].pens);h(r),e.action===fe?v(Object.keys(r)[Object.keys(r).length-1]):v("Pen_"+(Object.keys(r).length+1))}}},Object.keys(l).map((function(e,t){return a.a.createElement(Nn.a.Item,{label:e,value:e,key:t})}))),e.action===ce?a.a.createElement(Mt.b,{label:"Pen name",style:Gn({},kn.input),onChangeText:function(e){v(e)},value:E}):a.a.createElement(a.a.Fragment,null),e.action===fe?a.a.createElement(Nn.a,{mode:"dropdown",selectedValue:E,style:{height:50,width:150},onValueChange:function(e,t){v(e)}},Object.keys(p).map((function(e,t){return a.a.createElement(Nn.a.Item,{label:e,value:e,key:t})}))):a.a.createElement(a.a.Fragment,null)),e.action===ce||e.action===fe?a.a.createElement(rt.a,{style:[Ot.buttonContainer,Ot.midWidth]},a.a.createElement(At,{Text:"Submit",onPress:function(){if(m)if(E&&""!==E)if(isNaN(E)&&isNaN(E[0])){var n=!1;Object.keys(l).map((function(e,t){l[e].pens&&(Object.keys(l[e].pens).filter((function(e){return e===E})).length&&(n=!0))})),n&&e.action===ce?C(H.setFirebaseError("Given pen name already exists")):n||e.action!==fe?(C(H.setFirebaseError(null)),C(H.fetchStarting(e.action,oe.PENS,[Object.keys(t.userData.farms)[0],m,E])),W.navigate("UserOperations")):C(H.setFirebaseError("Cannot remove non-existing pen"))}else C(H.setFirebaseError("Pen name cannot be or start with a number"));else C(H.setFirebaseError("A pen name is needed"));else C(H.setFirebaseError("A section is needed"))}})):a.a.createElement(a.a.Fragment,null))},Bn=function(){null===Object(i.d)((function(e){return e.firebase.firebaseUser}))&&W.navigate("Auth");var e=Object(i.d)((function(e){return e.firebase.firebaseIsLoading})),t=Object(i.d)((function(e){return e.firebase.firebaseErrorMessage})),n=Object(i.d)((function(e){return e.firebase.localDataStore})),r=Object(i.d)((function(e){return e.firebase.currentData})),o=a.a.createElement(rt.a,null);switch(r.type){case oe.PENS:o=_n(r,n)}return a.a.createElement(rt.a,{style:[Ot.mainContainer]},a.a.createElement(rt.a,{style:[Ot.contentContainer,Ot.fullSize,Ot.fill]},t?a.a.createElement(Pt.a,{style:jt.error},t):a.a.createElement(a.a.Fragment,null),o),e&&a.a.createElement(Zt.a,{style:Ot.loadingContainer,size:"large"}))},Vn=n(80);function Jn(e){return e<10&&(e="0"+e),e}var Zn=function(e,t){var n,o=[];t&&t.pens&&(n=de(t.pens))[e.dataId]&&(e.data=n[e.dataId]),t&&t.weighings&&t.weighings[e.dataId]&&(o=t.weighings[e.dataId]),e.data&&!e.data.datas&&(e.data.datas={});var c=Object(i.c)();return Object(r.useEffect)((function(){c(H.fetchStarting(le,oe.PENS+oe.WEIGHING,[Object.keys(t.userData.farms)[0],e.dataId]))}),[c]),e.data?a.a.createElement(rt.a,{style:[Ot.contentContainer,Ot.fillColCenter,Ot.fullSize,Ot.fill]},a.a.createElement(rt.a,{style:[Ot.buttonContainer,Ot.midWidth,dt.bottomMargin]},a.a.createElement(At,{Text:e.dataId,buttonStyle:{backgroundColor:gt},onPress:function(){}})),a.a.createElement(rt.a,{style:[Ot.fullWidth]},a.a.createElement(Lt,{ingrid:!0,texts:["Pig count","Age","Section"],datas:[e.data.datas.count?e.data.datas.count:0,e.data.datas.age,e.data.section]}),a.a.createElement(Lt,{ingrid:!0,texts:["Batch","Growth Cruve"],datas:[e.data.datas.batch,e.data.datas.gcurve?e.data.datas.gcurve:"default"]})),a.a.createElement(rt.a,{style:[Ot.fullWidth,{height:20}]}),a.a.createElement(rt.a,{style:[Ot.fullWidth,dt.bottomMargin,{height:200}]},a.a.createElement(rt.a,{style:[Ot.borderContainer,dt.smallBottomMargin,{borderRadius:0,alignItems:"center",justifyContent:"center"}]},a.a.createElement(Pt.a,null,"Last weighings")),a.a.createElement(Vn.a,{data:Object.keys(o).reverse(),renderItem:function(e){var t=e.item;return"__jsogObjectId"===t?null:a.a.createElement(In.c,{height:35},a.a.createElement(In.a,null,a.a.createElement(rt.a,{style:[Ot.borderContainer,{borderRadius:0,alignItems:"center",justifyContent:"center"}]},a.a.createElement(Pt.a,null,function(e){var t=new Date(parseInt(e));return Jn(t.getDate())+"/"+Jn(t.getMonth())+"/"+t.getFullYear()+" "+Jn(t.getHours())+":"+Jn(t.getMinutes())+":"+Jn(t.getSeconds())}(o[t].time)))),a.a.createElement(In.a,{size:.1}),a.a.createElement(In.a,null,a.a.createElement(rt.a,{style:[Ot.borderContainer,{borderRadius:0,alignItems:"center",justifyContent:"center"}]},a.a.createElement(Pt.a,null,o[t].weight))))},numColumns:1,keyExtractor:function(e,t){return t}})),a.a.createElement(rt.a,{style:[Ot.borderContainer,Ot.midWidth]},a.a.createElement(Rn,{farm:Object.keys(t.userData.farms)[0],penid:e.dataId}))):a.a.createElement(rt.a,{style:[Ot.fillRowCenter,Ot.center,Ot.logoContainer]},a.a.createElement(it.a,{style:Ot.fullSize,source:pt.Hexa_icon,resizeMode:"contain"}))},Yn=function(e,t){var n;return t&&t.pigs&&(n=de(t.pigs))[e.dataId]&&(e.data=n[e.dataId]),e.data&&!e.data.datas&&(e.data.datas={}),e.data?(console.log(e.data),a.a.createElement(rt.a,{style:[Ot.contentContainer,Ot.fillColCenter,Ot.fullSize,Ot.fill,{marginTop:5}]},a.a.createElement(In.c,{size:4},a.a.createElement(rt.a,{style:[Ot.contentContainer,Ot.fillColCenter,Ot.fullSize,Ot.fill,{marginTop:0}]},a.a.createElement(rt.a,{style:[Ot.buttonContainer,Ot.midWidth,dt.bottomMargin]},a.a.createElement(At,{Text:e.dataId,buttonStyle:{backgroundColor:gt},onPress:function(){}})),a.a.createElement(rt.a,{style:[Ot.fullWidth]},a.a.createElement(Lt,{ingrid:!0,texts:["Section","Pen"],datas:[e.data.section,e.data.pen]}),a.a.createElement(rt.a,{style:{paddingVertical:12}}),a.a.createElement(Lt,{ingrid:!0,texts:["Comment"],datas:["NONE"]})))))):a.a.createElement(rt.a,{style:[Ot.fillRowCenter,Ot.center,Ot.logoContainer]},a.a.createElement(it.a,{style:Ot.fullSize,source:pt.Hexa_icon,resizeMode:"contain"}))},qn=(ot.a.create({circle:{width:125,height:125,borderRadius:62.5,marginTop:dt.tiny,marginLeft:dt.tiny}}),function(){null===Object(i.d)((function(e){return e.firebase.firebaseUser}))&&W.navigate("Auth");var e=Object(i.d)((function(e){return e.firebase.firebaseIsLoading})),t=Object(i.d)((function(e){return e.firebase.currentData})),n=Object(i.d)((function(e){return e.firebase.localDataStore})),r=Object(i.d)((function(e){return e.firebase.firebaseErrorMessage})),o=a.a.createElement(rt.a,null);switch(t.type){case oe.PENS:o=Zn(t,n);break;case oe.PIGS:o=Yn(t,n)}return a.a.createElement(rt.a,{style:[Ot.mainContainer]},a.a.createElement(rt.a,{style:[Ot.contentContainer,Ot.fullSize,Ot.fill]},r?a.a.createElement(Pt.a,{style:jt.error},r):a.a.createElement(a.a.Fragment,null),o),e&&a.a.createElement(Zt.a,{style:Ot.loadingContainer,size:"large"}))}),Qn=n(33),Xn=n(375);function Kn(e,t){var n=[];return e.forEach((function(e){if(t[e]){var r=t[e];if(Object.keys(r).length>=1){var a=function(){var e=Math.round,t=Math.random;return"rgba("+e(255*t())+","+e(255*t())+","+e(255*t())+","+t().toFixed(1)+")"}(),i=[];Object.keys(r).forEach((function(e){var t=r[e];t.weight&&i.push(t.weight)})),i.length>0&&(i.push(null),i.push(null),i.push(null),i.push(null),n.push({data:i,color:function(){return a}}))}}})),n}ot.a.create({circle:{width:125,height:125,borderRadius:62.5,marginTop:dt.tiny,marginLeft:dt.tiny}});var $n=function(){null==Object(i.d)((function(e){return e.firebase.firebaseUser}))&&W.navigate("Auth");var e=Object(i.d)((function(e){return e.firebase.firebaseIsLoading})),t=Object(i.d)((function(e){return e.firebase.localDataStore})),n=Object(i.d)((function(e){return e.firebase.firebaseErrorMessage})),o=[],c=[],s=[],l=null;if(t&&t.graphs&&(l=t.graphs).gcurve){var u=l.gcurve;o.push("Batch template"),c.push({data:u.data,color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;return"rgba(0, 0, 0, "+e+")"}}),s=u.labels}t&&t.weighings&&(o=(o=o.concat(Object.keys(t.weighings).reverse())).filter((function(e){return"__jsogObjectId"!==e})),c=c.concat(Kn(o,t.weighings)));var f=Object(i.c)();return Object(r.useEffect)((function(){f(H.fetchStarting(le,oe.GRAPH+oe.WEIGHING,[Object.keys(t.userData.farms)[0],"default",99]))}),[]),a.a.createElement(rt.a,{style:[Ot.mainContainer]},a.a.createElement(rt.a,{style:[Ot.contentContainer,Ot.fullSize,Ot.fill]},n?a.a.createElement(Pt.a,{style:jt.error},n):a.a.createElement(a.a.Fragment,null),a.a.createElement(rt.a,{style:[Ot.buttonContainer,Ot.midWidth,dt.bottomMargin]},a.a.createElement(At,{Text:"Batch",buttonStyle:{backgroundColor:gt},onPress:function(){}})),a.a.createElement(Cn.a,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:[Ot.fullSize]},l?a.a.createElement(Xn.a,{style:[{marginRight:dt.normal}],width:2*(Qn.a.get("window").width-2*dt.normal)/2.05,height:Qn.a.get("window").height-7*dt.medium,data:{legend:o.slice(0,c.length),datasets:c,labels:s},withShadow:!1,withVerticalLines:!0,fromZero:!1,segments:10,verticalLabelRotation:0,xLabelsOffset:0,chartConfig:{backgroundColor:st,backgroundGradientFrom:st,backgroundGradientTo:st,decimalPlaces:0,color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba(0, 0, 0, "+e+")"},labelColor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba(0, 0, 0, "+e+")"},style:{borderRadius:16},propsForDots:{r:"4",strokeWidth:"0.5",stroke:st}}}):a.a.createElement(a.a.Fragment,null))),e&&a.a.createElement(Zt.a,{style:Ot.loadingContainer,size:"large"}))};function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var tr=Object(at.a)({UserFront:{screen:wn,navigationOptions:function(){return{title:"User Data",headerLeft:function(){return a.a.createElement(rt.a,{style:{padding:6,paddingLeft:15}},a.a.createElement(Mt.a,{type:"ionicon",name:"md-arrow-back",size:25,color:"black",onPress:function(){return W.navigate("MainStack")}}))}}},path:"user_front"},UserDashBoard:{screen:Pn,navigationOptions:function(){return{title:"Dash Board"}},path:"user_dashboard"},UserPigs:{screen:An,navigationOptions:function(){return{title:"Pigs"}},path:"user_pigs"},UserPens:{screen:Fn,navigationOptions:function(){return{title:"Pens"}},path:"user_pens"},UserOperations:{screen:Un,navigationOptions:function(){return{title:"Operations"}},path:"user_operations"},WeighingOperations:{screen:Ln,navigationOptions:function(){return{title:"Operations"}},path:"user_operations"},DataEditor:{screen:Bn,navigationOptions:function(){return{title:"User Data"}},path:"user_dataedtior"},DataDisplay:{screen:qn,navigationOptions:function(){return{title:"User Data"}},path:"user_datadisplay"},DataPlotter:{screen:$n,navigationOptions:function(){return{title:"User Data"}},path:"user_dataplotter"}},{initialRouteName:"UserFront",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerTitleStyle:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?er(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},jt.navigationHeader),headerRight:function(){return a.a.createElement(rt.a,{style:{padding:6}})}}}),nr=Object(at.a)({SplashScreen:{screen:wt,navigationOptions:function(){return{headerShown:!1}}},MainStack:en,AuthStack:vn,UserPanel:tr,DeepLinkingScreen:{screen:Ct,path:"deeplink"}},{initialRouteName:"SplashScreen",headerMode:"none",defaultNavigationOptions:{headerTitleAlign:"center",headerRight:function(){return a.a.createElement(rt.a,{style:{padding:6}})}}}),rr=Object(L.createAppContainer)(nr),ar=function(){var e=Object(i.c)();return Object(r.useEffect)((function(){e(w.startup())}),[]),a.a.createElement(rt.a,{style:Ot.fill},a.a.createElement(rr,{ref:function(e){W.setTopLevelNavigator(e)},uriPrefix:"agrisysapp://"}))},ir=function(e,t){var n=[],r=[],a=Object(s.b)();n.push(a),r.push(c.a.apply(void 0,n));var i=Object(l.b)(d,e),o=Object(c.e)(i,c.d.apply(void 0,r)),u=Object(l.c)(o);return a.run(t),{store:o,persistor:u}}(Object(c.c)({example:Qe,firebase:nt}),Ve),or=ir.store,cr=ir.persistor;t.a=function(){return a.a.createElement(i.a,{store:or},a.a.createElement(o.PersistGate,{loading:null,persistor:cr},a.a.createElement(ar,null)))}},377:function(e,t,n){e.exports=n(625)},498:function(e,t,n){e.exports=n.p+"static/media/Home.1fff8434.png"},499:function(e,t,n){e.exports=n.p+"static/media/Dashboard.26766c7a.png"},500:function(e,t,n){e.exports=n.p+"static/media/System.7e4af00c.png"},501:function(e,t,n){e.exports=n.p+"static/media/Feed-Curves.da739887.png"},502:function(e,t,n){e.exports=n.p+"static/media/User.d73be9fd.png"},503:function(e,t,n){e.exports=n.p+"static/media/Sow.beff0aff.png"},504:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABRCAYAAACuepoLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAq9JREFUeNrsnT1Lw1AUhk9FRFEhDhV0qgouLlrcjYOLi3XpasEfYjo62X/Quorg5iS0P0D8GBzVOAkWP6CVigg1197E0Naa3ER7b/K+cLig3tP4eJJz8g5XIig0JRS8Zr3Pn1+JUgE0JYgjK1JRqEz2y9DE1IJwgrdalRr1BxoZm6Th8aTvfVwvVqxacaE8zLXtQ+EEN+cHdH12QHPpLM0uZX3tbdSrdHmyS7VH0wY6w1caQNvwp5GxJC2v57+q2pJmRc7+HmAKaHBolGbTTkVvAGYIFdoBucfPp7p1rH8efwr280iJiu3ytUUr9iSY5+yZrqIqTAayzB+sIgOqHtJgq7vGD1IRpsaHUY3PTptWmCJjC5+/Ao8/7hlONZgZ/ow0OQylqkIGubv5Cl/3ATI4zFQUX+T7BRMCTMCM5mumqhf+fH8lvLdRqzqraJ7aU++pscznuyBvPk3XjEh/lKcpWZSVr8x+mMNufby/2p6m+rc58xRFZZvD0/O6b3PY/Zg5Pd5BA0I3B0yMRlsU3Ms0ALOlXAh5dwCzpZIVdwEh5uP4x+gGk1lwlYAQjDjCRAMCTMAETAgwARMwoZ5zphJiNpqonri73lrF8thu/U+C0x5Dpz0v2fWYKlcmGhC6OQSYMo1GMjnthkSsfr2WRFsD0lFfnlh5rswSyeO0y5BHyKiO4mgURh7POdCA0M0BEzAhwARMwIQAEzABEzAhwARMwIQ6FRen3fgPmHDaxVh5rswSwWnvlsOX4LQHzIEGhG4OmIAJASZgAiYEmIAJmPGEafJVBxZHi21sPCvH30Fv8W7uqMj3F/1uZCe6PtP3vxvQYg7TcO33dLe6LTh2ACk7Gpe5RxkeFcELKYd0m/UrT4q+zxMtBODgHOLcjHnc8oLyrMQvUDWKr3xX46cAAwCxt3YCfnN46AAAAABJRU5ErkJggg=="},505:function(e,t,n){e.exports=n.p+"static/media/Hexagon-globe.fce26805.png"},506:function(e,t,n){e.exports=n.p+"static/media/Hexa-icon.5129d536.png"},507:function(e,t,n){e.exports=n.p+"static/media/Logo.9b051259.png"},508:function(e,t,n){e.exports=n.p+"static/media/TOM.c88886f3.png"}},[[377,1,2]]]);
//# sourceMappingURL=app.9fff4847.chunk.js.map