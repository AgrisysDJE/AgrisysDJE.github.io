(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{372:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(30),s=a(314),o=a(43),c=a(124),l=a(209),u=a(243),f=a.n(u),p=a(315),h=a.n(p),d=Object(l.a)((function(e,t){return f.a.encode(e)}),(function(e,t){return f.a.decode(e)})),m={key:"root",storage:h.a,transforms:[d],blacklist:[]},g=a(24),b=a.n(g),y=a(42),E=a(89),v=Object(E.createActions)({startup:null}),D=v.Types,S=v.Creators,P=D,O=S,C=Object(E.createActions)({fetchUser:null,fetchUserLoading:null,fetchUserSuccess:["user"],fetchUserFailure:["errorMessage"]}),k=C.Types,w=C.Creators,j=k,T=w,I=a(6),A=a.n(I);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R,L,M=Object(E.createActions)({firebaseStartup:null,firebaseIsLoading:["loadingstate"],setFirebaseError:["errorMessage"],setCurrentData:["data"],actionStarting:["action","ref","params"],fetchStarting:["action","ref","params"],dataFetchSuccess:["params"],fetchSuccess:["data"],fetchFailure:["errorMessage"]}),N=M.Types,U=M.Creators,W=F({},N),B=F({},U),H=a(54);var z={navigate:function(e,t){if(L===e)return null;L=e,R.dispatch(H.NavigationActions.navigate({routeName:e,params:t}))},replace:function(e,t){if(L===e)return null;L=e,R.dispatch(H.StackActions.replace({routeName:e,params:t}))},navigateAndReset:function(e,t){if(L===e)return null;L=e,R.dispatch(H.StackActions.reset({index:0,key:null,actions:[H.NavigationActions.navigate({routeName:e,params:t})]}))},setTopLevelNavigator:function(e){R=e},nacigationPop:function(){R.dispatch(H.NavigationActions.back())}},_=b.a.mark(G);function G(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.f)(B.firebaseStartup());case 2:z.navigateAndReset("MainStack");case 3:case"end":return e.stop()}}),_)}var V=a(336),J=a.n(V),Y=a(635),X=a(632),Z=a(633),q=Object(Y.a)(3,(function(e,t,a){var n=Object(X.a)(Number);return n(e)&&n(t)&&n(a)&&Object(Z.a)(a,e)&&Object(Z.a)(t,a)}))(200,299),Q=J.a.create({baseURL:"https://jsonplaceholder.typicode.com/users/",headers:{Accept:"application/json","Content-Type":"application/json"},timeout:3e3});var K=function(){if(console.log("user fetch test"),Math.random()>.5)return new Promise((function(e,t){console.log("error"),e(null)}));var e=Math.floor(Math.random()/.1)+1;return Q.get(e.toString()).then((function(e){return q(e.status)?e.data:null}))},$=b.a.mark(ee);function ee(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.f)(T.fetchUserLoading());case 2:return t.next=4,Object(y.c)(K);case 4:if(!(e=t.sent)){t.next=10;break}return t.next=8,Object(y.f)(T.fetchUserSuccess(e));case 8:t.next=12;break;case 10:return t.next=12,Object(y.f)(T.fetchUserFailure("There was an error while fetching user informations."));case 12:case"end":return t.stop()}}),$)}var te=a(8),ae=a(152),ne="starter",re="free",ie="owner",se="admin",oe={USERSDATA:"usersdata",USERS:"users",FARMS:"farms",SECTIONS:"farms_data/$farmid/sections",PENS:"farms_data/$farmid/pens",PIGS:"farms_data/$farmid/pigs",BATCHS:"farms_data/$farmid/batchs",WEIGHING:"farms_data/$farmid/pens/$penid/weighings/",GRAPH:"farms_data/$farmid/Graph/$graphid/",FARMDATAS:"farms_data/$farmid/datas/",SHARES:"shareData"},ce={SIGN:"sign",FETCH:"fetch",CREATE:"create",UPDATE:"update",MOVE:"move",DELETE:"delete",CLEAR:"clear",ADD:"add"};function le(e){return e<10&&(e="0"+e),e}function ue(e){var t=new Date(parseInt(e));return le(t.getDate())+"/"+le(t.getMonth()+1)+"/"+t.getFullYear()+" "+le(t.getHours())+":"+le(t.getMinutes())+":"+le(t.getSeconds())}var fe=/[^a-zA-Z]/g,pe=/[^0-9]/g;function he(e,t){var a=e.replace(fe,""),n=t.replace(fe,"");if(a===n){var r=parseInt(e.replace(pe,""),10),i=parseInt(t.replace(pe,""),10);return r===i?0:r>i?1:-1}return a>n?1:-1}function de(e){var t,a={},n=[];for(t in e)e.hasOwnProperty(t)&&"__jsogObjectId"!==t&&"update_time"!==t&&n.push(t);for(n.sort(he),t=0;t<n.length;t++)a[n[t]]=e[n[t]];return a}function me(e,t,a,n,r){var i=null,s=null;if(a){var o=e[1]-e[0],c=t[0],l=t[1],u=Math.atan((l-c)/(o-0));if(i=(a-e[0])*u+c,n&&r)s=u*(a-r)+n}return{ExValue:i,VirData:s}}var ge=a(23);a(278),a(236),a(279);function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?be(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ee(e){var t=e.Email,a=e.Pass;return new Promise((function(e,n){ge.a.auth().createUserWithEmailAndPassword(t,a).then((function(){var t=ge.a.auth().currentUser,a=t.displayName?t.displayName:t.email;Se(oe.USERSDATA,ce.UPDATE,{UserId:t.uid,Data:{name:a,state:ne}}).then((function(t){e(t)}))})).catch((function(t){console.log("UserCreate Error: ",t),"auth/email-already-in-use"===t.code&&e({error:"The email address is already in use."}),"aith/invalid-email"===t.code&&e({error:"The email addres is invalid."})}))}))}function ve(e){var t=e.Email,a=e.Pass;if(ge.a.auth().currentUser){if(ge.a.auth().currentUser.email==t)return new Promise((function(e,t){e(!0)}));De()}return new Promise((function(e,n){ge.a.auth().signInWithEmailAndPassword(t,a).then((function(){e(!0)})).catch((function(t){console.log("User Signin Error: ",t),"auth/email-already-in-use"===t.code&&e("The email address is already in use."),"aith/invalid-email"===t.code?e("The email addres is invalid."):e("Could not singin")}))}))}function De(){return new Promise((function(e,t){ge.a.auth().signOut().then((function(){e(!0)}))}))}function Se(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=ge.a.auth().currentUser;switch(e){case oe.USERSDATA:switch(t){case ce.FETCH:return Ce(a);case ce.CREATE:return a.hasOwnProperty("UserData")?new Promise((function(e,t){a[0];je({Data:{name:a.Farms.name}}).then((function(t){Te({FarmId:t,Data:{sections:a.Sections,pens:a.Pens}}).then((function(){ke({Data:{state:a.UserData.state,farms:A()({},t,!0)}}).then((function(){Ce(n.uid).then((function(t){e({userData:t})}))}))}))}))})):Ee(a);case ce.UPDATE:return ke(a);case ce.SIGN:return a?ve(a):De();case ce.CLEAR:return n?{type:ce.CLEAR,path:oe.USERSDATA,data:{}}:{type:ce.CLEAR,path:oe.USERS,data:{}}}break;case oe.USERS:switch(t){case ce.FETCH:return Ce(a,!0);case ce.CREATE:break;case ce.UPDATE:var r=a.FarmId;return{type:ce.UPDATE,path:oe.USERSDATA,data:{farms:A()({},r,!0)}};case ce.CLEAR:return{type:ce.CLEAR,path:oe.USERS,data:{}}}break;case oe.FARMS:switch(t){case ce.FETCH:return we(a);case ce.CREATE:break;case ce.UPDATE:console.log("??");break;case ce.CLEAR:return{type:ce.CLEAR,path:oe.FARMS,data:{}}}break;case oe.FARMDATAS:console.log("FarmsDatas ???");break;case oe.SECTIONS:switch(t){case ce.FETCH:return Ie(a);case ce.CREATE:case ce.UPDATE:break;case ce.CLEAR:return{type:ce.CLEAR,path:oe.SECTIONS,data:{}}}break;case oe.PENS:switch(t){case ce.FETCH:return Ae(a);case ce.CREATE:return xe(a);case ce.DELETE:return Fe(a);case ce.UPDATE:return Re(a);case ce.CLEAR:return{type:ce.CLEAR,path:oe.PENS,data:{}}}break;case oe.PIGS:switch(t){case ce.FETCH:return Le(a);case ce.CREATE:return Ne(a);case ce.UPDATE:break;case ce.CLEAR:return{type:ce.CLEAR,path:oe.PIGS,data:{}}}break;case oe.BATCHS:switch(t){case ce.FETCH:return Ue(a);case ce.CREATE:return We(a);case ce.UPDATE:return Be(a);case ce.DELETE:break;case ce.CLEAR:return{type:ce.CLEAR,path:oe.BATCHS,data:{}}}break;case oe.WEIGHING:switch(t){case ce.FETCH:return He(a);case ce.CREATE:return ze(a);case ce.UPDATE:break;case ce.CLEAR:return{type:ce.CLEAR,path:oe.WEIGHING,data:{}}}break;case oe.GRAPH:switch(t){case ce.FETCH:return _e(a);case ce.CREATE:case ce.UPDATE:return Ge(a);case ce.CLEAR:return{type:ce.CLEAR,path:oe.GRAPH,data:{}}}}return new Promise((function(e,t){e({error:"Unknown Action"})}))}function Pe(e){return new Promise((function(t,a){console.log("Setting Update Time"),ge.a.database().ref(e).update({update_time:ge.a.database.ServerValue.TIMESTAMP}).then((function(){t(!1)})).catch((function(e){console.log(e),t(!0)}))}))}function Oe(e,t){return new Promise((function(a,n){ge.a.database().ref(e+"/update_time").once("value").then((function(n){var r=n.val();r?t?"SET"===t?Pe(e).then((function(e){a(e)})):a(t<r):a(!0):Pe(e).then((function(e){a(!0)}))}))}))}function Ce(e){var t=e.UserId,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="";if(t?n=t:!a&&ge.a.auth().currentUser&&(n=ge.a.auth().currentUser.uid),n||a){var r="users/"+n;return ge.a.database().ref(r).once("value").then((function(e){var t=e.val();return a?{type:ce.UPDATE,path:oe.USERS,data:{data:t}}:{type:ce.UPDATE,path:oe.USERSDATA,data:{data:t}}}))}return new Promise((function(e,t){console.log("User uid in fecth unknown"),e(null)}))}function ke(e){var t=e.UserId,a=e.Data,n=t||ge.a.auth().currentUser.uid;if(n){var r="users/"+n;return new Promise((function(e,t){ge.a.database().ref(r).update(a).then((function(t){e(null)})).catch((function(t){"database/permission-denied"===t.code?console.log("User update was permission denied. "):t.code&&console.log("User update Error: ",t),e({error:"An error occurred"})}))}))}return new Promise((function(e,t){console.log("User uid in fecth unknown"),e(null)}))}function we(e){var t=e.FarmId,a="farms/"+t;return ge.a.database().ref(a).once("value").then((function(e){var a=e.val();return t&&(a=A()({},t,a)),{type:ce.UPDATE,path:oe.FARMS,data:a}}))}function je(e){var t=e.Data,a=ge.a.auth().currentUser;a.uid;return new Promise((function(e,n){var r=ge.a.database().ref("farms/").push(),i=r.key;r.set({email:a.email,manager:a.displayName?a.displayName:a.email,name:t.name}).then((function(){e(i)})).catch((function(t){console.log("Create Farm Error: ",t),e(!1)}))}))}function Te(e){var t=e.FarmId,a=e.Data;if(t){var n="farms_data/"+t;return new Promise((function(e,t){ge.a.database().ref(n).update(a).then((function(){e(null)})).catch((function(t){"database/permission-denied"===t.code?console.log("Farm data update was permission denied. "):t.code&&console.log("User update Error: ",t),e(!1)}))}))}return new Promise((function(e,t){console.log("Farm uid in fecth unknown"),e(null)}))}function Ie(e){var t=e.FarmId,a=e.SectionId,n=e.DataTime;if(t){var r="farms_data/"+t+"/sections";return a&&(r+="/"+a),new Promise((function(e,a){Oe("farms_data/"+t+"/sections",n).then((function(t){if(console.log("Doing Sections fetch",t),t)return ge.a.database().ref(r).once("value").then((function(t){e({type:ce.UPDATE,path:oe.SECTIONS,data:t.val()})}));e({type:ce.UPDATE,path:oe.SECTIONS,data:{}})}))}))}return new Promise((function(e,t){console.log("Fecth Pigs Error"),e(null)}))}function Ae(e){var t=e.FarmId,a=e.PenId,n=e.DataTime;if(t){var r="farms_data/"+t+"/pens";return a&&(r+="/"+a),new Promise((function(e,i){Oe("farms_data/"+t+"/pens",n).then((function(t){console.log("Doing Pens fetch",t),t?ge.a.database().ref(r).once("value").then((function(t){if(a){var n=t.val();n||(n={}),n.datas||(n.datas={});var r=A()({},a,n);e({type:ce.UPDATE,path:oe.PENS,data:r})}else e({type:ce.UPDATE,path:oe.PENS,data:t.val()})})):e({type:ce.UPDATE,path:oe.PENS,data:{}})}))}))}return new Promise((function(e,t){console.log("Fecth Pens Error"),e(null)}))}function xe(e){var t=e.FarmId,a=e.PenId,n=e.SectionId;if(t){var r="farms_data/"+t+"/";return new Promise((function(e,i){if(a){var s=r+"pens/"+a+"/";ge.a.database().ref(s).set({section:n}).then((function(){ge.a.database().ref(r+"sections/"+n+"/pens").update(A()({},a,!0)).then((function(){ge.a.database().ref(r+"sections/").update({update_time:ge.a.database.ServerValue.TIMESTAMP}).then((function(){Ae({FarmId:t,PenId:a,DataTime:"SET"}).then((function(t){e({type:ce.UPDATE,path:oe.PENS,data:t.data})}))}))}))}))}}))}}function Fe(e){var t=e.FarmId,a=e.PenId,n=e.SectionId;if(t&&a){var r="farms_data/"+t+"/";return new Promise((function(e,i){ge.a.database().ref(r+"pens/"+a).remove().then((function(){n?ge.a.database().ref(r+"sections/"+n+"/pens/"+a).remove().then((function(){ge.a.database().ref(r+"sections/").update({update_time:ge.a.database.ServerValue.TIMESTAMP}).then((function(){Ae({FarmId:t,PenId:a,DataTime:"SET"}).then((function(t){e({type:ce.UPDATE,path:oe.PENS,data:t.data})}))}))})):e(null)}))}))}}function Re(e){var t=e.FarmId,a=e.PenId,n=e.Pen;if(t){var r="farms_data/"+t+"/";return new Promise((function(e,i){a&&Ae({FarmId:t,PenId:a}).then((function(t){var i=r+"pens/"+a+"/",s=n.datas,o=ye(ye({},t.data[a].datas),s);ge.a.database().ref(i).update(ye(ye({},n),{},{datas:o})).then((function(){n.section&&ge.a.database().ref(r+"sections/"+SectionId+"/pens").update(A()({},a,!0)).then((function(){ge.a.database().ref(r+"sections/").update({update_time:ge.a.database.ServerValue.TIMESTAMP}).then((function(){e(null)}))}))}))}))}))}}function Le(e){var t=e.FarmId,a=e.TagId;if(t){var n="farms_data/"+t+"/pigs";return a&&(n+="/"+a),ge.a.database().ref(n).once("value").then((function(e){if(a){var t=e.val();if(!t)return null;t.datas||(t.datas={}),t.datas.gcurve||(t.datas.gcurve="default");var n=A()({},a,t);return{type:ce.UPDATE,path:oe.PIGS,data:n}}return{type:ce.UPDATE,path:oe.PIGS,data:e.val()}}))}return new Promise((function(e,t){console.log("Fecth Pigs Error"),e(null)}))}function Me(e){var t=e.FarmId,a=(e.TagId,e.PenId),n=e.Action;if(a){var r="farms_data/"+t+"/pens/"+a+"/datas";return new Promise((function(e,i){ge.a.database().ref(r+"/count").once("value").then((function(i){var s=i.val();s||(s=0),s=n&&!isNaN(n)?parseInt(s)+parseInt(n):parseInt(s)+1,ge.a.database().ref(r).update({count:s}).then((function(){Ae({FarmId:t,PenId:a}).then((function(t){e({type:ce.UPDATE,path:oe.PENS,data:t.data})}))}))})).catch((function(t){console.log("Update pig pen Error: ",t),e(null)}))}))}return new Promise((function(e,t){e(null)}))}function Ne(e){var t=e.FarmId,a=e.TagId,n=e.PenId,r=e.Action;if(t){var i="farms_data/"+t+"/";return new Promise(a?function(e,r){var s=i+"pigs/"+a+"/";Le({FarmId:t,TagId:a}).then((function(r){r&&r.data&&(r=r.data[a]?r.data[a]:null),r&&r.hasOwnProperty("pen")?n&&n!=r.pen?Me({FarmId:t,TagId:a,PenId:r.pen,Action:-1}).then((function(r){Me({FarmId:t,TagId:a,PenId:n,Action:1}).then((function(a){ge.a.database().ref(s).update({pen:n}).then((function(){Le({FarmId:t}).then((function(t){e({type:ce.UPDATE,path:oe.PIGS,data:t.data})}))}))}))})):e(null):ge.a.database().ref(s).update({pen:0}).then((function(){Le({FarmId:t}).then((function(t){console.log("?",t),e(null)}))}))}))}:function(e,i){Me({FarmId:t,TagId:a,PenId:n,Action:r}).then((function(t){console.log("?4",t),e({type:ce.UPDATE,path:oe.PENS,data:t.data})}))})}}function Ue(e){var t=e.FarmId,a=e.BatchId,n=e.Data,r=e.DataTime;if(t){var i="farms_data/"+t+"/batchs";return a&&(i+="/"+a),new Promise((function(e,s){Oe("farms_data/"+t+"/batchs",r).then((function(t){if(console.log("Doing Batch fetch",t),n){if(a)switch(n){case oe.BATCHS:return i+="/datas",ge.a.database().ref(i).once("value").then((function(t){var n=A()({},a,{datas:t.val()});e({type:ce.UPDATE,path:oe.BATCHS,data:n})}));case oe.PENS:return i+="/pens",ge.a.database().ref(i).once("value").then((function(t){var n=A()({},a,{pens:t.val()});e({type:ce.UPDATE,path:oe.BATCHS,data:n})}));case oe.GRAPH:return i+="/gcurve",ge.a.database().ref(i).once("value").then((function(t){var n=A()({},a,{gcurve:t.val()});e({type:ce.UPDATE,path:oe.BATCHS,data:n})}))}}else ge.a.database().ref(i).once("value").then((function(t){if(a){var n=t.val();if(!n)return null;n.datas||(n.datas={}),n.pens||(n.pens=[]),n.datas.gcurve||(n.datas.gcurve="default");var r=A()({},a,n);e({type:ce.UPDATE,path:oe.BATCHS,data:r})}else e({type:ce.UPDATE,path:oe.BATCHS,data:t.val()})}))}))}))}return new Promise((function(e,t){console.log("Fecth Batchs Error"),e(null)}))}function We(e){var t=e.FarmId,a=e.BatchId,n=e.Batch;if(t){var r="farms_data/"+t+"/batchs";return new Promise((function(e,i){n&&n.name&&(a=n.name,r+="/"+n.name+"/",delete n.name,ge.a.database().ref(r).set(ye({},n)).then((function(){Object.keys(n.pens).forEach((function(e){Re({FarmId:t,PenId:e,Pen:{datas:{batch:a}}})})),e(Ue({FarmId:t}))})).catch((function(t){"database/permission-denied"===t.code?console.log("Batch update was permission denied. "):t.code&&console.log("Batch update Error: ",t),e({error:"An error occurred"})}))),a&&(console.log("???"),r+="/"+a+"/",ge.a.database().ref(r).set({time:ge.a.database.ServerValue.TIMESTAMP,pens:[],datas:{devianceMin:1,devianceMax:2}}).then((function(){e(Ue({FarmId:t}))})))}))}}function Be(e){var t=e.FarmId,a=e.BatchId,n=e.Batch;e.Data;if(t){var r="farms_data/"+t+"/batchs";return new Promise((function(e,i){a&&n?(r+="/"+a,Ue({FarmId:t,BatchId:a,Data:oe.PENS}).then((function(i){var s=i.data[a].pens;n.name&&delete n.name,ge.a.database().ref(r).update(ye({},n)).then((function(){if(n.pens&&JSON.stringify(n.pens)!==JSON.stringify(s)){s||(s=[]);var r=Object.keys(s).filter((function(e){return!Object.keys(n.pens).includes(e)})),i=Object.keys(n.pens).filter((function(e){return!Object.keys(s).includes(e)}));r&&r.length>0&&r.forEach((function(e){Re({FarmId:t,PenId:e,Pen:{datas:{batch:""}}})})),i&&i.length>0&&i.forEach((function(e){Re({FarmId:t,PenId:e,Pen:{datas:{batch:a}}})}))}n.state&&"Closed"===n.state&&Object.keys(s).forEach((function(e){Re({FarmId:t,PenId:e,Pen:{datas:{batch:""}}})})),Ue({FarmId:t,BatchId:a}).then((function(t){e(t)}))})).catch((function(t){"database/permission-denied"===t.code?console.log("Batch update was permission denied. "):t.code&&console.log("Batch update Error: ",t),console.log(t),e({error:"An error occurred"})}))}))):(console.log("Update Batchs Error"),e(null))}))}}function He(e){var t=e.FarmId,a=e.PenId,n=e.SectionId,r=(e.limitStart,e.limitTo),i=void 0===r?5:r,s=e.DataTime;if(t){var o="farms_data/"+t+"/weighings";return new Promise((function(e,r){Oe("farms_data/"+t+"/weighings",s).then((function(r){console.log("Doing Weight fetch",r),a?(o+="/"+a,ge.a.database().ref(o).orderByChild("time").limitToLast(i).once("value",(function(t){var a=A()({},t.key,{});t.forEach((function(e){a[t.key][e.key]=e.val()})),e({type:ce.UPDATE,path:oe.WEIGHING,data:a})}))):Ie({FarmId:t,SectionId:n}).then((function(a){var n=0,r=0,s={};Object.keys(a.data).forEach((function(o){a.data[o]&&a.data[o].pens&&(r+=Object.keys(a.data[o].pens).length,Object.keys(a.data[o].pens).filter((function(e){return"__jsogObjectId"!==e})).forEach((function(a){He({FarmId:t,PenId:a,limitStart:0,limitTo:i}).then((function(t){n++,s=ye(ye({},s),t.data),n===r&&e({type:ce.UPDATE,path:oe.WEIGHING,data:s})})).catch((function(t){console.log(t),e({type:ce.UPDATE,path:oe.WEIGHING,data:s})}))})))}))})).catch((function(e){console.log(e)}))}))}))}return new Promise((function(e,t){console.log("Fecth Weights Error"),e(null)}))}function ze(e){var t=e.FarmId,a=e.PenId,n=e.Weight,r=e.Date;if(t){var i="farms_data/"+t+"/weighings";if(a)return i+="/"+a+"/",new Promise((function(e,s){var o=ge.a.database().ref(i).push();o.key;o.set({time:r.getTime(),weight:n}).then((function(){He({FarmId:t,PenId:a}).then((function(t){e(t)}))})).catch((function(t){console.log("Create Weight Error: ",t),e(null)}))}))}}function _e(e){var t=e.FarmId,a=e.GraphId,n=e.DataTime;if(t){var r="farms_data/"+t+"/graph";return r=r+"/"+a,new Promise((function(e,i){Oe("farms_data/"+t+"/graph",n).then((function(t){console.log("Doing Graphs fetch",t),ge.a.database().ref(r).once("value").then((function(t){var n=null,r=t.val();if(r)if(a){var i=A()({},t.key,r);n=ye(ye({},n),i)}else n=ye(ye({},n),r);a?e({type:ce.UPDATE,path:oe.GRAPH,data:n}):ge.a.database().ref("farms_data/Agrisys/graph").once("value").then((function(t){var a=t.val();a&&(n=ye(ye({},a),n)),e({type:ce.UPDATE,path:oe.GRAPH,data:n})})).catch((function(t){console.log("Get Agrisys graph Error: ",t),e({type:ce.UPDATE,path:oe.GRAPH,data:n})}))})).catch((function(t){console.log("Get farm graph Error: ",t),e(null)}))}))}))}return new Promise((function(e,t){console.log("Fecth Graph Error"),e(null)}))}function Ge(e){var t=e.FarmId,a=e.Graph;if(t){var n="farms_data/"+t+"/graph";if(a.name)return n+="/"+a.name+"/",new Promise((function(e,r){ge.a.database().ref(n).update({data:a.data,periode:a.periode}).then((function(){_e({FarmId:t,GraphId:a.name}).then((function(t){e(t)}))})).catch((function(t){console.log("Create Graph Error: ",t),e(null)}))}))}}var Ve=function(){return new Promise((function(e,t){"ios"!==te.a.OS&&"android"!=te.a.OS||function(){var e;return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.awrap(ge.a.messaging().requestPermission());case 2:if(e=t.sent,e===ge.a.messaging.AuthorizationStatus.AUTHORIZED||e===ge.a.messaging.AuthorizationStatus.PROVISIONAL){t.next=7;break}return console.log("Authorization status:",e),t.abrupt("return",!1);case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),null,null,null,Promise)}()||e("This application needs premissions to be using notifications"),e(null)}))},Je=function(e,t,a,n){return new Promise((function(r){ae.a.alert(e,t,[{text:a,onPress:function(){r()}}],{cancelable:n,onDismiss:function(){r()}})}))},Ye=Se,Xe=a(252),Ze=b.a.mark(tt),qe=b.a.mark((function(e){var t;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t={to:e,messageId:"test1",messageType:"test2",notification:{title:"Foo",body:"Bar"}},ge.a.messaging().sendMessage(t).then((function(e){console.log(e)}));case 2:case"end":return a.stop()}}),qe)})),Qe=b.a.mark(at),Ke=b.a.mark(nt),$e=b.a.mark(rt),et=b.a.mark(it);function tt(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.f)(B.setFirebaseError(null));case 2:return console.log(Xe.a.manifest.web.config.firebase),ge.a.initializeApp(Xe.a.manifest.web.config.firebase),t.next=6,Object(y.c)(Ve);case 6:if(!(e=t.sent)){t.next=12;break}return t.next=10,Object(y.f)(B.fetchFailure(e));case 10:t.next=21;break;case 12:return t.next=14,Object(y.e)(at);case 14:return t.next=16,Object(y.e)(nt);case 16:if(!ge.a.messaging.isSupported()){t.next=21;break}return t.next=19,Object(y.e)(rt);case 19:return t.next=21,Object(y.e)(it);case 21:console.log("Firebase Startup : Done");case 22:case"end":return t.stop()}}),Ze)}function at(){var e,t,a,n;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(c.c)((function(e){var t=ge.a.auth().onAuthStateChanged((function(t){e(null==t?"NONE":t)}));return function(){t()}}),c.a.expanding(1));case 2:e=r.sent,r.prev=3;case 4:return r.next=6,Object(y.h)(e);case 6:return t=r.sent,a={firebaseUser:"NONE"===t?null:t},r.next=10,Object(y.f)(B.dataFetchSuccess({type:ce.UPDATE,path:oe.USERSDATA,data:a}));case 10:if(!a.firebaseUser){r.next=17;break}return r.next=13,Object(y.c)(Ye,oe.USERSDATA,ce.FETCH,{UserId:t.uid});case 13:if(!(n=r.sent).data){r.next=17;break}return r.next=17,Object(y.f)(B.dataFetchSuccess({type:ce.UPDATE,path:oe.USERSDATA,data:n.data}));case 17:r.next=4;break;case 19:return r.prev=19,r.next=22,Object(y.d)();case 22:if(!r.sent){r.next=24;break}e.close();case 24:return r.finish(19);case 25:case"end":return r.stop()}}),Qe,null,[[3,,19,25]])}function nt(){var e,t,a,n,r;return b.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(y.a)(["ACTION_STARTING"]);case 2:e=i.sent;case 3:return i.next=5,Object(y.h)(e);case 5:if(t=i.sent,!Object.values(ce).includes(t.action)){i.next=28;break}if(!Object.values(oe).includes(t.ref)){i.next=28;break}return i.next=10,Object(y.g)((function(e){return e.firebase.localDataStore.userData}));case 10:return a=i.sent,!(n=t.params)&&t.action!=ce.SIGN&&a&&a.farms&&(n=[Object.keys(a.farms)[0]]),i.next=15,Object(y.c)(Ye,t.ref,t.action,n);case 15:if(!(r=i.sent)||!r.error){i.next=21;break}return i.next=19,Object(y.f)(B.fetchFailure(r.error));case 19:i.next=28;break;case 21:if(!(r.type&&r.path&&r.data)){i.next=26;break}return i.next=24,Object(y.f)(B.dataFetchSuccess(r));case 24:i.next=28;break;case 26:return i.next=28,Object(y.f)(B.fetchSuccess({localDataStore:r}));case 28:i.next=3;break;case 30:case"end":return i.stop()}}),Ke)}function rt(){var e,t;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(c.c)((function(e){var t=ge.a.messaging().onMessage((function(t){e(t)}));return function(){t()}}),c.a.expanding(1));case 2:e=a.sent,a.prev=3;case 4:return a.next=6,Object(y.h)(e);case 6:if(t=a.sent,console.log("New Firebase message: ",t),!(t.notification&&t.notification.title&&t.notification.body)){a.next=13;break}return a.next=11,Object(y.c)(Je,t.notification.title,t.notification.body,"Ok",!1);case 11:a.next=14;break;case 13:console.log("New Firebase data message: ",t);case 14:a.next=4;break;case 16:return a.prev=16,a.next=19,Object(y.d)();case 19:if(!a.sent){a.next=21;break}e.close();case 21:return a.finish(16);case 22:case"end":return a.stop()}}),$e,null,[[3,,16,22]])}function it(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),et)}var st=b.a.mark(ot);function ot(e){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.b)([Object(y.i)(P.STARTUP,G),Object(y.i)(j.FETCH_USER,ee),Object(y.i)(W.FIREBASE_STARTUP,tt)]);case 2:case"end":return e.stop()}}),st)}var ct;function lt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ut(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ft,pt=Object(E.createReducer)({user:{},userIsLoading:!1,userErrorMessage:null},(ct={},A()(ct,j.FETCH_USER_LOADING,(function(e){return ut(ut({},e),{},{userIsLoading:!0,userErrorMessage:null})})),A()(ct,j.FETCH_USER_SUCCESS,(function(e,t){var a=t.user;return ut(ut({},e),{},{user:a,userIsLoading:!1,userErrorMessage:null})})),A()(ct,j.FETCH_USER_FAILURE,(function(e,t){var a=t.errorMessage;return ut(ut({},e),{},{user:{},userIsLoading:!1,userErrorMessage:a})})),ct)),ht=a(14),dt=a.n(ht),mt=a(7),gt=a.n(mt),bt=a(337);function yt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Et(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var vt=(ft={},A()(ft,W.FIREBASE_IS_LOADING,(function(e,t){var a=t.loadingstate;return Et(Et({},e),{},{firebaseIsLoading:a})})),A()(ft,W.SET_FIREBASE_ERROR,(function(e,t){var a=t.errorMessage;return Et(Et({},e),{},{firebaseErrorMessage:a})})),A()(ft,W.SET_CURRENT_DATA,(function(e,t){var a=t.data;return Et(Et({},e),{},{currentData:a})})),A()(ft,W.ACTION_STARTING,(function(e){return Et(Et({},e),{},{firebaseErrorMessage:null})})),A()(ft,W.FETCH_STARTING,(function(e){return Et(Et({},e),{},{firebaseErrorMessage:null})})),A()(ft,W.DATA_FETCH_SUCCESS,(function(e,t){var a=t.params,n=a.type,r=a.path,i=a.data,s=e.localDataStore,o=e.firebaseUser;switch(n){case ce.UPDATE:case ce.ADD:if(!i)break;var c=i;switch(r){case oe.USERSDATA:i.data&&(c=i.data),Object.keys(c).forEach((function(e){"firebaseUser"===e?o=c.firebaseUser:(s.userData||(s.userData={}),s.userData[e]=c[e])}));break;case oe.USERS:s.users||(s.users={}),i.data&&(c=i.data),c.users&&(c=c.users),Object.keys(c).forEach((function(e){s.users[e]=c[e]})),console.log(s);break;case oe.FARMS:s.farms||(s.farms={}),i.farms&&(c=i.farms),Object.keys(c).forEach((function(e){s.farms[e]=c[e]}));break;case oe.BATCHS:s.batchs||(s.batchs={}),i.batchs&&(c=i.batchs),Object.keys(c).forEach((function(e){s.batchs[e]=c[e]}));break;case oe.SECTIONS:s.sections||(s.sections={}),i.sections&&(c=i.sections),Object.keys(c).forEach((function(e){s.sections[e]=c[e]}));break;case oe.PENS:s.pens||(s.pens={}),i.pens&&(c=i.pens),Object.keys(c).forEach((function(e){s.pens[e]=c[e]}));break;case oe.PIGS:s.pigs||(s.pigs={}),i.pigs&&(c=i.pigs),Object.keys(c).forEach((function(e){s.pigs[e]=c[e]}));break;case oe.GRAPH:s.graphs||(s.graphs={}),i.graphs&&(c=i.graphs),Object.keys(c).forEach((function(e){s.graphs[e]=c[e]}));break;case oe.WEIGHING:s.weighings||(s.weighings={}),i.weighings&&(c=i.weighings),Object.keys(c).forEach((function(e){s.weighings[e]=c[e]}))}break;case ce.CLEAR:switch(r){case oe.USERS:s.userData||(s.userData={}),s.userData.action="CLEAR";break;case oe.USERSDATA:console.log("CLEAR"),s.batchs&&(s.batchs={}),s.sections&&(s.sections={}),s.pens&&(s.pens={}),s.pigs&&(s.pigs={}),s.graphs&&(s.graphs={}),s.weighings&&(s.weighings={}),s.userData&&(s.userData={})}break;default:console.log("DataFetch Not created / default")}return Et(Et({},e),{},{firebaseUser:o,localDataStore:s,firebaseIsLoading:!1,firebaseErrorMessage:null})})),A()(ft,W.FETCH_SUCCESS,(function(e,t){var a=t.data,n=Et({},e.localDataStore),r=Et({},e);if(a){var i=a.localDataStore,s=dt()(a,["localDataStore"]);i&&(n=0!==Object.keys(i).length?function e(t,a){var n=function(e){return e&&"object"===typeof e};return n(t)&&n(a)?(Object.keys(a).forEach((function(r){var i=t[r],s=a[r];Array.isArray(i)&&Array.isArray(s)||(n(i)&&n(s)?t[r]=e(gt()({},i),s):t[r]=s)})),t):a}(i,n):Et({},i)),r=Object(bt.a)(e,s)}return Et(Et({},r),{},{localDataStore:n,firebaseIsLoading:!1,firebaseErrorMessage:null})})),A()(ft,W.FETCH_FAILURE,(function(e,t){var a=t.errorMessage;return Et(Et({},e),{},{firebaseIsLoading:!1,firebaseErrorMessage:a})})),ft),Dt=Object(E.createReducer)({firebaseIsLoading:!1,firebaseErrorMessage:null,firebaseUser:null,localDataStore:{},currentData:null},vt),St=a(2),Pt=a(634),Ot=a(9),Ct=a.n(Ot),kt=a(10),wt=a.n(kt),jt=a(11),Tt=a.n(jt),It=a(12),At=a.n(It),xt=a(4),Ft=a.n(xt),Rt=a(26),Lt=a(3),Mt="rgba(0,0,0,0)",Nt="#ffffff",Ut="#a6a6a6",Wt="#ffffff",Bt="#a3b9cf",Ht="#03a489",zt="#dc3545",_t="#4cafea",Gt="#86939e",Vt="#4463ab",Jt={h1:{fontSize:38},h2:{fontSize:34},h3:{fontSize:30},normal:{fontSize:17}},Yt={tiny:5,small:10,normal:15,medium:30,tinyBottomMargin:{marginBottom:5},smallBottomMargin:{marginBottom:10},bottomMargin:{marginBottom:15},mediumBottomMargin:{marginBottom:30},tinyVerticalMargin:{marginVertical:5},smallVerticalMargin:{marginVertical:10},verticalMargin:{marginVertical:15},mediumVerticalMargin:{marginVertical:30},tinyHorizontalMargin:{marginHorizontal:5},smallHorizontalMargin:{marginHorizontal:10},horizontalMargin:{marginHorizontal:15},mediumHorizontalMargin:{marginHorizontal:30},tinyHorizontalPadding:{paddingHorizontal:5},smallHorizontalPadding:{paddingHorizontal:10},horizontalPadding:{paddingHorizontal:15},mediumHorizontalPadding:{paddingHorizontal:30},tinyVerticalPadding:{paddingVertical:5},smallVerticalPadding:{paddingVertical:10},verticalPadding:{paddingVertical:15},mediumVerticalPadding:{paddingVertical:30}},Xt={Home:a(497),DashBoard:a(498),System:a(499),Curves:a(500),User:a(501),Sow:a(502),Section:a(503),Pens:a(504),Haxa_globe:a(505),Hexa_icon:a(506),Logo:a(507),logo:a(508)};function Zt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function qt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Zt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Qt={column:{flexDirection:"column"},colMain:{flexDirection:"column",justifyContent:"center"},colCenter:{flexDirection:"column",alignItems:"center",justifyContent:"center"},colCross:{flexDirection:"column",alignItems:"center"},columnReverse:{flexDirection:"column-reverse"},row:{flexDirection:"row"},rowMain:{flexDirection:"row",justifyContent:"center"},rowCenter:{flexDirection:"row",alignItems:"center",justifyContent:"center"},rowCross:{flexDirection:"row",alignItems:"center"},rowReverse:{flexDirection:"row-reverse"},center:{alignItems:"center",justifyContent:"center"},crossCenter:{alignItems:"center"},crossEnd:{alignItems:"flex-end"},crossStart:{alignItems:"flex-start"},crossStretch:{alignItems:"stretch"},fill:{flex:1},fillCenter:{flex:1,alignItems:"center",justifyContent:"center"},fillCol:{flex:1,flexDirection:"column"},fillColCenter:{flex:1,flexDirection:"column",alignItems:"center",justifyContent:"center"},fillColCross:{flex:1,flexDirection:"column",alignItems:"center"},fillColMain:{flex:1,flexDirection:"column",justifyContent:"center"},fillColReverse:{flex:1,flexDirection:"column-reverse"},fillRow:{flex:1,flexDirection:"row"},fillRowCenter:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center"},fillRowCross:{flex:1,flexDirection:"row",alignItems:"center"},fillRowMain:{flex:1,flexDirection:"row",justifyContent:"center"},fillRowReverse:{flex:1,flexDirection:"row-reverse"},fullSize:{height:"100%",width:"100%"},halvWidth:{width:"50%"},midWidth:{width:"75%"},fullWidth:{width:"100%"},mainCenter:{justifyContent:"center"},mainEnd:{justifyContent:"flex-end"},mainSpaceAround:{justifyContent:"space-around"},mainSpaceBetween:{justifyContent:"space-between"},mainStart:{justifyContent:"flex-start"},mainContainer:qt({flex:1,flexDirection:"column",alignItems:"center"},Yt.mediumHorizontalMargin),contentContainer:qt(qt({flex:1,flexDirection:"column",alignItems:"center"},Yt.mediumHorizontalMargin),{},{marginTop:Yt.small},Yt.bottomMargin),borderContainer:qt(qt(qt({borderWidth:1,borderColor:"#000",borderRadius:15},Yt.tinyHorizontalPadding),Yt.tinyVerticalPadding),{},{maxWidth:450,zIndex:1}),textContainer:qt(qt({},Jt.normal),{},{marginBottom:Yt.normal,alignItems:"center"}),buttonContainer:{marginBottom:Yt.small,maxWidth:450},loadingContainer:{position:"absolute",left:0,right:0,top:0,bottom:0,alignItems:"center",justifyContent:"center",backgroundColor:"#F5FCFF88"},logoContainer:{width:"100%",height:220},backgroundReset:{backgroundColor:Mt},rotate90:{transform:[{rotate:"90deg"}]},rotate90Inverse:{transform:[{rotate:"-90deg"}]},mirror:{transform:[{scaleX:-1}]},scrollSpaceAround:{flexGrow:1,justifyContent:"space-around"},scrollSpaceBetween:{flexGrow:1,justifyContent:"space-between"},selfStretch:{alignSelf:"stretch"},textCenter:{textAlign:"center"},textJustify:{textAlign:"justify"},textLeft:{textAlign:"left"},textRight:{textAlign:"right"}};function Kt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $t(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Kt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ea={button:{backgroundColor:Bt,color:Wt},buttonText:{color:Wt},error:$t($t({},Jt.normal),{},{color:zt,marginBottom:Yt.tiny,textAlign:"center"}),result:$t($t({},Jt.normal),{},{marginBottom:Yt.tiny,textAlign:"center"}),text:$t($t({},Jt.normal),{},{marginBottom:Yt.tiny,textAlign:"center"}),input:$t($t({},Jt.normal),{},{height:24}),navigationHeader:{textAlign:"center",alignSelf:"center",flexGrow:1}},ta=Lt.a.create({container:{backgroundColor:Bt}});function aa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var na=function(e){Tt()(a,e);var t=aa(a);function a(e){return Ct()(this,a),t.call(this,e)}return wt()(a,[{key:"getData",value:function(){"android"!==te.a.OS&&"ios"!==te.a.OS||(ge.a.messaging().onNotificationOpenedApp((function(e){console.log("Notification caused app to open from background state:",e.notification),z.navigate(e.data.type)})),ge.a.messaging().getInitialNotification().then((function(e){e&&(console.log("Notification caused app to open from quit state:",e.notification),z.navigate(e.data.type))})))}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.checkData(this.props)}},{key:"render",value:function(){return r.a.createElement(St.a,{style:[Qt.fillRowCenter,ta.container]},r.a.createElement(St.a,{style:[Qt.center,Qt.logoContainer]},r.a.createElement(Rt.a,{style:Qt.fullSize,source:Xt.Hexa_icon,resizeMode:"contain"})))}}]),a}(n.Component),ra=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{}}))(na),ia=a(15),sa=function(){return r.a.createElement(St.a,{style:[Qt.fillCenter,Qt.rowMain,Yt.mediumHorizontalMargin]},r.a.createElement(ia.a,null,"This is deep linking example screen which can be accessed using agrissysapp://deeplink scheme!"))},oa=a(25);function ca(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function la(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ca(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ca(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ua=Lt.a.create({boxContainer:la(la({},Qt.center),Yt.tinyVerticalMargin),button:la(la(la(la({borderRadius:15},Qt.center),Qt.fullWidth),Yt.horizontalPadding),ea.button),text:la(la(la(la({},ea.buttonText),Yt.verticalPadding),Qt.center),{},{textAlign:"center"}),icon:la(la(la({},Qt.colCenter),Yt.smallVerticalMargin),{},{width:"25%",height:50})}),fa=function(e){var t=[r.a.createElement(ia.a,{style:[ua.text,e.textStyle],key:0},e.Text)],a=[];if(e.icon){var n=r.a.createElement(Rt.a,{style:Qt.fullSize,source:e.icon,resizeMode:"contain"});a=r.a.createElement(St.a,{style:[ua.icon,e.iconStyle]},n)}return r.a.createElement(oa.a,{style:[ua.boxContainer,e.boxStyle],onPress:e.onPress},e.icon?r.a.createElement(St.a,{style:[ua.button,e.buttonStyle,Qt.rowCenter]},r.a.createElement(St.a,{style:[Qt.colCenter,Qt.fill]},t),a):r.a.createElement(St.a,{style:[ua.button,e.buttonStyle]},t))},pa=function(e){var t=e.Texts,a=e.Images,n=e.onPress,i=[];return t.forEach((function(t,s){var o=null;a&&a[s]&&(o=a[s]),i.push(r.a.createElement(fa,{key:s,Text:t,icon:o,iconStyle:e.iconStyle,itemStyle:e.itemStyle,onPress:function(){n&&n({index:s,text:t})}}))})),r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth,{marginBottom:30},e.style]},i)},ha=function(e){return r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth,Yt.bottomMargin]},r.a.createElement(fa,{Text:e.Text,icon:e.icon,buttonStyle:{backgroundColor:Vt},onPress:function(){e.onPress&&e.onPress()}}))},da=a(27);function ma(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ga(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ma(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ba=Lt.a.create({listitem:ga(ga(ga({flex:1},Qt.borderContainer),Qt.center),{},{backgroundColor:"#fff",paddingVertical:5,paddingHorizontal:5})}),ya=function(e){var t=e.key?e.key:0;return r.a.createElement(da.c,{key:t,containerStyle:[ba.listitem,{flexDirection:"column",borderRadius:0},e.itemStyle],button:!0,onPress:e.onPress},r.a.createElement(da.c.Content,null,r.a.createElement(da.c.Title,null,e.Title),e.hasOwnProperty("Subtitle")?r.a.createElement(da.c.Subtitle,null,e.Subtitle):r.a.createElement(r.a.Fragment,null)))};function Ea(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function va(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ea(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Da=Lt.a.create({contentBox:va(va(va(va({},Qt.fill),Qt.colCenter),Qt.borderContainer),{},{borderRadius:0,minHeight:30})}),Sa=function(e){var t=[];e.texts&&e.texts.forEach((function(a,n){t.push(r.a.createElement(St.a,{style:[Da.contentBox,e.textsStyle],key:"text_"+n},r.a.createElement(ia.a,null,a)))}));var a=[];e.datas&&e.datas.forEach((function(t,n){a.push(r.a.createElement(oa.a,{style:[Da.contentBox,e.datasStyle],onLongPress:function(){e.onPress&&e.onPress({data:t,index:n})},key:"data_"+n},r.a.createElement(ia.a,null,t)))}));for(var n=t.length>a.length?t.length:a.length,i=[],s=0;s<n;s++){var o=[];s<t.length?o.push(t[s]):o.push(r.a.createElement(St.a,{style:[Qt.fill,Qt.colCenter],key:"leftSpace_"+s})),a.length>0&&(o.push(r.a.createElement(St.a,{style:[Qt.fill,Qt.colCenter,{maxWidth:20}],key:"seperator_"+i.length})),s<a.length?o.push(a[s]):o.push(r.a.createElement(St.a,{style:[Qt.fill,Qt.colCenter],key:"rightSpace_"+s}))),i.push(r.a.createElement(St.a,{style:[e.datas?Qt.rowCenter:Qt.halvWidth,Yt.tinyVerticalMargin],key:"row_"+i.length},o))}return i},Pa=(Lt.a.create({container:{backgroundColor:Bt}}),a(36)),Oa=function(e){var t=Object(i.c)();if(e.pigTag||e.pig){var a=null,n=null;if(e.localDataStore&&e.PigsList&&e.PigsList[e.pigTag]&&e.PigsList[e.pigTag].pen&&0!=e.PigsList[e.pigTag].pen&&(a=e.PigsList[e.pigTag].pen,e.localDataStore.pens&&e.localDataStore.pens[a])){var s=e.localDataStore.pens[a];n=s.section}return r.a.createElement(St.a,{style:[Qt.buttonContainer]},r.a.createElement(fa,{Text:"Add Pig",onPress:function(){t(B.actionStarting(ce.CREATE,oe.PIGS,{FarmId:e.farm,TagId:e.pigTag}))}}),r.a.createElement(fa,{Text:"Move Pig",onPress:function(){t(B.setCurrentData({type:oe.PIGS,action:ce.CREATE,pigtag:e.pigTag,data:{section:n},dataId:a})),z.navigate("DataEditor")}}))}return r.a.createElement(Pa.a,{style:{paddingRight:5}},r.a.createElement(St.a,{style:[Qt.buttonContainer]},r.a.createElement(fa,{Text:"Weight",onPress:function(){return z.navigate("WeighingOperations")}}),e.farm&&e.penid?r.a.createElement(St.a,null,r.a.createElement(fa,{Text:"Add Pig",onPress:function(){t(B.actionStarting(ce.CREATE,oe.PIGS,{FarmId:e.farm,PenId:e.penid,Action:1}))}}),r.a.createElement(fa,{Text:"Move Pig",onPress:function(){t(B.actionStarting(ce.CREATE,oe.PIGS,{FarmId:e.farm,PenId:e.penid,Action:-1}))}}),r.a.createElement(fa,{Text:"Lost Pig",onPress:function(){t(B.actionStarting(ce.CREATE,oe.PIGS,{FarmId:e.farm,PenId:e.penid,Action:-1}))}}),r.a.createElement(fa,{Text:"Sold Pig",onPress:function(){t(B.actionStarting(ce.CREATE,oe.PIGS,{FarmId:e.farm,PenId:e.penid,Action:-1}))}})):r.a.createElement(r.a.Fragment,null),e.farm&&e.section?r.a.createElement(St.a,{style:[{marginTop:40}]},r.a.createElement(fa,{Text:"Add Pen",onPress:function(){t(B.setCurrentData({type:oe.PENS,action:ce.CREATE})),z.navigate("DataEditor")}}),r.a.createElement(fa,{Text:"Remove Pen",onPress:function(){t(B.setCurrentData({type:oe.PENS,action:ce.DELETE})),z.navigate("DataEditor")}})):r.a.createElement(r.a.Fragment,null)))},Ca=a(16),ka=function(e){var t=Object(n.useRef)(new Ca.a.Value(0)),a=e.progress;Object(n.useEffect)((function(){Ca.a.timing(t.current,{toValue:a,duration:100}).start()}),[a]);var i=t.current.interpolate({inputRange:[0,100],outputRange:["0%","100%"],extrapolate:"clamp"});return r.a.createElement(St.a,{style:[Qt.borderContainer,Qt.fullWidth,{borderWidth:0,height:45}]},r.a.createElement(St.a,{style:[Qt.fill,Qt.fullWidth,Qt.colMain,{alignContent:"center"}]},r.a.createElement(ia.a,{style:{alignSelf:"flex-start"}},e.text),r.a.createElement(St.a,{style:wa.progressBar},r.a.createElement(Ca.a.View,{style:(Lt.a.absoluteFill,{backgroundColor:"#8BED4F",width:i})}))))},wa=Lt.a.create({container:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",paddingTop:5,padding:8},progressBar:{flexDirection:"row",height:20,width:"100%",borderColor:"#000",borderWidth:2,borderRadius:5}}),ja=a(53);function Ta(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var Ia=["January","February","March","April","May","June","July","August","September","October","November","December"],Aa=function(e){Tt()(a,e);var t=Ta(a);function a(e){var n;Ct()(this,a);var r=(n=t.call(this,e)).getStates(e),i=r.year,s=r.month,o=r.day;return n.state={year:i,month:s,day:o},n}return wt()(a,[{key:"getStates",value:function(e){var t,a,n,r=new Date;return e.FullYear&&(r=new Date(e.FullYear)),t=r.getFullYear(),a=r.getMonth(),n=r.getDate(),e.FullYear||(e.Year&&(t=this.props.Year),e.Month&&(a=this.props.Month),e.Day&&(n=this.props.Day)),{year:t,month:a,day:n}}},{key:"componentDidUpdate",value:function(e,t){if(e.FullYear)e.FullYear!=this.props.FullYear&&this.forceUpdate();else{var a=!1;e.Year!=this.props.Year&&(a=!0),e.Month!=this.props.Month&&(a=!0),e.Day!=this.props.Day&&(a=!0),a&&this.forceUpdate()}}},{key:"render",value:function(){for(var e=this,t=this.getStates(this.props),a=t.year,n=t.month,i=t.day,s=[],o=a-25;o<a+25;o++)s.push(r.a.createElement(ja.a.Item,{key:"Year_"+o,value:o,label:o}));for(var c=[],l=0;l<Ia.length;l++)c.push(r.a.createElement(ja.a.Item,{key:"Month_"+l,value:l,label:Ia[l]}));for(var u=[],f=new Date(a,n+1,0).getDate(),p=1;p<=f;p++)u.push(r.a.createElement(ja.a.Item,{key:"Day_"+p,value:p,label:p}));return r.a.createElement(St.a,{style:[Qt.fullWidth,Qt.row,this.props.style]},r.a.createElement(ja.a,{selectedValue:a,style:[{minWidth:100,marginRight:10}],onValueChange:function(t){a=t,e.props.onValueChange(new Date(a,n,i))}},s),r.a.createElement(ja.a,{selectedValue:n,style:[{minWidth:100,marginRight:10}],onValueChange:function(t){n=t,e.props.onValueChange(new Date(a,n,i))}},c),r.a.createElement(ja.a,{selectedValue:i,style:[{minWidth:100}],onValueChange:function(t){i=t,e.props.onValueChange(new Date(a,n,i))}},u))}}]),a}(n.Component);function xa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Fa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xa(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ra=Lt.a.create({logoContainer:Fa(Fa({},Qt.fullWidth),{},{height:190,marginTop:2*Yt.medium,marginBottom:Yt.medium})}),La=function(){var e=Object(i.c)();return Object(n.useEffect)((function(){e(B.setFirebaseError(null))}),[]),r.a.createElement(St.a,{style:[Qt.mainContainer]},r.a.createElement(St.a,{style:[Ra.logoContainer]},r.a.createElement(Rt.a,{style:[Qt.fullSize],source:Xt.Logo,resizeMode:"contain"})),r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize]},r.a.createElement(St.a,{style:[Qt.textContainer,Qt.fullWidth]},r.a.createElement(ia.a,{style:ea.text},"Welcome to Agrisys App"),r.a.createElement(ia.a,{style:ea.text},"Please choose your action")),r.a.createElement(pa,{Texts:["Connect to Agrisys Cloud","Connect to Device"],Images:[Xt.Haxa_globe,null],onPress:function(e){switch(e.index){case 0:z.navigate("AuthStack");break;case 1:z.navigate("DeviceScreen")}}})))},Ma=a(187),Na=a(29),Ua=function(e){if(Object.entries(e.example.user).length<=0)return null;return["Gwenborough","Wisokyburgh","McKenziehaven","South Elvis","Roscoeview"].includes(e.example.user.address.city)};function Wa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ba(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wa(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ha=Lt.a.create({error:Ba(Ba({},Jt.normal),{},{color:zt,marginBottom:Yt.tiny,textAlign:"center"}),instructions:Ba(Ba({},Jt.normal),{},{fontStyle:"italic",marginBottom:Yt.tiny,textAlign:"center"}),logoContainer:Ba(Ba({},Qt.fullWidth),{},{height:300,marginBottom:25}),result:Ba(Ba({},Jt.normal),{},{marginBottom:Yt.tiny,textAlign:"center"}),text:Ba(Ba({},Jt.normal),{},{marginBottom:Yt.tiny,textAlign:"center"})}),za=te.a.select({ios:"Press Cmd+R to reload,\nCmd+D or shake for dev menu.",android:"Double tap R on your keyboard to reload,\nShake or press menu button for dev menu."}),_a=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){return e.example.user})),a=Object(i.d)((function(e){return e.example.userIsLoading})),s=Object(i.d)((function(e){return e.example.userErrorMessage}));return Object(n.useEffect)((function(){e(T.fetchUser())}),[]),r.a.createElement(St.a,{style:[Qt.fillCenter,Qt.rowMain,Yt.mediumHorizontalMargin,Yt.mediumVerticalMargin]},a?r.a.createElement(Na.a,{size:"large",color:"#0000ff"}):r.a.createElement(St.a,null,r.a.createElement(St.a,{style:Ha.logoContainer},r.a.createElement(Rt.a,{style:Qt.fullSize,source:Xt.logo,resizeMode:"contain"})),r.a.createElement(ia.a,{style:Ha.text},"To get started, edit App.js"),r.a.createElement(ia.a,{style:Ha.instructions},za),s?r.a.createElement(ia.a,{style:Ha.error},s):r.a.createElement(St.a,null,r.a.createElement(ia.a,{style:Ha.result},"I'm a fake user, my name is ",t.name),r.a.createElement(ia.a,{style:Ha.result},Ua?"I live in Europe !":"I don't live in Europe.")),r.a.createElement(Ma.a,{style:ea.button,onPress:function(){return e(T.fetchUser())},title:"Refresh"})))},Ga=Object(Pt.a)({FrontScreen:{screen:La,navigationOptions:function(){return{headerMode:"none",headerShown:!1}},path:"main"},ExampleScreen:{screen:_a,navigationOptions:function(){return{headerMode:"none"}},path:"example"}},{initialRouteName:"FrontScreen",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerRight:function(){return r.a.createElement(St.a,{style:{padding:6}})}}});Lt.a.create({});function Va(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var Ja=function(e){Tt()(a,e);var t=Va(a);function a(e){var n;return Ct()(this,a),(n=t.call(this,e)).state={ISLOADPAGE:!0,Page:null},n}return wt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null),null!==this.props.firebase.firebaseUser&&this.props.getUser(this.props.firebase.firebaseUser.uid)}},{key:"checkData",value:function(e){this.props.firebase.firebaseUser;var t=this.props.firebase.localDataStore,a=function(e){switch(e){case se:return"AdminPanel";case ie:return"ConsysPanel";case re:return"UserPanel";case ne:return"CreateUserData";default:return"LoginUser"}}(t.userData?t.userData.state:null);"LoginUser"!==a&&t.userData&&t.userData.action&&"CLEAR"===t.userData.action&&this.props.clearDataMem(),z.navigate(a)}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.checkData(this.props)}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=this.state.ISLOADPAGE;return r.a.createElement(St.a,{style:[Qt.mainContainer]},t?r.a.createElement(St.a,{style:[Qt.fillRowCenter,Qt.center,Qt.logoContainer]},r.a.createElement(Rt.a,{style:Qt.fullSize,source:Xt.Hexa_icon,resizeMode:"contain"})):r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fillColMain]},r.a.createElement(ia.a,{style:ea.text},"This page contains an error."),r.a.createElement(ia.a,{style:ea.text},"If you are going back, please press back again.")),(e||t)&&r.a.createElement(Na.a,{style:Qt.loadingContainer,size:"large"}))}}]),a}(n.Component),Ya=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(B.setFirebaseError(t))},clearDataMem:function(){return e(B.actionStarting(ce.CLEAR,oe.USERSDATA))},getUser:function(t){return e(B.actionStarting(ce.FETCH,oe.USERSDATA,{UserId:t}))}}}))(Ja);function Xa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var Za=function(e){Tt()(a,e);var t=Xa(a);function a(e){var n;return Ct()(this,a),(n=t.call(this,e)).state={Email:"",Pass:"",NewUser:!1},n}return wt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null)}},{key:"checkData",value:function(e){e.firebase&&e.firebase.firebaseUser&&e.firebase.localDataStore&&e.firebase.localDataStore.userData}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.checkData(this.props)}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=(this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage);return r.a.createElement(St.a,{style:[Qt.mainContainer]},r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fillColMain]},a?r.a.createElement(ia.a,{style:ea.error},a):r.a.createElement(r.a.Fragment,null),this.state.NewUser?r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fillColMain]},r.a.createElement(St.a,{style:[Qt.borderContainer,Qt.midWidth,{marginBottom:20}]},r.a.createElement(da.b,{label:"Email",style:ea.input,onChangeText:function(t){e.setState({Email:t})},value:this.state.Email}),r.a.createElement(da.b,{label:"Password",style:ea.input,onChangeText:function(t){e.setState({Pass:t})},value:this.state.Pass})),r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth]},r.a.createElement(fa,{Text:"Create User",onPress:function(){e.state.Email&&""!==e.state.Email?e.state.Pass&&""!==e.state.Pass?e.props.createUser(e.state.Email,e.state.Pass):e.props.setFirebaseError("Password is needed"):e.props.setFirebaseError("Email is needed")}}))):r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fillColMain]},r.a.createElement(St.a,{style:[Qt.borderContainer,Qt.midWidth,{marginBottom:20}]},r.a.createElement(da.b,{label:"Username",style:ea.input,onChangeText:function(t){e.setState({Email:t})},value:this.state.Email}),r.a.createElement(da.b,{label:"Password",style:ea.input,onChangeText:function(t){e.setState({Pass:t})},value:this.state.Pass}),r.a.createElement(fa,{Text:"Login",icon:Xt.User,onPress:function(){e.state.Email&&""!==e.state.Email?"CLEAR"===e.state.Email?e.props.clearDataMem():e.state.Pass&&""!==e.state.Pass?e.props.signIN(e.state.Email,e.state.Pass):e.props.setFirebaseError("Password is needed"):e.props.setFirebaseError("Email is needed")}})),r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth]},r.a.createElement(fa,{Text:"Create New User",onPress:function(){e.props.setFirebaseError(null),e.setState({Email:"",Pass:"",NewUser:!0})}}))),t&&r.a.createElement(Na.a,{style:Qt.loadingContainer,size:"large"})))}}]),a}(n.Component),qa=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(B.setFirebaseError(t))},clearDataMem:function(){return e(B.actionStarting(ce.CLEAR,oe.USERSDATA))},getUser:function(t){return e(B.actionStarting(ce.FETCH,oe.USERSDATA,{UserId:t}))},signIN:function(t,a){return e(B.actionStarting(ce.SIGN,oe.USERSDATA,{Email:t,Pass:a}))},createUser:function(t,a){return e(B.actionStarting(ce.CREATE,oe.USERSDATA,{Email:t,Pass:a}))}}}))(Za);function Qa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var Ka=function(e){Tt()(a,e);var t=Qa(a);function a(e){var n;return Ct()(this,a),(n=t.call(this,e)).state={Farm:"Test",Sections:1,Pens:1},n}return wt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null)}},{key:"checkData",value:function(e){var t=e.firebase.localDataStore;!e.firebase||null===e.firebase.firebaseUser||!t.userData||t.userData.state}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.checkData(this.props)}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=(this.props.firebase.firebaseUser,this.props.firebase.localDataStore,this.props.firebase.firebaseErrorMessage);return r.a.createElement(St.a,{style:[Qt.mainContainer]},r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fillColMain]},a?r.a.createElement(ia.a,{style:ea.error},a):r.a.createElement(r.a.Fragment,null),r.a.createElement(St.a,{style:[Qt.borderContainer,Qt.midWidth,{marginBottom:20}]},r.a.createElement(da.b,{label:"Farm Name",style:ea.input,onChangeText:function(t){e.setState({Farm:t})},value:this.state.Farm}),r.a.createElement(da.b,{label:"Number of Sections",style:ea.input,onChangeText:function(t){isNaN||e.setState({Sections:t})},value:this.state.Sections}),r.a.createElement(da.b,{label:"Number of Pens in Sections",style:ea.input,onChangeText:function(t){isNaN||e.setState({Pens:t})},value:this.state.Pens})),r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth]},r.a.createElement(fa,{Text:"Create User",onPress:function(){var t={},a={},n={};if(e.state.Farm&&""!==e.state.Farm)if(e.state.Sections&&isNaN(e.state.Sections))e.props.setFirebaseError("Number of Sections have to be a number");else if(e.state.Pens&&isNaN(e.state.Pens))e.props.setFirebaseError("Number of Pens in Sections have to be a number");else{t={state:re,farms:{}};var r,i,s=1;for(r=1;r<=e.state.Sections;r++){var o={};for(i=1;i<=e.state.Pens;i++)n["Pen_"+s]={section:"Section_"+r},o["Pen_"+s]=!0,s++;a["Section_"+r]={pens:o}}e.props.createUserData(t,e.state.Farm,a,n)}else e.props.setFirebaseError("Farm name is needed")}}))),t&&r.a.createElement(Na.a,{style:Qt.loadingContainer,size:"large"}))}}]),a}(n.Component),$a=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(B.setFirebaseError(t))},createUserData:function(t,a,n,r){return e(B.actionStarting(ce.CREATE,oe.USERSDATA,{UserData:t,Farms:{name:a},Sections:n,Pens:r}))}}}))(Ka);function en(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var tn=Object(Pt.a)({UserLoadingScreen:{screen:Ya,navigationOptions:function(){return{title:"User loading"}}},LoginUser:{screen:qa,navigationOptions:function(){return{title:"User Login",headerLeft:function(){return r.a.createElement(St.a,{style:{padding:6,paddingLeft:15}},r.a.createElement(da.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){return z.navigate("MainStack")}}))}}}},CreateUserData:{screen:$a,navigationOptions:function(){return{title:"Create Data"}}}},{initialRouteName:"UserLoadingScreen",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerTitleStyle:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?en(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):en(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},ea.navigationHeader),headerLeft:function(){return r.a.createElement(St.a,{style:{padding:6,paddingLeft:15}},r.a.createElement(da.a,{type:"ionicon",name:"md-arrow-back",size:25,color:"black",onPress:function(){return z.navigate("MainStack")}}))},headerRight:function(){return r.a.createElement(St.a,{style:{padding:6}})}}});Lt.a.create({});function an(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var nn=function(e){Tt()(a,e);var t=an(a);function a(e){var n;return Ct()(this,a),(n=t.call(this,e)).state={ISLOADPAGE:!0},n}return wt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null)}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.checkData(this.props)}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.firebaseUser;return r.a.createElement(St.a,{style:[Qt.mainContainer]},r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fillColMain]},a?r.a.createElement(St.a,{style:Qt.textContainer},r.a.createElement(ia.a,{style:ea.text},"Wellcome to: ",a.displayName?a.displayName:a.email)):r.a.createElement(r.a.Fragment,null),r.a.createElement(pa,{Texts:["Dashboard","Pigs","Pens","Batchs","Growth curves","Operations"],Images:[Xt.DashBoard,Xt.Sow,Xt.Pens,Xt.Section,Xt.Curves,Xt.System],onPress:function(e){switch(e.text){case"Dashboard":z.navigate("UserDashBoard");break;case"Pigs":z.navigate("UserPigs");break;case"Pens":z.navigate("UserPens");break;case"Batchs":z.navigate("UserBatchs");break;case"Growth curves":z.navigate("UserCurves");break;case"Operations":z.navigate("UserOperations")}}}),localDataStore&&localDataStore.userData&&"admin"===localDataStore.userData.state?r.a.createElement(r.a.Fragment,null):r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth]},r.a.createElement(fa,{Text:"LogOut",onPress:function(){e.props.logOut()}}))),t&&r.a.createElement(Na.a,{style:Qt.loadingContainer,size:"large"}))}}]),a}(n.Component),rn=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(B.setFirebaseError(t))},logOut:function(){return e(B.actionStarting(ce.SIGN,oe.USERSDATA))}}}))(nn),sn=a(39);function on(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var cn=function(e){Tt()(a,e);var t=on(a);function a(e){var n;Ct()(this,a);var r=(n=t.call(this,e)).setData(e),i=r.Name,s=r.Manager,o=r.Mail,c=(r.MaxCap,r.CurCap,r.PensList),l=r.SectionsList,u=r.BatchList;return n.state={farmName:i,farmManager:s,farmMail:o,PensList:c,SectionsList:l,BatchList:u},n}return wt()(a,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,a="Not set",n="Not set",r="Not set";if(t&&t.farms&&t.farms[Object.keys(t.userData.farms)[0]]){var i=t.farms[Object.keys(t.userData.farms)[0]];a=i.name?i.name:a,n=i.name?i.manager:n,r=i.name?i.email:r}return{Name:a,Manager:n,Mail:r,PensList:t.pens,SectionsList:t.sections,BatchList:t.batchs}}},{key:"getData",value:function(){this.props.setFirebaseError(null);var e=this.props.firebase.localDataStore;e.sections||(e.sections={}),e.pens||(e.pens={}),this.props.getFarm(Object.keys(e.userData.farms)[0]),this.props.getSections(Object.keys(e.userData.farms)[0],e.sections.update_time),this.props.getPens(Object.keys(e.userData.farms)[0],e.pens.update_time),this.props.getBatch(Object.keys(e.userData.farms)[0])}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore)){var a=this.props.firebase.localDataStore;if(a.farms&&a.farms[Object.keys(a.userData.farms)[0]]){var n=a.farms[Object.keys(a.userData.farms)[0]];if(this.state.farmName!==n.name||this.state.farmManager!==n.manager||this.state.farmMail!==n.email||a.batchs&&JSON.stringify(this.state.BatchList)!==JSON.stringify(a.batchs)||a.sections&&JSON.stringify(this.state.SectionsList)!==JSON.stringify(a.sections)||a.pens&&JSON.stringify(this.state.PensList)!==JSON.stringify(a.pens)){var r=this.setData(this.props),i=r.Name,s=r.Manager,o=r.Mail,c=r.PensList,l=r.SectionsList,u=r.BatchList;this.setState({farmName:i,farmManager:s,farmMail:o,PensList:c,SectionsList:l,BatchList:u})}}}}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=(this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage),n=(this.props.firebase.localDataStore,0),i=0;return this.state.SectionsList&&this.state.PensList&&this.state.BatchList&&Object.keys(this.state.SectionsList).map((function(t){var a=e.state.SectionsList[t].pens;a&&Object.keys(a).filter((function(e){return"__jsogObjectId"!==e})).map((function(t){n++;var a=e.state.PensList[t];a&&a.datas&&a.datas.count&&(i+=a.datas.count,a.datas.batch&&e.state.BatchList&&e.state.BatchList[a.datas.batch]&&(e.state.BatchList[a.datas.batch].count||(e.state.BatchList[a.datas.batch].count=0),e.state.BatchList[a.datas.batch].count+=a.datas.count))}))})),0===n&&n++,r.a.createElement(St.a,{style:[Qt.mainContainer]},r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullWidth,Qt.fill]},a?r.a.createElement(ia.a,{style:ea.error},a):r.a.createElement(r.a.Fragment,null),r.a.createElement(ha,{Text:"Farm description"}),r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.fullWidth,{height:110}]},r.a.createElement(Sa,{texts:["Farm name","Manager","E-mail"],datas:[this.state.farmName,this.state.farmManager,this.state.farmMail]})),r.a.createElement(St.a,{style:{height:20}}),r.a.createElement(ka,{text:"Farm capacity: "+i+" of "+n,progress:i/n*100}),r.a.createElement(ka,{text:"Farm performance:",progress:50}),this.state.BatchList?r.a.createElement(St.a,{style:[Qt.borderContainer,Qt.fullWidth,{borderWidth:0,marginTop:10}]},r.a.createElement(ia.a,null,"Batches:"),r.a.createElement(sn.a,{data:Object.keys(this.state.BatchList).filter((function(t){return"__jsogObjectId"!==t&&"update_time"!==t&&(!e.state.BatchList[t].state||"Closed"!==e.state.BatchList[t].state)})),renderItem:function(t){var a=t.item,n=(t.i,e.state.BatchList[a].count);return n||(n=0),r.a.createElement(ka,{text:a+" performance: "+n+" pigs",progress:40})},keyExtractor:function(e,t){return t.toString()}})):r.a.createElement(r.a.Fragment,null)),t&&r.a.createElement(Na.a,{style:Qt.loadingContainer,size:"large"}))}}]),a}(n.Component),ln=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(B.setFirebaseError(t))},getFarm:function(t){return e(B.actionStarting(ce.FETCH,oe.FARMS,{FarmId:t}))},getSections:function(t,a){return e(B.actionStarting(ce.FETCH,oe.SECTIONS,{FarmId:t,DataTime:void 0}))},getPens:function(t,a){return e(B.actionStarting(ce.FETCH,oe.PENS,{FarmId:t,DataTime:void 0}))},getBatch:function(t){return e(B.actionStarting(ce.FETCH,oe.BATCHS,{FarmId:t}))}}}))(cn),un=a(75);function fn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var hn=Lt.a.create({loading:{position:"absolute",left:0,right:0,top:0,bottom:0,alignItems:"center",justifyContent:"center",backgroundColor:"#F5FCFF88"},textContainer:pn(pn({},Jt.normal),{},{marginBottom:Yt.normal}),inputContainer:{marginBottom:Yt.small},input:pn(pn({},Jt.normal),{},{height:24})}),dn=a(106);function mn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function gn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function bn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var yn=function(e){Tt()(a,e);var t=bn(a);function a(e){var n;Ct()(this,a);var r=(n=t.call(this,e)).setData(e).PigsList;return n.state={PigsList:r,PigTag:""},n}return wt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null);var e=this.props.firebase.localDataStore;e.pens||(e.pens={}),this.props.getPigs(Object.keys(e.userData.farms)[0]),this.props.getPens(Object.keys(e.userData.farms)[0],e.pens.update_time)}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=null;return t&&t.pigs&&(a=de(t.pigs)),{PigsList:a}}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase&&this.props.firebase.localDataStore&&this.props.firebase.localDataStore.pigs&&JSON.stringify(this.state.PigsList)!==JSON.stringify(de(this.props.firebase.localDataStore.pigs)))){var a=this.setData(this.props).PigsList;this.setState({PigsList:a})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.firebaseUser,n=this.props.firebase.firebaseErrorMessage,i=this.props.firebase.localDataStore;return r.a.createElement(St.a,{style:[Qt.mainContainer]},r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullWidth,Qt.fill]},n?r.a.createElement(ia.a,{style:ea.error},n):r.a.createElement(r.a.Fragment,null),a?r.a.createElement(St.a,{style:[Qt.fill,Qt.buttonContainer,Qt.fullWidth,Yt.bottomMargin,Qt.column]},r.a.createElement(vn,{connectedState:null}),r.a.createElement(Dn,{DeviceData:null}),this.state.PigsList?r.a.createElement(St.a,{style:[Qt.fill,Qt.borderContainer,Yt.smallHorizontalPadding,Yt.smallVerticalPadding,{maxWidth:800,marginTop:10}]},r.a.createElement(un.a,{style:Sn.container},r.a.createElement(sn.a,{data:Object.keys(this.state.PigsList),renderItem:function(t){var a=t.item,n="-",s="-";if(e.state.PigsList[a].pen&&0!=e.state.PigsList[a].pen&&(n=e.state.PigsList[a].pen,i.pens&&i.pens[n])){var o=i.pens[n];s=o.section}return r.a.createElement(St.a,{style:[Qt.fill,Qt.rowCenter,Qt.fullWidth,{height:35}]},r.a.createElement(ya,{Title:a,itemStyle:[{height:35}],onPress:function(){e.props.setData(a,s,n),z.navigate("DataDisplay")}}),r.a.createElement(ya,{itemStyle:[{width:70,height:35,justifyContent:"center"}],Title:n,onPress:function(){e.setState({PigTag:a})}}),r.a.createElement(ya,{itemStyle:[{width:90,height:35}],Title:s,onPress:function(){e.setState({PigTag:a})}}))},keyExtractor:function(e){return e.id}}))):r.a.createElement(r.a.Fragment,null),r.a.createElement(da.b,{label:"Pig-tag:",containerStyle:[{borderWidth:1,marginTop:10}],style:[ea.input],onChangeText:function(t){e.setState({PigTag:t})},value:this.state.PigTag}),r.a.createElement(Oa,{pig:!0,pigTag:this.state.PigTag,PigsList:this.state.PigsList,farm:Object.keys(i.userData.farms)[0],localDataStore:i})):r.a.createElement(r.a.Fragment,null)),t&&r.a.createElement(Na.a,{style:Qt.loadingContainer,size:"large"}))}}]),a}(n.Component),En=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{getPens:function(t,a){return e(B.actionStarting(ce.FETCH,oe.PENS,{FarmId:t,DataTime:a}))},getPigs:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e(B.actionStarting(ce.FETCH,oe.PIGS,{FarmId:t,TagId:a}))},setData:function(t,a,n){return e(B.setCurrentData({pigId:t,type:oe.PIGS,section:a,dataId:n}))},setFirebaseError:function(t){return e(B.setFirebaseError(t))}}}))(yn),vn=function(e){return"ios"===te.a.OS||"android"===te.a.OS?r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.fullWidth,Yt.bottomMargin,Qt.rowCenter]},r.a.createElement(St.a,{style:[Qt.fill,Qt.fullWidth,Qt.rowMain]},r.a.createElement(St.a,{style:[Qt.fill,Qt.column,{backgroundColor:"red"}]},r.a.createElement(St.a,{style:[Qt.fill,Qt.row,Qt.fullWidth,{backgroundColor:"blue"}]},r.a.createElement(St.a,{style:{justifyContent:"center",alignItems:"center"}})),r.a.createElement(St.a,{style:[Qt.fill,Qt.row,Qt.fullWidth]},r.a.createElement(ia.a,null,"Messages"),r.a.createElement(ia.a,null,"Errors"))),r.a.createElement(St.a,{style:[Qt.fill,Qt.fullWidth,Qt.rowCenter,{maxWidth:150}]},e.connectedState===ConnectionState.CONNECTED?r.a.createElement(St.a,{style:gn(gn({},Sn.circle),{},{backgroundColor:"green",justifyContent:"center",alignItems:"center"})},r.a.createElement(ia.a,null,"Device is"),r.a.createElement(ia.a,null,"connected")):r.a.createElement(St.a,{style:gn(gn({},Sn.circle),{},{backgroundColor:"red",justifyContent:"center",alignItems:"center"})},r.a.createElement(ia.a,null,"No Device"),r.a.createElement(ia.a,null,"connected"))))):r.a.createElement(r.a.Fragment,null)},Dn=function(e){if("ios"===te.a.OS||"android"===te.a.OS){var t=Object(i.c)(),a=e.DeviceData;return r.a.createElement(St.a,{style:{flexDirection:"row",justifyContent:"space-between",borderWidth:1,borderColor:"#000",borderRadius:25,paddingHorizontal:15,paddingVertical:10,marginBottom:10}},r.a.createElement(St.a,{style:(hn.textContainer,{paddingTop:10})},a.tagid?r.a.createElement(St.a,{style:{marginBottom:5}},r.a.createElement(ia.a,null,"TAG Id:"),r.a.createElement(ia.a,null,a.tagid)):r.a.createElement(r.a.Fragment,null),a.FatLayers&&a.FatLayers>0?r.a.createElement(St.a,{style:{marginBottom:5}},r.a.createElement(ia.a,null,"Layers received: ",a.FatLayers),r.a.createElement(ia.a,null,"Layer 1: ",a.FatL1),r.a.createElement(ia.a,null,"Layer 2: ",a.FatL2),r.a.createElement(ia.a,null,"Layer 3: ",a.FatL3)):r.a.createElement(r.a.Fragment,null)),a.tagid?r.a.createElement(St.a,{style:{flexDirection:"row",justifyContent:"space-between"}},known?r.a.createElement(fa,{buttonStyle:{minWidth:0},Text:"Open data",onPress:function(){t(B.setCurrentData({pigId:known,type:oe.PIGS})),z.navigate("DataDisplay")}}):r.a.createElement(r.a.Fragment,null),r.a.createElement(fa,{buttonStyle:{minWidth:0},Text:"Save Tag",onPress:function(){}})):r.a.createElement(r.a.Fragment,null))}return r.a.createElement(r.a.Fragment,null)},Sn=Lt.a.create({circle:{width:125,height:125,borderRadius:62.5,marginTop:Yt.tiny,marginLeft:Yt.tiny}});function Pn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var On=function(e){Tt()(a,e);var t=Pn(a);function a(e){var n;Ct()(this,a);var r=(n=t.call(this,e)).setData(e),i=r.Sections,s=r.Weighings,o=r.Mid;return n.state={Mid:o,Sections:i,Weighings:s},n}return wt()(a,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,a={};t&&t.sections&&(a=de(e.firebase.localDataStore.sections));var n=0,r={};if(t&&t.weighings)for(var i in r=t.weighings,t.weighings)if(t.weighings[i]&&Object.keys(t.weighings[i]).length>0){var s=t.weighings[i][Object.keys(t.weighings[i])[0]].weight;s&&(n>0?n=(n+s)/2:n+=s)}return{Sections:a,Weighings:r,Mid:n}}},{key:"getData",value:function(){this.props.setFirebaseError(null);var e=this.props.firebase.localDataStore;e.sections||(e.sections={}),e.pens||(e.pens={}),e.weights||(e.weights={}),e.batchs||(e.batchs={}),e.graphs||(e.graphs={}),this.props.getSections(Object.keys(e.userData.farms)[0],e.sections.update_time),this.props.getPens(Object.keys(e.userData.farms)[0],e.pens.update_time),this.props.getWeights(Object.keys(e.userData.farms)[0],e.weights.update_time),this.props.getBatch(Object.keys(e.userData.farms)[0],e.batchs.update_time),this.props.getCurve(Object.keys(e.userData.farms)[0],e.graphs.update_time)}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&(this.props.firebase.localDataStore.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(de(this.props.firebase.localDataStore.sections))||this.props.firebase.localDataStore.weighings&&JSON.stringify(this.state.Weighings)!==JSON.stringify(de(this.props.firebase.localDataStore.weighings))))){var a=this.setData(this.props),n=a.Sections,r=a.Mid;this.setState({Mid:r,Sections:n})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.firebaseUser,n=this.props.firebase.firebaseErrorMessage,i=this.props.firebase.localDataStore;return r.a.createElement(St.a,{style:[Qt.mainContainer]},r.a.createElement(St.a,{style:[Qt.fullSize,Qt.fill]},n?r.a.createElement(ia.a,{style:ea.error},n):r.a.createElement(r.a.Fragment,null),a&&this.state.Sections?r.a.createElement(Pa.a,{style:[Yt.verticalMargin,{paddingRight:5}]},r.a.createElement(dn.b,{itemDimension:70,spacing:10,sections:Object.keys(this.state.Sections).filter((function(e){return"update_time"!==e})).map((function(t){var a=de(e.state.Sections[t].pens);return{title:t,data:Object.keys(a)}})),renderSectionHeader:function(e){var t=e.section;return r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth,{marginBottom:0}]},r.a.createElement(fa,{Text:t.title,buttonStyle:{backgroundColor:Vt},onPress:function(){}}))},renderItem:function(t){var a=t.item,n=Ut,s=null;if(i.weighings&&i.weighings[a]){var o=null;for(var c in i.weighings[a]){var l=i.weighings[a][c];l&&(!o||o.time<l.time)&&(o=l)}if(o){var u=o.weight;if(i.pens&&i.pens[a]){var f=i.pens[a];f.datas&&f.datas.count&&(u/=f.datas.count)}if(u&&!isNaN(u)){var p=null;for(var h in i.batchs){var d=i.batchs[h];d.hasOwnProperty("pens")&&null!=d.pens[a]&&(p=i.batchs[h])}if(p){var m=p;if(m&&m.time&&m.datas&&i.graphs&&i.graphs[m.gcurve]){var g=i.graphs[m.gcurve],b=Object.keys(g.data),y=o.time;if(y>m.time&&(!m.state||"Closed"!==m.state)){var E=m.time,v=m.time,D=0;for(D=0;D<g.data.length-1;D++){var S=new Date(E);switch(g.periode){case"Days":S=new Date(S.setDate(S.getDate()+1));break;case"Month":S=new Date(S.setMonth(S.getMonth()+1));break;case"Weeks":default:S=new Date(S.setDate(S.getDate()+7))}if((v=S.getTime())>=y)break;E=v}var P=me([E,v],[g.data[b[D]],g.data[D+1]],(new Date).getTime(),u,y),O=P.ExValue,C=P.VirData,k=2,w=5;m.datas.devianceMin&&(k=m.datas.devianceMin),m.datas.devianceMax&&(w=m.datas.devianceMax),n=O&&C<O&&C<O-O/100*k?zt:O&&C>O&&C>O+O/100*w?_t:Ht,s=Math.round(100*C)/100}}}}}}return r.a.createElement(oa.a,{style:[Qt.borderContainer,{width:70,height:70,alignItems:"center",justifyContent:"center",backgroundColor:n}],onPress:function(){e.props.setCurrentData(a),z.navigate("DataDisplay")}},r.a.createElement(ia.a,null,a),s?r.a.createElement(ia.a,null,s+" kg"):r.a.createElement(r.a.Fragment,null))}})):r.a.createElement(St.a,{style:[Qt.fillRowCenter,Qt.center,Qt.logoContainer]},r.a.createElement(Rt.a,{style:Qt.fullSize,source:Xt.Hexa_icon,resizeMode:"contain"}))),t&&r.a.createElement(Na.a,{style:Qt.loadingContainer,size:"large"}))}}]),a}(n.Component),Cn=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(B.setFirebaseError(t))},getSections:function(t,a){return e(B.actionStarting(ce.FETCH,oe.SECTIONS,{FarmId:t,DataTime:a}))},getPens:function(t,a){return e(B.actionStarting(ce.FETCH,oe.PENS,{FarmId:t,DataTime:a}))},getWeights:function(t,a){return e(B.actionStarting(ce.FETCH,oe.WEIGHING,{FarmId:t,limitTo:1,DataTime:a}))},getBatch:function(t,a){return e(B.actionStarting(ce.FETCH,oe.BATCHS,{FarmId:t,DataTime:a}))},getCurve:function(t,a){return e(B.actionStarting(ce.FETCH,oe.GRAPH,{FarmId:t,GraphId:"",DataTime:a}))},setCurrentData:function(t){return e(B.setCurrentData({type:oe.PENS,penId:t}))}}}))(On),kn=(a(623),a(374)),wn=a(65);function jn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var Tn=function(e){Tt()(a,e);var t=jn(a);function a(e){var n;Ct()(this,a),(n=t.call(this,e)).onChange=function(e){var t=e.window,a=e.screen;n.setState({dimensions:{window:t,screen:a}})},n.onMultiChange=function(e){var t=Object(wn.xorBy)(n.state.selectedPens,[e],"id");n.setState({selectedPens:t})};var r=n.setData(e),i=r.BatchList,s=r.freePens;return n.state={BatchList:i,Display:0,BatchName:"",ShowPicker:!1,StartD:(new Date).getTime(),Curve:"",DevianceMin:"",DevianceMax:"",freePens:s,avaiblePens:s,selectedPens:[]},n}return wt()(a,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=t.batchs,n=[];return a&&t.sections&&Object.keys(t.sections).forEach((function(e){if(t.sections[e].pens){Object.keys(t.sections[e].pens).filter((function(e){return"__jsogObjectId"!==e&&"update_time"!==e})).forEach((function(t){var r=!0;if(Object.keys(a).forEach((function(e){a[e].state&&"Closed"===a[e].state||a[e].pens&&a[e].pens[t]&&(r=!1)})),r){var i={item:t,id:e+"_"+t};n.push(i)}}))}})),{BatchList:a,freePens:n}}},{key:"getData",value:function(){this.props.setFirebaseError(null);var e=this.props.firebase.localDataStore;e.sections||(e.sections={}),e.pens||(e.pens={}),this.props.getBatch(Object.keys(e.userData.farms)[0]),this.props.getCurve(Object.keys(e.userData.farms)[0]),this.props.getSections(Object.keys(e.userData.farms)[0],e.sections.update_time),this.props.getPens(Object.keys(e.userData.farms)[0],e.pens.update_time)}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&(this.props.firebase.localDataStore.batchs&&JSON.stringify(this.state.BatchList)!==JSON.stringify(this.props.firebase.localDataStore.batchs)||this.props.firebase.localDataStore.pens&&JSON.stringify(this.state.pens)!==JSON.stringify(this.props.firebase.localDataStore.pens)))){var a=this.setData(this.props),n=a.BatchList,r=a.freePens;this.setState({freePens:r,BatchList:n})}}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=(this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage),n=this.props.firebase.localDataStore;return r.a.createElement(Pa.a,{style:[Qt.fullSize,Qt.fill]},r.a.createElement(St.a,{style:[Qt.mainContainer]},r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fill]},a?r.a.createElement(ia.a,{style:ea.error},a):r.a.createElement(r.a.Fragment,null),0===this.state.Display?r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,{marginHorizontal:0,paddingHorizontal:-20}]},this.state.BatchList?r.a.createElement(St.a,{style:[Qt.fill,Qt.fullWidth,Yt.smallHorizontalPadding,Yt.smallVerticalPadding,{maxWidth:800,marginTop:10}]},r.a.createElement(sn.a,{data:Object.keys(this.state.BatchList).filter((function(e){return"__jsogObjectId"!==e&&"update_time"!==e})),renderItem:function(t){var a=t.item,n=(t.i,a);return e.state.BatchList[a]&&e.state.BatchList[a].state&&"Closed"===e.state.BatchList[a].state&&(n+="  Closed"),r.a.createElement(fa,{Text:n,onPress:function(){var t="default";e.state.BatchList[a]&&e.state.BatchList[a].gcurve&&(t=e.state.BatchList[a].gcurve),e.props.setCurrentData(a,t),z.navigate("DataPlotter")}})},keyExtractor:function(e,t){return t.toString()}})):r.a.createElement(r.a.Fragment,null),r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.borderContainer,Qt.midWidth]},r.a.createElement(fa,{Text:"New Batch",onPress:function(){e.setState({Display:1,freePens:e.state.freePens,avaiblePens:e.state.freePens,selectedPens:[]})}}),this.state.BatchList?r.a.createElement(fa,{Text:"Edit or Close Batch",onPress:function(){var t=Object.keys(e.state.BatchList).filter((function(t){return"__jsogObjectId"!==t&&"update_time"!==t&&(!e.state.BatchList[t].state||"Closed"!==e.state.BatchList[t].state)}))[0],a=e.state.BatchList[t],r=[],i=de(a.pens);Object.keys(i).forEach((function(e){if(n.pens&&n.pens[e]){var t=n.pens[e],a={};a.item=e,a.id=t.section+"_"+e,r.push(a)}})),e.setState({Display:2,BatchName:t,StartD:a.time,Curve:a.gcurve,DevianceMin:a.datas.devianceMin,DevianceMax:a.datas.devianceMax,avaiblePens:e.state.freePens.concat(r),selectedPens:r})}}):r.a.createElement(r.a.Fragment,null))):r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,{marginHorizontal:0,paddingHorizontal:-20}]},1===this.state.Display?r.a.createElement(da.b,{label:"BatchName",containerStyle:[{borderWidth:1,marginTop:10}],style:[ea.input],onChangeText:function(t){e.setState({BatchName:t})},value:this.state.BatchName}):r.a.createElement(St.a,{style:[Qt.borderContainer,Qt.fullWidth,{height:60,borderRadius:0,alignItems:"center"}]},r.a.createElement(ja.a,{mode:"dropdown",selectedValue:this.state.BatchName,style:[Qt.fullWidth,{height:50,justifyContent:"flex-end"}],onValueChange:function(t,a){if(e.state.BatchList&&e.state.BatchList[t]){var r=e.state.BatchList[t],i=[],s=de(r.pens);Object.keys(s).forEach((function(e){if(n.pens&&n.pens[e]){var t=n.pens[e],a={};a.item=e,a.id=t.section+"_"+e,i.push(a)}})),e.setState({BatchName:t,StartD:r.time,Curve:r.gcurve,DevianceMin:r.datas.devianceMin,DevianceMax:r.datas.devianceMax,avaiblePens:e.state.freePens.concat(i),selectedPens:i})}}},Object.keys(this.state.BatchList).filter((function(t){return"__jsogObjectId"!==t&&"update_time"!==t&&(!e.state.BatchList[t].state||"Closed"!==e.state.BatchList[t].state)})).map((function(e,t){return r.a.createElement(ja.a.Item,{label:e,value:e,key:t})})))),r.a.createElement(St.a,{style:[Qt.fullWidth,Qt.row,{zIndex:999}]},r.a.createElement(St.a,{style:[Qt.halvWidth,{borderWidth:1,height:75,marginTop:10,paddingHorizontal:5,paddingTop:0,borderRadius:0,alignItems:"center"}]},r.a.createElement(St.a,{style:[Qt.fullWidth,{alignItems:"flex-start"}]},r.a.createElement(ia.a,{style:[ea.text,{marginHorizontal:5,marginTop:2,color:Gt,fontSize:15,fontWeight:"bold"}]},"Start date:")),r.a.createElement(St.a,{style:[Qt.fullWidth,{alignItems:"flex-start"}]},r.a.createElement(Aa,{FullYear:this.state.StartD,onValueChange:function(t){console.log(t.getTime()),e.setState({StartD:t.getTime()})}}))),r.a.createElement(St.a,{style:[Qt.halvWidth,{borderWidth:1,height:75,marginTop:10,paddingHorizontal:5,paddingTop:0,borderRadius:0,alignItems:"center",zIndex:1}]},r.a.createElement(St.a,{style:[Qt.fullWidth,{alignItems:"flex-start"}]},r.a.createElement(ia.a,{style:[ea.text,{marginHorizontal:5,marginTop:2,color:Gt,fontSize:15,fontWeight:"bold"}]},"Growth curve:")),r.a.createElement(St.a,{style:[Qt.fullWidth,{alignItems:"center"}]},r.a.createElement(ja.a,{mode:"dropdown",selectedValue:this.state.Curve,style:[Qt.fullWidth,{height:30}],onValueChange:function(t,a){e.setState({Curve:t})}},Object.keys(n.graphs).filter((function(e){return"__jsogObjectId"!==e&&"update_time"!==e})).map((function(e,t){return r.a.createElement(ja.a.Item,{label:e,value:e,key:t})})))))),r.a.createElement(St.a,{style:[Qt.fullWidth,Qt.row]},r.a.createElement(da.b,{label:"Deviance Min alert procentage",containerStyle:[Qt.halvWidth,{borderWidth:1,marginTop:10}],style:[ea.input],onChangeText:function(t){isNaN(t)&&!t.endsWith(".")||e.setState({DevianceMin:t})},value:this.state.DevianceMin}),r.a.createElement(da.b,{label:"Deviance Max alert procentage",containerStyle:[Qt.halvWidth,{borderWidth:1,marginTop:10}],style:[ea.input],onChangeText:function(t){isNaN(t)&&!t.endsWith(".")||e.setState({DevianceMax:t})},value:this.state.DevianceMax})),r.a.createElement(St.a,{style:[Qt.fullWidth,{borderWidth:1,marginTop:10,paddingHorizontal:10,paddingTop:5}]},r.a.createElement(kn.a,{label:"Pens in Batch..",labelStyle:{color:Gt,fontSize:15,fontWeight:"bold"},optionsLabelStyle:{color:"black",fontSize:12,fontWeight:"bold"},options:this.state.avaiblePens,selectedValues:this.state.selectedPens,onMultiSelect:this.onMultiChange,onTapClose:this.onMultiChange,isMulti:!0})),r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.borderContainer,Qt.midWidth,{marginTop:10}]},2===this.state.Display?r.a.createElement(fa,{Text:"Close Batch",onPress:function(){var t={name:e.state.BatchName,state:"Closed"};e.props.updateBatch(Object.keys(n.userData.farms)[0],t)}}):r.a.createElement(r.a.Fragment,null),r.a.createElement(fa,{Text:"Save",onPress:function(){var t,a=!0;if(""!==e.state.BatchName){var r=e.state.BatchName;Object.keys(e.state.BatchList).includes(r)?1===e.state.Display&&(a=!1,e.props.setFirebaseError("BatchName error, batch allready exists")):2===e.state.Display&&(a=!1,e.props.setFirebaseError("BatchName error, batch does not exists"))}else a=!1,e.props.setFirebaseError("BatchName error");(""!==e.state.StartD||(a=!1,e.props.setFirebaseError("Startdate error")),""!==e.state.DevianceMin)?((t=e.state.DevianceMin).length>3||isNaN(t)||t>100)&&(a=!1):(a=!1,e.props.setFirebaseError("DevianceMin setting error"));""!==e.state.DevianceMax?((t=e.state.DevianceMax).length>3||isNaN(t)||t>100)&&(a=!1):(a=!1,e.props.setFirebaseError("DevianceMax setting error"));var i={};if(e.state.selectedPens&&e.state.selectedPens.length>0&&e.state.selectedPens.forEach((function(e){i[e.item]=!0})),Object.keys(i).length!==e.state.selectedPens.length&&(a=!1,e.props.setFirebaseError("An error occurred during Pen assigning (please update the page)")),a){var s={name:e.state.BatchName,gcurve:e.state.Curve,pens:i,time:e.state.StartD,datas:{devianceMin:e.state.DevianceMin,devianceMax:e.state.DevianceMax}};1===e.state.Display?e.props.setBatch(Object.keys(n.userData.farms)[0],s):2===e.state.Display&&e.props.updateBatch(Object.keys(n.userData.farms)[0],s),e.setState({Display:0}),e.props.getPens(Object.keys(n.userData.farms)[0],n.pens.update_time)}}})))),t&&r.a.createElement(Na.a,{style:Qt.loadingContainer,size:"large"})))}}]),a}(n.Component),In=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(B.setFirebaseError(t))},getCurve:function(t){return e(B.actionStarting(ce.FETCH,oe.GRAPH,{FarmId:t,GraphId:""}))},getSections:function(t,a){return e(B.actionStarting(ce.FETCH,oe.SECTIONS,{FarmId:t,DataTime:a}))},getPens:function(t,a){return e(B.actionStarting(ce.FETCH,oe.PENS,{FarmId:t,DataTime:a}))},getBatch:function(t){return e(B.actionStarting(ce.FETCH,oe.BATCHS,{FarmId:t}))},setBatch:function(t,a){return e(B.actionStarting(ce.CREATE,oe.BATCHS,{FarmId:t,Batch:a}))},updateBatch:function(t,a){return e(B.actionStarting(ce.UPDATE,oe.BATCHS,{FarmId:t,BatchId:a.name,Batch:a}))},setCurrentData:function(t,a){return e(B.setCurrentData({type:oe.PENS,batchId:t,curveId:a}))}}}))(Tn),An=a(31),xn=a.n(An);function Fn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var Rn=function(e){Tt()(a,e);var t=Fn(a);function a(e){var n;Ct()(this,a);var r=(n=t.call(this,e)).setData(e).CurveList;new Date;return n.state={CurveList:r,Display:0,CurveName:"",DataPoints:[],Periode:"Weeks"},n}return wt()(a,[{key:"setData",value:function(e){return{CurveList:e.firebase.localDataStore.graphs}}},{key:"getData",value:function(){this.props.setFirebaseError(null);var e=this.props.firebase.localDataStore;this.props.getCurve(Object.keys(e.userData.farms)[0])}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&this.props.firebase.localDataStore.graphs&&JSON.stringify(this.state.CurveList)!==JSON.stringify(this.props.firebase.localDataStore.graphs))){var a=this.setData(this.props).CurveList;this.setState({CurveList:a})}}},{key:"render",value:function(){for(var e=this,t=this.props.firebase.firebaseIsLoading,a=(this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage),n=this.props.firebase.localDataStore,i=0,s=0;s<this.state.DataPoints.length;s++){var o=this.state.DataPoints[s].value;if(""!==o&&null!==o||(o=0),o=parseFloat(o),0!==s)i=(i+(o-this.state.DataPoints[s-1].value))/2}return i=i.toFixed(3),r.a.createElement(St.a,{style:[Qt.mainContainer]},r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fillColMain]},a?r.a.createElement(ia.a,{style:ea.error},a):r.a.createElement(r.a.Fragment,null),0===this.state.Display?r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,{marginHorizontal:0,paddingHorizontal:-20}]},this.state.CurveList?r.a.createElement(St.a,{style:[Qt.fill,Qt.fullWidth,Yt.smallHorizontalPadding,Yt.smallVerticalPadding,{maxWidth:800,marginTop:10}]},r.a.createElement(sn.a,{data:Object.keys(this.state.CurveList).filter((function(e){return"__jsogObjectId"!==e&&"update_time"!==e})),renderItem:function(t){var a=t.item;return r.a.createElement(fa,{Text:a,onPress:function(){var t=e.state.CurveList[a],n=[];t.data.forEach((function(e){n.push({value:e})})),e.setState({Display:2,CurveName:a,DataPoints:n,Periode:t.periode})}})}})):r.a.createElement(r.a.Fragment,null),r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.borderContainer,Qt.midWidth]},r.a.createElement(fa,{Text:"New Curve",onPress:function(){e.setState({Display:1,DataPoints:[{value:"0"}]})}}))):r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,{marginHorizontal:0,paddingHorizontal:-20}]},1===this.state.Display?r.a.createElement(da.b,{label:"CurveName",containerStyle:[{borderWidth:1,marginTop:10}],style:[ea.input],onChangeText:function(t){e.setState({CurveName:t})},value:this.state.CurveName}):r.a.createElement(ha,{Text:this.state.CurveName}),r.a.createElement(St.a,{style:[Qt.borderContainer,Qt.fill,Qt.fullWidth]},r.a.createElement(Sa,{texts:["Data Points"],datas:["Periode: "+this.state.Periode]}),r.a.createElement(Sa,{texts:["Average Growth: "+i],datas:[]}),r.a.createElement(sn.a,{data:this.state.DataPoints,renderItem:function(t){var a=t.item,n=t.index;return r.a.createElement(da.b,{type:"number",step:"0.1",label:"Point index: "+(n+1),containerStyle:[Qt.fullWidth,{borderWidth:1,marginTop:10}],style:[ea.input],onChange:function(t){var a=t.target.value;if(!isNaN(a)||a.endsWith(".")&&a.split(".").length<=2){var r=xn()(e.state.DataPoints);r[n].value=a,e.setState({DataPoints:r})}},value:""+a.value})},numColumns:1}),r.a.createElement(St.a,{style:{height:20}}),r.a.createElement(fa,{Text:"New Point",onPress:function(){var t=xn()(e.state.DataPoints),a=e.state.DataPoints&&e.state.DataPoints.length>=1?e.state.DataPoints[e.state.DataPoints.length-1].value:"0";t.push({value:a}),e.setState({DataPoints:t})}})),r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.borderContainer,Qt.midWidth,{marginTop:10}]},r.a.createElement(fa,{Text:"Save",onPress:function(){var t=!0;if(""!==e.state.CurveName){var a=e.state.CurveName;Object.keys(e.state.CurveList).includes(a)?1===e.state.Display&&(t=!1):2===e.state.Display&&(t=!1)}else t=!1;if(t){var r={name:e.state.CurveName,periode:e.state.Periode},i=[],s=0;e.state.DataPoints.forEach((function(e){i[s]=parseFloat(e.value),s++})),r.data=i;var o=Object.keys(n.userData.farms)[0];e.props.updateCurve(o,r),e.setState({Display:0})}}})))),t&&r.a.createElement(Na.a,{style:Qt.loadingContainer,size:"large"}))}}]),a}(n.Component),Ln=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(B.setFirebaseError(t))},getCurve:function(t){return e(B.actionStarting(ce.FETCH,oe.GRAPH,{FarmId:t,GraphId:""}))},updateCurve:function(t,a){return e(B.actionStarting(ce.UPDATE,oe.GRAPH,{FarmId:t,Graph:a}))}}}))(Rn);function Mn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var Nn=function(e){Tt()(a,e);var t=Mn(a);function a(e){var n;return Ct()(this,a),(n=t.call(this,e)).state={},n}return wt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null),this.props.setCurrentData({})}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=(this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage),a=this.props.firebase.localDataStore;return r.a.createElement(St.a,{style:[Qt.mainContainer]},r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fill]},t?r.a.createElement(ia.a,{style:ea.error},t):r.a.createElement(r.a.Fragment,null),r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth,Yt.bottomMargin,{marginBottom:60}]}),r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.halvWidth,Qt.fillColMain]},r.a.createElement(Oa,{farm:Object.keys(a.userData.farms)[0],section:!0}))),e&&r.a.createElement(Na.a,{style:Qt.loadingContainer,size:"large"}))}}]),a}(n.Component),Un=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(B.setFirebaseError(t))},setCurrentData:function(t){return e(B.setCurrentData({type:oe.PENS,action:t}))}}}))(Nn);function Wn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Bn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Hn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var zn=function(e){Tt()(a,e);var t=Hn(a);function a(e){var n;Ct()(this,a);var r=(n=t.call(this,e)).setData(n.props),i=r.Sections,s=r.Section,o=r.Pens,c=r.Pen;return n.state={Sections:i,Section:s,Pens:o,Pen:c,weight:"",date:(new Date).getTime()},n}return wt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null);var e=this.props.firebase.localDataStore;e.sections||(e.sections={}),this.props.getSections(Object.keys(e.userData.farms)[0],e.sections.update_time)}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=!1;t&&t.sections&&t.sections!==a&&(a=de(t.sections));var n=e.firebase.currentData,r=a?Object.keys(a)[0]:"";n&&n.data&&n.data.section&&a[n.data.section]&&n.data.section!=r&&(r=n.data.section);var i=a?de(a[r].pens):{},s=a?Object.keys(i)[0]:"";return n&&n.penId&&i[n.penId]&&n.penId!=s&&(s=n.penId),a||(a={}),{Sections:a,Section:r,Pens:i,Pen:s}}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&this.props.firebase.localDataStore.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(de(this.props.firebase.localDataStore.sections)))){var a=this.setData(this.props),n=a.Sections,r=a.Section,i=a.Pens,s=a.Pen;this.setState({Sections:n,Section:r,Pens:i,Pen:s,weight:""})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.firebaseUser,n=this.props.firebase.firebaseErrorMessage,i=this.props.firebase.localDataStore;return r.a.createElement(St.a,{style:[Qt.mainContainer]},r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fill]},n?r.a.createElement(ia.a,{style:ea.error},n):r.a.createElement(r.a.Fragment,null),a?r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fill]},r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth,Yt.bottomMargin]},r.a.createElement(fa,{Text:"Weighing",buttonStyle:{backgroundColor:Vt},onPress:function(){}})),r.a.createElement(St.a,{style:[Qt.borderContainer,Qt.midWidth,{marginBottom:20}]},r.a.createElement(ja.a,{mode:"dropdown",selectedValue:this.state.Section,style:{height:50,width:150},onValueChange:function(t,a){if(e.state.Sections[t]){var n=de(e.state.Sections[t].pens);e.setState({Section:t,Pens:n,Pen:Object.keys(n)[0]})}}},Object.keys(this.state.Sections).map((function(e,t){return r.a.createElement(ja.a.Item,{label:e,value:e,key:t})}))),r.a.createElement(ja.a,{mode:"dropdown",selectedValue:this.state.Pen,style:{height:50,width:150},onValueChange:function(t,a){e.setState({Pen:t})}},Object.keys(this.state.Pens).map((function(e,t){return r.a.createElement(ja.a.Item,{label:e,value:e,key:t})}))),r.a.createElement(St.a,{style:[Qt.fullWidth,{borderWidth:0,height:65,marginTop:10,paddingHorizontal:5,paddingTop:0,borderRadius:0,alignItems:"center"}]},r.a.createElement(St.a,{style:[Qt.fullWidth,{alignItems:"flex-start"}]},r.a.createElement(ia.a,{style:[ea.text,{marginHorizontal:5,marginTop:2,color:Gt,fontSize:15,fontWeight:"bold"}]},"Weight date:")),r.a.createElement(St.a,{style:[Qt.fullWidth,{alignItems:"flex-start"}]},r.a.createElement(Aa,{FullYear:this.state.date,onValueChange:function(t){e.setState({date:t})}}))),r.a.createElement(da.b,{label:"Weight",style:Bn({},hn.input),onChangeText:function(t){e.setState({weight:t})},value:this.state.weight})),r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth]},r.a.createElement(fa,{Text:"Submit",onPress:function(){e.state.Section?e.state.Pen?isNaN(e.state.weight)||""===e.state.weight?e.props.setFirebaseError("Weight have to be a number"):(e.props.setFirebaseError(null),e.props.newWeight(Object.keys(i.userData.farms)[0],e.state.Pen,parseInt(e.state.weight),e.state.date),e.setState({weight:"",date:(new Date).getTime()})):e.props.setFirebaseError("A pen is needed"):e.props.setFirebaseError("A section is needed")}}))):r.a.createElement(r.a.Fragment,null)),t&&r.a.createElement(Na.a,{style:Qt.loadingContainer,size:"large"}))}}]),a}(n.Component),_n=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{getSections:function(t,a){return e(B.actionStarting(ce.FETCH,oe.SECTIONS,{FarmId:t,DataTime:a}))},setFirebaseError:function(t){return e(B.setFirebaseError(t))},newWeight:function(t,a,n,r){return e(B.actionStarting(ce.CREATE,oe.WEIGHING,{FarmId:t,PenId:a,Weight:n,Date:r}))}}}))(zn);function Gn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Vn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Gn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Jn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var Yn=function(e){Tt()(a,e);var t=Jn(a);function a(e){var n;Ct()(this,a),n=t.call(this,e),e.firebase||console.log("??");var r=n.setData(e),i=r.Sections,s=r.Section,o=r.Pens,c=r.Pen;return n.state={Sections:i,Section:s,Pens:o,Pen:c,NewSection:!1},n}return wt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null);var e=this.props.firebase.localDataStore;e.sections||(e.sections={}),this.props.getSections(Object.keys(e.userData.farms)[0],e.sections.update_time)}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=!1;t&&t.sections&&t.sections!==a&&(a=de(t.sections));var n=e.firebase.currentData,r=a?Object.keys(a)[0]:"";n&&n.data&&n.data.section&&a[n.data.section]&&n.data.section!=r&&(r=n.data.section);var i=a?de(a[r].pens):{},s=a?Object.keys(i)[0]:"";return n&&n.dataId&&i[n.dataId]&&n.dataId!=s&&(s=n.dataId),a||(a={}),{Sections:a,Section:r,Pens:i,Pen:s}}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase)){if(this.props.firebase.localDataStore&&this.props.firebase.localDataStore.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(de(this.props.firebase.localDataStore.sections))){var a=this.setData(this.props),n=a.Sections,r=a.Section,i=a.Pens,s=a.Pen;this.setState({Sections:n,Section:r,Pens:i,Pen:s})}this.props.firebase.currentData&&this.props.firebase.currentData!=e.firebase.currentData&&this.forceUpdate()}}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=(this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage),a=this.props.firebase.localDataStore,n=this.props.firebase.currentData,i=r.a.createElement(St.a,null);switch(n.type){case oe.PENS:i=Xn(this,n,a);break;case oe.PIGS:i=qn(this,n,a)}return r.a.createElement(St.a,{style:[Qt.mainContainer]},r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fill]},t?r.a.createElement(ia.a,{style:ea.error},t):r.a.createElement(r.a.Fragment,null),i),e&&r.a.createElement(Na.a,{style:Qt.loadingContainer,size:"large"}))}}]),a}(n.Component),Xn=function(e,t,a){var n=e.state.Sections;return t.action===ce.CREATE&&(n["New Section"]={}),r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fill]},r.a.createElement(Zn,{CurrentAction:t.action}),r.a.createElement(St.a,{style:[Qt.borderContainer,Qt.midWidth,{marginBottom:20}]},r.a.createElement(Qn,{Control:e,CurrentData:t,localDataStore:a}),t.action===ce.CREATE?r.a.createElement(da.b,{label:"Pen name",style:Vn({},hn.input),onChangeText:function(t){e.setState({Pen:t})},value:e.state.Pen}):r.a.createElement(r.a.Fragment,null),t.action===ce.DELETE?r.a.createElement(ja.a,{mode:"dropdown",selectedValue:e.state.Pen,style:{height:50,width:150},onValueChange:function(t,a){e.setState({Pen:t})}},Object.keys(e.state.Pens).map((function(e,t){return r.a.createElement(ja.a.Item,{label:e,value:e,key:t})}))):r.a.createElement(r.a.Fragment,null)),t.action===ce.CREATE||t.action===ce.DELETE?r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth]},r.a.createElement(fa,{Text:"Submit",onPress:function(){if(e.state.Section&&""!==e.state.Section)if(e.state.Pen&&""!==e.state.Pen)if(isNaN(e.state.Section)&&isNaN(e.state.Section[0]))if(isNaN(e.state.Pen)&&isNaN(e.state.Pen[0])){var n=!1;Object.keys(e.state.Sections).map((function(t,a){e.state.Sections[t].pens&&(Object.keys(e.state.Sections[t].pens).filter((function(t){return t===e.state.Pen})).length&&(n=!0))})),n&&t.action===ce.CREATE?e.props.setFirebaseError("Given pen name already exists"):n||t.action!==ce.DELETE?(e.props.setFirebaseError(null),e.props.penAction(t.action,Object.keys(a.userData.farms)[0],e.state.Section,e.state.Pen),z.navigate("UserOperations")):e.props.setFirebaseError("Cannot remove non-existing pen")}else e.props.setFirebaseError("Pen name cannot be or start with a number");else e.props.setFirebaseError("Section name cannot be or start with a number");else e.props.setFirebaseError("A pen name is needed");else e.props.setFirebaseError("A section is needed")}})):r.a.createElement(r.a.Fragment,null))},Zn=function(e){switch(e.CurrentAction){case ce.CREATE:return r.a.createElement(ha,{Text:"Add Pen"});case ce.DELETE:return r.a.createElement(ha,{Text:"Remove Pen"});default:return r.a.createElement(r.a.Fragment,null)}},qn=function(e,t,a){e.state.Sections;return t.action,r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fill]},r.a.createElement(ha,{Text:"Add Pig: "+t.pigtag}),r.a.createElement(St.a,{style:[Qt.borderContainer,Qt.midWidth,{marginBottom:20}]},r.a.createElement(Qn,{Control:e,CurrentData:t,localDataStore:a}),e.state.NewSection?r.a.createElement(da.b,{label:"Pen name",style:Vn({},hn.input),onChangeText:function(t){e.setState({Pen:t})},value:e.state.Pen}):r.a.createElement(ja.a,{mode:"dropdown",selectedValue:e.state.Pen,style:{height:50,width:150},onValueChange:function(t,a){e.setState({Pen:t})}},Object.keys(e.state.Pens).map((function(e,t){return r.a.createElement(ja.a.Item,{label:e,value:e,key:t})}))),t.action===ce.CREATE?r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth]},r.a.createElement(fa,{Text:"Submit",onPress:function(){if(e.state.Section&&""!==e.state.Section)if(e.state.Pen&&""!==e.state.Pen)if(isNaN(e.state.Section)&&isNaN(e.state.Section[0]))if(isNaN(e.state.Pen)&&isNaN(e.state.Pen[0])){var n=!1;Object.keys(e.state.Sections).map((function(t,a){e.state.Sections[t].pens&&(Object.keys(e.state.Sections[t].pens).filter((function(t){return t===e.state.Pen})).length&&(n=!0))})),n&&t.action===ce.CREATE&&e.state.NewSection?e.props.setFirebaseError("Given pen name already exists"):(e.props.setFirebaseError(null),e.props.pigAction(t.action,Object.keys(a.userData.farms)[0],t.pigtag,e.state.Pen),z.navigate("UserPigs"))}else e.props.setFirebaseError("Pen name cannot be or start with a number");else e.props.setFirebaseError("Section name cannot be or start with a number");else e.props.setFirebaseError("A pen name is needed");else e.props.setFirebaseError("A section is needed")}})):r.a.createElement(r.a.Fragment,null)))},Qn=function(e){var t=e.Control,a=e.CurrentData;e.localDataStore;return t.state.NewSection&&a.action===ce.CREATE?r.a.createElement(da.b,{label:"Section Name",style:Vn({},hn.input),onChangeText:function(e){t.setState({Section:e})},value:t.state.Section}):r.a.createElement(ja.a,{mode:"dropdown",selectedValue:t.state.Section,style:{height:50,width:150},onValueChange:function(e,n){var r=e,i=t.state.NewSection,s=t.state.Pens,o=t.state.Pen;"New Section"===e?(i=!0,r="Section_"+Object.keys(t.state.Sections).length):(s=de(t.state.Sections[e].pens),o=a.action===ce.DELETE?Object.keys(s)[Object.keys(s).length-1]:a.type==oe.PIGS?Object.keys(s)[0]:"Pen_"+(Object.keys(s).length+1)),t.setState({Section:r,NewSection:i,Pens:s,Pen:o})}},Object.keys(t.state.Sections).map((function(e,t){return r.a.createElement(ja.a.Item,{label:e,value:e,key:t})})))},Kn=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{getSections:function(t,a){return e(B.actionStarting(ce.FETCH,oe.SECTIONS,{FarmId:t,DataTime:a}))},setFirebaseError:function(t){return e(B.setFirebaseError(t))},penAction:function(t,a,n,r){return e(B.actionStarting(t,oe.PENS,{FarmId:a,SectionId:n,PenId:r}))},pigAction:function(t,a,n,r){return e(B.actionStarting(t,oe.PIGS,{FarmId:a,TagId:n,PenId:r}))}}}))(Yn);function $n(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var er=function(e){Tt()(a,e);var t=$n(a);function a(e){var n;Ct()(this,a),(n=t.call(this,e)).state={currentData:e.currentData};var r=n.setData(e),i=r.CurrentData,s=r.WeighingsList,o=r.Weighings;return n.state={currentData:i,WeighingsList:s,Weighings:o},n}return wt()(a,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=this.state.currentData,n=de(t.pens);n[a.penId]&&(a.data=n[a.penId]);var r=[],i=[],s="android"===te.a.OS||"ios"===te.a.OS;if(t&&t.weighings&&t.weighings[a.penId]){r=t.weighings[a.penId];for(var o=0;o<Object.keys(r).length;o++){var c=Object.keys(r)[o];if(c){var l=r[c];l&&l.time&&i.push(A()({},c,l))}}i=i.sort((function(e,t){return e.time>t.time?1:-1})),s&&(i=i.slice(0,5))}return a.data&&!a.data.datas&&(a.data.datas={}),{CurrentData:a,WeighingsList:r,Weighings:i}}},{key:"getData",value:function(){if(this.props.firebase&&this.props.firebase.localDataStore){var e=this.props.firebase.localDataStore;e.pens||(e.pens={}),this.props.getPens(Object.keys(e.userData.farms)[0],e.pens.update_time),this.props.getWeights(Object.keys(e.userData.farms)[0],this.state.currentData.penId),this.props.getBatch(Object.keys(e.userData.farms)[0],null)}}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore)){var a=this.props.firebase.localDataStore;if(JSON.stringify(e.currentData)!==JSON.stringify(this.state.currentData)||a.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(de(a.sections))||a.weighings&&JSON.stringify(this.state.Weighings)!==JSON.stringify(de(localDataStoree.weighings))){var n=this.setData(this.props),r=n.CurrentData,i=n.WeighingsList,s=n.Weighings;this.setState({currentData:r,WeighingsList:i,Weighings:s})}}}},{key:"render",value:function(){var e=this,t=(this.props.firebase.firebaseIsLoading,this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage,this.props.firebase.localDataStore),a=this.state.currentData;if(a.data){var n=a.data.datas.count?a.data.datas.count:0,i=[];if(this.state.Weighings.length>0){var s=n||1;i=this.state.Weighings[0][Object.keys(this.state.Weighings[0])].weight/s}var o=a.data.datas.batch?a.data.datas.batch:"No Batch",c={},l="",u=i;if(a.data.datas.batch&&t.batchs&&t.batchs[a.data.datas.batch]){var f=(c=t.batchs[a.data.datas.batch]).time;if(l=Math.floor((Date.now()-f)/864e5),a.data.datas.gcurve=c.gcurve,c&&c.time&&c.datas&&t.graphs&&t.graphs[c.gcurve]){var p=t.graphs[c.gcurve],h=Object.keys(p.data),d=this.state.Weighings[0][Object.keys(this.state.Weighings[0])].weight,m=this.state.Weighings[0][Object.keys(this.state.Weighings[0])].time;if(m>c.time&&(!c.state||"Closed"!==c.state)){f=c.time;var g=c.time,b=0;for(b=0;b<p.data.length-1;b++){var y=new Date(f);switch(p.periode){case"Days":y=new Date(y.setDate(y.getDate()+1));break;case"Month":y=new Date(y.setMonth(y.getMonth()+1));break;case"Weeks":default:y=new Date(y.setDate(y.getDate()+7))}if((g=y.getTime())>=m)break;f=g}var E=me([f,g],[p.data[h[b]],p.data[b+1]],(new Date).getTime(),d,m),v=(E.ExValue,E.VirData);u=Math.round(100*v)/100}}}return c.datas||(c.datas={}),c.datas.devianceMin||(c.datas.devianceMin=0),c.datas.devianceMax||(c.datas.devianceMax=0),r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fill]},r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth,Yt.bottomMargin,Qt.rowCenter]},r.a.createElement(St.a,{style:{padding:6,paddingRight:15}},r.a.createElement(da.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){return tr(e,t,a,!1)}})),r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth]},r.a.createElement(fa,{Text:a.penId,buttonStyle:{backgroundColor:Vt},onPress:function(){}})),r.a.createElement(St.a,{style:{padding:6,paddingLeft:15}},r.a.createElement(da.a,{name:"md-arrow-forward",type:"ionicon",size:25,color:"black",onPress:function(){return tr(e,t,a,!0)}}))),r.a.createElement(St.a,{style:[Qt.fullWidth]},r.a.createElement(Sa,{texts:["Pig count","Batch","Age Days","Weight","Growth Cruve","Alarm Max","Alarm Min","Mixtur","Correction","Portion in kg"],onPress:function(e){return function(e,t){switch(e){case 1:switch(t.index){case 0:console.log("test")}}}(1,e)},datas:[n,o,l,u,a.data.datas.gcurve?a.data.datas.gcurve:"default",c.datas.devianceMin+" %",c.datas.devianceMax+" %","-","-","-"]})),r.a.createElement(St.a,{style:{height:20}}),r.a.createElement(St.a,{style:[Qt.fill,Qt.midWidth,{height:250}]},r.a.createElement(Sa,{texts:["Last weighings"],datas:[]}),r.a.createElement(St.a,{style:{height:10}}),r.a.createElement(sn.a,{data:this.state.Weighings,renderItem:function(t){var a=t.item;t.index;if("__jsogObjectId"===a)return r.a.createElement(r.a.Fragment,null);var n=e.state.WeighingsList[Object.keys(a)[0]];return r.a.createElement(Sa,{texts:[ue(n.time)],datas:[n.weight]})},numColumns:1,keyExtractor:function(e,t){return String(t)}})),r.a.createElement(St.a,{style:{height:30}}),r.a.createElement(St.a,{style:[Qt.borderContainer,Qt.midWidth]},r.a.createElement(Oa,{farm:Object.keys(t.userData.farms)[0],penid:a.penId})))}return r.a.createElement(St.a,{style:[Qt.fillRowCenter,Qt.center,Qt.logoContainer]},r.a.createElement(Rt.a,{style:Qt.fullSize,source:Xt.Hexa_icon,resizeMode:"contain"}))}}]),a}(n.Component);function tr(e,t,a,n){var r=t.pens[a.penId].section,i=de(t.sections[r].pens);if(a.type===oe.PENS&&a.data&&i[a.penId]){var s=Object.keys(i).indexOf(a.penId);switch(n){case!0:s+=1;break;case!1:s-=1}s<0?s=Object.keys(i).length-1:s>=Object.keys(i).length&&(s=0),e.props.setCurrentData(Object.keys(i)[s]),z.replace("DataDisplay")}}var ar=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{getPens:function(t,a){return e(B.actionStarting(ce.FETCH,oe.PENS,{FarmId:t,DataTime:a}))},getWeights:function(t,a){return e(B.actionStarting(ce.FETCH,oe.WEIGHING,{FarmId:t,PenId:a}))},getBatch:function(t,a){return e(B.actionStarting(ce.FETCH,oe.BATCHS,{FarmId:t,BatchId:a}))},setCurrentData:function(t){return e(B.setCurrentData({type:oe.PENS,penId:t}))},setCurrentDataElement:function(t){return e(B.setCurrentData(t))}}}))(er);function nr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var rr=function(e){Tt()(a,e);var t=nr(a);function a(e){var n;Ct()(this,a),(n=t.call(this,e)).state={currentData:e.currentData};var r=n.setData(e),i=r.CurrentData,s=r.WeighingsList,o=r.Weighings;return n.state={currentData:i,WeighingsList:s,Weighings:o},n}return wt()(a,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=this.state.currentData,n=de(t.pigs);n[a.TagId]&&(a.data=n[a.TagId]);var r=[],i=[],s="android"===te.a.OS||"ios"===te.a.OS;if(t&&t.weighings&&t.weighings[a.penId]){r=t.weighings[a.penId];for(var o=0;o<Object.keys(r).length;o++){var c=Object.keys(r)[o];if(c){var l=r[c];l&&l.time&&i.push(A()({},c,l))}}i=i.sort((function(e,t){return e.time>t.time?1:-1})),s&&(i=i.slice(0,5))}return a.data&&!a.data.datas&&(a.data.datas={}),{CurrentData:a,WeighingsList:r,Weighings:i}}},{key:"getData",value:function(){if(this.props.firebase&&this.props.firebase.localDataStore){var e=this.props.firebase.localDataStore;e.pens||(e.pens={}),this.props.getPens(Object.keys(e.userData.farms)[0],e.pens.update_time),this.props.getWeights(Object.keys(e.userData.farms)[0],this.state.currentData.penId),this.props.getBatch(Object.keys(e.userData.farms)[0],null)}}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore)){var a=this.props.firebase.localDataStore;if(JSON.stringify(e.currentData)!==JSON.stringify(this.state.currentData)||a.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(de(a.sections))||a.weighings&&JSON.stringify(this.state.Weighings)!==JSON.stringify(de(localDataStoree.weighings))){var n=this.setData(this.props),r=n.CurrentData,i=n.WeighingsList,s=n.Weighings;this.setState({currentData:r,WeighingsList:i,Weighings:s})}}}},{key:"render",value:function(){var e=this,t=(this.props.firebase.firebaseIsLoading,this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage,this.props.firebase.localDataStore),a=this.state.currentData;if(a.data){var n=a.data.datas.count?a.data.datas.count:0,i=[];if(this.state.Weighings.length>0){var s=n||1;i=this.state.Weighings[0][Object.keys(this.state.Weighings[0])].weight/s}var o=a.data.datas.batch?a.data.datas.batch:"No Batch",c={},l="",u=i;if(a.data.datas.batch&&t.batchs&&t.batchs[a.data.datas.batch]){var f=(c=t.batchs[a.data.datas.batch]).time;if(l=Math.floor((Date.now()-f)/864e5),a.data.datas.gcurve=c.gcurve,c&&c.time&&c.datas&&t.graphs&&t.graphs[c.gcurve]){var p=t.graphs[c.gcurve],h=Object.keys(p.data),d=this.state.Weighings[0][Object.keys(this.state.Weighings[0])].weight,m=this.state.Weighings[0][Object.keys(this.state.Weighings[0])].time;if(m>c.time&&(!c.state||"Closed"!==c.state)){f=c.time;var g=c.time,b=0;for(b=0;b<p.data.length-1;b++){var y=new Date(f);switch(p.periode){case"Days":y=new Date(y.setDate(y.getDate()+1));break;case"Month":y=new Date(y.setMonth(y.getMonth()+1));break;case"Weeks":default:y=new Date(y.setDate(y.getDate()+7))}if((g=y.getTime())>=m)break;f=g}var E=me([f,g],[p.data[h[b]],p.data[b+1]],(new Date).getTime(),d,m),v=(E.ExValue,E.VirData);u=Math.round(100*v)/100}}}return c.datas||(c.datas={}),c.datas.devianceMin||(c.datas.devianceMin=0),c.datas.devianceMax||(c.datas.devianceMax=0),r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fill]},r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth,Yt.bottomMargin,Qt.rowCenter]},r.a.createElement(St.a,{style:{padding:6,paddingRight:15}},r.a.createElement(da.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){return ir(e,t,a,!1)}})),r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth]},r.a.createElement(fa,{Text:a.penId,buttonStyle:{backgroundColor:Vt},onPress:function(){}})),r.a.createElement(St.a,{style:{padding:6,paddingLeft:15}},r.a.createElement(da.a,{name:"md-arrow-forward",type:"ionicon",size:25,color:"black",onPress:function(){return ir(e,t,a,!0)}}))),r.a.createElement(St.a,{style:[Qt.fullWidth]},r.a.createElement(Sa,{texts:["Pig count","Batch","Age Days","Weight","Growth Cruve","Alarm Max","Alarm Min","Mixtur","Correction","Portion in kg"],onPress:function(e){return function(e,t){switch(e){case 1:switch(t.index){case 0:console.log("test")}}}(1,e)},datas:[n,o,l,u,a.data.datas.gcurve?a.data.datas.gcurve:"default",c.datas.devianceMin+" %",c.datas.devianceMax+" %","-","-","-"]})),r.a.createElement(St.a,{style:{height:20}}),r.a.createElement(St.a,{style:[Qt.fill,Qt.midWidth,{height:250}]},r.a.createElement(Sa,{texts:["Last weighings"],datas:[]}),r.a.createElement(St.a,{style:{height:10}}),r.a.createElement(sn.a,{data:this.state.Weighings,renderItem:function(t){var a=t.item;t.index;if("__jsogObjectId"===a)return r.a.createElement(r.a.Fragment,null);var n=e.state.WeighingsList[Object.keys(a)[0]];return r.a.createElement(Sa,{texts:[ue(n.time)],datas:[n.weight]})},numColumns:1,keyExtractor:function(e,t){return String(t)}})),r.a.createElement(St.a,{style:{height:30}}),r.a.createElement(St.a,{style:[Qt.borderContainer,Qt.midWidth]},r.a.createElement(Oa,{farm:Object.keys(t.userData.farms)[0],penid:a.penId})))}return r.a.createElement(St.a,{style:[Qt.fillRowCenter,Qt.center,Qt.logoContainer]},r.a.createElement(Rt.a,{style:Qt.fullSize,source:Xt.Hexa_icon,resizeMode:"contain"}))}}]),a}(n.Component);function ir(e,t,a,n){var r=t.pens[a.penId].section,i=de(t.sections[r].pens);if(a.type===oe.PENS&&a.data&&i[a.penId]){var s=Object.keys(i).indexOf(a.penId);switch(n){case!0:s+=1;break;case!1:s-=1}s<0?s=Object.keys(i).length-1:s>=Object.keys(i).length&&(s=0),e.props.setCurrentData(Object.keys(i)[s]),z.replace("DataDisplay")}}Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{getPens:function(t,a){return e(B.actionStarting(ce.FETCH,oe.PENS,{FarmId:t,DataTime:a}))},getWeights:function(t,a){return e(B.actionStarting(ce.FETCH,oe.WEIGHING,{FarmId:t,PenId:a}))},getBatch:function(t,a){return e(B.actionStarting(ce.FETCH,oe.BATCHS,{FarmId:t,BatchId:a}))},setCurrentData:function(t){return e(B.setCurrentData({type:oe.PENS,penId:t}))},setCurrentDataElement:function(t){return e(B.setCurrentData(t))}}}))(rr);function sr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function or(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):sr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function cr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var lr=function(e){Tt()(a,e);var t=cr(a);function a(e){var n;return Ct()(this,a),(n=t.call(this,e)).state={currentData:{}},n}return wt()(a,[{key:"getData",value:function(){if(this.props.setFirebaseError(null),this.props.firebase&&this.props.firebase.localDataStore){this.props.firebase.localDataStore;if(this.props.firebase.currentData&&this.props.firebase.currentData.type)this.props.firebase.currentData.type}}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore)){var a=this.props.firebase.localDataStore;if(this.props.firebase.currentData&&this.props.firebase.currentData.type&&JSON.stringify(this.state.currentData)!==JSON.stringify(this.props.firebase.currentData)){var n=this.props.firebase.currentData;switch(n.type){case oe.PENS:if(a.pens){var r=de(a.pens);r[n.penId]&&(JSON.stringify(n.data)!==JSON.stringify(r[n.penId])&&(n.data=r[n.penId]),this.props.setCurrentDataElement(n))}this.setState({currentData:n});break;case oe.PIGS:default:this.setState({currentData:n})}}}}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=(this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage),a=this.props.firebase.localDataStore,n=this.state.currentData,i=r.a.createElement(St.a,null);switch(n.type){case oe.PENS:i=r.a.createElement(ar,{currentData:this.state.currentData});break;case oe.PIGS:i=ur(this,n,a)}return r.a.createElement(Pa.a,{style:[Qt.fullSize,Qt.fill]},r.a.createElement(St.a,{style:[Qt.mainContainer]},r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fill]},t?r.a.createElement(ia.a,{style:ea.error},t):r.a.createElement(r.a.Fragment,null),i),e&&r.a.createElement(Na.a,{style:Qt.loadingContainer,size:"large"})))}}]),a}(n.Component);var ur=function(e,t,a){var n;if(a&&a.pigs&&(n=de(a.pigs))[t.TagId]&&(t.data=n[t.TagId]),t.data&&!t.data.datas&&(t.data.datas={}),!t.data)return r.a.createElement(St.a,{style:[Qt.fillRowCenter,Qt.center,Qt.logoContainer]},r.a.createElement(Rt.a,{style:Qt.fullSize,source:Xt.Hexa_icon,resizeMode:"contain"}));var i="android"===te.a.OS||"ios"===te.a.OS;return r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fill]},i?r.a.createElement(St.a,{style:[Qt.fill,Qt.row,Qt.fullWidth]},r.a.createElement(St.a,{style:[Qt.fill,Qt.column,{backgroundColor:"red"}]},r.a.createElement(St.a,{style:[Qt.fill,Qt.row,Qt.fullWidth,{backgroundColor:"blue"}]},r.a.createElement(St.a,{style:{justifyContent:"center",alignItems:"center"}})),r.a.createElement(St.a,{style:[Qt.fill,Qt.row,Qt.fullWidth]},r.a.createElement(ia.a,null,"Messages"),r.a.createElement(ia.a,null,"Errors"))),r.a.createElement(St.a,{style:[Qt.fill,Qt.column]},connectedState===ConnectionState.CONNECTED?r.a.createElement(St.a,{style:or(or({},fr.circle),{},{backgroundColor:"green",justifyContent:"center",alignItems:"center"})},r.a.createElement(ia.a,null,"Device is"),r.a.createElement(ia.a,null,"connected")):r.a.createElement(St.a,{style:or(or({},fr.circle),{},{backgroundColor:"red",justifyContent:"center",alignItems:"center"})},r.a.createElement(ia.a,null,"No Device"),r.a.createElement(ia.a,null,"connected")))):r.a.createElement(r.a.Fragment,null),r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth]},r.a.createElement(fa,{Text:t.TagId,buttonStyle:{backgroundColor:Vt},onPress:function(){}})),r.a.createElement(St.a,{style:[Qt.fullWidth]},r.a.createElement(Sa,{ingrid:!0,texts:["Section","Pen"],datas:[t.data.section,t.data.pen]}),r.a.createElement(St.a,{style:{height:20}}),r.a.createElement(St.a,{style:Qt.colCenter},r.a.createElement(da.b,{label:"Comment:",multiline:!0,containerStyle:[{borderWidth:1}],style:[ea.input],onChangeText:function(e){},value:"NONE"}))))},fr=Lt.a.create({circle:{width:125,height:125,borderRadius:62.5,marginTop:Yt.tiny,marginLeft:Yt.tiny}}),pr=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{getPens:function(t){return e(B.actionStarting(ce.FETCH,oe.PENS,{FarmId:t}))},getWeights:function(t,a){return e(B.actionStarting(ce.FETCH,oe.WEIGHING,{FarmId:t,PenId:a}))},getBatch:function(t,a){return e(B.actionStarting(ce.FETCH,oe.BATCHS,{FarmId:t,BatchId:a}))},setFirebaseError:function(t){return e(B.setFirebaseError(t))},setCurrentData:function(t){return e(B.setCurrentData({type:oe.PENS,penId:t}))},setCurrentDataElement:function(t){return e(B.setCurrentData(t))}}}))(lr),hr=a(49),dr=a.n(hr),mr=a(34),gr=a(373);function br(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function yr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?br(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):br(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Er(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}function vr(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Dr(){var e=[10,250],t=[10,250],a=[10,250],n=[.2,1],r=vr(e[0],e[1]),i=vr(t[0],t[1]),s=vr(a[0],a[1]),o=vr(100*n[0],100*n[1])/100;return{r:r,g:i,b:s,a:o,rgbaValue:"rgba("+r+","+i+","+s+","+o+")"}}var Sr=mr.a.get("window"),Pr=mr.a.get("screen");function Or(e,t){var a=e;switch(t){case"Days":a.setDate(a.getDate()+1);break;case"Month":a.setMonth(a.getMonth()+1);break;case"Weeks":default:a.setDate(a.getDate()+7)}return a}var Cr=function(e){Tt()(a,e);var t=Er(a);function a(e){var n;Ct()(this,a),(n=t.call(this,e)).onChange=function(e){var t=e.window,a=e.screen;n.setState({dimensions:{window:t,screen:a}})};var r=n.setData(e),i=r.TempGraph,s=r.Legends,o=r.DataSets,c=r.StartDate,l=r.EndDate;return n.state={dimensions:{window:Sr,screen:Pr},TempGraph:i,Legends:s,DataSets:o,StartDate:c,EndDate:l,Labels:[],ActiveIndex:0,ActiveLength:"Batch",ActiveDataSets:o,ActiveStartDate:c,ActiveEndDate:l,ViewPoint:null},n}return wt()(a,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=e.firebase.currentData,n=null,r=[],i=[],s=new Date,o=s.getTime(),c=new Date(s.setDate(s.getDate()+56));if(t){if(t.batchs&&a.batchId&&t.graphs&&a.curveId){if(!(n=t.graphs[a.curveId]))return{TempGraph:n,Legends:r,DataSets:i,StartDate:o,EndDate:c};n.name=a.curveId;var l=t.batchs[a.batchId];o=l.time,r=r.concat(Object.keys(l.pens).reverse().filter((function(e){return"__jsogObjectId"!==e})));var u=[];n.periode||(n.periode="Weeks");for(var f=new Date(o),p=0;p<n.data.length;p++)u.push(f.getTime()),p<n.data.length-1&&(f=new Date(Or(f,n.periode)));c=f.getTime(),u.push(c),i.push({data:n.data,dataX:u,color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;return"rgba(0, 0, 0, "+e+")"}})}if(t.weighings){var h=i,d=c,m=new Date(Or(new Date(d),n.periode)).getTime(),g=function(e,t,a,n,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=[],o=0;return e.forEach((function(e){var c=[],l=[];if(n[e]){var u=n[e];Object.keys(u).length>=1&&Object.keys(u).sort((function(e,t){return u[e].time-u[t].time})).forEach((function(t){var n=u[t];if(n.weight&&n.time>=r&&!(i&&n.time>i)){var s=n.weight;a&&a[e]&&a[e].datas&&a[e].datas.count&&(s/=a[e].datas.count),c.push(s),l.push(n.time),!i&&n.time>o&&(o=n.time)}}))}for(;c.length<t;)c.push(null),l.push(null);var f=Dr();s.push({Pen:e,data:c,dataX:l,color:function(){return f.rgbaValue}})})),{DataSets:s,EndDate:o}}(r,n.data.length,t.pens,t.weighings,o,m);i=g.DataSets,c=g.EndDate;i=h.concat(i),d>c&&(c=d),(r=r.filter((function(e){return"__jsogObjectId"!==e&&(e===n.name||i.some((function(t){return t.Pen===e})))}))).unshift(n.name)}}return{TempGraph:n,Legends:r,DataSets:i,StartDate:o,EndDate:c}}},{key:"setGraphPeriode",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.ActiveLength,a=[],n=this.state.StartDate,r=this.state.EndDate,i=this.state.ActiveIndex,s=this.state.TempGraph.periode,o=new Date(n),c=(this.state.ActiveDataSets,(new Date).getTime());switch(this.state.ActiveLength){case"Days":for(var l=0;l<i||-1===i;l++){var u=new Date(Or(o,this.state.ActiveLength));if(-1===i&&u>c){i=l-1;break}o=u}n=o.getTime(),a.push(o.getDate()+"/"+(o.getMonth()+1)),o=new Date(Or(o,this.state.ActiveLength)),a.push(o.getDate()+"/"+(o.getMonth()+1)),r=o.getTime(),o=new Date(Or(o,this.state.ActiveLength));break;case"Weeks":for(l=0;l<i||-1===i;l++){u=new Date(Or(o,this.state.ActiveLength));if(-1===i&&u>c){i=l;break}o=u}n=o.getTime();for(l=0;l<=7;l++)a.push(o.getDate()+"/"+(o.getMonth()+1)),r=o.getTime(),o=new Date(Or(o,"Days"));break;case"Batch":default:for(;o.getTime()<=r;){switch(s){case"Days":case"Month":a.push(o.getDate()+"/"+(o.getMonth()+1));break;case"Weeks":default:a.push(o.getDate()+"/"+(o.getMonth()+1))}o=new Date(Or(o,s))}}var f=[];if("Batch"===this.ActiveLength)f=this.state.DataSets;else{var p=Or(new Date(r),this.state.ActiveLength).getTime();this.state.DataSets.forEach((function(t){var a=yr(yr({},t),{},{data:[],dataX:[]}),i=null;if(new Date(t.dataX[0]).getTime()<=r){for(var s=0;s<t.data.length;s++){if(new Date(t.dataX[s]).getTime()>=n){if(a.data.push(t.data[s]),a.dataX.push(t.dataX[s]),Or(new Date(t.dataX[s]),e.state.ActiveLength).getTime()>p){t.dataX.length-1>=s&&s;break}}else null!==t.dataX[s]&&(i=s)}if(null!==i&&a.dataX[0]>n&&t.data.length>=i+1){var o=me([t.dataX[i],t.dataX[i+1]],[t.data[i],t.data[i+1]],n,t.data[i],t.dataX[i]),c=o.ExValue;o.VirData;a.data.unshift(c),a.dataX.unshift(n)}}f.push(a)}))}this.state.DataSets[0].dataX[this.state.DataSets[0].dataX.length-1];if(this.state.ActiveIndex>0&&0===f[0].data.length){l=this.state.ActiveIndex;l-=1,this.setState({ActiveIndex:l})}else this.setState({ActiveLength:t,Labels:a,ActiveDataSets:f,ActiveStartDate:n,ActiveEndDate:r,ActiveIndex:i},(function(){}))}},{key:"getData",value:function(){var e=this;this.props.setFirebaseError(null);var t=this.props.firebase.localDataStore,a=this.props.firebase.currentData;if(a&&a.batchId&&t.batchs[a.batchId]){var n=t.batchs[a.batchId];Object.keys(n.pens).forEach((function(a){if("__jsogObjectId"===a)return null;e.props.getPen(Object.keys(t.userData.farms)[0],a),e.props.getWeights(Object.keys(t.userData.farms)[0],a)}));var r="";a.curveId&&(r=a.curveId),this.props.getCurve(Object.keys(t.userData.farms)[0],r)}}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack"),e.firebase.currentData&&e.firebase.currentData.batchId||z.navigate("UserBatchs")}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&(JSON.stringify(e.firebase.localDataStore.weighings)!==JSON.stringify(this.props.firebase.localDataStore.weighings)||JSON.stringify(e.firebase.localDataStore.pens)!==JSON.stringify(this.props.firebase.localDataStore.pens)||JSON.stringify(e.firebase.localDataStore.graphs)!==JSON.stringify(this.props.firebase.localDataStore.graphs)))){var a=this.setData(this.props),n=a.TempGraph,r=a.Legends,i=a.DataSets,s=a.StartDate,o=a.EndDate;console.log(e.firebase.localDataStore,this.props.firebase.localDataStore),JSON.stringify(this.state.TempGraph)===JSON.stringify(n)&&JSON.stringify(this.state.Legends)===JSON.stringify(r)&&JSON.stringify(this.state.DataSets)===JSON.stringify(i)&&JSON.stringify(this.state.StartDate)===JSON.stringify(s)&&JSON.stringify(this.state.EndDate)===JSON.stringify(o)||(console.log("state update"),this.setState({TempGraph:n,Legends:r,DataSets:i,StartDate:s,EndDate:o}))}this.state!==t&&(this.state.ActiveLength==t.ActiveLength&&this.state.ActiveIndex==t.ActiveIndex||this.setGraphPeriode(this.state.ActiveLength))}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData(),mr.a.addEventListener("change",this.onChange),this.setGraphPeriode(this.state.ActiveLength)}},{key:"componentWillUnmount",value:function(){mr.a.removeEventListener("change",this.onChange)}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=(this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage),n=this.props.firebase.localDataStore,i=this.state.dimensions.window.width>1e3,s=this.state.dimensions.window.height-140-Yt.medium*(this.state.ViewPoint?8:6)-(i?55:85);"ios"!==te.a.OS&&"android"!==te.a.OS||(s+=90);var o=2*(this.state.dimensions.window.width-2*Yt.normal)/(i?2.05:1),c=0;this.state.Legends.forEach((function(e){if(n&&n.pens&&n.pens[e]){var t=n.pens[e];t.datas&&t.datas.count&&(c+=t.datas.count)}}));var l=(new Date).getTime();l>this.state.EndDate&&(l=this.state.EndDate);var u=(l-this.state.StartDate)/864e5;u=u.toFixed(0);n.batchs[this.props.firebase.currentData.batchId];var f,p=me([this.state.StartDate,this.state.EndDate],[this.state.DataSets[0].data[0],this.state.DataSets[0].data[this.state.DataSets[0].data.length-1]],l,null,null),h=p.ExValue;p.VirData;f=h.toFixed(2);for(var d=0,m=0;m<this.state.TempGraph.data.length;m++){var g=this.state.TempGraph.data[m];if(""!==g&&null!==g||(g=0),g=parseFloat(g),0!==m)d=(d+(g-this.state.TempGraph.data[m-1]))/2}d=d.toFixed(3);var b=new Date(this.state.StartDate).getDate()+"/"+(new Date(this.state.StartDate).getMonth()+1)+"/"+new Date(this.state.StartDate).getFullYear(),y=new Date(this.state.EndDate).getDate()+"/"+(new Date(this.state.EndDate).getMonth()+1)+"/"+new Date(this.state.EndDate).getFullYear();return r.a.createElement(Pa.a,{style:[Qt.fullSize,Qt.fill]},r.a.createElement(St.a,{style:[Qt.mainContainer]},r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fill]},a?r.a.createElement(ia.a,{style:ea.error},a):r.a.createElement(r.a.Fragment,null),r.a.createElement(ha,{Text:this.props.firebase.currentData.batchId?this.props.firebase.currentData.batchId:"-NON-"}),r.a.createElement(St.a,null,r.a.createElement(St.a,{style:[Qt.fullWidth,{justifyContent:"center"}]},r.a.createElement(dn.a,{itemDimension:120,spacing:10,data:[{title:"Animals",data:c},{title:"Day",data:u},{title:"Weight",data:f},{title:"Average growth",data:d}],renderItem:function(e){var t=e.item;return r.a.createElement(St.a,{style:[Qt.borderContainer,{textAlign:"center"}]},r.a.createElement(ia.a,null,t.title),r.a.createElement(ia.a,null,t.data))}})),r.a.createElement(St.a,{style:[Qt.fullWidth,{justifyContent:"center"}]},r.a.createElement(dn.a,{itemDimension:120,spacing:10,data:[{title:"Start",data:b},{title:"End Forecast",data:y},{title:"Target Weight",data:this.state.TempGraph.data[this.state.TempGraph.data.length-1]}],renderItem:function(e){var t=e.item;return r.a.createElement(St.a,{style:[Qt.borderContainer,{textAlign:"center"}]},r.a.createElement(ia.a,null,t.title),r.a.createElement(ia.a,null,t.data))}}))),r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fill,{marginHorizontal:0,paddingHorizontal:-20}]},r.a.createElement(Pa.a,{horizontal:!0,showsHorizontalScrollIndicator:!i,style:[Qt.fullSize]},this.state.TempGraph&&this.state.Labels&&this.state.Labels.length>0&&this.state.ActiveDataSets&&this.state.ActiveDataSets.length>0?r.a.createElement(gr.a,{style:[{marginLeft:-15,marginRight:Yt.normal}],width:o,height:s,data:{labels:this.state.Labels,xMinMax:[this.state.ActiveStartDate,this.state.ActiveEndDate,this.state.Labels.length-1],legend:this.state.Legends.slice(0,this.state.ActiveDataSets.length),datasets:this.state.ActiveDataSets},onDataPointClick:function(t){e.setState({ViewPoint:t})},withShadow:!1,withVerticalLines:!0,fromZero:!1,segments:15,verticalLabelRotation:0,xLabelsOffset:0,chartConfig:{backgroundColor:Nt,backgroundGradientFrom:Nt,backgroundGradientTo:Nt,decimalPlaces:1,color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba(0, 0, 0, "+e+")"},labelColor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba(0, 0, 0, "+e+")"},style:{borderRadius:16,height:s},propsForDots:{r:"5",strokeWidth:"0.5",stroke:Nt}}}):r.a.createElement(r.a.Fragment,null))),r.a.createElement(St.a,{style:[Qt.borderContainer,Qt.rowCenter]},r.a.createElement(St.a,{style:{paddingRight:2.5}},r.a.createElement(da.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){if(0!=e.state.ActiveIndex){var t=e.state.ActiveIndex;t-=1,e.setState({ActiveIndex:t})}}})),r.a.createElement(fa,{Text:"Day view",buttonStyle:{width:i?100:80},onPress:function(){e.setState({ActiveIndex:-1,ActiveLength:"Days"})}}),r.a.createElement(fa,{Text:"Week view",buttonStyle:{width:i?100:80,marginLeft:2.5},onPress:function(){e.setState({ActiveIndex:-1,ActiveLength:"Weeks"})}}),r.a.createElement(fa,{Text:"Full Batch",buttonStyle:{width:i?100:80,marginLeft:2.5},onPress:function(){e.setState({ActiveIndex:0,ActiveLength:"Batch"})}}),r.a.createElement(St.a,{style:{paddingLeft:2.5}},r.a.createElement(da.a,{name:"md-arrow-forward",type:"ionicon",size:25,color:"black",onPress:function(){var t=e.state.ActiveIndex;t+=1,e.setState({ActiveIndex:t})}}))),n.batchs[this.props.firebase.currentData.batchId].state&&"Closed"===n.batchs[this.props.firebase.currentData.batchId].state?r.a.createElement(r.a.Fragment,null):r.a.createElement(kr,{control:this,props:this.props,state:this.state})),t&&r.a.createElement(Na.a,{style:Qt.loadingContainer,size:"large"})))}}]),a}(n.Component),kr=function(e){if("ios"===te.a.OS||"android"===te.a.OS){if(e.state.ViewPoint){var t=e.state.Labels[e.state.ViewPoint.index];if(e.state.ViewPoint.dataset.dataX){var a=new Date(e.state.ViewPoint.dataset.dataX[e.state.ViewPoint.index]);t=a.getFullYear()+"."+(a.getMonth()+1)+"."+a.getDate()}var n=e.state.ViewPoint.value;return r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.fullWidth,Qt.rowCenter,{maxHeight:100}]},r.a.createElement(St.a,{style:[Qt.colCenter,Qt.borderContainer,{borderRadius:0}]},r.a.createElement(ia.a,null,t)),r.a.createElement(St.a,{style:[Qt.colCenter,Qt.borderContainer,{borderRadius:0}]},r.a.createElement(ia.a,null,n," Kg.")))}return r.a.createElement(r.a.Fragment,null)}var i=r.a.useState(0),s=dr()(i,2),o=s[0],c=s[1];return e.state.TempGraph?r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.fullWidth,Qt.rowCenter,{maxHeight:100,marginTop:10}]},r.a.createElement(St.a,{style:{padding:6,paddingRight:15}},r.a.createElement(da.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){var t=o;(t-=1)<0&&(t=e.state.TempGraph.data.length-1),c(t)}})),r.a.createElement(da.b,{type:"number",step:"0.1",label:e.state.Labels[o],containerStyle:[{width:"auto",borderWidth:1}],style:[ea.input,Qt.borderContainer,{borderRadius:0}],onChange:function(t){var a=t.target.value;if(!isNaN(a)||a.endsWith(".")&&a.split(".").length<=2){var n=e.state.TempGraph.data;n[o]=a,e.control.setState({state:e.state,TempGraph:yr(yr({},e.state.TempGraph),{},{data:n})}),e.control.setGraphPeriode(e.state.ActiveLength)}},value:e.state.TempGraph.data[o]}),r.a.createElement(St.a,{style:{padding:6,paddingRight:15}},r.a.createElement(da.a,{name:"md-arrow-forward",type:"ionicon",size:25,color:"black",onPress:function(){var t=o;(t+=1)>e.state.TempGraph.data.length-1&&(t=0),c(t)}})),r.a.createElement(da.b,{label:"Curve Name",containerStyle:[{width:"auto",borderWidth:1}],style:[ea.input,Qt.borderContainer,{borderRadius:0}],onChangeText:function(e){},value:e.state.TempGraph.name})):r.a.createElement(r.a.Fragment,null)},wr=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(B.setFirebaseError(t))},getPen:function(t,a){return e(B.actionStarting(ce.FETCH,oe.PENS,{FarmId:t,PenId:a}))},getWeights:function(t,a){return e(B.actionStarting(ce.FETCH,oe.WEIGHING,{FarmId:t,PenId:a,limitTo:99}))},getBatch:function(t,a){return e(B.actionStarting(ce.FETCH,oe.BATCHS,{FarmId:t}))},getCurve:function(t,a){return e(B.actionStarting(ce.FETCH,oe.GRAPH,{FarmId:t,GraphId:a}))},setCurve:function(t,a){return e(B.actionStarting(ce.CREATE,oe.GRAPH,{FarmId:t,Graph:a}))}}}))(Cr);function jr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Tr=Object(Pt.a)({UserFront:{screen:rn,navigationOptions:function(){return{title:"User Data",headerLeft:function(e){return r.a.createElement(St.a,{style:{padding:6,paddingLeft:15}},r.a.createElement(da.a,{type:"ionicon",name:"md-arrow-back",size:25,color:"black",onPress:function(){console.log(e,"navigation"),"System Board"===e.label?z.nacigationPop():z.navigate("MainStack")}}))}}},path:"user_front"},UserDashBoard:{screen:ln,navigationOptions:function(){return{title:"Dash Board"}},path:"user_dashboard"},UserPigs:{screen:En,navigationOptions:function(){return{title:"Pigs"}},path:"user_pigs"},UserPens:{screen:Cn,navigationOptions:function(){return{title:"Pens"}},path:"user_pens"},UserBatchs:{screen:In,navigationOptions:function(){return{title:"Batchs"}},path:"user_batchs"},UserCurves:{screen:Ln,navigationOptions:function(){return{title:"Curves"}},path:"user_curves"},UserOperations:{screen:Un,navigationOptions:function(){return{title:"Operations"}},path:"user_operations"},WeighingOperations:{screen:_n,navigationOptions:function(){return{title:"Operations"}},path:"user_operations"},DataEditor:{screen:Kn,navigationOptions:function(){return{title:"User Data"}},path:"user_dataedtior"},DataDisplay:{screen:pr,navigationOptions:function(){return{title:"User Data"}},path:"user_datadisplay"},DataPlotter:{screen:wr,navigationOptions:function(){return{title:"User Data"}},path:"user_dataplotter"}},{initialRouteName:"UserFront",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerTitleStyle:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?jr(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},ea.navigationHeader),headerRight:function(){return r.a.createElement(St.a,{style:{padding:6}})}}});Lt.a.create({});function Ir(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var Ar=function(e){Tt()(a,e);var t=Ir(a);function a(e){var n;return Ct()(this,a),(n=t.call(this,e)).state={ISLOADPAGE:!0},n}return wt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null)}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.props.clearDataMem(),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.checkData(this.props)}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.firebaseUser;return r.a.createElement(St.a,{style:[Qt.mainContainer]},r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullSize,Qt.fillColMain]},a?r.a.createElement(St.a,{style:Qt.textContainer},r.a.createElement(ia.a,{style:ea.text},"Wellcome: ",a.displayName?a.displayName:a.email)):r.a.createElement(r.a.Fragment,null),r.a.createElement(pa,{Texts:["User Board","Systems"],Images:[Xt.DashBoard,Xt.System],onPress:function(e){switch(e.text){case"User Board":z.navigate("UserBoard");break;case"Systems":z.navigate("SystemBoard")}e.text}}),r.a.createElement(St.a,{style:[Qt.buttonContainer,Qt.midWidth]},r.a.createElement(fa,{Text:"LogOut",onPress:function(){e.props.logOut()}}))),t&&r.a.createElement(Na.a,{style:Qt.loadingContainer,size:"large"}))}}]),a}(n.Component),xr=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{clearDataMem:function(){return e(B.actionStarting(ce.CLEAR,oe.USERSDATA))},setFirebaseError:function(t){return e(B.setFirebaseError(t))},logOut:function(){return e(B.actionStarting(ce.SIGN,oe.USERSDATA))}}}))(Ar);function Fr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var Rr=function(e){Tt()(a,e);var t=Fr(a);function a(e){var n;Ct()(this,a);var r=(n=t.call(this,e)).setData(e).UserList;return n.state={UserList:r,User:""},n}return wt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null);this.props.firebase.localDataStore;this.props.getUsers()}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=null;return t&&t.users&&(a=de(t.users)),{UserList:a}}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase&&this.props.firebase.localDataStore&&this.props.firebase.localDataStore.users&&JSON.stringify(this.state.UserList)!==JSON.stringify(de(this.props.firebase.localDataStore.users)))){var a=this.setData(this.props).UserList;this.setState({UserList:a})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.firebaseUser,n=this.props.firebase.firebaseErrorMessage;this.props.firebase.localDataStore;return r.a.createElement(St.a,{style:[Qt.mainContainer]},r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullWidth,Qt.fill]},n?r.a.createElement(ia.a,{style:ea.error},n):r.a.createElement(r.a.Fragment,null),a?r.a.createElement(St.a,{style:[Qt.fill,Qt.buttonContainer,Qt.fullWidth,Yt.bottomMargin,Qt.column]},this.state.UserList?r.a.createElement(St.a,{style:[Qt.fill,Qt.borderContainer,Yt.smallHorizontalPadding,Yt.smallVerticalPadding,{maxWidth:800,marginTop:10}]},r.a.createElement(un.a,{style:Lr.container},r.a.createElement(sn.a,{data:Object.keys(this.state.UserList).filter((function(e){return"__jsogObjectId"!==e})),renderItem:function(t){var a=t.item,n=(t.index,e.state.UserList[a]);return r.a.createElement(St.a,{style:[Qt.fill,Qt.rowCenter,Qt.fullWidth,{height:35}]},r.a.createElement(ya,{Title:n.name,itemStyle:[{minWidth:190,height:35}],onPress:function(){}}),r.a.createElement(ya,{itemStyle:[{width:70,height:35,justifyContent:"center"}],Title:"",onPress:function(){e.setState({User:n.name})}}),r.a.createElement(ya,{itemStyle:[{width:90,height:35}],Title:n.state,onPress:function(){e.setState({User:n.name})}}))},keyExtractor:function(e,t){return t.toString()}}))):r.a.createElement(r.a.Fragment,null),r.a.createElement(da.b,{label:"User-tag:",containerStyle:[{borderWidth:1,marginTop:10}],style:[ea.input],onChangeText:function(t){e.setState({User:t})},value:this.state.User})):r.a.createElement(r.a.Fragment,null)),t&&r.a.createElement(Na.a,{style:Qt.loadingContainer,size:"large"}))}}]),a}(n.Component),Lr=Lt.a.create({circle:{width:125,height:125,borderRadius:62.5,marginTop:Yt.tiny,marginLeft:Yt.tiny}}),Mr=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{getUsers:function(){return e(B.actionStarting(ce.FETCH,oe.USERS,{UserId:""}))},setFirebaseError:function(t){return e(B.setFirebaseError(t))}}}))(Rr);function Nr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ft()(e);if(t){var r=Ft()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At()(this,a)}}var Ur=function(e){Tt()(a,e);var t=Nr(a);function a(e){var n;Ct()(this,a);var r=(n=t.call(this,e)).setData(e).FarmList;return n.state={FarmList:r,Farm:{name:""}},n}return wt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null);this.props.firebase.localDataStore;this.props.getFarms()}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=null;return t&&t.farms&&(a=de(t.farms)),{FarmList:a}}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase&&this.props.firebase.localDataStore&&this.props.firebase.localDataStore.farms&&JSON.stringify(this.state.FarmList)!==JSON.stringify(de(this.props.firebase.localDataStore.farms)))){var a=this.setData(this.props).FarmList;this.setState({FarmList:a})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.firebaseUser,n=this.props.firebase.firebaseErrorMessage;this.props.firebase.localDataStore;return r.a.createElement(St.a,{style:[Qt.mainContainer]},r.a.createElement(St.a,{style:[Qt.contentContainer,Qt.fullWidth,Qt.fill]},n?r.a.createElement(ia.a,{style:ea.error},n):r.a.createElement(r.a.Fragment,null),a?r.a.createElement(St.a,{style:[Qt.fill,Qt.buttonContainer,Qt.fullWidth,Yt.bottomMargin,Qt.column]},this.state.FarmList?r.a.createElement(St.a,{style:[Qt.fill,Qt.borderContainer,Yt.smallHorizontalPadding,Yt.smallVerticalPadding,{maxWidth:800,marginTop:10}]},r.a.createElement(un.a,{style:Wr.container},r.a.createElement(sn.a,{data:Object.keys(this.state.FarmList).filter((function(e){return"__jsogObjectId"!==e})),renderItem:function(t){var a=t.item,n=(t.index,e.state.FarmList[a]);return n.id=a,r.a.createElement(St.a,{style:[Qt.fill,Qt.rowCenter,Qt.fullWidth,{height:35}]},r.a.createElement(ya,{Title:n.name,itemStyle:[{minWidth:100,height:35}],onPress:function(){}}),r.a.createElement(ya,{itemStyle:[{minWidth:150,height:35,justifyContent:"center"}],Title:n.manager,onPress:function(){e.setState({Farm:n})}}),r.a.createElement(ya,{itemStyle:[{minWidth:150,height:35}],Title:n.email,onPress:function(){e.setState({Farm:n})}}))},keyExtractor:function(e,t){return t.toString()}}))):r.a.createElement(r.a.Fragment,null),r.a.createElement(St.a,{style:[Qt.rowCenter,Qt.fullWidth,{height:120}]},r.a.createElement(da.b,{label:"Farm-tag:",containerStyle:[Qt.halvWidth,{borderWidth:1,marginTop:10}],style:[ea.input],editable:!1,onChangeText:function(t){var a=e.state.Farm;a.name=t,e.setState({Farm:a})},value:this.state.Farm.name}),r.a.createElement(fa,{Text:"Consys",boxStyle:[{marginLeft:10}],onPress:function(){}}),r.a.createElement(fa,{Text:"Farm Panel",boxStyle:[{marginLeft:10}],onPress:function(){""!==e.state.Farm.id&&(e.props.setUserFarm(e.state.Farm.id),z.navigate("UserPanel"))}}))):r.a.createElement(r.a.Fragment,null)),t&&r.a.createElement(Na.a,{style:Qt.loadingContainer,size:"large"}))}}]),a}(n.Component),Wr=Lt.a.create({circle:{width:125,height:125,borderRadius:62.5,marginTop:Yt.tiny,marginLeft:Yt.tiny}}),Br=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{getFarms:function(){return e(B.actionStarting(ce.FETCH,oe.FARMS,{FarmId:""}))},setUserFarm:function(t){return e(B.actionStarting(ce.UPDATE,oe.USERS,{FarmId:t}))},setFirebaseError:function(t){return e(B.setFirebaseError(t))}}}))(Ur);function Hr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var zr=Object(Pt.a)({AdminFront:{screen:xr,navigationOptions:function(){return{title:"Admin Panel",headerLeft:function(){return r.a.createElement(St.a,{style:{padding:6,paddingLeft:15}},r.a.createElement(da.a,{type:"ionicon",name:"md-arrow-back",size:25,color:"black",onPress:function(){return z.navigate("MainStack")}}))}}},path:"admin_front"},UserBoard:{screen:Mr,navigationOptions:function(){return{title:"User Board"}},path:"admin_user_board"},SystemBoard:{screen:Br,navigationOptions:function(){return{title:"System Board"}},path:"admin_system_board"},UserPanel:{screen:Tr,navigationOptions:function(){return{title:"Admin Panel",headerLeft:function(){return r.a.createElement(St.a,{style:{padding:6,paddingLeft:15}},r.a.createElement(da.a,{type:"ionicon",name:"md-arrow-back",size:25,color:"black",onPress:function(){return z.navigate("SystemBoard")}}))}}},path:"admin_front"}},{initialRouteName:"AdminFront",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerTitleStyle:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Hr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},ea.navigationHeader),headerRight:function(){return r.a.createElement(St.a,{style:{padding:6}})}}}),_r=Object(Pt.a)({SplashScreen:{screen:ra,navigationOptions:function(){return{headerShown:!1}}},MainStack:Ga,AuthStack:tn,UserPanel:Tr,AdminPanel:zr,DeepLinkingScreen:{screen:sa,path:"deeplink"}},{initialRouteName:"SplashScreen",headerMode:"none",defaultNavigationOptions:{headerTitleAlign:"center",headerRight:function(){return r.a.createElement(St.a,{style:{padding:6}})}}}),Gr=Object(H.createAppContainer)(_r),Vr=function(){var e=Object(i.c)();return Object(n.useEffect)((function(){e(O.startup())}),[]),r.a.createElement(St.a,{style:Qt.fill},r.a.createElement(Gr,{ref:function(e){z.setTopLevelNavigator(e)},uriPrefix:"agrisysapp://"}))},Jr=function(e,t){var a=[],n=[],r=Object(c.b)();a.push(r),n.push(o.a.apply(void 0,a));var i=Object(l.b)(m,e),s=Object(o.e)(i,o.d.apply(void 0,n)),u=Object(l.c)(s);return r.run(t),{store:s,persistor:u}}(Object(o.c)({example:pt,firebase:Dt}),ot),Yr=Jr.store,Xr=Jr.persistor;t.a=function(){return r.a.createElement(i.a,{store:Yr},r.a.createElement(s.PersistGate,{loading:null,persistor:Xr},r.a.createElement(Vr,null)))}},376:function(e,t,a){e.exports=a(624)},497:function(e,t,a){e.exports=a.p+"static/media/Home.1fff8434.png"},498:function(e,t,a){e.exports=a.p+"static/media/Dashboard.26766c7a.png"},499:function(e,t,a){e.exports=a.p+"static/media/System.7e4af00c.png"},500:function(e,t,a){e.exports=a.p+"static/media/Feed-Curves.da739887.png"},501:function(e,t,a){e.exports=a.p+"static/media/User.d73be9fd.png"},502:function(e,t,a){e.exports=a.p+"static/media/Sow.beff0aff.png"},503:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABRCAYAAACuepoLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAq9JREFUeNrsnT1Lw1AUhk9FRFEhDhV0qgouLlrcjYOLi3XpasEfYjo62X/Quorg5iS0P0D8GBzVOAkWP6CVigg1197E0Naa3ER7b/K+cLig3tP4eJJz8g5XIig0JRS8Zr3Pn1+JUgE0JYgjK1JRqEz2y9DE1IJwgrdalRr1BxoZm6Th8aTvfVwvVqxacaE8zLXtQ+EEN+cHdH12QHPpLM0uZX3tbdSrdHmyS7VH0wY6w1caQNvwp5GxJC2v57+q2pJmRc7+HmAKaHBolGbTTkVvAGYIFdoBucfPp7p1rH8efwr280iJiu3ytUUr9iSY5+yZrqIqTAayzB+sIgOqHtJgq7vGD1IRpsaHUY3PTptWmCJjC5+/Ao8/7hlONZgZ/ow0OQylqkIGubv5Cl/3ATI4zFQUX+T7BRMCTMCM5mumqhf+fH8lvLdRqzqraJ7aU++pscznuyBvPk3XjEh/lKcpWZSVr8x+mMNufby/2p6m+rc58xRFZZvD0/O6b3PY/Zg5Pd5BA0I3B0yMRlsU3Ms0ALOlXAh5dwCzpZIVdwEh5uP4x+gGk1lwlYAQjDjCRAMCTMAETAgwARMwoZ5zphJiNpqonri73lrF8thu/U+C0x5Dpz0v2fWYKlcmGhC6OQSYMo1GMjnthkSsfr2WRFsD0lFfnlh5rswSyeO0y5BHyKiO4mgURh7POdCA0M0BEzAhwARMwIQAEzABEzAhwARMwIQ6FRen3fgPmHDaxVh5rswSwWnvlsOX4LQHzIEGhG4OmIAJASZgAiYEmIAJmPGEafJVBxZHi21sPCvH30Fv8W7uqMj3F/1uZCe6PtP3vxvQYg7TcO33dLe6LTh2ACk7Gpe5RxkeFcELKYd0m/UrT4q+zxMtBODgHOLcjHnc8oLyrMQvUDWKr3xX46cAAwCxt3YCfnN46AAAAABJRU5ErkJggg=="},504:function(e,t,a){e.exports=a.p+"static/media/Area_Colour.f4a4e098.png"},505:function(e,t,a){e.exports=a.p+"static/media/Hexagon-globe.fce26805.png"},506:function(e,t,a){e.exports=a.p+"static/media/Hexa-icon.5129d536.png"},507:function(e,t,a){e.exports=a.p+"static/media/Logo.9b051259.png"},508:function(e,t,a){e.exports=a.p+"static/media/TOM.c88886f3.png"}},[[376,1,2]]]);
//# sourceMappingURL=app.4d821794.chunk.js.map