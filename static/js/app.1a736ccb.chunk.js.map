{"version":3,"sources":["Src/Stores/CreateStore.js","Src/Stores/Startup/Actions.js","Src/Stores/Example/Actions.js","Src/Services/NavigationService.js","Src/Stores/Firebase/Actions.js","Src/Sagas/StartupSaga.js","Src/Services/UserService.js","Src/Config/index.js","Src/Sagas/Example/ExampleSaga.js","Src/Stores/Firebase/Selectors.js","Src/Services/FirebaseService.js","Src/Sagas/Firebase/FirebaseSaga.js","Src/Sagas/index.js","Src/Stores/Example/InitialState.js","Src/Stores/Example/Reducers.js","Src/Stores/Firebase/Reducers.js","Src/Stores/Firebase/InitialState.js","Src/Theme/Colors.js","Src/Theme/Fonts.js","Src/Theme/Metrics.js","Src/Theme/Images.js","Src/Theme/Helpers.js","Src/Theme/ApplicationStyles.js","Src/Containers/SplashScreen/SplashScreenStyle.js","Src/Containers/SplashScreen/SplashScreen.js","Src/Containers/DeepLinking/DeepLinkingScreen.js","Src/Components/Button.js","Src/Components/Button_Panel.js","Src/Components/TitleElement.js","Src/Components/CustomListItem.js","Src/Components/ContentProp.js","Src/Components/Loading.js","Src/Components/OperationsPanel.js","Src/Components/Progressbar.js","Src/Components/DateTime_Picker.js","Src/Components/Comment_Module.js","Src/Containers/Agrisys/FrontScreenStyle.js","Src/Containers/Agrisys/FrontScreen.js","Src/Stores/Example/Selectors.js","Src/Containers/Example/ExampleScreenStyle.js","Src/Containers/Cloud/AuthScreens/UserLoadingScreen.js","Src/Containers/Example/ExampleScreen.js","Src/Navigators/FrontNavigator.js","Src/Containers/Cloud/AuthScreens/AuthStyle.js","Src/Containers/Cloud/AuthScreens/VerifyScreen.js","Src/Containers/Cloud/AuthScreens/UserLoginScreen.js","Src/Containers/Cloud/AuthScreens/CreateUserDataScreen.js","Src/Navigators/AuthNavigator.js","Src/Containers/Cloud/UserPanel/UserPanelStyle.js","Src/Containers/Cloud/UserPanel/FrontScreen.js","Src/Containers/Cloud/UserPanel/Dashboard.js","Src/Containers/Cloud/CloudScreenStyle.js","Src/Containers/Cloud/UserPanel/Pigs.js","Src/Containers/Cloud/UserPanel/Pens.js","Src/Containers/Cloud/UserPanel/Batchs.js","Src/Containers/Cloud/UserPanel/CurveElement.js","Src/Containers/Cloud/UserPanel/GrowthCurves.js","Src/Containers/Cloud/UserPanel/Operations.js","Src/Containers/Cloud/UserPanel/Weighing.js","Src/Containers/Cloud/UserPanel/DataEditor.js","Src/Containers/Cloud/UserPanel/DataDisplay_Pens.js","Src/Containers/Cloud/UserPanel/DataDisplay_Pigs.js","Src/Containers/Cloud/UserPanel/DataDisplay.js","Src/Containers/Cloud/UserPanel/DataPlotter.js","Src/Navigators/UserPanelNavigator.js","Src/Containers/Cloud/AdminPanel/AdminPanelStyle.js","Src/Containers/Cloud/AdminPanel/FrontScreen.js","Src/Containers/Cloud/AdminPanel/UserBoard.js","Src/Containers/Cloud/AdminPanel/SystemBoard.js","Src/Navigators/AdminPanelNavigator.js","Src/Navigators/AppNavigator.js","Src/Containers/Root/RootScreen.js","Src/Stores/index.js","App.tsx","Src/Assets/Images/Home.png","Src/Assets/Images/Dashboard.png","Src/Assets/Images/System.png","Src/Assets/Images/Feed-Curves.png","Src/Assets/Images/Growth-curve.png","Src/Assets/Images/User.png","Src/Assets/Images/Sow.png","Src/Assets/Images/Section.png","Src/Assets/Images/Area_Colour.png","Src/Assets/Images/AutoPig.png","Src/Assets/Images/Feed-Components.png","Src/Assets/Images/Hexagon-globe.png","Src/Assets/Images/Hexa-icon.png","Src/Assets/Images/Logo.png","Src/Assets/Images/TOM.png"],"names":["JSOGTransform","createTransform","inboundState","key","JSOG","encode","outboundState","decode","persistConfig","storage","transforms","blacklist","createActions","startup","Types","Creators","StartupTypes","fetchUser","fetchUserLoading","fetchUserSuccess","fetchUserFailure","ExampleTypes","navigator","LastPage","firebaseStartup","firebaseIsLoading","setFirebaseError","setViewError","viewIsLoading","setCurrentData","actionStarting","fetchStarting","dataFetchSuccess","fetchSuccess","fetchFailure","FirebaseTypes","navigate","routeName","params","dispatch","NavigationActions","replace","StackActions","navigateAndReset","reset","index","actions","setTopLevelNavigator","navigatorRef","nacigationPop","back","put","FirebaseActions","NavigationService","in200s","curryN","min","max","value","isNumber","is","Number","gte","isWithin","userApiClient","axios","create","baseURL","headers","Accept","timeout","userService","console","log","Math","random","Promise","resolve","reject","number","floor","get","toString","then","response","status","data","ExampleActions","call","user","UserStates","DataStates","DataRefs","FIREBASEUSER","USERSDATA","USERS","FARMS","SECTIONS","PENS","PIGS","BATCHS","WEIGHING","GRAPH","COMMENTS","FARMDATAS","SHARES","Actions","SIGN","FETCH","CREATE","UPDATE","MOVE","DELETE","CLEAR","ADD","Operations","format_num","num","format_Time","time","s","Date","parseInt","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","firebase","reA","reN","sortAlphaNum","a","b","aA","bA","aN","bN","sortObject","o","sorted","hasOwnProperty","push","sort","length","DataStringCheck","first","i","specialChars","indexOf","GetWeight_FromPen","PenId","WeighingsStore","AfterTime","BeforeTime","Weighing","_weighing","weighing","GetBatch_FromPen","localDataStore","batchs","_batch","batch","pens","GetStats_FromPen","PenData","StartDate","EndDate","PenWeighings","Animals","PenWeight","PenGrowth","AveragePenGrowth","datas","count","weighings","GrowthCount","lastDate","LastWeight","undefined","LastWeightDay","FirstWeight","Object","keys","forEach","weight","Weight","now","getTime","isVirtual","Batch","TempGraph","GetCurve_FromBatch","graphs","BatchEndDate","Predict","CurvePredict","Now","_date","lastWeighing","Addition","setDate","days","tempEnd","date","Growth","GetStats_FromBatch","PenCount","CollectedWeight","CollectedGrowth","isClosed","state","TargetWeight","GetBatchEnd","PenEnds","reverse","filter","e","Batch_Pen","Pen","closed","PenStats","AverageWeight","parseFloat","toFixed","AverageGrowth","GraphsStore","CurrentData","gcurve","curveId","Id","TempCurve","currentTime","AccumulateTime","periode","Time","PeriodeLength","NewTime","setMonth","get_DataSpot","MinMax_Time","MinMax_Data","FindTime","Data","DataTime","ExValue","VirData","ExTime","slope","minX","maxX","minY","GetSlope_Between","Weighing2","weight2","StartIndex","PredictCurve","CurrentTime","Temp_CurrentIndex","unshift","PredictStart","TempEx","DataSpot","FirstSpot","CurrentIndex","WeightNow","createFirebaseUserWithemailandpassword","Email","Pass","auth","createUserWithEmailAndPassword","User","currentUser","Name","displayName","email","UserId","uid","name","_data","updateProfile","sendEmailVerification","catch","error","code","viewError","message","signinWithemailandpassword","logoutUser","signInWithEmailAndPassword","sendResetPassword","sendPasswordResetEmail","signOut","type","path","refreshUser","reload","ref","action","CurrentUser","createFarm","Farms","farmid","updateFarmData","FarmId","sections","Sections","Pens","updateUserData","UserData","farms","fetchFarm","fetchSections","fetchPens","createNewPen","deletePen","updatePen","fetchPigs","updatePigdata","fetchBatchs","createBatchs","updateBatchs","fetchWeights","createWeight","fetchComments","createComment","fetchGraphData","updateGraphData","SetUpdateTime","DataRef","database","update","update_time","ServerValue","TIMESTAMP","CheckDataTime","once","_Time","UpdateTime","val","res","List","userData","_farmData","farm","set","manager","SectionId","DoFetch","_sectionidData","_pensData","penData","pen","ref2","section","_Pen","remove","Datas","TagId","_pigsData","pigData","pig","updatePigPen","Action","counts","isNaN","pigs","BatchId","_batchdata","curve","batchdata","devianceMin","devianceMax","BatchPens","JSON","stringify","RemovedPens","x","includes","enddate","NewPens","SamePens","pendata","startdate","CurveId","comments","p","_","_resolve","setTimeout","weights","limitStart","limitTo","MemSections","orderByChild","limitToLast","snapshot","c","_weighingTime","Weighings_Time","itemsProcessed","newWeights","Quantity","weightRef","comment","commentRef","quantity","GraphId","graph","Graphs","GraphVal","newGraph","Agraph","AgraphVal","Graph","_Graph","Platform","OS","require","default","firebaseService","async","messaging","requestPermission","authStatus","AuthorizationStatus","AUTHORIZED","PROVISIONAL","isPermit_UserPermission","title","okText","_cancelable","Alert","alert","text","onPress","cancelable","onDismiss","token","to","messageId","messageType","notification","body","sendMessage","msg","handleAuthState","handleActions","onMessageHandler","onBackgroundMessageHandler","Constants","manifest","web","config","initializeApp","permitError","fork","isSupported","eventChannel","emit","subscription","onAuthStateChanged","buffers","expanding","authChannel","take","newAuth","firebaseUser","cancelled","close","actionChannel","channel","values","select","FirebaseUser","NewData","messageListener","onMessage","remoteMessage","onMessageChannel","root","sagaArgs","all","takeLatest","STARTUP","StartupSaga","FETCH_USER","ExampleSaga","FIREBASE_STARTUP","FirebaseSaga","reducer","createReducer","userIsLoading","userErrorMessage","FETCH_USER_LOADING","FETCH_USER_SUCCESS","FETCH_USER_FAILURE","errorMessage","HANDLERS","FIREBASE_IS_LOADING","loadingstate","SET_FIREBASE_ERROR","firebaseErrorMessage","SET_VIEW_ERROR","VIEW_IS_LOADING","SET_CURRENT_DATA","currentData","ACTION_STARTING","FETCH_STARTING","DATA_FETCH_SUCCESS","NewDataStore","NewFirebaseUser","newData","_user","element","_auth","Values","users","FETCH_SUCCESS","newlocalDataStore","newState","_newState","mergeDeep","target","source","isObject","obj","targetValue","sourceValue","Array","isArray","append","FETCH_FAILURE","h1","fontSize","h2","h3","normal","tiny","small","medium","tinyBottomMargin","marginBottom","smallBottomMargin","bottomMargin","mediumBottomMargin","tinyVerticalMargin","marginVertical","smallVerticalMargin","verticalMargin","mediumVerticalMargin","tinyHorizontalMargin","marginHorizontal","smallHorizontalMargin","horizontalMargin","mediumHorizontalMargin","tinyHorizontalPadding","paddingHorizontal","smallHorizontalPadding","horizontalPadding","mediumHorizontalPadding","tinyVerticalPadding","paddingVertical","smallVerticalPadding","verticalPadding","mediumVerticalPadding","Home","DashBoard","System","Curves","GCurves","Sow","Section","AutoPig","Feed","Haxa_globe","Hexa_icon","Logo","logo","column","flexDirection","colMain","justifyContent","colCenter","alignItems","colCross","columnReverse","row","rowMain","rowCenter","rowCross","rowReverse","center","crossCenter","crossEnd","crossStart","crossStretch","fill","flex","fillCenter","fillCol","fillColCenter","fillColCross","fillColMain","fillColReverse","fillRow","fillRowCenter","fillRowCross","fillRowMain","fillRowReverse","fullSize","height","width","halvWidth","midWidth","fullWidth","mainCenter","mainEnd","mainSpaceAround","mainSpaceBetween","mainStart","mainContainer","Metrics","contentContainer","marginTop","borderContainer","borderWidth","borderColor","borderRadius","maxWidth","zIndex","textContainer","Fonts","buttonContainer","loadingContainer","position","left","right","top","bottom","backgroundColor","logoContainer","backgroundReset","Colors","rotate90","transform","rotate","rotate90Inverse","mirror","scaleX","scrollSpaceAround","flexGrow","scrollSpaceBetween","selfStretch","alignSelf","textCenter","textAlign","textJustify","textLeft","textRight","button","color","buttonText","result","input","navigationHeader","StyleSheet","container","SplashScreen","props","onNotificationOpenedApp","getInitialNotification","this","checkData","getData","prevProps","prevState","View","style","Helpers","Style","Image","Images","resizeMode","Component","connect","DeepLinkingScreen","Text","styles","boxContainer","ApplicationStyles","icon","Button","TextView","textStyle","ImageView","_Image","iconStyle","TouchableOpacity","boxStyle","buttonStyle","Button_Panel","Texts","Buttons","image","itemStyle","TitleElement","listitem","CustomListItem","containerStyle","Content","Title","Subtitle","contentBox","minHeight","ContentProp","texts","textsStyle","datasStyle","onLongPress","view","dataRow","OperationsPanel","pigTag","PigsList","newPig","getPenAndSection","setCurrentPig","editPens","onDone","charAt","toUpperCase","slice","newComment","penId","newPigCount","setState","ScrollView","paddingRight","setCurrentDataElement","pigtag","dataId","countChange","ProgressBar","animation","useRef","Animated","Value","progress","Color","useEffect","timing","current","toValue","duration","start","interpolate","inputRange","outputRange","extrapolate","paddingBottom","alignContent","progressBar","absoluteFill","paddingTop","padding","monthNames","DateTime_Picker","getStates","year","month","day","Selected","Year","Month","Day","forceUpdate","changed","Today","YearItems","String","Picker","Item","label","MonthItems","DayItems","selectedValue","minWidth","marginRight","onValueChange","_year","_month","_day","textAreaContainer","textArea","Comment_Module","useState","InputText","setInputText","QuantityText","setQuantityText","WeightText","setWeightText","App","marginLeft","TextInput","multiline","onChangeText","underlineColorAndroid","placeholder","placeholderTextColor","numberOfLines","FrontScreen","ShowMainError","FocusSubscription","Props","navigation","addListener","payload","setViewLoading","ErrorMessage","ele","liveInEurope","entries","example","address","city","instructions","fontStyle","ios","android","ExampleScreen","useDispatch","useSelector","ActivityIndicator","size","StackNavigator","createStackNavigator","screen","Front","navigationOptions","headerMode","headerShown","Example","initialRouteName","defaultNavigationOptions","headerTitleAlign","headerRight","PanelsSorter","userType","UserLoadingScreen","ISLOADPAGE","firebaseData","page","emailVerified","getUser","IsLoading","clearDataMem","UserLoginScreen","CreateUser","createUser","signIN","resetPass","VerifyScreen","setUser","Verified","CreateNewUserData","Farm","_UserData","_sections","_pens","i2","sectionPens","createUserData","Userdata","LoadingUserScreen","LoginUser","LoginUserScreen","headerLeft","paddingLeft","CreateUserData","CreateUserDataScreen","headerTitleStyle","logOut","Dashboard","setData","Manager","Mail","BatchList","SectionsList","MaxCap","CurCap","farmName","farmManager","farmMail","map","BatchID","End","getFarm","getSections","getPens","getBatch","getWeights","getCurve","FarmProgress","FlatList","renderItem","item","keyExtractor","loading","inputContainer","Pigs","PigTag","getPigs","connectedState","DeviceData","SafeAreaView","tagId","pigId","Device_Display","ConnectionState","CONNECTED","circle","Scanner_Display","tagid","FatLayers","FatL1","FatL2","FatL3","known","Weighings","Mid","property","itemDimension","spacing","renderSectionHeader","displayWeight","round","window","Dimensions","Batchs","onChange","dimensions","onMultiChange","items","xorBy","selectedPens","freePens","Display","BatchName","ShowPicker","StartD","Curve","DevianceMin","DevianceMax","avaiblePens","add","id","addEventListener","removeEventListener","wide","scrollEnabled","batchName","_pen","concat","mode","itemValue","itemIndex","fontWeight","endsWith","labelStyle","optionsLabelStyle","options","selectedValues","onMultiSelect","onTapClose","isMulti","newBatch","updateBatch","Dev","_Date","setBatch","batchId","getRandomNumber","low","high","getRandomColor","red_range","green_range","blue_range","a_range","red","green","blue","alpha","r","g","rgbaValue","CurveElement","Legends","DataSets","Labels","ActiveIndex","ActiveLength","ActiveDataSets","ActiveStartDate","ActiveEndDate","ViewPoint","D","DataX","dataX","opacity","TempData","TempEndDate","NextEnd","_EndDate","Prediction","DoPredict","BatchPen","DataSet","DataSetX","WeightsToGraphData","some","TemplatePeriode","CurrentDate","getNewDate","setGraphPeriode","BatchIsOpen","Height","Width","DataPoints","point","horizontal","showsHorizontalScrollIndicator","maxHeight","labels","xMinMax","legend","datasets","onDataPointClick","withShadow","withVerticalLines","fromZero","segments","verticalLabelRotation","xLabelsOffset","chartConfig","backgroundGradientFrom","backgroundGradientTo","decimalPlaces","labelColor","propsForDots","strokeWidth","stroke","control","CurveEditor","TimeText","dataset","React","Point","setPoint","step","evt","split","getPen","curveid","setCurve","GrowthCurve","CurveList","CurveName","Periode","CurveData","AppStyle","WebStyle","numColumns","newCurve","updateCurve","actionType","newWeight","DataEditor","NewSection","DataView","PenEditor_View_Creator","PigEditor_View_Creator","Control","CurrentAction","exists","penAction","PenEditor_Titles","pigAction","Section_Picker","senctionId","DataDisplay_Pens","WeighingsList","CommentsList","Comments","object","MemTime","getComments","localDataStoree","pigcount","penWeight","batch_name","age","StartTime","onPageSwipe","sender","onDataPress","Comment","dir","DataDisplay_Pigs","DataDisplay","PigData_View","ingrid","Comments_List","batchData","PenMemTime","Days","Virtual","UserFront","UserFrontScreen","UserDashBoard","UserDashBoardScreen","UserPigs","UserPigsScreen","UserPens","UserPensScreen","UserBatchs","UserBatchsScreen","UserCurves","UserCurvesScreen","UserOperations","UserOperationsScreen","WeighingOperations","UserDataEditor","UserDataDisplay","DataPlotter","UserDataPlotter","UserListBoard","UserList","getUsers","SystemListBoard","FarmList","getFarms","editable","setUserFarm","AdminFront","AdminFrontScreen","UserBoard","AdminUserBoard","SystemBoard","AdminSystemBoard","UserPanel","UserPanelNavigation","MainStack","FrontNavigation","AuthStack","AuthNavigation","AdminPanel","AdminPanelNavigator","createAppContainer","RootScreen","StartupActions","AppNavigator","uriPrefix","rootReducer","rootSaga","middleware","enhancers","sagaMiddleware","createSagaMiddleware","applyMiddleware","persistedReducer","persistReducer","store","createStore","compose","persistor","persistStore","run","configureStore","combineReducers","ExampleReducer","FirebaseReducer","module","exports"],"mappings":"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","file":"static/js/app.1a736ccb.chunk.js","sourcesContent":["import { applyMiddleware, compose, createStore } from 'redux'\nimport createSagaMiddleware from 'redux-saga'\nimport { persistReducer, persistStore, createTransform } from 'redux-persist'\n\n//** fix: error serializing state TypeError: Converting circular structure to JSON  */\n// https://www.npmjs.com/package/jsog\n// https://www.npmjs.com/package/flatted\nimport JSOG from 'jsog';\nexport const JSOGTransform = createTransform(\n  (inboundState, key) => JSOG.encode(inboundState),\n  (outboundState, key) => JSOG.decode(outboundState),\n)\n\n/**\n * This import defaults to localStorage for web and AsyncStorage for react-native.\n *\n * Keep in mind this storage *is not secure*. Do not use it to store sensitive information\n * (like API tokens, private and sensitive data, etc.).\n *\n * If you need to store sensitive information, use redux-persist-sensitive-storage.\n * @see https://github.com/CodingZeal/redux-persist-sensitive-storage\n */\nimport storage from 'redux-persist/lib/storage'\n\nconst persistConfig = {\n  key: 'root',\n  storage: storage,\n  transforms: [JSOGTransform],\n  /**\n   * Blacklist state that we do not need/want to persist\n   */\n  blacklist: [\n    // 'auth',\n  ],\n}\n\nexport default (rootReducer, rootSaga) => {\n  const middleware = []\n  const enhancers = []\n\n  // Connect the sagas to the redux store\n  const sagaMiddleware = createSagaMiddleware()\n  middleware.push(sagaMiddleware)\n\n  enhancers.push(applyMiddleware(...middleware))\n\n  // Redux persist\n  const persistedReducer = persistReducer(persistConfig, rootReducer)\n\n  const store = createStore(persistedReducer, compose(...enhancers))\n  const persistor = persistStore(store)\n\n\n  // First step is to create BleManager which should be used as an entry point\n  // to all BLE related functionalities\n  /*const blemanager = new BleManager();\n  blemanager.setLogLevel(LogLevel.Verbose);\n\n  const bluemanager = NativeModules.BlueToothControl;*/\n\n  // SagaArgs Construcktor\n  //const sagaArgs = {BLEManager: blemanager, BlueManager: bluemanager}\n\n  // Kick off the root saga\n  //sagaMiddleware.run(rootSaga, sagaArgs)\n  sagaMiddleware.run(rootSaga)\n  \n  return { store, persistor }\n}\n","import { createActions } from 'reduxsauce'\n\nconst { Types, Creators } = createActions({\n  // This action is triggered when the application starts\n  startup: null,\n})\n\nexport const StartupTypes = Types\nexport default Creators\n","import { createActions } from 'reduxsauce'\n\n/**\n * We use reduxsauce's `createActions()` helper to easily create redux actions.\n *\n * Keys are action names and values are the list of parameters for the given action.\n *\n * Action names are turned to SNAKE_CASE into the `Types` variable. This can be used\n * to listen to actions:\n *\n * - to trigger reducers to update the state, for example in App/Stores/Example/Reducers.js\n * - to trigger sagas, for example in App/Sagas/index.js\n *\n * Actions can be dispatched:\n *\n * - in React components using `dispatch(...)`, for example in App/App.js\n * - in sagas using `yield put(...)`, for example in App/Sagas/ExampleSaga.js\n *\n * @see https://github.com/infinitered/reduxsauce#createactions\n */\nconst { Types, Creators } = createActions({\n  // Fetch user informations\n  fetchUser: null,\n  // The operation has started and is loading\n  fetchUserLoading: null,\n  // User informations were successfully fetched\n  fetchUserSuccess: ['user'],\n  // An error occurred\n  fetchUserFailure: ['errorMessage'],\n})\n\nexport const ExampleTypes = Types\nexport default Creators\n","import React from 'react'\nimport { BackHandler } from 'react-native'\nimport { NavigationActions, StackActions } from 'react-navigation'\n\n/**\n * The navigation is implemented as a service so that it can be used outside of components, for example in sagas.\n *\n * @see https://reactnavigation.org/docs/en/navigating-without-navigation-prop.html\n */\n\nlet navigator\nvar LastPage\n/**\n * This function is called when the RootScreen is created to set the navigator instance to use.\n */\nfunction setTopLevelNavigator(navigatorRef) {\n  navigator = navigatorRef\n\n  /*BackHandler.addEventListener('hardwareBackPress', () => {\n    console.log(navigator._navigation)\n    if (navigator && navigator._navigation && navigator._navigation.state) {\n      var Stackindex = navigator._navigation.state.index\n      var Stack = navigator._navigation.state.routes[Stackindex]\n      if (Stack.routes){\n        var index = Stack.index;\n        var routeName = Stack.routes[index].routeName;\n        if (routeName === 'UserFront' || routeName === 'LoginUser'){\n          navigator.dispatch(\n            NavigationActions.back()\n          )\n          //navigate('FrontScreen');\n          //return true;\n        }\n      }\n    }\n  });*/\n}\n\nfunction replace(routeName, params){\n  if (LastPage === routeName) return null\n  else {\n    LastPage = routeName;\n    navigator.dispatch(\n      StackActions.replace({\n        routeName,\n        params,\n      })\n    )\n  }\n}\n\n/**\n * Call this function when you want to navigate to a specific route.\n *\n * @param routeName The name of the route to navigate to. Routes are defined in RootScreen using createStackNavigator()\n * @param params Route parameters.\n */\nfunction navigate(routeName, params) {\n  if (LastPage === routeName) return null\n  else {\n    LastPage = routeName;\n    navigator.dispatch(\n      NavigationActions.navigate({\n        routeName,\n        params,\n      })\n    )\n  }\n}\n\n/**\n * Call this function when you want to navigate to a specific route AND reset the navigation history.\n *\n * That means the user cannot go back. This is useful for example to redirect from a splashscreen to\n * the main screen: the user should not be able to go back to the splashscreen.\n *\n * @param routeName The name of the route to navigate to. Routes are defined in RootScreen using createStackNavigator()\n * @param params Route parameters.\n */\nfunction navigateAndReset(routeName, params) {\n  if (LastPage === routeName) return null\n  else {\n    LastPage = routeName;\n    navigator.dispatch(\n      StackActions.reset({\n        index: 0,\n        key: null,\n        actions: [\n          NavigationActions.navigate({\n            routeName,\n            params,\n          }),\n        ],\n      })\n    )\n  }\n}\n\nfunction nacigationPop() {\n  navigator.dispatch(NavigationActions.back())\n}\n\nexport default {\n  navigate,\n  replace,\n  navigateAndReset,\n  setTopLevelNavigator,\n  nacigationPop,\n}\n","import { createActions } from 'reduxsauce'\n\n/**\n * We use reduxsauce's `createActions()` helper to easily create redux actions.\n *\n * Keys are action names and values are the list of parameters for the given action.\n *\n * Action names are turned to SNAKE_CASE into the `Types` variable. This can be used\n * to listen to actions:\n *\n * - to trigger reducers to update the state, for example in App/Stores/Example/Reducers.js\n * - to trigger sagas, for example in App/Sagas/index.js\n *\n * Actions can be dispatched:\n *\n * - in React components using `dispatch(...)`, for example in App/App.js\n * - in sagas using `yield put(...)`, for example in App/Sagas/ExampleSaga.js\n *\n * @see https://github.com/infinitered/reduxsauce#createactions\n */\nconst { Types, Creators } = createActions({\n  //Firebase Saga events\n  firebaseStartup: null,\n  //Firebase Saga and service\n  firebaseIsLoading: ['loadingstate'],\n  setFirebaseError: ['errorMessage'], // Firebase-saga error occurred\n\n  setViewError: ['errorMessage'], // view error\n  viewIsLoading: ['loadingstate'],\n  \n  setCurrentData: ['data'],\n\n  //Firebase Data fetches\n  actionStarting: ['action', 'ref', 'params'], // Data action (create, singin, share)\n  fetchStarting: ['action', 'ref', 'params'], // Fetch data informations\n  dataFetchSuccess: ['params'],\n  fetchSuccess: ['data'], // Informations were successfully fetched\n  fetchFailure: ['errorMessage'], // An error occurred\n})\n\nexport const FirebaseTypes = {...Types }\nexport default {...Creators }","import { put, call } from 'redux-saga/effects'\n\nimport NavigationService from '../Services/NavigationService'\n\nimport ExampleActions from '../Stores/Example/Actions'\n//import DeviceActions from '../Stores/Device/Actions'\nimport FirebaseActions from '../Stores/Firebase/Actions'\n\n/**\n * The startup saga is the place to define behavior to execute when the application starts.\n */\nexport function* startup() {\n  // Dispatch a redux action using `put()`\n  // @see https://redux-saga.js.org/docs/basics/DispatchingActions.html\n  \n  // Add more operations you need to do at startup here\n  //yield put(ExampleActions.fetchUser())\n  //yield put(DeviceActions.deviceStartup())\n  yield put(FirebaseActions.firebaseStartup())\n\n  // When those operations are finished we redirect to the main screen\n  NavigationService.navigateAndReset('MainStack')\n}\n","import axios from 'axios'\nimport { Config } from '../Config'\nimport { is, curryN, gte } from 'ramda'\n\nconst isWithin = curryN(3, (min, max, value) => {\n  const isNumber = is(Number)\n  return isNumber(min) && isNumber(max) && isNumber(value) && gte(value, min) && gte(max, value)\n})\nconst in200s = isWithin(200, 299)\n\n/**\n * This is an example of a service that connects to a 3rd party API.\n *\n * Feel free to remove this example from your application.\n */\nconst userApiClient = axios.create({\n  /**\n   * Import the config from the App/Config/index.js file\n   */\n  baseURL: Config.API_URL,\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n  },\n  timeout: 3000,\n})\n\nfunction fetchUser() {\n  // Simulate an error 50% of the time just for testing purposes\n  console.log(\"user fetch test\");\n  if (Math.random() > 0.5) {\n    return new Promise((resolve, reject) => {\n      console.log(\"error\");\n      resolve(null)\n    })\n  }\n\n  const number = Math.floor(Math.random() / 0.1) + 1\n\n  return userApiClient.get(number.toString()).then((response) => {\n    if (in200s(response.status)) {\n      return response.data\n    }\n\n    return null\n  })\n}\n\nexport const userService = {\n  fetchUser,\n}\n","export const Config = {\n  API_URL: 'https://jsonplaceholder.typicode.com/users/',\n}\n","import { put, call } from 'redux-saga/effects'\n\nimport ExampleActions from '../../Stores/Example/Actions'\nimport { userService } from '../../Services/UserService'\n\n/**\n * A saga can contain multiple functions.\n *\n * This example saga contains only one to fetch fake user informations.\n * Feel free to remove it.\n */\nexport function* fetchUser() {\n  // Dispatch a redux action using `put()`\n  // @see https://redux-saga.js.org/docs/basics/DispatchingActions.html\n  yield put(ExampleActions.fetchUserLoading())\n\n  // Fetch user informations from an API\n  const user = yield call(userService.fetchUser)\n  if (user) {\n    yield put(ExampleActions.fetchUserSuccess(user))\n  } else {\n    yield put(\n      ExampleActions.fetchUserFailure('There was an error while fetching user informations.')\n    )\n  }\n}\n","//#region Defines\r\nexport const UserStates = {\r\n  STARTER: 'starter',\r\n  FREE: 'free',\r\n  WORKER: 'worker',\r\n  OWNER: 'owner',\r\n  ADMIN: 'admin',\r\n}\r\n\r\nexport const DataStates = {\r\n  CLOSED: 'Closed'\r\n}\r\n\r\nexport const DataRefs = {\r\n  FIREBASEUSER: 'firebaseuser',\r\n  USERSDATA: 'usersdata',\r\n  USERS: 'users',\r\n  FARMS: 'farms',\r\n  SECTIONS: 'farms_data/$farmid/sections',\r\n  PENS: 'farms_data/$farmid/pens',\r\n  PIGS: 'farms_data/$farmid/pigs',\r\n  BATCHS: 'farms_data/$farmid/batchs',\r\n\r\n  WEIGHING: 'farms_data/$farmid/pens/$penid/weighings/',\r\n  GRAPH: 'farms_data/$farmid/Graph/$graphid/',\r\n\r\n  COMMENTS: 'farms_data/$farmid/datas/comments/',\r\n  FARMDATAS: 'farms_data/$farmid/datas/',\r\n  SHARES: 'shareData'\r\n}\r\n\r\nexport const Actions = {\r\n  SIGN: 'sign',\r\n\r\n  FETCH: 'fetch',\r\n  CREATE: 'create',\r\n  UPDATE: 'update',\r\n  MOVE: 'move',\r\n  DELETE: 'delete',\r\n  CLEAR: 'clear',\r\n  ADD: 'add',\r\n}\r\n\r\nexport const Operations = {\r\n  ADD: 'Add pig',\r\n  MOVE: 'Move pig',\r\n  LOST: 'Lost pig',\r\n  SOLD: 'Sold pig',\r\n  NOTE: 'Pen Note',\r\n}\r\n//#endregion\r\n\r\n//#region Formaters\r\nfunction format_num(num) {\r\n  if (num < 10){\r\n    num = \"0\"+num\r\n  }\r\n  return num;\r\n}\r\nexport function format_Time(time) {\r\n  var s = new Date(parseInt(time));\r\n  var datetime = format_num(s.getDate()) + \"/\" + format_num(s.getMonth() +1) + \"/\" + s.getFullYear() + \" \" \r\n                  + format_num(s.getHours()) + \":\" + format_num(s.getMinutes()) + \":\" + format_num(s.getSeconds());\r\n  return datetime\r\n}\r\n\r\nvar reA = /[^a-zA-Z]/g;\r\nvar reN = /[^0-9]/g;\r\nfunction sortAlphaNum(a, b) {\r\n  var aA = a.replace(reA, \"\");\r\n  var bA = b.replace(reA, \"\");\r\n  if (aA === bA) {\r\n    var aN = parseInt(a.replace(reN, \"\"), 10);\r\n    var bN = parseInt(b.replace(reN, \"\"), 10);\r\n    return aN === bN ? 0 : aN > bN ? 1 : -1;\r\n  } else {\r\n    return aA > bA ? 1 : -1;\r\n  }\r\n}\r\n\r\nexport function sortObject(o) {\r\n  var sorted = {},\r\n  key, a = [];\r\n\r\n  for (key in o) {\r\n    if (o.hasOwnProperty(key) && key !== \"__jsogObjectId\" && key !== \"update_time\") {\r\n      a.push(key);\r\n    }\r\n  }\r\n  a.sort(sortAlphaNum);\r\n\r\n  for (key = 0; key < a.length; key++) {\r\n    sorted[a[key]] = o[a[key]];\r\n  }\r\n  return sorted;\r\n}\r\n\r\nexport function DataStringCheck(data) {\r\n  if (!data || data === \"\"){\r\n    return false\r\n  }\r\n  if (!typeof(data) === 'string'){\r\n    return false\r\n  }else {\r\n    var first = data[0]\r\n    var numbers = '0123456789';\r\n    for(var i = 0; i < numbers.length;i++){\r\n      if(first === numbers[i]){\r\n        return false\r\n      }\r\n    }\r\n\r\n    var specialChars = '/[`!@#$%^&*()+\\-=\\[\\]{};\\':\"\\\\|,.<>\\/?~]/';\r\n    for(var i = 0; i < specialChars.length;i++){\r\n      if(data.indexOf(specialChars[i]) > -1){\r\n        return false\r\n      }\r\n    }\r\n  }\r\n  return true\r\n}\r\n//#endregion\r\n\r\n//#region Data gets\r\nexport function GetWeight_FromPen(PenId, WeighingsStore = null, AfterTime = null, BeforeTime = null) {\r\n  //PenId: Parrent Get ellement (ID),\r\n  //WeighingsStore: LocalDataStore.weighings,\r\n  //AfterTime: Only data after specefied Time,\r\n  //BeforeTime: Only data before specefied Time\r\n  var Weighing = null;\r\n\r\n  if (PenId, WeighingsStore){\r\n    for (const _weighing in WeighingsStore[PenId]) {\r\n      var weighing = WeighingsStore[PenId][_weighing]\r\n      if (weighing && (!Weighing || Weighing.time < weighing.time)) {\r\n        if ((!AfterTime || weighing.time >= AfterTime) &&\r\n          (!BeforeTime || weighing.time <= BeforeTime)) {\r\n          Weighing = weighing\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return Weighing;\r\n}\r\n\r\nexport function GetBatch_FromPen(localDataStore, PenId) {\r\n  if (localDataStore.batchs) {\r\n    //Get batch form pen\r\n    for (const _batch in localDataStore.batchs) {\r\n      var batch = localDataStore.batchs[_batch]\r\n      if (batch.hasOwnProperty(\"pens\") && batch.pens[PenId] != null) {\r\n        return localDataStore.batchs[_batch]\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function GetStats_FromPen(PenId, PenData, localDataStore, StartDate, EndDate, PenWeighings = null){\r\n  var Animals = 0;\r\n  var PenWeight = 0\r\n  var PenGrowth = 0\r\n  var AveragePenGrowth = 0;\r\n\r\n  if (PenData.datas && PenData.datas.count || PenData.count) {\r\n    if (PenData.count) Animals += PenData.count\r\n    else Animals += PenData.datas.count\r\n  }\r\n  \r\n  if (localDataStore.weighings && localDataStore.weighings[PenId]) {\r\n    var GrowthCount = 0\r\n\r\n    var lastDate = 0\r\n    var LastWeight = undefined;\r\n    var LastWeightDay = undefined;\r\n    var FirstWeight = undefined;\r\n\r\n    if (!PenWeighings) PenWeighings = localDataStore.weighings[PenId]\r\n    if (PenWeighings) {\r\n      Object.keys(PenWeighings).forEach((weight) => {\r\n        var Weight = PenWeighings[weight]\r\n        if (Weight.time >= StartDate && Weight.time <= EndDate && Weight.time > lastDate) {\r\n          PenWeight = Weight.weight\r\n          if (Weight.count) PenWeight = Weight.weight / Weight.count;\r\n\r\n          if (LastWeight !== undefined) {\r\n            PenGrowth = PenWeight - LastWeight\r\n            GrowthCount++;\r\n          }\r\n\r\n          lastDate = Weight.time\r\n          LastWeight = PenWeight\r\n          LastWeightDay = Weight.time\r\n          if (!FirstWeight) FirstWeight = Weight.time;\r\n        }\r\n      })\r\n    }\r\n\r\n    var now = new Date().getTime()\r\n    var isVirtual = false;\r\n    if (StartDate && EndDate) {\r\n      var Batch = GetBatch_FromPen(localDataStore,PenId)\r\n      var TempGraph = GetCurve_FromBatch(Batch, localDataStore.graphs)\r\n      var BatchEndDate = EndDate;\r\n      var Predict = CurvePredict(localDataStore, PenId, Batch, TempGraph)\r\n      if (Predict != null && Predict.Now && now > new Date(lastDate).getDate()) {\r\n        PenWeight = Predict.Now\r\n        if (LastWeight !== undefined) {\r\n          PenGrowth += PenWeight - LastWeight\r\n          GrowthCount++;\r\n        }\r\n        var _date = new Date(Predict.lastWeighing.time + Predict.Addition)\r\n        _date.setDate(_date.getDate() + Predict.days)\r\n        LastWeightDay = _date.getTime()\r\n        isVirtual = true\r\n      }\r\n      if (Predict && Predict.lastWeighing && Predict.days) {\r\n        var tempEnd = new Date(EndDate).getTime()\r\n        var date = new Date(Predict.lastWeighing.time)\r\n        date.setDate(date.getDate() + Predict.days)\r\n        tempEnd = date.getTime()\r\n        if (Predict.Addition) {\r\n          tempEnd += Predict.Addition\r\n        }\r\n        if (EndDate === BatchEndDate || EndDate < tempEnd) {\r\n          EndDate = tempEnd;\r\n        }\r\n      }\r\n    }\r\n    if (GrowthCount > 0) {\r\n      var Growth = (PenGrowth / GrowthCount)\r\n      var days = (LastWeightDay - FirstWeight) / 86400000\r\n      Growth = Growth / days\r\n      AveragePenGrowth += Growth //AverageGrowth for specefic pen\r\n    }\r\n  }\r\n  return { Animals, PenWeight, AveragePenGrowth, EndDate, isVirtual }\r\n}\r\n\r\nexport function GetStats_FromBatch(Batch, localDataStore, Closed=true) {\r\n  var isVirtual = false;\r\n  var PenCount = 0;\r\n  var Animals = 0\r\n  var CollectedWeight = 0;\r\n  var CollectedGrowth = 0;\r\n  \r\n  var isClosed = (Batch.state && Batch.state === \"Closed\")?true:false\r\n\r\n  var TempGraph = GetCurve_FromBatch(Batch, localDataStore.graphs)\r\n  if (!TempGraph) return null;\r\n  var TargetWeight = TempGraph.data[TempGraph.data.length -1]\r\n  var EndDate = GetBatchEnd(Batch, TempGraph)\r\n  var StartDate = Batch.time;\r\n\r\n  var PenEnds = 0\r\n  if (Batch && Batch.pens && localDataStore.pens) {\r\n    Object.keys(Batch.pens).reverse().filter(e => (e !== '__jsogObjectId')).forEach(Batch_Pen => {\r\n      if (localDataStore && localDataStore.pens && localDataStore.pens[Batch_Pen] && localDataStore.weighings && localDataStore.weighings[Batch_Pen] || isClosed) {\r\n        var Pen = isClosed?Batch.pens[Batch_Pen]:localDataStore.pens[Batch_Pen]\r\n        PenCount++\r\n        \r\n        var PenWeighings = isClosed?Batch.closed.weighings[Batch_Pen]:localDataStore.weighings[Batch_Pen]\r\n        if (PenWeighings) {\r\n          var PenStats = GetStats_FromPen(Batch_Pen, Pen, localDataStore, StartDate, EndDate, PenWeighings)\r\n          Animals += PenStats.Animals;\r\n          var PenWeight = PenStats.PenWeight\r\n          if (PenWeight === 0) {\r\n            PenCount--\r\n          } else {\r\n            CollectedWeight += PenWeight\r\n            CollectedGrowth += PenStats.AveragePenGrowth\r\n            if (PenEnds < PenStats.EndDate) PenEnds = PenStats.EndDate\r\n            if (!isVirtual) isVirtual = PenStats.isVirtual\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  if (PenEnds > 0) EndDate = PenEnds\r\n  var AverageWeight = CollectedWeight / PenCount\r\n  AverageWeight = parseFloat(AverageWeight).toFixed(2)\r\n  var AverageGrowth = CollectedGrowth / PenCount\r\n  AverageGrowth = parseFloat(AverageGrowth).toFixed(2)\r\n\r\n  return {StartDate, EndDate, TargetWeight, PenCount, Animals, AverageWeight, AverageGrowth, isClosed, isVirtual}\r\n}\r\n\r\nexport function GetCurve_FromBatch(Batch, GraphsStore = null, CurrentData = null) {\r\n  //Batch: Parrent Get ellement,\r\n  //GraphsStore: LocalDataStore.graphs,\r\n  //CurrentData: Data state get,\r\n  if (Batch) {\r\n    if (Batch.gcurve && Batch.state && Batch.state === DataStates.CLOSED) {\r\n      return Batch.gcurve;\r\n    }\r\n    if (GraphsStore) {\r\n      if (CurrentData && (typeof CurrentData === 'string' || CurrentData.curveId)) {\r\n        var Id = (typeof CurrentData === 'string')? CurrentData: CurrentData.curveId\r\n        return GraphsStore[Id];\r\n      }\r\n      if (Batch.gcurve){\r\n        return GraphsStore[Batch.gcurve];\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function GetBatchEnd(Batch, TempCurve){\r\n  if (Batch && Batch.time && TempCurve){\r\n    var currentTime = new Date(Batch.time) //Does not allow weight's after Batch end\r\n    for (var i = 0; i < TempCurve.data.length; i++) {\r\n      if (i < TempCurve.data.length -1) {\r\n        currentTime = new Date(AccumulateTime(currentTime, TempCurve.periode))\r\n      }\r\n    }\r\n    return currentTime.getTime();\r\n  }\r\n  return null\r\n}\r\n//#endregion\r\n\r\n//#region Curve Functions\r\nexport function AccumulateTime(Time, PeriodeLength) {\r\n  var NewTime = new Date(Time.getTime())\r\n  switch(PeriodeLength) {\r\n    case \"Days\":\r\n    //86.400.000 ms\r\n    NewTime.setDate(NewTime.getDate() + 1)\r\n    break;\r\n    case \"Month\":\r\n    NewTime.setMonth(NewTime.getMonth() + 1)\r\n    break;\r\n    case \"Weeks\":\r\n    default:\r\n    NewTime.setDate(NewTime.getDate() + 7)\r\n    break;\r\n  }\r\n  return NewTime;\r\n}\r\n\r\n//Get Today-point expected data and virtual simulation For PenId with Batch / or given\r\nexport function get_DataSpot_FromData(localDataStore, PenId, Batch, Closed = false) {\r\n  if (localDataStore.weighings && localDataStore.weighings[PenId]) {\r\n    var Weighing = null;\r\n\r\n    //get newest weighing\r\n    for (const _weighing in localDataStore.weighings[PenId]) {\r\n      var weighing = localDataStore.weighings[PenId][_weighing]\r\n      if (weighing && (!Weighing || Weighing.time < weighing.time)) { \r\n        Weighing = weighing\r\n      }\r\n    }\r\n\r\n    if (Weighing) {\r\n      var weight = Weighing.weight\r\n      weight = weight / Weighing.count\r\n      if (weight && !isNaN(weight)) {\r\n        if (!Batch) {\r\n          //Get batch form pen\r\n          for (const _batch in localDataStore.batchs) {\r\n            var batch = localDataStore.batchs[_batch]\r\n            if (batch.hasOwnProperty(\"pens\") && batch.pens[PenId] != null) {\r\n              Batch = localDataStore.batchs[_batch]\r\n              //break; //diffrenc from web ??? (needed in mobile..)\r\n            }\r\n          }\r\n        }\r\n\r\n        if (Batch && Batch.time && Batch.datas \r\n          && localDataStore.graphs && localDataStore.graphs[Batch.gcurve]) {\r\n          var Curve = localDataStore.graphs[Batch.gcurve]\r\n          var WeighingTime = Weighing.time\r\n\r\n          if (Closed || (WeighingTime > Batch.time && (!Batch.state || Batch.state !== \"Closed\"))) {\r\n            var StartTime = Batch.time\r\n            var EndTime = Batch.time\r\n            var index = 0;\r\n            var currentTime = new Date(StartTime)\r\n            for (index = 0; index < Curve.data.length-1; index++) {\r\n              currentTime = new Date(AccumulateTime(currentTime, Curve.periode))\r\n              EndTime = currentTime.getTime()\r\n              if (EndTime >= WeighingTime) {\r\n                break;\r\n              } else {\r\n                StartTime = EndTime\r\n              }\r\n            }\r\n            //var EndDate = EndDate = currentTime.getTime();\r\n            \r\n            var Keys = Object.keys(Curve.data);\r\n            var DataSpot = get_DataSpot([StartTime, EndTime], [Curve.data[Keys[index]], Curve.data[index +1]], new Date().getTime(), weight, WeighingTime)\r\n            DataSpot.Batch = Batch\r\n            return DataSpot\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return null\r\n}\r\n\r\n//Get point expected data and virtual simulation from data.\r\n//ExValue = Expected value if slope continues, for spots given (or inbetween).\r\n//VirData = Virtual calculation for Data progress to DataTime, if slope continues.\r\nexport function get_DataSpot(MinMax_Time, MinMax_Data, FindTime, Data, DataTime) {\r\n  var ExValue = null\r\n  var VirData = null\r\n  var ExTime = null\r\n  if (FindTime) {\r\n    var slope = GetSlope_Between(MinMax_Time, MinMax_Data)\r\n    var FindX = FindTime- MinMax_Time[0]\r\n    // ExValue = (FindX * Slope) + MinY             // Setting FindTime, due b then = Min data.. (b is y = 0)\r\n    ExValue = (FindX * slope) + MinMax_Data[0]          // ( X * a ) + b = Expeted data for spot on CalcTime\r\n    \r\n    if (Data && DataTime) {\r\n      var Findx2 = DataTime- MinMax_Time[0]\r\n      var ExData = (Findx2 * slope) + MinMax_Data[0]    //Expeted data for given Time 2\r\n      \r\n      var DataDiff = ExData - Data;\r\n      VirData = ExValue + DataDiff;\r\n\r\n      ExTime = (Data - MinMax_Data[0]) / slope          // (y-b)/a = Expeted time for data\r\n      ExTime = MinMax_Time[0] + ExTime\r\n      ExTime = Math.floor(ExTime)\r\n    }\r\n  }\r\n  return {ExValue, VirData, ExTime}\r\n}\r\n\r\n//Get Slope Between two points\r\nfunction GetSlope_Between(MinMax_Time, MinMax_Data){\r\n  var minX = MinMax_Time[0]\r\n  var maxX = MinMax_Time[1]\r\n  var minY = MinMax_Data[0]\r\n  var maxY = MinMax_Data[1]\r\n\r\n  //Slope = DeltaY / DeltaX\r\n  var slope = (maxY - minY) / (maxX - minX)\r\n  if (minY > minX) slope = -slope;\r\n  return slope\r\n}\r\n\r\nexport function CurvePredict(localDataStore, PenId, Batch, TempCurve) {\r\n  if (localDataStore) {\r\n    if (!PenId && Batch && Batch.pens){\r\n      PenId = Object.keys(Batch.pens).filter(e => (e !== '__jsogObjectId'))[0]\r\n    }\r\n    if (!Batch) {\r\n      Batch = GetBatch_FromPen(localDataStore, PenId)\r\n    }\r\n    if (Batch && Batch.time) {\r\n      if (!TempCurve) {\r\n          TempCurve = GetCurve_FromBatch(Batch, localDataStore.graphs)\r\n      }\r\n      if (TempCurve && TempCurve.data) {\r\n        var BatchEndDate = GetBatchEnd(Batch, TempCurve)\r\n        var Weighing = GetWeight_FromPen(PenId, localDataStore.weighings, Batch.time, BatchEndDate);\r\n        if (Weighing && Weighing.weight) {\r\n          var weight = Weighing.weight\r\n          if (Weighing.count) weight = weight / Weighing.count\r\n          var Weighing2 = GetWeight_FromPen(PenId, localDataStore.weighings, Batch.time, Weighing.time -1);\r\n          var weight2 = Weighing2?Weighing2.weight:0\r\n          if (Weighing2 && Weighing2.count) weight2 = weight2 / Weighing2.count\r\n\r\n          var StartIndex = \"none\";\r\n          var PredictCurve = { periode: TempCurve.periode, data: [] }\r\n\r\n          var now = new Date(Date.now())\r\n          now = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime()\r\n          var CurrentTime = new Date(Batch.time)\r\n          var Temp_CurrentIndex = 0;\r\n          for (var index = 0; index < TempCurve.data.length; index++) {\r\n            if (CurrentTime.getTime() <= now) {\r\n              CurrentTime = new Date(AccumulateTime(CurrentTime, TempCurve.periode))\r\n              Temp_CurrentIndex++;\r\n            }\r\n\r\n            if (weight <= TempCurve.data[index]) {\r\n              if (StartIndex === \"none\") {\r\n                StartIndex = index\r\n              }\r\n              PredictCurve.data.push(TempCurve.data[index])\r\n            }\r\n          }\r\n          if (weight < weight2){\r\n            StartIndex = StartIndex -1\r\n            PredictCurve.data.unshift(TempCurve.data[StartIndex])\r\n          }\r\n\r\n          var PredictStart = new Date(Batch.time)\r\n          for (let index = 0; index < StartIndex; index++) {\r\n            PredictStart = new Date(AccumulateTime(PredictStart, TempCurve.periode))\r\n          }\r\n\r\n          PredictCurve.Now = weight\r\n          PredictCurve.TempEx = TempCurve.data[Temp_CurrentIndex]\r\n          if (StartIndex !== \"none\") {\r\n            var DataSpot = null\r\n            if (Weighing2) {\r\n              DataSpot = get_DataSpot([Weighing2.time, Weighing.time], [weight2, weight], Weighing.time, TempCurve.data[StartIndex], PredictStart.getTime())\r\n            }\r\n            if (DataSpot && DataSpot.ExTime) {\r\n              PredictCurve.FirstSpot = DataSpot.ExTime \r\n              PredictCurve.Addition = DataSpot.ExTime - Weighing.time\r\n            } else {\r\n              PredictCurve.FirstSpot = new Date(Weighing.time + 86400000)\r\n              PredictCurve.Addition = 86400000\r\n            }\r\n\r\n            if (BatchEndDate) {\r\n              var now = new Date(Date.now())\r\n              if (BatchEndDate <= now) {\r\n                now = new Date(BatchEndDate)\r\n              }\r\n\r\n              now = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime()\r\n              CurrentTime = new Date(Weighing.time)\r\n              var CurrentIndex = 0;\r\n              for (var index = 0; index < PredictCurve.data.length; index++) {\r\n                if (CurrentTime.getTime() < now) {\r\n                  CurrentTime = new Date(AccumulateTime(CurrentTime, TempCurve.periode))\r\n                  CurrentIndex ++;\r\n                }\r\n              }\r\n              CurrentIndex--\r\n              \r\n              var WeightNow = PredictCurve.data[CurrentIndex];\r\n              if (WeightNow) PredictCurve.Now = WeightNow\r\n              else PredictCurve.Now = weight\r\n            }\r\n          }\r\n\r\n          var days = 0;\r\n          if (TempCurve.periode === \"Days\") days = PredictCurve.data.length\r\n          else if (TempCurve.periode === \"Weeks\") days = (PredictCurve.data.length) * 7\r\n          PredictCurve.days = days\r\n          PredictCurve.lastWeighing = Weighing\r\n\r\n          PredictCurve.Batch = Batch;\r\n          return PredictCurve;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n}\r\n//#endregion","import { Platform, Alert } from 'react-native'\n\nimport { UserStates } from '../Stores/Firebase/Selectors'\nimport { Actions, DataRefs, format_Time } from '../Stores/Firebase/Selectors';\n\nlet auth, database, firebase;\nif (Platform.OS !== 'web') {\n  //#region App version imports\n  auth = require('@react-native-firebase/auth').default;\n  database = require('@react-native-firebase/database').default;\n  //#endregion\n} else {\n  //#region Web Version imports\n  firebase = require('firebase/app').default;\n  require('firebase/auth').default;\n  require('firebase/messaging').default;\n  require('firebase/database').default;\n  //#endregion\n}\n\n//#region Firebase specefic services\nasync function isPermit_UserPermission() {\n  const authStatus = await firebase.messaging().requestPermission();\n  const enabled =\n    authStatus === firebase.messaging.AuthorizationStatus.AUTHORIZED ||\n    authStatus === firebase.messaging.AuthorizationStatus.PROVISIONAL;\n\n  if (!enabled) {\n    console.log('Authorization status:', authStatus);\n    return false;\n  }\n  return true;\n}\n\nfunction requestUserPermission() {\n  return new Promise((resolve, reject) => {\n    if ((Platform.OS === \"ios\" || Platform.OS == \"android\") && !isPermit_UserPermission()) {\n      resolve('This application needs premissions to be using notifications')\n    }\n    resolve(null)\n  })\n}\n\nasync function is_getToken() {\n  var fcmToken = \"\"\n  try{\n    fcmToken = await firebase.messaging().getToken();\n    console.log('Device_token: ', fcmToken)\n  }catch(error){\n    console.log(error)\n  }\n  return fcmToken;\n}\n\nfunction requestFirebaseToken() {\n  return new Promise((resolve, reject) => {\n    var token;\n    if (firebase.messaging.isSupported()) {\n      try {\n        token = is_getToken();\n      } catch{}\n    }\n    if (!token) {\n      resolve('Could not find Firebase messaging Token')\n    }\n    resolve(token)\n  })\n}\n\nfunction wrappedAlert(title, message, okText, _cancelable) {\n  return new Promise(resolve => {\n    Alert.alert(\n      title,\n      message,\n      [{text: okText, onPress: function() { resolve(); }}],\n      {cancelable: _cancelable, onDismiss: function() {resolve(); }},\n    );\n  });\n}\n//#endregion\n\n//#region Firebase Auth services\nfunction createFirebaseUserWithemailandpassword({Email, Pass}) {\n  return new Promise((resolve, reject) => {\n    firebase.auth().createUserWithEmailAndPassword(Email,Pass).then(() => {\n      var User = firebase.auth().currentUser;\n      var Name = User.displayName ? User.displayName : User.email\n      actionStarting(DataRefs.USERSDATA, Actions.UPDATE, {UserId: User.uid, Data: {\n        name: Name,\n        state: UserStates.STARTER,\n      }}).then((_data) => {\n        User.updateProfile({\n          displayName: Name\n        }).then((data) => {\n          User.sendEmailVerification().then(function() {\n            // Email sent.\n            resolve(null)\n          }).catch(function(error) {\n            console.log(\"error in send EmailVerification\", error)\n            resolve({error:error.code, viewError:'Verification could not be send'})\n          });\n        }).catch(function(error) {\n          console.log(\"update profile\")\n          resolve({error:error.code, viewError:'Update error, please refresh'})\n        });\n      })\n      \n    }).catch(error => {\n      console.log(\"UserCreate Error: \", error);\n      if (error.code === 'auth/email-already-in-use') {\n        resolve({error:error.code, viewError:'The email address is already in use.'})\n        //Should not exploid the users... (this could be used as a find user-mails) ???\n      }\n      else if (error.code === 'auth/invalid-email') {\n        resolve({error:error.code, viewError:'The email addres is invalid.'})\n      }\n      else if (error.code === 'auth/weak-password') {\n        resolve({error:error.code, viewError: error.message})\n      } else {\n        resolve({error:error.code, viewError: 'Something went wrong'})\n      }\n    })\n  })\n}\n\nfunction signinWithemailandpassword({Email, Pass}){\n  if (firebase.auth().currentUser){\n    if (firebase.auth().currentUser.email != Email){\n      const res = logoutUser()\n    }\n    else {\n      return new Promise((resolve, reject) => {\n        resolve(true)\n      })\n    }\n  }\n  return new Promise((resolve, reject) => {\n    firebase.auth().signInWithEmailAndPassword(Email,Pass).then(() => {\n      resolve(true)\n    }).catch(error => {\n      console.log(\"User Signin Error: \", error);\n\n      if (error.code === 'auth/invalid-email') {\n        resolve({error:error.code, viewError:'The email addres is invalid.'})\n      }\n      else {\n        resolve({error:'Could not singin', viewError:'Could not singin'})\n      }\n    })\n  })\n}\n\nfunction sendResetPassword({Email}){\n  return new Promise((resolve, reject) => {\n    firebase.auth().sendPasswordResetEmail(Email).then(() => {\n      resolve(true)\n    }).catch(error => {\n      console.log(\"User resetPass error:\", error);\n      if (error.code === 'auth/user-not-found'){\n        //Should not exploid the users... (this could be used as a find user-mails)\n      }\n      resolve(null)\n    })\n  })\n}\n\nfunction logoutUser(){\n  return new Promise((resolve, reject) => {\n    firebase.auth().signOut().then(() => {\n      resolve({type:Actions.UPDATE, path:DataRefs.FIREBASEUSER, data:null })\n    }).catch(error => {\n      console.log(\"User logout error:\", error);\n      resolve({type:Actions.UPDATE, path:DataRefs.FIREBASEUSER, data:null })\n    })\n  })\n}\n\nfunction refreshUser(){\n  return new Promise((resolve, reject) => {\n    var user = firebase.auth().currentUser\n    if (user){\n      firebase.auth().currentUser.reload().then((data) => {\n        user = firebase.auth().currentUser\n        console.log(data, user)\n        //resolve({type:Actions.UPDATE, path:DataRefs.FIREBASEUSER, data:null })\n      })\n    }\n    resolve(null)\n  })\n}\n//#endregion\n\n//#region Master Control\nfunction actionStarting(ref, action, params = null){\n  const CurrentUser = firebase.auth().currentUser;\n  switch(ref){\n    case DataRefs.USERSDATA:\n      switch(action){\n        case Actions.FETCH:\n          return fetchUser(params)\n        case Actions.CREATE:\n          if (params.hasOwnProperty(\"UserData\")) {\n            return new Promise((resolve, reject) => {\n              var Data = params[0]\n              createFarm({Data:{name: params.Farms.name}}).then((farmid) => {\n                updateFarmData({FarmId:farmid, Data:{sections:params.Sections, pens: params.Pens}}).then(() => {\n                  updateUserData({Data:{state: params.UserData.state, farms: {[farmid]: true}}}).then(() => {\n                    fetchUser(CurrentUser.uid).then((data) => {\n                      var Data = data.data\n                      resolve({type:Actions.UPDATE, path:DataRefs.FIREBASEUSER, data:Data })\n                    });\n                  })\n                })\n              })\n            })\n          }\n          break;\n        case Actions.UPDATE:\n          return updateUserData(params)\n        case Actions.SIGN:\n          if (!params){\n            return logoutUser()\n          }else {\n            if (params.hasOwnProperty(\"refresh\")){ // TODO: verify\n              return refreshUser()\n            } else return signinWithemailandpassword(params)\n          }\n          break;\n        case Actions.CLEAR:\n          if (!CurrentUser) {\n            return {type:Actions.CLEAR, path:DataRefs.USERS, data:{}}\n          } else {\n            return {type:Actions.CLEAR, path:DataRefs.USERSDATA, data:{}}\n          }\n          break;\n      }\n      break;\n\n    case DataRefs.USERS:\n      switch(action){\n        case Actions.FETCH:\n          return fetchUser(params, true)\n        case Actions.CREATE:\n          if (params.hasOwnProperty(\"Email\") && params.hasOwnProperty(\"Pass\")) return createFirebaseUserWithemailandpassword(params)\n          else if (params.hasOwnProperty(\"Email\")) return sendResetPassword(params)\n          break;\n        case Actions.UPDATE:\n          return {type:Actions.UPDATE, path:DataRefs.FIREBASEUSER, data:params}\n        case Actions.CLEAR:\n          return {type:Actions.CLEAR, path:DataRefs.USERS, data:{}}\n      }\n      break;\n\n    case DataRefs.FARMS:\n      switch(action){\n        case Actions.FETCH:\n          return fetchFarm(params);\n        case Actions.CREATE:\n          break;\n        case Actions.UPDATE:\n          console.log(\"??\")\n          break;\n        case Actions.CLEAR:\n          return {type:Actions.CLEAR, path:DataRefs.FARMS, data:{}}\n      }\n      break;\n\n    case DataRefs.FARMDATAS:\n      console.log(\"FarmsDatas ???\") //TODO: propperly no use.. (clean up)\n      break;\n\n    case DataRefs.SECTIONS:\n      switch(action){\n        case Actions.FETCH:\n          return fetchSections(params);\n        case Actions.CREATE:\n          break;\n        case Actions.UPDATE:\n          break;\n        case Actions.CLEAR:\n          return {type:Actions.CLEAR, path:DataRefs.SECTIONS, data:{}}\n      }\n      break;\n\n    case DataRefs.PENS:\n      switch(action){\n        case Actions.FETCH:\n          return fetchPens(params);\n        case Actions.CREATE:\n          return createNewPen(params);\n        case Actions.DELETE:\n          return deletePen(params)\n        case Actions.UPDATE:\n          return updatePen(params);\n        case Actions.CLEAR:\n          return {type:Actions.CLEAR, path:DataRefs.PENS, data:{}}\n      }\n      break;\n\n    case DataRefs.PIGS:\n      switch(action){\n        case Actions.FETCH:\n          return fetchPigs(params);\n        case Actions.CREATE:\n          return updatePigdata(params);\n        case Actions.UPDATE:\n          break;\n        case Actions.CLEAR:\n          return {type:Actions.CLEAR, path:DataRefs.PIGS, data:{}}\n      }\n      break;\n\n    case DataRefs.BATCHS:\n      switch(action){\n        case Actions.FETCH:\n          return fetchBatchs(params)\n        case Actions.CREATE:\n          return createBatchs(params)\n        case Actions.UPDATE:\n          return updateBatchs(params)\n        case Actions.DELETE:\n          //return deleteBatch(params)\n          break;\n        case Actions.CLEAR:\n          return {type:Actions.CLEAR, path:DataRefs.BATCHS, data:{}}\n      }\n      break;\n\n    case DataRefs.WEIGHING:\n      switch(action){\n        case Actions.FETCH:\n          return fetchWeights(params);\n        case Actions.CREATE:\n          return createWeight(params);\n        case Actions.UPDATE:\n          break;\n        case Actions.CLEAR:\n          return {type:Actions.CLEAR, path:DataRefs.WEIGHING, data:{}}\n      }\n      break;\n\n    case DataRefs.COMMENTS:\n      switch(action) {\n        case Actions.FETCH:\n          return fetchComments(params);\n        case Actions.CREATE:\n          return createComment(params);\n      }\n      break;\n\n    case DataRefs.GRAPH:\n      switch(action){\n        case Actions.FETCH:\n          return fetchGraphData(params);\n        case Actions.CREATE:\n          return updateGraphData(params);\n        case Actions.UPDATE:\n          return updateGraphData(params);\n        case Actions.CLEAR:\n          return {type:Actions.CLEAR, path:DataRefs.GRAPH, data:{}}\n      }\n      break;\n  }\n  return new Promise((resolve, reject) => {\n    resolve({error: \"Unknown Action\"})\n  })\n}\n//#endregion\n\nfunction SetUpdateTime(DataRef) {\n  return new Promise((resolve, reject) => {\n    console.log(\"Setting Update Time\")\n    firebase.database().ref(DataRef).update({\n      update_time: firebase.database.ServerValue.TIMESTAMP,\n    }).then(() => {\n      resolve(true)\n    }).catch(error => {\n      console.log(error)\n      /*if (error.code === 'database/permission-denied') {\n        console.log(\"Batch update was permission denied. \");\n      }else if (error.code) {\n        console.log(\"Batch update Error: \", error);\n      }*/\n      resolve(true)\n    });\n  })\n}\nfunction CheckDataTime(DataRef, DataTime) {\n  return new Promise((resolve, reject) => {\n    if (!DataTime) resolve(true)\n    firebase.database().ref(DataRef + \"/update_time\").once('value').then((_Time) => {\n      var UpdateTime = _Time.val()\n      if (!UpdateTime) {\n        SetUpdateTime(DataRef).then((res) => {\n          resolve(true)\n        })\n      } else {\n        if (DataTime) {\n          if (DataTime === \"SET\"){\n            SetUpdateTime(DataRef).then((res) => {\n              resolve(res)\n            })\n          } else if (DataTime < UpdateTime){\n            resolve(true)\n          }\n          else resolve(false)\n        }else resolve(true)\n      }\n    })\n  })\n}\n\n//#region User data Controls\nfunction fetchUser({UserId}, List = false) {\n  var user = \"\";\n  if (UserId) user = UserId\n  else if (!List && firebase.auth().currentUser) user = firebase.auth().currentUser.uid;\n\n  if (user || List) {\n    const ref = \"users/\" + user;\n    return new Promise((resolve, reject) => {\n      firebase.database().ref(ref).once('value').then((userData) => {\n        var data = userData.val()\n        if (!List) {\n          resolve({type:Actions.UPDATE, path:DataRefs.USERSDATA, data:{data}})\n        } else {\n          resolve({type:Actions.UPDATE, path:DataRefs.USERS, data:{data}})\n        }\n      }).catch(error => {\n        console.log(error)\n        if (error.code === 'database/permission-denied') {\n          console.log(\"User update was permission denied. \");\n        }else if (error.code) {\n          console.log(\"User update Error: \", error);\n        }\n        resolve({error:\"An error occurred\"})\n      })\n    })\n  }\n  else return new Promise((resolve, reject) => {\n    console.log(\"User uid in fecth unknown\");\n    resolve(null)\n  })\n}\n\nfunction updateUserData({UserId, Data}) {\n  const user = UserId? UserId: firebase.auth().currentUser.uid;\n  if (user) {\n    const ref = \"users/\" + user;\n    return new Promise((resolve, reject) => {\n      firebase.database().ref(ref).update(\n        Data\n      ).then((data) => {\n        resolve(null)\n      }).catch(error => {\n        if (error.code === 'database/permission-denied') {\n          console.log(\"User update was permission denied. \");\n        }else if (error.code) {\n          console.log(\"User update Error: \", error);\n        }\n        resolve({error:\"An error occurred\"})\n      })\n    }) \n  } else return new Promise((resolve, reject) => {\n    console.log(\"User uid in fecth unknown\");\n    resolve(null)\n  })\n}\n//#endregion\n\n//#region Farm info data Controls\nfunction fetchFarm({FarmId}) {\n  var ref = \"farms/\" + FarmId\n  return firebase.database().ref(ref).once('value').then((_farmData) => {\n    //TODO:Multiple farms\n    var data = _farmData.val()\n    if (FarmId) {\n      data = {[FarmId]:data}\n    }\n    return {type:Actions.UPDATE, path:DataRefs.FARMS, data: data}\n  })\n  /*} else return new Promise((resolve, reject) => {\n    console.log(\"Farm uid in fecth unknown\");\n    resolve(null)\n  })*/\n}\n\nfunction updateFarm({FarmId, Data}) {\n  return new Promise((resolve, reject) => {\n    if (FarmId){\n      firebase.database().ref('farms/').update({\n        Data\n      }).then(()=> {\n        resolve(null)\n      })\n    } else {\n      const farm = firebase.database().ref('farms/').push()\n      const farmid = farm.key\n      farm.set({\n        Data\n      }).then(() => {\n        resolve(farmid)\n      }).catch(error => {\n        console.log(\"Create Farm Error: \", error);\n        resolve(false)\n      })\n    }\n  })\n}\n\nfunction createFarm({Data}){\n  const user = firebase.auth().currentUser;\n  const ref = \"users/\" + user.uid;\n\n  return new Promise((resolve, reject) => {\n    const farm = firebase.database().ref('farms/').push()\n    const farmid = farm.key\n    \n    farm.set({\n      email: user.email,\n      manager: user.displayName ? user.displayName : user.email,\n      name: Data.name\n    }).then(() => {\n      resolve(farmid)\n    }).catch(error => {\n      console.log(\"Create Farm Error: \", error);\n      resolve(false)\n    })\n  })\n}\n\nfunction updateFarmData({FarmId, Data}) {\n  if (FarmId) {\n    const ref = \"farms_data/\" + FarmId;\n    \n    return new Promise((resolve, reject) => {\n      firebase.database().ref(ref).update(\n        Data\n      ).then(() => {\n        resolve(null)\n      }).catch(error => {\n        if (error.code === 'database/permission-denied') {\n          console.log(\"Farm data update was permission denied. \");\n        }else if (error.code) {\n          console.log(\"User update Error: \", error);\n        }\n\n        resolve(false)\n      })\n    })\n  } else return new Promise((resolve, reject) => {\n    console.log(\"Farm uid in fecth unknown\");\n    resolve(null)\n  })\n}\n//#endregion\n\n//#region Farm data Controls\n\n//#region Sections\nfunction fetchSections({FarmId, SectionId, DataTime}){\n  if (FarmId) {\n    var ref = \"farms_data/\" + FarmId + \"/sections\";\n    if (SectionId){\n      ref += \"/\" + SectionId\n    }\n    return new Promise((resolve, reject) => {\n      CheckDataTime(\"farms_data/\" + FarmId + \"/sections\", DataTime).then((DoFetch) => {\n        if (DoFetch) {\n          console.log(\"Sections fetch called\")\n          return firebase.database().ref(ref).once('value').then((_sectionidData) => {\n            resolve({type:Actions.UPDATE, path:DataRefs.SECTIONS, data:_sectionidData.val()})\n          })\n        }\n        else {\n          resolve(null)\n        }\n      })\n    })\n  }\n  return new Promise((resolve, reject) => {\n    console.log(\"Fecth Sections Error\");\n    resolve(null)\n  })\n}\n//#endregion\n\n//#region Pens\nfunction fetchPens({FarmId, PenId, DataTime}){\n  if (FarmId) {\n    var ref = \"farms_data/\" + FarmId + \"/pens\";\n    if (PenId){\n      ref += \"/\" + PenId\n    }\n    return new Promise((resolve, reject) => {\n      CheckDataTime(\"farms_data/\" + FarmId + \"/pens\", DataTime).then((DoFetch) => {\n        if (DoFetch){\n          console.log(\"Pens fetch Called\")\n\n          firebase.database().ref(ref).once('value').then((_pensData) => {\n            if (PenId) {\n              var penData = _pensData.val()\n              if (!penData) penData = {}\n              if (!penData.datas) penData.datas = {}\n              //if (!penData.datas.gcurve) penData.datas.gcurve = \"default\";\n      \n              var pen = {[PenId]: penData};\n              resolve({type:Actions.UPDATE, path:DataRefs.PENS, data:pen})\n            } else {\n              resolve({type:Actions.UPDATE, path:DataRefs.PENS, data:_pensData.val()})\n            }\n          })\n        }\n        else {\n          resolve(null)\n        }\n      })\n    })\n  } \n  return new Promise((resolve, reject) => {\n    console.log(\"Fecth Pens Error\");\n    resolve(null)\n  })\n}\n\nfunction createNewPen({FarmId, PenId, SectionId}){\n  if (FarmId) {\n    var ref = \"farms_data/\" + FarmId + \"/\";\n    return new Promise((resolve, reject) => {\n      if (PenId){\n        var ref2 = ref + \"pens/\" + PenId + \"/\"\n        firebase.database().ref(ref2).set({\n          section: SectionId,\n        }).then(() => {\n          firebase.database().ref(ref + \"sections/\" + SectionId + \"/pens\").update({\n            [PenId]: true,\n          }).then(() => {\n            firebase.database().ref(ref + \"sections/\").update({\n              update_time: firebase.database.ServerValue.TIMESTAMP,\n            }).then(() => {\n              fetchPens({FarmId: FarmId, PenId: PenId, DataTime: \"SET\"}).then((_Pen) => {\n                resolve({type:Actions.UPDATE, path:DataRefs.PENS, data:_Pen.data})\n              });\n            });\n          });\n        });\n      }\n    })\n  }\n}\n\nfunction deletePen({FarmId, PenId, SectionId}){\n  if (FarmId && PenId){\n    var ref = \"farms_data/\" + FarmId + \"/\";\n    return new Promise((resolve, reject) => {\n      firebase.database().ref(ref + \"pens/\" + PenId).remove().then(() => {\n        if (SectionId){\n          firebase.database().ref(ref + \"sections/\" + SectionId + \"/pens/\" + PenId).remove().then(() => {\n            firebase.database().ref(ref + \"sections/\").update({\n              update_time: firebase.database.ServerValue.TIMESTAMP,\n            }).then(() => {\n              fetchPens({FarmId: FarmId, PenId: PenId, DataTime: \"SET\"}).then((_Pen) => {\n                resolve({type:Actions.UPDATE, path:DataRefs.PENS, data:_Pen.data})\n              })\n            });\n          })\n        }else {\n          resolve(null)\n        }\n      })\n    })\n  }\n}\n\nfunction updatePen({FarmId, PenId, Pen}){\n  if (FarmId) {\n    var ref = \"farms_data/\" + FarmId + \"/\";\n    return new Promise((resolve, reject) => {\n      if (PenId){\n        fetchPens({FarmId: FarmId, PenId: PenId}).then((_Pen) => {\n          var ref2 = ref + \"pens/\" + PenId + \"/\"\n          var data = Pen.datas\n          var Datas = {..._Pen.data[PenId].datas, ...data}\n          firebase.database().ref(ref2).update({\n            ...Pen,\n            datas: Datas\n          }).then(() => {\n            if (Pen.section) {\n              firebase.database().ref(ref + \"sections/\" + SectionId + \"/pens\").update({\n                [PenId]: true,\n              }).then(() => {\n                firebase.database().ref(ref + \"sections/\").update({\n                  update_time: firebase.database.ServerValue.TIMESTAMP,\n                }).then(() => {\n                  resolve(null)\n                });\n              });\n            }\n          });\n        })\n      }\n    })\n  }\n}\n//#endregion\n\n//#region Pigs\nfunction fetchPigs({FarmId, TagId}){\n  if (FarmId) {\n    var ref = \"farms_data/\" + FarmId + \"/pigs\";\n    if (TagId){\n      ref += \"/\" + TagId\n    }\n\n    return firebase.database().ref(ref).once('value').then((_pigsData) => {\n      if (TagId) {\n        var pigData = _pigsData.val()\n        if (!pigData) return null;\n        if (!pigData.datas) pigData.datas = {}\n        if (!pigData.datas.gcurve) pigData.datas.gcurve = \"default\";\n\n        var pig = {[TagId]: pigData};\n        return {type:Actions.UPDATE, path:DataRefs.PIGS, data:pig}\n      } else {\n        return {type:Actions.UPDATE, path:DataRefs.PIGS, data:_pigsData.val()}\n      }\n    })\n  }\n  return new Promise((resolve, reject) => {\n    console.log(\"Fecth Pigs Error\");\n    resolve(null)\n  })\n}\n\nfunction updatePigPen({FarmId, TagId, PenId, Action}) {\n  if (PenId) {\n    var ref2 = \"farms_data/\" + FarmId + \"/\" + \"pens/\" + PenId + \"/datas\"\n    return new Promise((resolve, reject) => {\n      firebase.database().ref(ref2 + \"/count\").once('value').then((counts) => {\n        var val = counts.val()\n        if (!val) val = 0\n        if (Action && !isNaN(Action)) {\n          val = parseInt(val) + parseInt(Action)\n        } else {\n          val = parseInt(val) +1\n        }\n        firebase.database().ref(ref2).update({\n          count: val,\n        }).then(() => {\n          fetchPens({FarmId: FarmId, PenId: PenId}).then((pen) => {\n            resolve({type:Actions.UPDATE, path:DataRefs.PENS, data:pen.data})\n          })\n        });\n      }).catch(error => {\n        console.log(\"Update pig pen Error: \", error);\n        resolve(null)\n      })\n    })\n  }else {\n    return new Promise((resolve, reject) => {\n      resolve(null)\n    })\n  }\n}\n\nfunction updatePigdata({FarmId, TagId, PenId, Action}) {\n  if (FarmId) {\n    var ref = \"farms_data/\" + FarmId + \"/\";\n    if (TagId) {\n      return new Promise((resolve, reject) => {\n        var ref2 = ref + \"pigs/\" + TagId + \"/\"\n        fetchPigs({FarmId: FarmId, TagId: TagId}).then((pig) => {\n          if (pig && pig.data) {\n            pig = pig.data[TagId]?pig.data[TagId]:null\n          }\n          if (!pig || !pig.hasOwnProperty('pen')){\n            firebase.database().ref(ref2).update({\n              pen: 0,\n            }).then(() => {\n              fetchPigs({FarmId: FarmId}).then((pigs) => {\n                console.log(\"?\", pigs)\n                resolve(null)\n                //resolve({type:Actions.UPDATE, path:DataRefs.PIGS, data:pigs})\n              })\n            })\n          }\n          else if (PenId && PenId != pig.pen) {\n            updatePigPen({FarmId: FarmId, TagId: TagId, PenId: pig.pen, Action:-1}).then((data)=>{\n              updatePigPen({FarmId: FarmId, TagId: TagId, PenId: PenId, Action:+1}).then((data)=>{\n                firebase.database().ref(ref2).update({\n                  pen: PenId\n                }).then(() => {\n                  fetchPigs({FarmId: FarmId}).then((pigs)=> {\n                    resolve({type:Actions.UPDATE, path:DataRefs.PIGS, data:pigs.data})\n                  })\n                })\n              })\n            })\n          } else {\n            resolve(null)\n          }\n        })\n      })\n    } else {\n      return new Promise((resolve, reject) => {\n        updatePigPen({FarmId: FarmId, TagId: TagId, PenId: PenId, Action:Action}).then((data) => {\n          resolve({type:Actions.UPDATE, path:DataRefs.PENS, data:data.data})\n        })\n      })\n    }\n  }\n}\n//#endregion\n\n//#region Batchs\nfunction fetchBatchs({FarmId, BatchId, Data, DataTime}) {\n  if (FarmId) {\n    var ref = \"farms_data/\" + FarmId + \"/batchs\";\n    if (BatchId){\n      ref += \"/\" + BatchId\n    }\n\n    return new Promise((resolve, reject) => {\n      CheckDataTime(\"farms_data/\" + FarmId + \"/batchs\", DataTime).then((DoFetch) => {\n        if (DoFetch) {\n          if (!Data) {\n            firebase.database().ref(ref).once('value').then((_batchdata) => {\n              if (BatchId) {\n                var batchdata = _batchdata.val()\n                if (!batchdata) return null;\n                if (!batchdata.datas) batchdata.datas = {}\n                if (!batchdata.pens) batchdata.pens = []\n                if (!batchdata.datas.gcurve) batchdata.datas.gcurve = \"default\";\n\n                var batch = {[BatchId]: batchdata};\n                resolve({type:Actions.UPDATE, path:DataRefs.BATCHS, data:batch})\n              } else {\n                resolve({type:Actions.UPDATE, path:DataRefs.BATCHS, data:_batchdata.val()})\n              }\n            })\n          }\n          else if (BatchId) {\n            switch(Data){\n              case DataRefs.BATCHS:\n                ref += \"/\" + \"datas\"\n                return firebase.database().ref(ref).once('value').then((_batchdata) => {\n                  var data = {[BatchId]: {datas: _batchdata.val()}}\n                  resolve({type:Actions.UPDATE, path:DataRefs.BATCHS, data:data})\n                })\n              case DataRefs.PENS:\n                ref += \"/\" + \"pens\"\n                return firebase.database().ref(ref).once('value').then((_batchdata) => {\n                  var pens = {[BatchId]: {pens: _batchdata.val()}}\n                  resolve({type:Actions.UPDATE, path:DataRefs.BATCHS, data:pens})\n                })\n              case DataRefs.GRAPH:\n                ref += \"/\" + \"gcurve\"\n                return firebase.database().ref(ref).once('value').then((_batchdata) => {\n                  var curve = {[BatchId]: {gcurve: _batchdata.val()}}\n                  resolve({type:Actions.UPDATE, path:DataRefs.BATCHS, data:curve})\n                })\n            }\n          }\n\n        } else {\n          resolve(null)\n        }\n      })\n    })\n  }\n  return new Promise((resolve, reject) => {\n    console.log(\"Fecth Batchs Error\");\n    resolve(null)\n  })\n}\n\nfunction createBatchs({FarmId, BatchId, Batch}) {\n  if (FarmId) {\n    var ref = \"farms_data/\" + FarmId + \"/batchs\";\n    return new Promise((resolve, reject) => {\n      if (Batch && Batch.name) {\n        BatchId = Batch.name;\n        ref += \"/\" + Batch.name + \"/\"\n        delete Batch.name;\n        firebase.database().ref(ref).set({\n          ...Batch,\n        }).then(() => {\n          Object.keys(Batch.pens).forEach(pen => {\n            updatePen({FarmId:FarmId, PenId:pen, Pen:{datas:{batch:BatchId}}})\n          })\n          resolve(fetchBatchs({FarmId: FarmId, DataTime: \"SET\"}))\n        }).catch(error => {\n          if (error.code === 'database/permission-denied') {\n            console.log(\"Batch update was permission denied. \");\n          }else if (error.code) {\n            console.log(\"Batch update Error: \", error);\n          }\n          resolve({error:\"An error occurred\"})\n        })\n      } else if (BatchId) { //added else ??? still cleanup ??\n        console.log(\"???\") //TODO: why id.. mabye cleanup\n        ref += \"/\" + BatchId + \"/\"\n        firebase.database().ref(ref).set({\n          time: firebase.database.ServerValue.TIMESTAMP,\n          pens:[],\n          datas:{\n            devianceMin:1,\n            devianceMax:2,\n          }\n        }).then(() => {\n          resolve(fetchBatchs({FarmId: FarmId, DataTime: \"SET\"}))\n        });\n      }\n    })\n  }\n}\n\nfunction updateBatchs({FarmId, BatchId, Batch, Data}) {\n  if (FarmId) {\n    var ref = \"farms_data/\" + FarmId + \"/batchs\";\n    return new Promise((resolve, reject) => {\n      if (BatchId && Batch) {\n        ref += \"/\" + BatchId\n        fetchBatchs({FarmId: FarmId, BatchId: BatchId, Data:DataRefs.PENS}).then((_batch) => {\n          var Pens = _batch.data[BatchId].pens\n          if (Batch.name) delete Batch.name\n\n          var BatchPens = {}\n          if (Batch.pens && JSON.stringify(Batch.pens)!==JSON.stringify(Pens)) {\n            if (!Pens) Pens = []\n            var RemovedPens = Object.keys(Pens).filter(x => !Object.keys(Batch.pens).includes(x) && !Pens[x].enddate);\n            var NewPens = Object.keys(Batch.pens).filter(x => !Object.keys(Pens).includes(x) || Pens[x].enddate);\n            var SamePens = Object.keys(Pens).filter(x => !Object.keys(RemovedPens).includes(x) && !Object.keys(NewPens).includes(x));\n\n            if (RemovedPens && RemovedPens.length > 0) {\n              RemovedPens.forEach(pen => {\n                if (Pens[pen]) {\n                  var Pen = Pens[pen]\n                  Pen.enddate = Date.now()\n                  BatchPens[pen] = Pen\n                  fetchPens({FarmId: FarmId, PenId:pen}).then((pendata) => {\n                    var count = 0\n                    if (pendata.data[pen] && pendata.data[pen].datas && pendata.data[pen].datas.count)count=pendata.data[pen].datas.count\n                    BatchPens[pen].count = count\n                  })\n                  updatePen({FarmId:FarmId, PenId:pen, Pen:{datas:{batch:\"\"}}})\n                }\n              })\n            }\n            if (NewPens && NewPens.length > 0) {\n              NewPens.forEach(pen => {\n                var Pen = Pens[pen]?Pens[pen]:{startdate:Date.now()}\n                if (Pen.enddate) delete Pen.enddate\n                BatchPens[pen] = Pen\n                updatePen({FarmId:FarmId, PenId:pen, Pen:{datas:{batch:BatchId}}})\n              })\n            }\n\n            if (SamePens && SamePens.length > 0) {\n              SamePens.forEach(pen => {\n                BatchPens[pen] = Pens[pen]\n              })\n            }\n          }\n          Batch.pens = BatchPens\n\n          if (Batch.state && Batch.state === \"Closed\") {\n            fetchBatchs({FarmId: FarmId, BatchId: BatchId, Data:DataRefs.GRAPH}).then((curve) => {\n              var CurveId = curve.data[BatchId].gcurve\n              fetchGraphData({FarmId: FarmId}).then((curve) => {\n                Batch.gcurve = curve.data[CurveId]\n                Batch.closed = {comments: [], weighings: []}\n                \n                for (let i = 0, p = Promise.resolve(); i <= Object.keys(Pens).length; i++) {\n                  p = p.then(_ => new Promise(_resolve => {\n                    setTimeout(function () {\n                      if (i !== Object.keys(Pens).length) {\n                        var PenId = Object.keys(Pens)[i]\n                        Batch.pens[PenId] = Pens[PenId]\n                        fetchPens({FarmId: FarmId, PenId:PenId}).then((pendata) => {\n                          var count = 0\n                          if (pendata.data[PenId] && pendata.data[PenId].datas && pendata.data[PenId].datas.count)count=pendata.data[PenId].datas.count\n                          Batch.pens[PenId].count = count\n                        })\n                        if (!Batch.pens[PenId].enddate) {\n                          Batch.pens[PenId].enddate = Date.now()\n                        }\n                        updatePen({FarmId:FarmId, PenId:PenId, Pen:{datas:{batch:\"\", count:0}}})\n\n                        fetchComments({FarmId: FarmId, PenId: PenId}).then((comments) => {\n                          Batch.closed.comments[PenId] = comments.data[PenId]\n                          firebase.database().ref(\"farms_data/\" + FarmId + \"/datas/comments/\" + PenId).remove()\n                          \n                          fetchWeights({FarmId: FarmId, PenId: PenId}).then((weights) => {\n                            Batch.closed.weighings[PenId] = weights.data[PenId]\n                            firebase.database().ref(\"farms_data/\" + FarmId + \"/weighings/\" + PenId).remove()\n                            _resolve();\n                          })\n                        })\n                      }\n                      else {\n                        firebase.database().ref(ref).update({\n                          ...Batch\n                        }).then(()=>{\n                          firebase.database().ref(ref + \"/closed\").set(\n                            Batch.closed\n                          ).then(() => {\n                            fetchBatchs({FarmId: FarmId, BatchId: BatchId, DataTime: \"SET\"}).then((data)=>{\n                              resolve(data)\n                            })\n                          }).catch(error => {\n                            if (error.code === 'database/permission-denied') {\n                              console.log(\"Batch update was permission denied. \");\n                            }else if (error.code) {\n                              console.log(\"Batch update Error: \", error);\n                            }\n                            console.log(error)\n                            resolve({error:\"An error occurred\"})\n                          })\n                        })\n                      }\n                    })\n                  }));\n                }\n              })\n            })\n          } else {\n            firebase.database().ref(ref).update({\n              ...Batch,\n            }).then(() => {\n              fetchBatchs({FarmId: FarmId, BatchId: BatchId, DataTime: \"SET\"}).then((data)=>{\n                resolve(data)\n              })\n            }).catch(error => {\n              if (error.code === 'database/permission-denied') {\n                console.log(\"Batch update was permission denied. \");\n              }else if (error.code) {\n                console.log(\"Batch update Error: \", error);\n              }\n              console.log(error)\n              resolve({error:\"An error occurred\"})\n            })\n          }\n        })\n      }else {\n        console.log(\"Update Batchs Error\");\n        resolve(null)\n      }\n    })\n  }\n}\n//#endregion\n\n//#region Weights\nfunction fetchWeights({FarmId, PenId, SectionId, limitStart = 0, limitTo = 9999, DataTime, MemSections}) {\n  if (FarmId) {\n    var ref = \"farms_data/\" + FarmId + \"/weighings\";\n    return new Promise((resolve, reject) => {\n      CheckDataTime(\"farms_data/\" + FarmId + \"/weighings\", DataTime).then((DoFetch) => {\n        if (DoFetch) {\n          if (PenId) {\n            console.log(\"Weight fetch called, getting Pen\")\n            ref += \"/\" + PenId\n            firebase.database().ref(ref).orderByChild('time').limitToLast(limitTo).once('value', snapshot => {\n              var weighing = {[snapshot.key]:{}}\n              snapshot.forEach(c => {\n                weighing[snapshot.key][c.key] = c.val()\n              })\n              resolve({type:Actions.UPDATE, path:DataRefs.WEIGHING, data:weighing})\n            })\n          } else {\n            console.log(\"Weight fetch called, getting Sections\")\n            firebase.database().ref(ref + \"/update_time\").once('value').then((_weighingTime) => {\n              //TODO: Section fetch cast :: in mem check ??\n              var Weighings_Time = _weighingTime.val()\n              fetchSections({FarmId, SectionId, DataTime: MemSections?MemSections.update_time:null}).then((sections) => {\n                var itemsProcessed = 0;\n                var length = 0;\n                var newWeights = {}\n                var Sections = sections?sections.data:MemSections\n                Object.keys(Sections).forEach(section => {\n                  if (Sections[section] && Sections[section].pens) {\n                    length += Object.keys(Sections[section].pens).filter(e => e !== '__jsogObjectId').length\n                    Object.keys(Sections[section].pens).filter(e => e !== '__jsogObjectId').forEach(pen => {\n                      fetchWeights({FarmId:FarmId, PenId:pen, limitStart:0, limitTo:limitTo}).then((weights) => {\n                        itemsProcessed++\n                        newWeights = {...newWeights, ...weights.data}\n                        if (itemsProcessed === length) {\n                          newWeights.update_time = Weighings_Time\n                          resolve({type:Actions.UPDATE, path:DataRefs.WEIGHING, data:newWeights})\n                        }\n                      }).catch(error => {\n                        console.log(error)\n                        resolve({type:Actions.UPDATE, path:DataRefs.WEIGHING, data:newWeights})\n                      })\n                    })\n                  }\n                })\n              }).catch(error => {\n                console.log(error)\n              })\n            })\n          }\n\n        }\n        else {\n          resolve(null)\n        }\n      })\n    })\n  }\n  return new Promise((resolve, reject) => {\n    console.log(\"Fecth Weights Error\");\n    resolve(null)\n  })\n}\n\nfunction createWeight({FarmId, PenId, Weight, Quantity, Date}) {\n  if (FarmId) {\n    var ref = \"farms_data/\" + FarmId + \"/weighings\";\n    if (PenId){\n      ref += \"/\" + PenId + \"/\"\n\n      return new Promise((resolve, reject) => {\n        const weightRef = firebase.database().ref(ref).push()\n        const weightId = weightRef.key\n        weightRef.set({\n          time: Date,\n          weight: Weight,\n          count: Quantity,\n        }).then(() => {\n          fetchWeights({FarmId:FarmId, PenId:PenId, DataTime: \"SET\"}).then((weights)=>{\n            resolve(weights)\n          })\n        }).catch(error => {\n          console.log(\"Create Weight Error: \", error);\n          resolve(null)\n        })\n      })\n    }\n  }\n}\n//#endregion\n\n//#region Comments\nfunction fetchComments({FarmId, PenId, limitStart = 0, limitTo = 5}) {\n  if (FarmId) {\n    var ref = \"farms_data/\" + FarmId + \"/datas/comments\";\n    return new Promise((resolve, reject) => {\n      if (PenId) {\n        ref += \"/\" + PenId\n        firebase.database().ref(ref).orderByChild('time').limitToLast(limitTo).once('value', snapshot => {\n          var comment = {[snapshot.key]:{}}\n          snapshot.forEach(c => {\n            comment[snapshot.key][c.key] = c.val()\n          }) \n          resolve({type:Actions.UPDATE, path:DataRefs.COMMENTS, data:comment})\n        })\n      } else {\n        //TODO: ...Comment other than PenId\n      }\n    })\n  }\n  return new Promise((resolve, reject) => {\n    console.log(\"Fecth Weights Error\");\n    resolve(null)\n  })\n}\n\nfunction createComment({FarmId, PenId, Action, Data, Quantity, Weight}) {\n  if (FarmId) {\n    var ref = \"farms_data/\" + FarmId + \"/datas/comments\";\n    if (PenId){\n      ref += \"/\" + PenId + \"/\"\n\n      return new Promise((resolve, reject) => {\n        const commentRef = firebase.database().ref(ref).push()\n        const commentId = commentRef.key\n\n        commentRef.set({\n          time: firebase.database.ServerValue.TIMESTAMP,\n          user: firebase.auth().currentUser.email,\n          action: Action,\n          quantity: Quantity,\n          weight: Weight,\n          data: Data,\n        }).then(() => {\n          fetchComments({FarmId:FarmId, PenId:PenId}).then((weights)=>{\n            resolve(weights)\n          })\n        }).catch(error => {\n          console.log(\"Create Comment Error: \", error);\n          resolve(null)\n        })\n      })\n    } else {\n      //TODO: ...Comment other than PenId\n    }\n  }\n  return new Promise((resolve, reject) => {\n    console.log(\"Fecth Graph Error\");\n    resolve(null)\n  })\n}\n//#endregion\n\n//#region Graphs\nfunction fetchGraphData({FarmId, GraphId, DataTime}) {\n  if (FarmId) {\n    var ref = \"farms_data/\" + FarmId + \"/graph\";\n    ref = ref + \"/\" + GraphId;\n    return new Promise((resolve, reject) => {\n      CheckDataTime(\"farms_data/\" + FarmId + \"/graph\", DataTime).then((DoFetch) => {\n        console.log(\"Doing Graphs fetch\", DoFetch, \"Always..\")\n        //if (DoFetch){\n\n          firebase.database().ref(ref).once('value').then((graph) => {\n            var Graphs = null\n            var GraphVal = graph.val()\n            if (GraphVal) {\n              if (GraphId) {\n                var newGraph = {[graph.key]: GraphVal}\n                Graphs = {...Graphs, ...newGraph}\n              }else {\n                Graphs = {...Graphs, ...GraphVal}\n              }\n            }\n            if (!GraphId) {\n              firebase.database().ref(\"farms_data/Agrisys/graph\").once('value').then((Agraph) => {\n                var AgraphVal = Agraph.val();\n                if (AgraphVal) {\n                  Graphs = {...AgraphVal, ...Graphs}\n                }\n                resolve({type:Actions.UPDATE, path:DataRefs.GRAPH, data:Graphs})\n              }).catch(error => {\n                console.log(\"Get Agrisys graph Error: \", error);\n                resolve({type:Actions.UPDATE, path:DataRefs.GRAPH, data:Graphs})\n              })\n            }else {\n              resolve({type:Actions.UPDATE, path:DataRefs.GRAPH, data:Graphs})\n            }\n          }).catch(error => {\n            console.log(\"Get farm graph Error: \", error);\n            resolve(null)\n          })\n\n        /*}\n        else {\n          resolve({type:Actions.UPDATE, path:DataRefs.GRAPH, data:{}})\n        }*/\n      })\n    })\n  }\n  return new Promise((resolve, reject) => {\n    console.log(\"Fecth Graph Error\");\n    resolve(null)\n  })\n}\n\nfunction updateGraphData({FarmId, Graph}) {\n  if (FarmId) {\n    var ref = \"farms_data/\" + FarmId + \"/graph\";\n    if (Graph.name) {\n      ref += \"/\" + Graph.name + \"/\"\n      return new Promise((resolve, reject) => {\n        firebase.database().ref(ref).update({\n          data: Graph.data,\n          periode: Graph.periode\n        }).then(() => {\n          fetchGraphData({FarmId: FarmId, GraphId: Graph.name}).then((_Graph)=>{\n            resolve(_Graph)\n          })\n        }).catch(error => {\n          console.log(\"Create Graph Error: \", error);\n          resolve(null)\n        })\n      })\n    }\n  }\n}\n//#endregion\n//#endregion\n\nexport const firebaseService = {\n  //Firebase\n  requestUserPermission,\n  requestFirebaseToken,\n  wrappedAlert,\n\n  //Firebase Auth (could be moved to fetch / action)\n  createFirebaseUserWithemailandpassword,\n  signinWithemailandpassword,\n  sendResetPassword,\n  logoutUser,\n  refreshUser,\n\n  //Commnads\n  actionStarting,\n}\n","import { Alert } from 'react-native'\nimport {buffers, eventChannel} from 'redux-saga'\nimport { put, call, fork, take, cancelled, cancel, actionChannel, race, select } from 'redux-saga/effects'\n\nimport FirebaseActions from '../../Stores/Firebase/Actions'\nimport { firebaseService } from '../../Services/FirebaseService'\n\nimport Constants from 'expo-constants';\nimport firebase from 'firebase/app'\nimport \"firebase/auth\"\nimport \"firebase/messaging\"\nimport \"firebase/database\"\n\nimport { UserStates, DataRefs, Actions } from '../../Stores/Firebase/Selectors'\n\nexport function* firebaseStartup() {\n  //Check and setup Firebase and permissions\n  yield put(FirebaseActions.setFirebaseError(null))\n\n  console.log(Constants.manifest.web.config.firebase)\n  firebase.initializeApp(Constants.manifest.web.config.firebase);\n\n  const permitError = yield call(firebaseService.requestUserPermission)\n  if (permitError) {\n    yield put(FirebaseActions.fetchFailure(permitError))\n  }else {\n    //yield put(FirebaseActions.firebaseIsLoading(true))\n    yield fork(handleAuthState)\n    yield fork(handleActions)\n\n    if (firebase.messaging.isSupported()) {\n      yield fork(onMessageHandler)\n      yield fork(onBackgroundMessageHandler)\n    }\n\n    //var FirebaseToken = yield call(firebaseService.requestFirebaseToken);\n    //console.log('Firebase Token: ', FirebaseToken);\n    \n    //yield fork(testmessage,FirebaseToken)\n  }\n\n  console.log('Firebase Startup : Done');\n}\n\n//Somehow works ??? but should only work at server hosting XMPP, try firebase functions insted if nessasary\n//TODO: check this more... SendNotification to device\n//it seams to work ... but slow ???\nfunction* testmessage(token) {\n  /*messaging().sendMessage({\n      to: '11111111111111@fcm.googleapis.com',\n      messageId: 'test1',\n      messageType: 'test2',\n      notification: {\n          title: 'Foo',\n          body: 'Bar',\n      }\n    });*/\n    //to: 'worker@agrisys.dk',\n  var message = {\n    to: token,\n    messageId: 'test1',\n    messageType: 'test2',\n    notification: {\n        title: 'Foo',\n        body: 'Bar',\n    }\n  }\n  firebase.messaging().sendMessage(message).then(msg => {\n    console.log(msg)\n  })\n}\n\nexport function* handleAuthState() {\n  const authChannel = yield eventChannel((emit) => {\n    const subscription = firebase.auth().onAuthStateChanged((user) => {\n      if (user == null){\n        emit(\"NONE\")\n      }else {\n        emit(user)\n      }\n    })\n    return () => {\n      subscription()\n    };\n  }, buffers.expanding(1))\n\n  try {\n    for (;;) {\n      const newAuth = yield take(authChannel)\n      var firebaseUser = newAuth === \"NONE\"?null:newAuth;\n      if (firebaseUser) {\n        const userData = yield call(firebaseService.actionStarting, DataRefs.USERSDATA, Actions.FETCH, {UserId: firebaseUser.uid})\n        if (userData.data) {\n          firebaseUser.farms = userData.data.data.farms\n          firebaseUser.state = userData.data.data.state\n          yield put(FirebaseActions.dataFetchSuccess({type:Actions.UPDATE, path:DataRefs.FIREBASEUSER, data: firebaseUser}))\n          yield put(FirebaseActions.dataFetchSuccess({type:Actions.UPDATE, path:DataRefs.USERSDATA, data: userData.data}))    //TODO: mabye moved to firebaseUser..\n        }\n      } else {\n        yield put(FirebaseActions.dataFetchSuccess({type:Actions.UPDATE, path:DataRefs.FIREBASEUSER, data: {}}))\n        yield put(FirebaseActions.dataFetchSuccess({type:Actions.UPDATE, path:DataRefs.USERSDATA, data: {}}))    //TODO: mabye moved to firebaseUser..\n      }\n    }\n  } finally {\n    if (yield cancelled()) {\n      authChannel.close()\n    }\n  }\n}\n\nexport function* handleActions() {\n  const channel = yield actionChannel([\n    'ACTION_STARTING',\n  ])\n\n  for (;;) {\n    const action: ACTION_STARTING = yield take(channel)\n\n    //TODO: mabye clean up Farmid prop.. by current firebase user.. localdata framid.. append here..\n    //console.log(action.ref, action.action)\n\n    if (Object.values(Actions).includes(action.action)) {\n      if (Object.values(DataRefs).includes(action.ref)) {\n        const FirebaseUser = yield select((state) => state.firebase.firebaseUser);\n        if (action.action != Actions.SIGN && FirebaseUser && FirebaseUser.farms) {\n          if (!action.params) action.params = {}\n          if (!action.params.FarmId) action.params.FarmId = [Object.keys(FirebaseUser.farms)[0]]\n        }\n\n        const NewData = yield call(firebaseService.actionStarting, action.ref, action.action, action.params)\n        if (NewData && (NewData.error || NewData.viewError)) {\n          yield put(FirebaseActions.fetchFailure(NewData.error))\n          yield put(FirebaseActions.setViewError(NewData.viewError))\n        } else {\n          //console.log(\"resCall: \", NewData)\n          if (NewData && NewData.hasOwnProperty(\"type\") && NewData.hasOwnProperty(\"path\") && NewData.hasOwnProperty(\"data\")) {\n            yield put(FirebaseActions.dataFetchSuccess(NewData))\n          }\n          else {\n            //console.log(\"Old Path: \", action.ref, action.action, params, NewData)\n            yield put(FirebaseActions.fetchSuccess({localDataStore:NewData}))\n          }\n        }\n      }\n    }\n  }\n}\n\n// Notification Handler for then App is in Foreground State\nexport function* onMessageHandler() {\n  const onMessageChannel = yield eventChannel((emit) => {\n    const messageListener = firebase.messaging().onMessage((remoteMessage) => {\n      //console.log(\"message ? \", remoteMessage);\n      emit(remoteMessage);\n    });\n    return () => {\n      messageListener();\n    };\n  }, buffers.expanding(1));\n\n  try {\n    for (;;) {\n      const remoteMessage = yield take(onMessageChannel)\n      console.log(\"New Firebase message: \", remoteMessage)\n      if (remoteMessage.notification && remoteMessage.notification.title && remoteMessage.notification.body){\n        yield call(firebaseService.wrappedAlert, remoteMessage.notification.title, remoteMessage.notification.body, \"Ok\", false)\n      }else {\n        console.log(\"New Firebase data message: \", remoteMessage)\n      }\n    }\n  } finally {\n    if (yield cancelled()) {\n      onMessageChannel.close()\n    }\n  }\n}\n\n// Notification Handler for then App is in Background & Quit state\nexport function* onBackgroundMessageHandler() {\n  // Assume a message-notification contains a \"type\" property in the data payload of the screen to open\n  /*firebase.messaging().onNotificationOpenedApp(remoteMessage => {\n    console.log(\n      'Notification caused app to open from background state:',\n      remoteMessage.notification,\n    );\n    //NavigationService.navigate(remoteMessage.data.type); // this is not view..\n  });\n\n  const onMessageChannel = yield eventChannel((emit) => {\n    firebase.messaging().setBackgroundMessageHandler((remoteMessage) => {\n      emit(remoteMessage);\n    });\n    return () => {\n      //\n    };\n  }, buffers.expanding(1));\n\n  try {\n    for (;;) {\n      const remoteMessage = yield take(onMessageChannel)\n      console.log(\"New background Firebase message: \", remoteMessage)\n    }\n  } finally {\n    if (yield cancelled()) {\n      onMessageChannel.close()\n    }\n  }*/\n}","import { takeLatest, all, take } from 'redux-saga/effects'\n\nimport { StartupTypes } from '../Stores/Startup/Actions'\nimport { ExampleTypes } from '../Stores/Example/Actions'\n//import { DeviceTypes } from '../Stores/Device/Actions'\nimport { FirebaseTypes } from '../Stores/Firebase/Actions'\n\nimport * as StartupSaga from './StartupSaga'\nimport * as ExampleSaga from './Example/ExampleSaga'\n//import * as DeviceSaga from './Device/DeviceSaga'\nimport * as FirebaseSaga from './Firebase/FirebaseSaga'\n\nexport default function* root(sagaArgs) {\n  yield all([\n    /**\n     * @see https://redux-saga.js.org/docs/basics/UsingSagaHelpers.html\n     */\n    // Run the startup saga when the application starts\n    takeLatest(StartupTypes.STARTUP, StartupSaga.startup), //Initer\n    \n\n    //Example\n    takeLatest(ExampleTypes.FETCH_USER, ExampleSaga.fetchUser), // Call `fetchUser()` when a `FETCH_USER` action is triggered\n    \n    /*//Device Main Saga\n    takeLatest(DeviceTypes.DEVICE_STARTUP, DeviceSaga.deviceStartup), //Initer\n\n    takeLatest(DeviceTypes.CONNECT_DEVICE, DeviceSaga.connectDevice),\n    takeLatest(DeviceTypes.DISCONNECT_DEVICE, DeviceSaga.disconnectDevice),\n    takeLatest(DeviceTypes.READ_DEVICE_DATA, DeviceSaga.readDeviceData),\n\n    takeLatest(DeviceTypes.FETCH_DEVICE, DeviceSaga.fetchDevice, sagaArgs),\n\n    //BLE Saga\n    takeLatest(DeviceTypes.BLE_STARTUP, DeviceSaga.BLE.bleStartup, sagaArgs), //Initer\n    takeLatest(DeviceTypes.START_BLE_SCAN, DeviceSaga.BLE.startBleScan),\n    takeLatest(DeviceTypes.STOP_BLE_SCAN, DeviceSaga.BLE.stopBleScan),\n    takeLatest(DeviceTypes.READ_BLE_DEVICE_DATA, DeviceSaga.BLE.readBleDeviceData, sagaArgs),\n    \n    //Android BlueThooth Saga\n    takeLatest(DeviceTypes.BLUETOOTH_STARTUP, DeviceSaga.BlueTooth.bluetoothStartup, sagaArgs), //Initer\n    takeLatest(DeviceTypes.START_BLUETOOTH_SCAN, DeviceSaga.BlueTooth.startBluetoothScan),\n    takeLatest(DeviceTypes.STOP_BLUETOOTH_SCAN, DeviceSaga.BlueTooth.stopBluetoothScan),\n    takeLatest(DeviceTypes.BLUETOOTH_SCAN_ABLE, DeviceSaga.BlueTooth.bluetoothScanAble, sagaArgs),\n    takeLatest(DeviceTypes.READ_BLUE_DEVICE_DATA, DeviceSaga.BlueTooth.readBlueDeviceData, sagaArgs),*/\n\n    //Firebase Saga\n    takeLatest(FirebaseTypes.FIREBASE_STARTUP, FirebaseSaga.firebaseStartup), //Initer\n  ])\n}\n","/**\n * The initial values for the redux state.\n */\nexport const INITIAL_STATE = {\n  user: {},\n  userIsLoading: false,\n  userErrorMessage: null,\n}\n","/**\n * Reducers specify how the application's state changes in response to actions sent to the store.\n *\n * @see https://redux.js.org/basics/reducers\n */\n\nimport { INITIAL_STATE } from './InitialState'\nimport { createReducer } from 'reduxsauce'\nimport { ExampleTypes } from './Actions'\n\nexport const fetchUserLoading = (state) => ({\n  ...state,\n  userIsLoading: true,\n  userErrorMessage: null,\n})\n\nexport const fetchUserSuccess = (state, { user }) => ({\n  ...state,\n  user: user,\n  userIsLoading: false,\n  userErrorMessage: null,\n})\n\nexport const fetchUserFailure = (state, { errorMessage }) => ({\n  ...state,\n  user: {},\n  userIsLoading: false,\n  userErrorMessage: errorMessage,\n})\n\n/**\n * @see https://github.com/infinitered/reduxsauce#createreducer\n */\nexport const reducer = createReducer(INITIAL_STATE, {\n  [ExampleTypes.FETCH_USER_LOADING]: fetchUserLoading,\n  [ExampleTypes.FETCH_USER_SUCCESS]: fetchUserSuccess,\n  [ExampleTypes.FETCH_USER_FAILURE]: fetchUserFailure,\n})\n","/**\n * Reducers specify how the application's state changes in response to actions sent to the store.\n *\n * @see https://redux.js.org/basics/reducers\n */\n\nimport { createReducer } from 'reduxsauce'\nimport { append } from 'funcadelic';\n\nimport { Actions, DataRefs } from './Selectors'\nimport { FirebaseTypes } from './Actions'\n\nimport { INITIAL_STATE } from './InitialState'\n\nexport const firebaseIsLoading = (state, { loadingstate }) => ({\n  ...state,\n  firebaseIsLoading: loadingstate,\n})\n\nexport const setFirebaseError = (state, { errorMessage }) => ({\n  ...state,\n  firebaseErrorMessage: errorMessage,\n})\n\nexport const setViewError = (state, { errorMessage }) => {\n  return({\n    ...state,\n    viewError: errorMessage,\n  })\n}\n\nexport const viewIsLoading = (state, { loadingstate }) => ({\n  ...state,\n  viewIsLoading: loadingstate,\n})\n\nexport const setCurrentData = (state, {data}) => {\n  return({\n    ...state,\n    currentData: data\n  })\n}\n\nfunction IDGenerate(){\n  return Math.random().toString(36).substr(2, 9);\n}\n\nexport const actionStarting = (state) => ({\n  ...state,\n  //firebaseIsLoading: true,\n  firebaseErrorMessage: null,\n})\n\nexport const fetchStarting = (state) => ({\n  ...state,\n  //firebaseIsLoading: true,\n  firebaseErrorMessage: null,\n})\n\nfunction mergeDeep(target, source) {\n  const isObject = (obj) => obj && typeof obj === 'object';\n\n  if (!isObject(target) || !isObject(source)) {\n    return source;\n  }\n\n  Object.keys(source).forEach(key => {\n    const targetValue = target[key];\n    const sourceValue = source[key];\n\n    if (Array.isArray(targetValue) && Array.isArray(sourceValue)) {\n      //target[key] = targetValue.concat(sourceValue);  //Mercing value of arrays would creates doubles.. like curve data..\n    } else if (isObject(targetValue) && isObject(sourceValue)) {\n      target[key] = mergeDeep(Object.assign({}, targetValue), sourceValue);\n    } else {\n      target[key] = sourceValue;\n    }\n  });\n\n  return target;\n}\n\nexport const dataFetchSuccess = (state, { params }) => {\n  const {type, path, data} = params\n  var NewDataStore = state.localDataStore;\n  var NewFirebaseUser = {...state.firebaseUser};\n  switch(type) {\n    case Actions.UPDATE:\n    case Actions.ADD:\n      var newData = {...data}\n      if (path === DataRefs.FIREBASEUSER) {\n        if (data && data.data) newData = {...data.data}\n        if (data && data._user) {\n          Object.keys(data._user).forEach(element => {\n            newData[element] = data._user[element]\n          })\n          delete newData._user\n          delete newData._auth\n        }\n        if (newData && Object.keys(newData).length > 0) {\n          var Values = [\"displayName\", \"name\", \"email\", \"emailVerified\", \"farms\", \"isAnonymous\", \"phoneNumber\", \"photoURL\", \"refreshToken\", \"state\", \"uid\"]\n          Object.keys(newData).forEach(element => {\n            for (var index = 0; index < Values.length; index++) {\n              if (Values[index] === element) {\n                NewFirebaseUser[element] = newData[element]\n                break;\n              }\n            }\n          });\n        }else {\n          NewFirebaseUser = newData;\n        }\n      }\n      if (!data) break;\n      switch(path){\n        case DataRefs.FIREBASEUSER:\n          //Done above\n          break;\n        case DataRefs.USERSDATA:\n          Object.keys(newData).forEach(element => {\n            if (!NewDataStore.userData) NewDataStore.userData = {};\n            NewDataStore.userData[element] = newData[element]\n          });\n          break;\n        case DataRefs.USERS:\n          if (!NewDataStore.users) NewDataStore.users = {};\n          if (data.data) newData = data.data\n          if (newData.users) newData = newData.users\n          Object.keys(newData).forEach(element => {\n            NewDataStore.users[element] = newData[element]\n          });\n          break;\n        case DataRefs.FARMS:\n          if (!NewDataStore.farms) NewDataStore.farms = {};\n          if (data.farms) newData = data.farms\n          Object.keys(newData).forEach(element => {\n            NewDataStore.farms[element] = newData[element]\n          });\n          break;\n        case DataRefs.BATCHS:\n          if (!NewDataStore.batchs) NewDataStore.batchs = {};\n          if (data.batchs) newData = data.batchs\n          Object.keys(newData).forEach(element => {\n            NewDataStore.batchs[element] = newData[element]\n          });\n          break;\n        case DataRefs.SECTIONS:\n          if (!NewDataStore.sections) NewDataStore.sections = {};\n          if (data.sections) newData = data.sections\n          Object.keys(newData).forEach(element => {\n            NewDataStore.sections[element] = newData[element]\n          });\n          break;\n        case DataRefs.PENS:\n          if (!NewDataStore.pens) NewDataStore.pens = {};\n          if (data.pens) newData = data.pens\n          Object.keys(newData).forEach(element => {\n            NewDataStore.pens[element] = newData[element]\n          });\n          break;\n        case DataRefs.PIGS:\n          if (!NewDataStore.pigs) NewDataStore.pigs = {};\n          if (data.pigs) newData = data.pigs\n          Object.keys(newData).forEach(element => {\n            NewDataStore.pigs[element] = newData[element]\n          });\n          break;\n        case DataRefs.COMMENTS:\n          if (!NewDataStore.comments) NewDataStore.comments = {};\n          if (data.comments) newData = data.comments\n          Object.keys(newData).forEach(element => {\n            NewDataStore.comments[element] = newData[element]\n          });\n          break;\n        case DataRefs.GRAPH:\n          if (!NewDataStore.graphs) NewDataStore.graphs = {};\n          if (data.graphs) newData = data.graphs\n          Object.keys(newData).forEach(element => {\n            NewDataStore.graphs[element] = newData[element]\n          });\n          break;\n        case DataRefs.WEIGHING:\n          if (!NewDataStore.weighings) NewDataStore.weighings = {};\n          if (data.weighings) newData = data.weighings\n          Object.keys(newData).forEach(element => {\n            NewDataStore.weighings[element] = newData[element]\n          });\n          break;\n      }\n      //console.log(path, data)\n      break;\n    case Actions.CLEAR:\n      switch(path){\n        case DataRefs.USERS:\n          if (!NewDataStore.userData) NewDataStore.userData = {};\n          NewDataStore.userData.action = \"CLEAR\";\n          break;\n        case DataRefs.USERSDATA:\n          console.log(\"CLEAR\")\n          if (NewDataStore.batchs) NewDataStore.batchs = {}\n          if (NewDataStore.sections) NewDataStore.sections = {}\n          if (NewDataStore.pens) NewDataStore.pens = {}\n          if (NewDataStore.pigs) NewDataStore.pigs = {}\n          if (NewDataStore.graphs) NewDataStore.graphs = {}\n          if (NewDataStore.weighings) NewDataStore.weighings = {}\n          if (NewDataStore.userData && NewDataStore.userData.action) {\n            NewDataStore.userData.action = {}\n            //NewDataStore.userData = {}\n          }\n          break;\n      }\n      break;\n    default:\n      console.log(\"DataFetch Not created / default\")\n      break;\n  }\n  return({\n    ...state,\n    firebaseUser: NewFirebaseUser,\n    localDataStore: NewDataStore,\n    firebaseIsLoading: false,\n    firebaseErrorMessage: null,\n    viewIsLoading: false,\n  })\n}\n\nexport const fetchSuccess = (state, { data }) => {\n  var newlocalDataStore = {...state.localDataStore}\n  var newState = {...state}\n\n  if (data) {\n    let {localDataStore, ..._newState} = data;\n\n    if (localDataStore) {\n      if (Object.keys(localDataStore).length !== 0) {\n        newlocalDataStore = mergeDeep(localDataStore, newlocalDataStore)\n      }\n      else {\n        newlocalDataStore = {...localDataStore}\n      }\n    }\n    newState = append(state,_newState)\n  }\n  return({\n    ...newState,\n    localDataStore: newlocalDataStore,\n    firebaseIsLoading: false,\n    firebaseErrorMessage: null,\n    viewIsLoading: false,\n  })\n}\n\nexport const fetchFailure = (state, { errorMessage }) => ({\n  ...state,\n  firebaseIsLoading: false,\n  firebaseErrorMessage: errorMessage,\n  viewIsLoading: false,\n})\n\n/**\n * @see https://github.com/infinitered/reduxsauce#createreducer\n */\nexport const HANDLERS = {\n  //Response...\n  [FirebaseTypes.FIREBASE_IS_LOADING]: firebaseIsLoading,\n  [FirebaseTypes.SET_FIREBASE_ERROR]: setFirebaseError,\n\n  [FirebaseTypes.SET_VIEW_ERROR]: setViewError,\n  [FirebaseTypes.VIEW_IS_LOADING]: viewIsLoading,\n\n  [FirebaseTypes.SET_CURRENT_DATA]: setCurrentData,\n\n  [FirebaseTypes.ACTION_STARTING]: actionStarting,\n  [FirebaseTypes.FETCH_STARTING]: fetchStarting,\n  [FirebaseTypes.DATA_FETCH_SUCCESS]: dataFetchSuccess,\n  [FirebaseTypes.FETCH_SUCCESS]: fetchSuccess,\n  [FirebaseTypes.FETCH_FAILURE]: fetchFailure,\n}\n\nexport const reducer = createReducer(INITIAL_STATE, HANDLERS)","import { UserStates } from './Selectors'\n\n/**\n * The initial values for the redux state.\n */\nexport const INITIAL_STATE = {\n  firebaseIsLoading: false,     //SystemLoading\n  firebaseErrorMessage: null,   //SystemError\n\n  firebaseUser: null,           //UserData\n\n  localDataStore: {},           //Full DataStore\n  currentData: null,            //State DataStore\n\n  viewIsLoading: false,         //View / state - waiting for action\n  viewError: null,              //View / state - error display\n}","/**\n * This file contains the application's colors.\n *\n * Define color here instead of duplicating them throughout the components.\n * That allows to change them more easily later on.\n */\n\nexport default {\n  transparent: 'rgba(0,0,0,0)',\n  white: '#ffffff',\n  gray: '#a6a6a6',\n\n  text: '#4a4a49',\n  secountText: '#ffffff',\n\n  primary: '#a3b9cf',\n\n  success: '#03a489',\n  error: '#dc3545',\n  overest: '#4cafea',\n  pigpink: '#FFAA95',\n\n  input: '#86939e',\n\n  AgriGreen: '#03a489',\n  AgriDarkblue: '#4463ab',\n  AgriLightblue: '#a3b9cf',\n  AgriDark: '#4a4a49',\n}\n","import { StyleSheet } from 'react-native'\n\nconst size = {\n  h1: 38,\n  h2: 34,\n  h3: 30,\n  input: 18,\n  regular: 17,\n  medium: 14,\n  small: 12,\n}\n\nexport default {\n  h1: {\n    fontSize: size.h1,\n  },\n  h2: {\n    fontSize: size.h2,\n  },\n  h3: {\n    fontSize: size.h3,\n  },\n  normal: {\n    fontSize: size.regular,\n  },\n}","/**\n * This file contains metric values that are global to the application.\n */\n\n// Examples of metrics you can define:\nexport const tiny = 5\nexport const small = tiny * 2 // 10\nexport const normal = tiny * 3 // 15\nexport const medium = normal * 2 // 30\n\nexport default {\n  tiny,\n  small,\n  normal,\n  medium,\n  \n  tinyBottomMargin: {\n    marginBottom: tiny,\n  },\n  smallBottomMargin: {\n    marginBottom: small,\n  },\n  bottomMargin: {\n    marginBottom: normal,\n  },\n  mediumBottomMargin: {\n    marginBottom: medium,\n  },\n\n  tinyVerticalMargin: {\n    marginVertical: tiny,\n  },\n  smallVerticalMargin: {\n    marginVertical: small,\n  },\n  verticalMargin: {\n    marginVertical: normal,\n  },\n  mediumVerticalMargin: {\n    marginVertical: medium,\n  },\n\n  tinyHorizontalMargin: {\n    marginHorizontal: tiny,\n  },\n  smallHorizontalMargin: {\n    marginHorizontal: small,\n  },\n  horizontalMargin: {\n    marginHorizontal: normal,\n  },\n  mediumHorizontalMargin: {\n    marginHorizontal: medium,\n  },\n\n  tinyHorizontalPadding: {\n    paddingHorizontal: tiny,\n  },\n  smallHorizontalPadding: {\n    paddingHorizontal: small,\n  },\n  horizontalPadding: {\n    paddingHorizontal: normal,\n  },\n  mediumHorizontalPadding: {\n    paddingHorizontal: medium,\n  },\n\n  tinyVerticalPadding: {\n    paddingVertical: tiny,\n  },\n  smallVerticalPadding: {\n    paddingVertical: small,\n  },\n  verticalPadding: {\n    paddingVertical: normal,\n  },\n  mediumVerticalPadding: {\n    paddingVertical: medium,\n  },\n}\n","/**\n * Images should be stored in the `App/Images` directory and referenced using variables defined here.\n */\n\nexport default {\n  Home: require('../Assets/Images/Home.png'),\n\n  DashBoard: require('../Assets/Images/Dashboard.png'),\n  System: require('../Assets/Images/System.png'),\n  Curves: require('../Assets/Images/Feed-Curves.png'),\n  GCurves: require('../Assets/Images/Growth-curve.png'),\n\n  User: require('../Assets/Images/User.png'),\n  Sow: require('../Assets/Images/Sow.png'),\n  Section: require('../Assets/Images/Section.png'),\n  Pens: require('../Assets/Images/Area_Colour.png'),\n  AutoPig: require('../Assets/Images/AutoPig.png'),\n  Feed: require('../Assets/Images/Feed-Components.png'),\n\n  Haxa_globe: require('../Assets/Images/Hexagon-globe.png'),\n  Hexa_icon: require('../Assets/Images/Hexa-icon.png'),\n  Logo: require('../Assets/Images/Logo.png'),\n\n  logo: require('../Assets/Images/TOM.png'),\n}\n","import { StyleSheet } from 'react-native'\nimport { Colors, Fonts, Metrics, } from '../Theme'\n\nexport default {\n  //********************** col sets */\n  column: {\n    flexDirection: 'column',\n  },\n  colMain: {\n    flexDirection: 'column',\n    justifyContent: 'center',\n  },\n  colCenter: {\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  colCross: {\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  columnReverse: {\n    flexDirection: 'column-reverse',\n  },\n\n  //********************** Row sets */\n  row: {\n    flexDirection: 'row',\n  },\n  rowMain: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n  },\n  rowCenter: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  rowCross: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  rowReverse: {\n    flexDirection: 'row-reverse',\n  },\n\n  //********************** Cross sets */\n  center: {\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  crossCenter: {\n    alignItems: 'center',\n  },\n  crossEnd: {\n    alignItems: 'flex-end',\n  },\n  crossStart: {\n    alignItems: 'flex-start',\n  },\n  crossStretch: {\n    alignItems: 'stretch',\n  },\n\n  //********************** Fill sets */\n  fill: {\n    flex: 1,\n  },\n  fillCenter: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  fillCol: {\n    flex: 1,\n    flexDirection: 'column',\n  },\n  fillColCenter: {\n    flex: 1,\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  fillColCross: {\n    flex: 1,\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  fillColMain: {\n    flex: 1,\n    flexDirection: 'column',\n    justifyContent: 'center',\n  },\n  fillColReverse: {\n    flex: 1,\n    flexDirection: 'column-reverse',\n  },\n  fillRow: {\n    flex: 1,\n    flexDirection: 'row',\n  },\n  fillRowCenter: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  fillRowCross: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  fillRowMain: {\n    flex: 1,\n    flexDirection: 'row',\n    justifyContent: 'center',\n  },\n  fillRowReverse: {\n    flex: 1,\n    flexDirection: 'row-reverse',\n  },\n\n  //********************** Size sets */\n  fullSize: {\n    height: '100%',\n    width: '100%',\n  },\n  halvWidth: {\n    width: '50%',\n  },\n  midWidth: {\n    width: '75%',\n  },\n  fullWidth: {\n    width: '100%',\n  },\n\n  //********************** Main sets */\n  mainCenter: {\n    justifyContent: 'center',\n  },\n  mainEnd: {\n    justifyContent: 'flex-end',\n  },\n  mainSpaceAround: {\n    justifyContent: 'space-around',\n  },\n  mainSpaceBetween: {\n    justifyContent: 'space-between',\n  },\n  mainStart: {\n    justifyContent: 'flex-start',\n  },\n\n  //********************** Container sets */\n  mainContainer:{\n    flex: 1,\n    flexDirection: 'column',\n    alignItems: 'center',\n    ...Metrics.mediumHorizontalMargin,\n  },\n  contentContainer:{\n    flex:1,\n    flexDirection: 'column',\n    alignItems: 'center',\n    ...Metrics.mediumHorizontalMargin,\n    marginTop: Metrics.small,\n    ...Metrics.bottomMargin,\n  },\n  borderContainer: {\n    borderWidth: 1,\n    borderColor: '#000',\n    borderRadius: 15,\n    ...Metrics.tinyHorizontalPadding,\n    ...Metrics.tinyVerticalPadding,\n    maxWidth:450,\n    zIndex: 1,\n  },\n  textContainer:{\n    ...Fonts.normal,\n    marginBottom: Metrics.normal,\n    alignItems: 'center',\n  },\n  buttonContainer: {\n    marginBottom: Metrics.small,\n    maxWidth:450,\n  },\n  loadingContainer: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#F5FCFF88',\n  },\n  logoContainer: {\n    width: '100%',\n    height: 220,\n  },\n\n  //**********************  */\n  backgroundReset: {\n    backgroundColor: Colors.transparent,\n  },\n\n  rotate90: {\n    transform: [{ rotate: '90deg' }],\n  },\n  rotate90Inverse: {\n    transform: [{ rotate: '-90deg' }],\n  },\n  mirror: {\n    transform: [{ scaleX: -1 }],\n  },\n\n  scrollSpaceAround: {\n    flexGrow: 1,\n    justifyContent: 'space-around',\n  },\n  scrollSpaceBetween: {\n    flexGrow: 1,\n    justifyContent: 'space-between',\n  },\n\n  selfStretch: {\n    alignSelf: 'stretch',\n  },\n\n  textCenter: {\n    textAlign: 'center',\n  },\n  textJustify: {\n    textAlign: 'justify',\n  },\n  textLeft: {\n    textAlign: 'left',\n  },\n  textRight: {\n    textAlign: 'right',\n  },\n};\n","/**\n * This file defines the base application styles.\n *\n * Use it to define generic component styles (e.g. the default text styles, default button styles...).\n */\nimport { StyleSheet } from 'react-native'\nimport { Colors, Fonts, Metrics, } from '../Theme'\n\nexport default {\n  button: {\n    backgroundColor: Colors.primary,\n    color: Colors.secountText,\n  },\n  buttonText: {\n    color: Colors.secountText,\n  },\n\n  error: {\n    ...Fonts.normal,\n    color: Colors.error,\n    marginBottom: Metrics.tiny,\n    textAlign: 'center',\n  },\n  result: {\n    ...Fonts.normal,\n    marginBottom: Metrics.tiny,\n    textAlign: 'center',\n  },\n  text: {\n    ...Fonts.normal,\n    marginBottom: Metrics.tiny,\n    textAlign: 'center',\n  },\n  input: {\n    ...Fonts.normal,\n    height: 24, \n  },\n\n  navigationHeader:{\n    textAlign: 'center',\n    alignSelf:'center',\n    flexGrow:1,\n  }\n};\n","import { StyleSheet } from 'react-native'\nimport { Helpers, Metrics, Fonts, Colors } from '../../Theme'\n\nexport default StyleSheet.create({\n  container: {\n    backgroundColor: Colors.primary,\n  },\n})\n","import React, { useEffect, Component } from 'react'\nimport { Text, View, Image, Platform } from 'react-native'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../Services/NavigationService'\n\nimport firebase from 'firebase/app'\nimport \"firebase/messaging\"\n\nimport Style from './SplashScreenStyle'\nimport { Helpers, Images } from '../../Theme'\n\nclass SplashScreen extends Component {\n  constructor(props){\n    super(props);\n    /*this.state = {\n    }*/\n  }\n\n  getData(){\n    if (Platform.OS === \"android\" || Platform.OS === \"ios\"){\n      firebase.messaging().onNotificationOpenedApp(remoteMessage => {\n        console.log(\n          'Notification caused app to open from background state:',\n          remoteMessage.notification,\n        );\n        NavigationService.navigate(remoteMessage.data.type);\n      });\n\n      // Check whether an initial notification is available\n      firebase.messaging().getInitialNotification().then(remoteMessage => {\n        if (remoteMessage) {\n          console.log(\n            'Notification caused app to open from quit state:',\n            remoteMessage.notification,\n          );\n          NavigationService.navigate(remoteMessage.data.type); // e.g. \"Settings\"\n        }\n      });\n    }\n  }\n\n  checkData(props){\n  }\n\n  componentDidMount(){\n    //this.props.setFirebaseError(null)\n    this.checkData(this.props);\n    this.getData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps){\n      this.checkData(this.props);\n    }\n  }\n\n  render() {\n    return(\n      <View style={[Helpers.fillRowCenter, Style.container]}>\n        <View style={[Helpers.center, Helpers.logoContainer]}>\n          <Image style={Helpers.fullSize} source={Images.Hexa_icon} resizeMode={'contain'} />\n        </View>\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    //setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SplashScreen);\n//export default SplashScreen;\n","import React from 'react'\nimport { Text, View } from 'react-native'\nimport { Helpers, Metrics } from '../../Theme'\n\n/**\n * This is an example of a container component with a deep link.\n */\nconst DeepLinkingScreen = () => (\n  <View style={[Helpers.fillCenter, Helpers.rowMain, Metrics.mediumHorizontalMargin]}>\n    <Text>\n      This is deep linking example screen which can be accessed using agrissysapp://deeplink scheme!\n    </Text>\n  </View>\n)\n\nexport default DeepLinkingScreen\n","import React from 'react';\r\nimport { StyleSheet, View, TouchableOpacity, Text, Image} from 'react-native';\r\n\r\nimport { ApplicationStyles, Helpers, Metrics, Fonts, Colors, Images } from '../Theme'\r\n\r\nconst Button = props => {\r\n  var TextView = [<Text style={[styles.text, props.textStyle]} key={0}>{props.Text}</Text>]\r\n\r\n  var ImageView = []\r\n  if (props.icon) {\r\n    var _Image = <Image style={Helpers.fullSize} source={props.icon} resizeMode={'contain'} />\r\n    ImageView = (\r\n      <View style={[styles.icon, props.iconStyle]}>\r\n        {_Image}\r\n      </View>\r\n    )\r\n  }\r\n  return (\r\n    <TouchableOpacity style={[styles.boxContainer, props.boxStyle]} onPress={props.onPress}>\r\n      {props.icon?(\r\n        <View style={[styles.button, props.buttonStyle, Helpers.rowCenter]}>\r\n          <View style={[Helpers.colCenter, Helpers.fill]}>\r\n            {TextView}\r\n          </View>\r\n            {ImageView}\r\n        </View>\r\n      ):(\r\n        <View style={[styles.button, props.buttonStyle]}>\r\n          {TextView}\r\n        </View>\r\n      )}\r\n    </TouchableOpacity>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  boxContainer:{\r\n    ...Helpers.center,\r\n    ...Metrics.tinyVerticalMargin,\r\n  },\r\n  button: {\r\n    borderRadius: 15,\r\n    ...Helpers.center,\r\n    ...Helpers.fullWidth,\r\n    ...Metrics.horizontalPadding,\r\n    ...ApplicationStyles.button,\r\n  },\r\n  text: {\r\n    ...ApplicationStyles.buttonText,\r\n    ...Metrics.verticalPadding,\r\n    ...Helpers.center,\r\n    textAlign:\"center\",\r\n  },\r\n  icon: {\r\n    ...Helpers.colCenter,\r\n    ...Metrics.smallVerticalMargin,\r\n    width: '25%', \r\n    height: 50,\r\n  },\r\n});\r\n\r\nexport default Button;","import React from 'react';\r\nimport { View, Text, Image} from 'react-native';\r\nimport Button from './Button'\r\n\r\nimport { ApplicationStyles, Helpers, Metrics } from '../Theme'\r\n\r\nconst Button_Panel = props => {\r\n  const Texts = props.Texts;\r\n  const Images = props.Images;\r\n\r\n  const onPress = props.onPress;\r\n\r\n  var Buttons = []\r\n\r\n  Texts.forEach((element, index) => {\r\n    var image = null\r\n    if (Images && Images[index]){\r\n      image = Images[index]\r\n    }\r\n    Buttons.push(\r\n      <Button key={index} Text={element} icon={image}\r\n        iconStyle={props.iconStyle} itemStyle={props.itemStyle}\r\n        onPress={() => {\r\n          if (onPress) {\r\n            onPress({index: index, text: element})\r\n          }\r\n        }}/>\r\n    )\r\n  });\r\n\r\n  return(\r\n    <View style={[Helpers.buttonContainer, Helpers.midWidth, {marginBottom:30}, props.style] }>\r\n      {Buttons}\r\n    </View>\r\n  )\r\n};\r\n\r\nexport default Button_Panel;","import React from 'react';\r\nimport { StyleSheet, View, TouchableOpacity, Text, Image} from 'react-native';\r\n\r\nimport Button from './Button';\r\n\r\nimport { ApplicationStyles, Helpers, Metrics, Fonts, Colors, Images } from '../Theme'\r\n\r\nconst TitleElement = props => {\r\n  return(\r\n    <View style={[Helpers.buttonContainer, Helpers.midWidth, Metrics.bottomMargin,] }>\r\n      <Button Text={props.Text} icon={props.icon} buttonStyle={{backgroundColor: Colors.AgriDarkblue}}\r\n        onPress={() => {\r\n          if (props.onPress){\r\n            props.onPress()\r\n          }\r\n        } }/>\r\n    </View>\r\n  )\r\n};\r\n\r\nexport default TitleElement;","import React from 'react';\r\nimport { StyleSheet, View, TouchableOpacity, Text} from 'react-native';\r\nimport { ListItem } from 'react-native-elements'\r\n\r\nimport { ApplicationStyles, Helpers, Metrics, Fonts, Colors } from '../Theme'\r\n\r\nconst CustomListItem = props => {\r\n  const key = props.key? props.key : 0\r\n  return (\r\n    <ListItem key={key} containerStyle={[styles.listitem, {flexDirection:\"column\", borderRadius:0}, props.itemStyle]} button onPress={props.onPress}>\r\n      <ListItem.Content>\r\n        <ListItem.Title>{props.Title}</ListItem.Title>\r\n        {props.hasOwnProperty(\"Subtitle\") ? <ListItem.Subtitle>{props.Subtitle}</ListItem.Subtitle>\r\n        :(<></>)}\r\n      </ListItem.Content>\r\n    </ListItem>\r\n  )\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  listitem: {\r\n    flex: 1,\r\n    ...Helpers.borderContainer,\r\n    ...Helpers.center,\r\n    backgroundColor: '#fff',\r\n    paddingVertical: 5,\r\n    paddingHorizontal: 5,\r\n  },\r\n});\r\n\r\nexport default CustomListItem;","import React from 'react';\r\nimport { StyleSheet, View, TouchableOpacity, Text, FlatList} from 'react-native';\r\n\r\nimport { ApplicationStyles, Helpers, Metrics, Fonts, Colors } from '../Theme'\r\n\r\nconst ContentProp = props => {\r\n  var texts = [];\r\n  if (props.texts){\r\n    props.texts.forEach((element,i) => {\r\n      texts.push(\r\n        (<View style={[styles.contentBox, props.textsStyle]} key={\"text_\" + i}>\r\n          <Text>{element}</Text>\r\n        </View>)\r\n      )\r\n    });\r\n  }\r\n\r\n  var datas = [];\r\n  if (props.datas) {\r\n    props.datas.forEach((element,i) => {\r\n      datas.push(\r\n        (<TouchableOpacity style={[styles.contentBox, props.datasStyle]} onLongPress={() => {\r\n          if (props.onPress){\r\n            props.onPress({data: element, index: i})\r\n          }\r\n        }} key={\"data_\" + i}>\r\n          <Text>{element}</Text>\r\n        </TouchableOpacity>)\r\n      )\r\n    });\r\n  }\r\n\r\n  var length = texts.length > datas.length? texts.length : datas.length\r\n  \r\n  var view = [];\r\n  for(var i = 0; i < length; i++) {\r\n    var dataRow = [];\r\n    if (i < texts.length) {\r\n      dataRow.push(texts[i])\r\n    } else {\r\n      dataRow.push((<View style={[Helpers.fill, Helpers.colCenter]} key={\"leftSpace_\" + i}/>))\r\n    }\r\n\r\n    if (datas.length > 0) {\r\n      dataRow.push((<View style={[Helpers.fill, Helpers.colCenter, {maxWidth:20}]} key={\"seperator_\" + view.length}/>))\r\n\r\n      if (i < datas.length) {\r\n        dataRow.push(datas[i])\r\n      } else {\r\n        dataRow.push((<View style={[Helpers.fill, Helpers.colCenter]} key={\"rightSpace_\" + i}/>))\r\n      }\r\n    }\r\n\r\n    view.push(\r\n      (<View style={[props.datas?Helpers.rowCenter:Helpers.halvWidth, Metrics.tinyVerticalMargin]} key={\"row_\" + view.length}>\r\n        {dataRow}\r\n      </View>)\r\n    )\r\n  }\r\n  \r\n  return (view);\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  contentBox: {\r\n    ...Helpers.fill,\r\n    ...Helpers.colCenter,\r\n    ...Helpers.borderContainer,\r\n    borderRadius: 0,\r\n    minHeight:30,\r\n  }\r\n});\r\n\r\n\r\nexport default ContentProp;","import React, { useEffect } from 'react'\nimport { StyleSheet, Text, View, Image, ActivityIndicator } from 'react-native'\n\nimport { Helpers, Images, Colors } from '../Theme'\n\nconst Loading = props => {\n  if (props.loading){\n    var styles = props.back ? styles.container: {}\n    return (\n      <View style={[Helpers.fillRowCenter, Helpers.center, Helpers.logoContainer, styles]}>\n        <View style={[Helpers.center, Helpers.logoContainer]}>\n          <Image style={Helpers.fullSize} source={Images.Hexa_icon} resizeMode={'contain'} />\n        </View>\n      </View>\n    )\n  } else return null;\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: Colors.primary,\n  },\n});\n\nexport default Loading\n","import React, { Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, ScrollView } from 'react-native'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\nimport NavigationService from '../Services/NavigationService'\n\nimport FirebaseActions from '../Stores/Firebase/Actions'\nimport { Actions, DataRefs, sortObject, Operations } from '../Stores/Firebase/Selectors'\n\nimport { Button, Comment_Module } from '../Components'\nimport { ApplicationStyles, Helpers, Metrics } from '../Theme'\n\nclass OperationsPanel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      View:1,\n    }\n  }\n\n  getPenAndSection() {\n    var Section, Pen = undefined\n    if (this.props.pig && this.props.pigTag && this.props.PigsList) {\n      if (this.props.PigsList[this.props.pigTag] && this.props.PigsList[this.props.pigTag].pen && this.props.PigsList[this.props.pigTag].pen != 0) {\n        Pen = this.props.PigsList[this.props.pigTag].pen\n\n        const localDataStore = this.props.firebase.localDataStore\n        if (localDataStore && localDataStore.pens && localDataStore.pens[Pen]) {\n          var PenData = localDataStore.pens[Pen];\n          Section = PenData.section;\n        }\n      }\n    }\n    return {Section, Pen}\n  }\n\n  getData() {\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps) {\n    }\n  }\n\n  render() {\n    const CurrentData = this.props.firebase.currentData\n\n    if (this.props.pig) {\n      return(\n        <View style={[Helpers.buttonContainer]}>\n          <Button Text=\"Add Pig\"\n            onPress={() => {\n              if (this.props.pigTag !== \"\" ) {\n                if (Object.keys(this.props.PigsList).filter(e => e === this.props.pigTag).length > 0){\n                  this.props.setFirebaseError(\"Can not add Tag already exist\")\n                } else {\n                  this.props.setFirebaseError(\"\")\n                  this.props.newPig(this.props.pigTag)\n                }\n              }\n              else this.props.setFirebaseError(\"A Tag is needed\")\n            } }/>\n          <Button Text=\"Move Pig\"\n            onPress={() => {\n              var {Section, Pen} = this.getPenAndSection()\n              this.props.setCurrentPig(this.props.pigTag, Section, Pen)\n              NavigationService.navigate(\"DataEditor\")\n            } }/>\n        </View>\n      )\n    } else if (this.props.section) {\n      return(\n        <View style={[Helpers.buttonContainer]}>\n          <Button Text=\"Weight\"\n              onPress={() => {\n                NavigationService.navigate(\"WeighingOperations\")\n              }}/>\n          <View style={[{marginTop:40}]}>\n            <Button Text=\"Add Pen\"\n              onPress={() => {\n                this.props.editPens(Actions.CREATE)\n                NavigationService.navigate(\"DataEditor\")\n              } }/>\n            <Button Text=\"Remove Pen\"\n              onPress={() => {\n                this.props.editPens(Actions.DELETE)\n                NavigationService.navigate(\"DataEditor\")\n              } }/>\n          </View>\n        </View>\n      )\n    } else {\n      var Action = 1;\n      switch(this.state.View) {\n        case Operations.MOVE:\n        case Operations.LOST:\n        case Operations.SOLD:\n          Action = -1\n        case Operations.ADD:\n          return(\n            <Comment_Module Title={\"Operations comment:\"} Quantity={true} Weight={true} onDone={(res) => {\n              if (res.res) {\n                var action = this.state.View\n                action = action.charAt(0).toUpperCase() + action.slice(1)\n                var quantity = res.quantity\n                if (isNaN(quantity)) quantity = 1\n                Action = Action * quantity\n                var weight = res.weight\n\n                this.props.newComment(CurrentData.penId, action, res.data, quantity, weight)\n                this.props.newPigCount(CurrentData.penId, Action)\n              }\n\n              this.setState({\n                View: 1\n              })\n            }}/>\n          )\n          //this.props.newPigCount(CurrentData.penId, Action * \"count_input\", comment)\n        case Operations.NOTE:\n          return(\n            <Comment_Module Title={\"Pen Note:\"} onDone={(res) => {\n              if (res.res && res.data) {\n                var action = this.state.View\n                action = action.charAt(0).toUpperCase() + action.slice(1)\n                \n                this.props.newComment(CurrentData.penId, action, res.data)\n              }\n              \n              this.setState({\n                View: 1\n              })\n            }}/>\n          )\n          break;\n        default:\n          return(\n            <ScrollView style={{paddingRight: 5}}>\n              <View style={[Helpers.buttonContainer]}>\n                <Button Text=\"Weight\"\n                    onPress={() => {\n                      NavigationService.navigate(\"WeighingOperations\")\n                    }}/>\n                <Button Text=\"Note\"\n                    onPress={() => {\n                      this.setState({\n                        View: Operations.NOTE,\n                      })\n                    }\n                  }/>\n                <View style={[{marginTop:10}]}>\n                  <Button Text=\"Add Pig\"\n                    onPress={() => {\n                      this.setState({\n                        View: Operations.ADD,\n                      })\n                    } }/>\n                  <Button Text=\"Move Pig\"\n                    onPress={() => {\n                      this.setState({\n                        View: Operations.MOVE,\n                      })\n                    } }/>\n                  <Button Text=\"Lost Pig\"\n                    onPress={() => {\n                      this.setState({\n                        View: Operations.LOST,\n                      })\n                    } }/>\n                  <Button Text=\"Sold Pig\"\n                    onPress={() => {\n                      this.setState({\n                        View: Operations.SOLD,\n                      })\n                    } }/>\n                </View>\n              </View>\n            </ScrollView>\n          )\n      }\n    }\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\n\n    setCurrentData: penId => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PENS, penId: penId})),\n    setCurrentDataElement: element => dispatch(FirebaseActions.setCurrentData(element)),\n\n    editPens: (action) => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PENS, action:action})),\n\n    setCurrentPig: (pigTag, Section, Pen) => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PIGS, action:Actions.CREATE, pigtag:pigTag, data:{section:Section}, dataId:Pen})),\n    newPig: (pigTag) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.PIGS, {TagId: pigTag})),\n    newPigCount: (penId, countChange) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.PIGS, {PenId: penId, Action:countChange})),\n\n    newComment: (penId, action, data, quantity=null, weight=null) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.COMMENTS, {PenId: penId, Action: action, Data: data, Quantity:quantity, Weight:weight})),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OperationsPanel);","import React, {useRef, useState, useEffect} from 'react';\r\nimport { Text, View, StyleSheet, Animated } from 'react-native';\r\n\r\nimport { ApplicationStyles, Helpers, Metrics } from '../Theme'\r\n\r\nconst ProgressBar = props => {\r\n  let animation = useRef(new Animated.Value(0));\r\n  const progress = props.progress\r\n  const Color = props.color?props.color:\"#8BED4F\"\r\n  \r\n  useEffect(() => {\r\n    Animated.timing(animation.current, {\r\n      toValue: progress,\r\n      duration: 100\r\n    }).start();\r\n  },[progress])\r\n\r\n  const width = animation.current.interpolate({\r\n    inputRange: [0, 100],\r\n    outputRange: [\"0%\", \"100%\"],\r\n    extrapolate: \"clamp\"\r\n  })\r\n  return (\r\n    <View style={[Helpers.borderContainer, Helpers.fullWidth, {borderWidth:0, minHeight:45, paddingBottom:10}]}>\r\n      <View style={[Helpers.fill, Helpers.fullWidth, Helpers.colMain, {alignContent:'center'}]}>\r\n        {props.text?(\r\n        <Text style={{alignSelf:'flex-start', minHeight:20}}>\r\n          {props.text}\r\n        </Text>):(<></>)}\r\n        <View style={styles.progressBar}>\r\n          <Animated.View style={[StyleSheet.absoluteFill], {backgroundColor: Color, width }}/>\r\n        </View>\r\n      </View>\r\n    </View>\r\n  )\r\n}\r\n\r\nexport default ProgressBar;\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    paddingTop: 5,\r\n    padding: 8,\r\n  },\r\n  progressBar: {\r\n    flexDirection: 'row',\r\n    height: 20,\r\n    width: '100%',\r\n    borderColor: '#000',\r\n    borderWidth: 2,\r\n    borderRadius: 5\r\n  }\r\n});\r\n","import React, { Component } from 'react'\r\nimport { StyleSheet, View, TouchableOpacity, Picker, Text, Image} from 'react-native';\r\n\r\nimport { ApplicationStyles, Helpers, Metrics, Fonts, Colors, Images } from '../Theme'\r\n\r\nconst monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n  \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n];\r\n\r\nclass DateTime_Picker extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n      \r\n    const {year, month, day} = this.getStates(props)\r\n    this.state = {\r\n      year: year,\r\n      month: month,\r\n      day: day,\r\n    }\r\n  }\r\n\r\n  getStates(props) {\r\n    var Today = new Date();\r\n    var Selected = new Date();\r\n    if (props.Selected) {\r\n      Selected = new Date(props.Selected)\r\n    }\r\n\r\n    var year, month, day;\r\n    year = Selected.getFullYear()\r\n    month = Selected.getMonth()\r\n    day = Selected.getDate()\r\n\r\n    if (!props.Selected) {\r\n      if (props.Year){\r\n        year = this.props.Year\r\n      }\r\n      if (props.Month){\r\n        month = this.props.Month\r\n      }\r\n      if (props.Day){\r\n        day = this.props.Day\r\n      }\r\n    }\r\n    return {year, month, day}\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevProps.Selected){\r\n      if (prevProps.Selected != this.props.Selected){\r\n        const {year, month, day} = this.getStates(this.props)\r\n        this.setState({\r\n          year: year,\r\n          month: month,\r\n          day: day,\r\n        }, this.forceUpdate())\r\n      }\r\n    } else {\r\n      var changed = false;\r\n      if (prevProps.Year != this.props.Year) changed = true\r\n      if (prevProps.Month != this.props.Month) changed = true\r\n      if (prevProps.Day != this.props.Day) changed = true\r\n      if (changed) {\r\n        this.forceUpdate()\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var Today = new Date();\r\n\r\n    var year = Today.getFullYear()\r\n    var YearItems = []\r\n    for (let index = year + 25; index > year - 25; index--) {\r\n      var val = String(index)\r\n      YearItems.push(<Picker.Item key={\"Year_\" + index} value={index} label={val} />)\r\n    }\r\n      \r\n    var MonthItems = []\r\n    var month = Today.getMonth()\r\n    for (let index = 0; index < monthNames.length; index++) {\r\n      var val = String(index)\r\n      MonthItems.push(<Picker.Item key={\"Month_\" + index} value={index} label={monthNames[index]} />)\r\n    }\r\n  \r\n    var DayItems = []\r\n    var days = new Date(year, month + 1, 0).getDate()\r\n    for (let index = 1; index <= days; index++) {\r\n      var val = String(index)\r\n      DayItems.push(<Picker.Item key={\"Day_\" + index} value={index} label={val} />)\r\n    }\r\n\r\n    return(\r\n      <View style={[Helpers.fullWidth, Helpers.row, {marginBottom:-10,}, this.props.style]}>\r\n        <Picker selectedValue={this.state.year} style={[{minWidth: 101, marginRight:5}]}\r\n          onValueChange={(_year) => {\r\n            year = _year\r\n            this.props.onValueChange(new Date(year, this.state.month, this.state.day))\r\n          }}>\r\n          {YearItems}\r\n        </Picker>\r\n\r\n        <Picker selectedValue={this.state.month} style={[{minWidth: 110, marginRight:5}]}\r\n          onValueChange={(_month) => {\r\n            month = _month\r\n            this.props.onValueChange(new Date(this.state.year, month, this.state.day))\r\n          }}>\r\n          {MonthItems}\r\n        </Picker>\r\n\r\n        <Picker selectedValue={this.state.day} style={[{minWidth: 83}]}\r\n          onValueChange={(_day) => {\r\n            days = parseInt(_day)\r\n            this.props.onValueChange(new Date(this.state.year, this.state.month, days))\r\n          }}>\r\n          {DayItems}\r\n        </Picker>\r\n      </View>\r\n    )\r\n  }\r\n}\r\nexport default DateTime_Picker;","import React, { useState } from 'react';\r\nimport { Platform, View, Text, TextInput, Image, StyleSheet, RecyclerViewBackedScrollViewComponent} from 'react-native';\r\nimport Button from './Button'\r\nimport { Icon, Input } from 'react-native-elements'\r\nimport { Operations } from '../Stores/Firebase/Selectors'\r\n\r\nimport { ApplicationStyles, Helpers, Metrics, Fonts, Colors } from '../Theme'\r\n\r\nconst Comment_Module = props => {\r\n  const Title = props.Title;\r\n  const Quantity = props.Quantity?props.Quantity:false\r\n  const Weight = props.Weight?props.Weight:false\r\n  \r\n  const onDone = props.onDone;\r\n  var Button1 = \"Done\";\r\n  var Button2 = \"Cancel\";\r\n  const [InputText, setInputText] = useState(\"\");\r\n  const [QuantityText, setQuantityText] = useState(\"1\");\r\n  const [WeightText, setWeightText] = useState(\"1\");\r\n\r\n  var App = Platform.OS === \"android\" || Platform.OS === \"ios\" ? true: false\r\n  return(\r\n    <View style={[Helpers.buttonContainer, props.style] }>\r\n      <View style={styles.textAreaContainer} >\r\n        <View style={[App?{}:Helpers.row]}>\r\n          {Title?(<Text style={[Fonts.normal, {height: 24, color:Colors.input}]}>{Title}</Text>):(<></>)}\r\n          {Quantity?(\r\n            <View style={[Helpers.row, App?{}:{marginLeft:50, marginBottom:4}]}>\r\n              <Text style={[Fonts.normal, {height: 24, color:Colors.input}]}>Quantity:</Text>\r\n              <TextInput style={[styles.textArea, {marginLeft: 10, height:22, width:80, paddingBottom:-10}]} \r\n                multiline={false}\r\n                onChangeText={(text) => {\r\n                  if (text === \"\" || !isNaN(text)) setQuantityText(text)\r\n                }}\r\n                value={QuantityText}\r\n              />\r\n            </View>\r\n          ):(<></>)}\r\n        </View>\r\n        {Weight?(\r\n          <View style={[Helpers.row, App?{}:{marginBottom:4}]}>\r\n            <Text style={[Fonts.normal, {height: 24, color:Colors.input}]}>Average Weight:</Text>\r\n            <TextInput style={[styles.textArea, {marginLeft: 10, height:22, width:80, paddingBottom:-10}]} \r\n              multiline={false}\r\n              onChangeText={(text) => {\r\n                if (text === \"\" || !isNaN(text)) setWeightText(text)\r\n              }}\r\n              value={WeightText}\r\n            />\r\n          </View>\r\n        ):(<></>)}\r\n        <TextInput\r\n          style={styles.textArea}\r\n          underlineColorAndroid=\"transparent\"\r\n          placeholder=\"Type something\"\r\n          placeholderTextColor=\"grey\"\r\n          numberOfLines={10}\r\n          multiline={true}\r\n          onChangeText={(text) => setInputText(text)}\r\n          value={InputText}\r\n        />\r\n      </View>\r\n      <Button key={\"_Done\"} Text={Button1}\r\n        onPress={() => {\r\n          if (onDone) {\r\n            onDone({res: true, data: InputText, quantity: QuantityText, weight: WeightText})\r\n          }\r\n        }}/>\r\n      <Button key={\"_Cancel\"} Text={Button2}\r\n        onPress={() => {\r\n          if (onDone) {\r\n            onDone({res: false, data: InputText})\r\n          }\r\n        }}/>\r\n    </View>\r\n  )\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  textAreaContainer: {\r\n    borderColor: Colors.gray,\r\n    borderWidth: 1,\r\n    padding: 5\r\n  },\r\n  textArea: {\r\n    height: 150,\r\n    justifyContent: \"flex-start\",\r\n    borderColor: \"black\",\r\n    borderWidth: 0.5,\r\n    padding: 5,\r\n  }\r\n})\r\n\r\nexport default Comment_Module;","import { StyleSheet } from 'react-native'\nimport { Helpers, Metrics, Fonts, Colors } from '../../Theme'\n\nexport default StyleSheet.create({\n  logoContainer: {\n    ...Helpers.fullWidth,\n    height: 190,\n    marginTop: Metrics.medium * 2, \n    marginBottom: Metrics.medium,\n  },\n})\n","import React, { useEffect, useState, Component } from 'react'\nimport { Text, View, ActivityIndicator, Image } from 'react-native'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../Services/NavigationService'\n\n//import DeviceActions from '../../Stores/Device/Actions'\nimport FirebaseActions from '../../Stores/Firebase/Actions'\n\nimport { Button_Panel } from '../../Components'\nimport Style from './FrontScreenStyle'\nimport { ApplicationStyles, Helpers, Images } from '../../Theme'\n\nclass FrontScreen extends Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      ShowMainError: false,\n      FocusSubscription: null,\n    }\n  }\n\n  setData(Props) {\n  }\n\n  getData() {\n  }\n\n  checkData(props) {\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps) {\n      this.checkData(this.props);\n      if (this.props.firebase.viewError != prevProps.firebase.viewError) {\n        this.forceUpdate()\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.props.setFirebaseError(null)\n    this.checkData(this.props);\n    this.getData();\n\n    const FocusSubscription = this.props.navigation.addListener(\n      'willFocus',\n      payload => {\n        this.props.setViewLoading(false)\n        this.props.setViewError(null)\n      }\n    );\n    this.setState({\n      FocusSubscription: FocusSubscription\n    })\n  }\n  componentWillUnmount() {\n    if (this.state.FocusSubscription) {\n      this.state.FocusSubscription.remove()\n    }\n  }\n\n  render() {\n    const ErrorMessage = this.props.firebase.viewError\n    const firebaseErrorMessage = this.props.firebase.firebaseErrorMessage\n\n    return(\n      <View\n        style={[\n          Helpers.mainContainer,\n        ]}\n      >\n        <View style={[Style.logoContainer]}>\n          <Image style={[Helpers.fullSize]} source={Images.Logo} resizeMode={'contain'} />\n        </View>\n\n        <View style={[Helpers.contentContainer, Helpers.fullSize]}>\n          <View style={[Helpers.textContainer, Helpers.fullWidth]}>\n            {this.state.ShowMainError && firebaseErrorMessage ? (\n              <Text style={ApplicationStyles.error}>{firebaseErrorMessage}</Text>\n            ):(<></>)}\n            {ErrorMessage ? (\n              <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\n            ):(<></>)}\n            <Text style={ApplicationStyles.text}>Welcome to Agrisys App</Text>\n            <Text style={ApplicationStyles.text}>Please choose your action</Text>\n          </View>\n\n          <Button_Panel \n            Texts={[\"Connect to Agrisys Cloud\", \"Connect to Device\"]}\n            Images={[Images.Haxa_globe, null]}\n            onPress={(ele) => {\n              switch(ele.index){\n                case 0:\n                  NavigationService.navigate('AuthStack')\n                  break;\n                case 1:\n                  NavigationService.navigate(\"DeviceScreen\")\n                  break;\n              }\n              /*<Button Text=\"Example\"\n              onPress={() => NavigationService.navigate(\"ExampleScreen\")}/>*/\n            }}\n          />\n        </View>\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FrontScreen);\n//export default FrontScreen;\n","/**\n * Selectors let us factorize logic that queries the state.\n *\n * Selectors can be used in sagas or components to avoid duplicating that logic.\n *\n * Writing selectors is optional as it is not always necessary, we provide a simple example below.\n */\n\nexport const liveInEurope = (state) => {\n  if (Object.entries(state.example.user).length <= 0) return null\n\n  // For this example, we imagine this cities are european cities\n  const europeanCities = [\n    'Gwenborough',\n    'Wisokyburgh',\n    'McKenziehaven',\n    'South Elvis',\n    'Roscoeview',\n  ]\n\n  return europeanCities.includes(state.example.user.address.city)\n}\n","import { StyleSheet } from 'react-native'\nimport { Helpers, Metrics, Fonts, Colors } from '../../Theme'\n\nexport default StyleSheet.create({\n  error: {\n    ...Fonts.normal,\n    color: Colors.error,\n    marginBottom: Metrics.tiny,\n    textAlign: 'center',\n  },\n  instructions: {\n    ...Fonts.normal,\n    fontStyle: 'italic',\n    marginBottom: Metrics.tiny,\n    textAlign: 'center',\n  },\n  logoContainer: {\n    ...Helpers.fullWidth,\n    height: 300,\n    marginBottom: 25,\n  },\n  result: {\n    ...Fonts.normal,\n    marginBottom: Metrics.tiny,\n    textAlign: 'center',\n  },\n  text: {\n    ...Fonts.normal,\n    marginBottom: Metrics.tiny,\n    textAlign: 'center',\n  },\n})\n","import React, { Component } from 'react'\nimport { Platform, Text, Image, View, ActivityIndicator } from 'react-native'\nimport { Input } from 'react-native-elements'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../../Services/NavigationService'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport {Actions, DataRefs, UserStates} from '../../../Stores/Firebase/Selectors'\n\nimport { Loading } from '../../../Components'\nimport Style from './AuthStyle'\nimport { ApplicationStyles, Helpers, Metrics, Images } from '../../../Theme'\n\nlet auth, firebase;\nif (Platform.OS !== 'web') {\n  //#region App version imports\n  auth = require('@react-native-firebase/auth').default;\n  //#endregion\n} else {\n  //#region Web Version imports\n  firebase = require('firebase/app').default;\n  require('firebase/auth').default;\n  //#endregion\n}\n\nconst PanelsSorter = (userType) => {\n  switch(userType) {\n    case UserStates.ADMIN:\n      return \"AdminPanel\"\n    case UserStates.OWNER:\n      return \"ConsysPanel\"\n    case UserStates.FREE:\n      return \"UserPanel\"\n    case UserStates.STARTER:\n      return \"CreateUserData\"\n    default:\n      return \"LoginUser\"\n  }\n};\n\nclass UserLoadingScreen extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      ISLOADPAGE: true,\n      FocusSubscription: null,\n    }\n  }\n\n  getData() {\n  }\n\n  checkData(props) {\n    const firebaseData = this.props.firebase;\n    if (!firebaseData) {\n      this.props.setFirebaseError(\"Internal rootdata Error\")\n      NavigationService.navigate('MainStack')\n      return;\n    }\n    \n    var page = \"LoginUser\";\n    const firebaseUser = firebaseData.firebaseUser\n    if (firebaseUser && Object.keys(firebaseUser).length > 1) {\n      if (firebaseUser.state === UserStates.STARTER && !firebaseUser.emailVerified) {\n        var User = firebase.auth().currentUser;\n        if(!User.emailVerified) {\n          page = \"VerifyScreen\";\n        }else {\n          page = PanelsSorter(firebaseUser.state)\n        }\n      } else {\n        page = PanelsSorter(firebaseUser.state)\n      }\n    }\n\n    NavigationService.navigate(page)\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps){\n      if (this.props.firebase.firebaseUser != prevProps.firebase.firebaseUser) { //Only checking user changes\n        this.checkData(this.props);\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.props.setFirebaseError(null)\n    this.props.getUser(null)\n    this.checkData(this.props);\n    this.getData();\n\n    const FocusSubscription = this.props.navigation.addListener(\n      'willFocus',\n      payload => {\n        this.props.setViewLoading(false)\n        this.props.setViewError(null)\n      }\n    );\n    this.setState({\n      FocusSubscription: FocusSubscription\n    })\n  }\n\n  componentWillUnmount() {\n    if (this.state.FocusSubscription) {\n      this.state.FocusSubscription.remove()\n    }\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n    const ISLOADPAGE = this.state.ISLOADPAGE;\n    \n    return(\n      <View\n        style={[\n          Helpers.mainContainer,\n        ]}\n      >\n        {!ISLOADPAGE ?(\n          <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\n            <Text style={ApplicationStyles.text}>This page contains an error.</Text>\n            <Text style={ApplicationStyles.text}>If you are going back, please press back again.</Text>\n          </View>\n        ):(\n          <View style={[Helpers.fillRowCenter, Helpers.center, Helpers.logoContainer]}>\n            <Image style={Helpers.fullSize} source={Images.Hexa_icon} resizeMode={'contain'} />\n          </View>\n        )}\n        {(IsLoading || ISLOADPAGE) &&\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n        }\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n\n    clearDataMem: () => dispatch(FirebaseActions.actionStarting(Actions.CLEAR, DataRefs.USERSDATA)),\n    getUser: (UserId) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.USERSDATA, {UserId: UserId})), //TODO: mabye not get user \n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserLoadingScreen);\n//export default UserLoadingScreen;\n","import React, { useEffect } from 'react'\nimport { Platform, Text, View, Button, ActivityIndicator, Image } from 'react-native'\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport NavigationService from '../../Services/NavigationService'\n\nimport ExampleActions from '../../Stores/Example/Actions'\nimport { liveInEurope } from '../../Stores/Example/Selectors'\n\nimport Style from './ExampleScreenStyle'\nimport { ApplicationStyles, Helpers, Images, Metrics } from '../../Theme'\n\n/**\n * This is an example of a container component.\n *\n * This screen displays a little help message and informations about a fake user.\n * Feel free to remove it.\n */\nconst instructions = Platform.select({\n  ios: 'Press Cmd+R to reload,\\nCmd+D or shake for dev menu.',\n  android: 'Double tap R on your keyboard to reload,\\nShake or press menu button for dev menu.',\n})\n\nconst ExampleScreen = () => {\n  const dispatch = useDispatch()\n\n  const user = useSelector((state) => state.example.user)\n  const userIsLoading = useSelector((state) => state.example.userIsLoading)\n  const userErrorMessage = useSelector((state) => state.example.userErrorMessage)\n\n  useEffect(() => {\n    dispatch(ExampleActions.fetchUser())\n  }, [])\n\n  return (\n    <View\n      style={[\n        Helpers.fillCenter,\n        Helpers.rowMain,\n        Metrics.mediumHorizontalMargin,\n        Metrics.mediumVerticalMargin,\n      ]}\n    >\n      {userIsLoading ? (\n        <ActivityIndicator size=\"large\" color=\"#0000ff\" />\n      ) : (\n        <View>\n          <View style={Style.logoContainer}>\n            <Image style={Helpers.fullSize} source={Images.logo} resizeMode={'contain'} />\n          </View>\n          <Text style={Style.text}>To get started, edit App.js</Text>\n          <Text style={Style.instructions}>{instructions}</Text>\n          {userErrorMessage ? (\n            <Text style={Style.error}>{userErrorMessage}</Text>\n          ) : (\n            <View>\n              <Text style={Style.result}>\n                {\"I'm a fake user, my name is \"}\n                {user.name}\n              </Text>\n              <Text style={Style.result}>\n                {liveInEurope ? 'I live in Europe !' : \"I don't live in Europe.\"}\n              </Text>\n            </View>\n          )}\n          <Button\n            style={ApplicationStyles.button}\n            onPress={() => dispatch(ExampleActions.fetchUser())}\n            title=\"Refresh\"\n          />\n        </View>\n      )}\n    </View>\n  )\n}\n\nexport default ExampleScreen\n","import React from 'react'\nimport { createAppContainer } from 'react-navigation'\nimport { createStackNavigator } from 'react-navigation-stack'\nimport { TouchableOpacity, Icon, View, Text } from 'react-native'\n\nimport Front from '../Containers/Agrisys/FrontScreen'\nimport Example from '../Containers/Example/ExampleScreen'\n//import Device from '../Containers/Device/DeviceScreen'\n\nimport { ApplicationStyles } from '../Theme'\n/**\n * The root screen contains the application's navigation.\n *\n * @see https://reactnavigation.org/docs/en/hello-react-navigation.html#creating-a-stack-navigator\n */\nconst StackNavigator = createStackNavigator(\n  {\n    // The main application screen is our \"ExampleScreen\". Feel free to replace it with your\n    // own screen and remove the example.\n    FrontScreen: {\n      screen: Front,\n      navigationOptions: () => ({\n        headerMode: 'none',\n        headerShown: false,\n      }),\n      path: 'main',\n    },\n    \n    /*DeviceScreen: {\n      screen: Device,\n      navigationOptions: () => ({\n        title: 'Device',\n        headerTitleStyle:{\n          ...ApplicationStyles.navigationHeader\n        },\n      }),\n    },*/\n\n    ExampleScreen: {\n      screen: Example,\n      navigationOptions: () => ({\n        headerMode: 'none',\n      }),\n      path: 'example',\n    }\n  },\n  {\n    initialRouteName: 'FrontScreen',\n    // See https://reactnavigation.org/docs/en/stack-navigator.html#stacknavigatorconfig\n    headerMode: 'float',\n    defaultNavigationOptions:{\n      headerTitleAlign: 'center',\n      headerRight: () => (<View style={{padding:6}}></View>),\n    },\n  }\n)\n\nexport default StackNavigator\n","import { StyleSheet } from 'react-native'\nimport { Helpers, Metrics, Fonts, Colors } from '../../../Theme'\n\nexport default StyleSheet.create({\n  \n})\n","import React, { Component } from 'react'\nimport { Text, View, ActivityIndicator, Platform } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\nimport NavigationService from '../../../Services/NavigationService'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs } from '../../../Stores/Firebase/Selectors'\n\nimport { Button } from '../../../Components'\nimport Style from './AuthStyle'\nimport { ApplicationStyles, Helpers, Metrics } from '../../../Theme'\n\nlet auth, firebase;\nif (Platform.OS !== 'web') {\n  //#region App version imports\n  auth = require('@react-native-firebase/auth').default;\n  //#endregion\n} else {\n  //#region Web Version imports\n  firebase = require('firebase/app').default;\n  require('firebase/auth').default;\n  //#endregion\n}\n\nclass VerifyScreen extends Component{\n  constructor(props){\n    super(props);\n    \n    this.state = {\n    }\n  }\n\n  setData(Props) {\n  }\n\n  getData() {\n  }\n\n  checkData(props) {\n    if (props.firebase && props.firebase.firebaseUser) {\n      var User = firebase.auth().currentUser;\n\n      if (User && !props.firebase.firebaseUser.emailVerified && !props.firebase.viewIsLoading){\n        User.reload().then((data)=>{\n          if(User.emailVerified) {\n            this.props.setViewLoading(true)\n            this.props.setUser(User.emailVerified)\n            console.log(\"Verified\")\n            NavigationService.navigate(\"AuthStack\")\n          }\n        })\n      }\n      \n      if (props.firebase.firebaseUser.emailVerified) NavigationService.navigate(\"AuthStack\")\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps) {\n      this.checkData(this.props);\n    }\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props);\n    this.getData();\n  }\n\n  componentWillUnmount(){\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n    const firebaseUser = this.props.firebase.firebaseUser\n    const ErrorMessage = this.props.firebase.viewError\n\n    return(\n      <View\n        style={[\n          Helpers.mainContainer,\n        ]}\n      >\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\n          {ErrorMessage ? (\n            <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\n          ):(<></>)}\n\n          <View>\n            <Text>Please verify your account by accepting the email, sent to your current account</Text>\n            <Text>This page will not refresh itself...</Text>\n            <Button Text=\"Resend verification\"\n              onPress={() => {\n                console.log(\"send\", firebaseUser, this.state.User)\n                if (firebaseUser && this.state.User) {\n                  this.state.User.sendEmailVerification()\n                }\n              }}/>\n            <Button Text=\"Refresh\"\n              onPress={() => {\n                this.checkData(this.props, this.state)\n              }}/>\n          </View>\n          \n        </View>\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n        }\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\n\n    setUser: (Verified) => dispatch(FirebaseActions.actionStarting(Actions.UPDATE, DataRefs.USERS, {emailVerified:Verified, })),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(VerifyScreen);\n//export default VerifyScreen;","import React, { Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, Image } from 'react-native'\nimport { Input } from 'react-native-elements'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../../Services/NavigationService'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs } from '../../../Stores/Firebase/Selectors'\n\nimport { Button } from '../../../Components'\nimport Style from './AuthStyle'\nimport { ApplicationStyles, Helpers, Metrics, Images } from '../../../Theme'\n\nclass UserLoginScreen extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      Email: \"\",\n      Pass: \"\",\n      CreateUser: false,\n    }\n  }\n\n  getData() {\n  }\n\n  checkData(props) {\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props);\n    this.getData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps) {\n      this.checkData(this.props);\n      if (this.props.firebase.viewError != prevProps.firebase.viewError) {\n        this.forceUpdate()\n      }\n    }\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n    const ErrorMessage = this.props.firebase.viewError\n    \n    return(\n      <View\n        style={[\n          Helpers.mainContainer,\n        ]}\n      >\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\n          {ErrorMessage ? (\n            <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\n          ):(<></>)}\n\n          {!this.state.CreateUser?(\n            <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\n              <View style={[Helpers.borderContainer, Helpers.midWidth, {marginBottom:20}] }>\n                <Input\n                  label=\"Username\"\n                  style={ApplicationStyles.input}\n                  onChangeText={text => {\n                    this.setState({Email: text})\n                  }}\n                  value={this.state.Email}\n                />\n                <Input\n                  label=\"Password\"\n                  style={ApplicationStyles.input}\n                  onChangeText={text => {\n                    this.setState({Pass:text})\n                  }}\n                  value={this.state.Pass}\n                />\n                <Button Text=\"Login\" icon={Images.User}\n                  onPress={() => {\n                    if (!this.state.Email || this.state.Email === \"\") this.props.setViewError(\"Email is needed\")\n                    else if (this.state.Email === \"CLEAR\") this.props.clearDataMem()\n                    else if (!this.state.Pass || this.state.Pass === \"\") this.props.setViewError(\"Password is needed\")\n                    else {\n                      this.props.setViewLoading(true)\n                      this.props.signIN(this.state.Email, this.state.Pass)\n                    }\n                  }}/>\n              </View>\n\n              <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\n                <Button Text=\"Send reset password\"\n                  onPress={() => {\n                    this.props.setViewError(null)\n                    if (this.state.Email) {\n                      this.props.setViewLoading(true)\n                      this.props.resetPass(this.state.Email)\n                    } else {\n                      this.props.setViewError(\"Please provide an Email\")\n                    }\n                  }}/>\n                <Button Text=\"Create New User\"\n                  onPress={() => {\n                    this.props.setViewError(null)\n                    this.setState({\n                      Email: \"\",\n                      Pass: \"\",\n                      CreateUser: true,\n                    })\n                  }}/>\n              </View>\n            </View>\n          ):(\n            <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\n              <View style={ [Helpers.borderContainer, Helpers.midWidth, {marginBottom:20}] }>\n                <Input\n                  label=\"Email\"\n                  style={ApplicationStyles.input}\n                  onChangeText={text => {this.setState({Email:text})}}\n                  value={this.state.Email}\n                />\n                <Input\n                  label=\"Password\"\n                  style={ApplicationStyles.input}\n                  onChangeText={text => {this.setState({Pass:text})}}\n                  value={this.state.Pass}\n                />\n              </View>\n              <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\n                <Button Text=\"Create User\" \n                  onPress={() => { \n                    if (!this.state.Email || this.state.Email === \"\") this.props.setFirebaseError(\"Email is needed\")\n                    else if (!this.state.Pass || this.state.Pass === \"\") this.props.setFirebaseError(\"Password is needed\")\n                    else {\n                      this.props.setViewLoading(true)\n                      this.props.createUser(this.state.Email,this.state.Pass)\n                    }\n                  }}\n                />\n              </View>\n            </View>\n          )}\n\n          {(IsLoading || this.props.firebase.viewIsLoading) &&\n            <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n          }\n        </View>\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n    clearDataMem: () => dispatch(FirebaseActions.actionStarting(Actions.CLEAR, DataRefs.USERSDATA)),\n\n    signIN: (Email, Pass) => dispatch(FirebaseActions.actionStarting(Actions.SIGN, DataRefs.USERSDATA, {Email: Email, Pass: Pass})),\n    resetPass: (Email) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.USERS, {Email: Email})),\n    createUser: (Email, Pass) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.USERS, {Email: Email, Pass: Pass})),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserLoginScreen);\n//export default UserLoginScreen;","import React, { Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator } from 'react-native'\nimport { Input } from 'react-native-elements'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\nimport NavigationService from '../../../Services/NavigationService'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs } from '../../../Stores/Firebase/Selectors'\n\nimport { Button } from '../../../Components'\nimport Style from './AuthStyle'\nimport { ApplicationStyles, Helpers, Metrics } from '../../../Theme'\n\nimport { UserStates, DataStringCheck } from '../../../Stores/Firebase/Selectors'\n\nclass CreateNewUserData extends Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      Farm: \"Test\",\n      Sections: 1,\n      Pens: 1\n    }\n  }\n\n  getData() {\n  }\n\n  checkData(props) {\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props);\n    this.getData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps) {\n      this.checkData(this.props);\n      if (this.props.firebase.viewError != prevProps.firebase.viewError) {\n        this.forceUpdate()\n      }\n      if (this.props.firebase.firebaseUser !== prevProps.firebase.firebaseUser) {\n        if (prevProps.firebase.firebaseUser.state !== UserStates.STARTER) {\n          NavigationService.nacigationPop()\n        }\n      }\n    }\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n    const ErrorMessage = this.props.firebase.viewError\n\n    return(\n      <View\n        style={[\n          Helpers.mainContainer,\n        ]}\n      >\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\n          {ErrorMessage ? (\n            <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\n          ):(<></>)}\n\n          <View style={ [Helpers.borderContainer, Helpers.midWidth, {marginBottom:20}] }>\n            <Input\n              label=\"Farm Name\"\n              style={ApplicationStyles.input}\n              onChangeText={text => {\n                if (text){\n                  if (DataStringCheck(text)){\n                    this.setState({Farm:text})\n                  }\n                }else {\n                  this.setState({Farm:text})\n                }\n              }}\n              value={this.state.Farm}\n            />\n            <Input\n              label=\"Number of Sections\"\n              style={ApplicationStyles.input}\n              onChangeText={text => {\n                if (!isNaN(text)){\n                  this.setState({\n                    Sections:text\n                  })\n                }\n              }}\n              value={this.state.Sections}\n            />\n            <Input\n              label=\"Number of Pens in Sections\"\n              style={ApplicationStyles.input}\n              onChangeText={text => {\n                if (!isNaN(text)){\n                  this.setState({\n                    Pens:text\n                  })\n                }\n              }}\n              value={this.state.Pens}\n            />\n          </View>\n          <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\n            <Button Text=\"Create User\" \n              onPress={() => {\n                var _UserData = {}\n                var _sections = {};\n                var _pens = {};\n\n                if (!this.state.Farm || this.state.Farm === \"\"){\n                  this.props.setViewError(\"Farm name is needed\")\n                }\n                else if (this.state.Sections && isNaN(this.state.Sections)){\n                  this.props.setViewError(\"Number of Sections have to be a number\")\n                } else if (this.state.Pens && isNaN(this.state.Pens)){\n                  this.props.setViewError(\"Number of Pens in Sections have to be a number\")\n                }\n                else {\n                  _UserData = {state: UserStates.FREE, farms: {}}\n                  \n                  var Pen = 1;\n                  var i, i2;\n                  for (i = 1; i <= this.state.Sections; i++) {\n                    var sectionPens = {};\n                    for (i2 = 1; i2 <= this.state.Pens; i2++) {\n                      _pens['Pen_' + Pen] = {section: 'Section_' + i}\n                      sectionPens['Pen_' + Pen] = true\n                      Pen++;\n                    }\n                    \n                    _sections['Section_' + i] = {pens: sectionPens}\n                  }\n                  this.props.setViewLoading(true)\n                  this.props.createUserData(_UserData, this.state.Farm, _sections, _pens)\n                }\n              }}/>\n            </View>\n        </View>\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n        }\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n    \n    createUserData: (Userdata, Farm, Sections, Pens) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.USERSDATA, {UserData: Userdata, Farms:{name:Farm}, Sections:Sections, Pens:Pens})),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateNewUserData);\n//export default CreateNewUserData;","import React from 'react'\nimport { createStackNavigator } from 'react-navigation-stack'\nimport { TouchableOpacity, View, Text } from 'react-native'\nimport { Icon } from 'react-native-elements'\n\nimport NavigationService from '../Services/NavigationService'\n\nimport LoadingUserScreen from '../Containers/Cloud/AuthScreens/UserLoadingScreen'\nimport LoginUserScreen from '../Containers/Cloud/AuthScreens/UserLoginScreen'\nimport VerifyScreen from '../Containers/Cloud/AuthScreens/VerifyScreen'\nimport CreateUserDataScreen from '../Containers/Cloud/AuthScreens/CreateUserDataScreen'\n\nimport { ApplicationStyles } from '../Theme'\n\n/**\n * The root screen contains the application's navigation.\n *\n * @see https://reactnavigation.org/docs/en/hello-react-navigation.html#creating-a-stack-navigator\n */\nconst StackNavigator = createStackNavigator(\n  {\n    UserLoadingScreen: {\n      screen: LoadingUserScreen,\n      navigationOptions: () => ({\n        title: 'User loading',\n      }),\n    },\n    LoginUser: {\n      screen: LoginUserScreen,\n      navigationOptions: () => ({\n        title: 'User Login',\n        headerLeft: () => (\n          <View style={{padding:6, paddingLeft: 15}}>\n            <Icon name=\"md-arrow-back\" type='ionicon' size={25} color=\"black\" onPress={() => NavigationService.navigate('MainStack')}/>\n          </View>\n        ),\n      }),\n    },\n    VerifyScreen: {\n      screen: VerifyScreen,\n      navigationOptions: () => ({\n        title: 'User Verification',\n      }),\n    },\n    CreateUserData: {\n      screen: CreateUserDataScreen,\n      navigationOptions: () => ({\n        title: 'Create Data',\n      }),\n    },\n  },\n  {\n    initialRouteName: 'UserLoadingScreen',\n    // See https://reactnavigation.org/docs/en/stack-navigator.html#stacknavigatorconfig\n    headerMode: 'float',\n    defaultNavigationOptions:{\n      headerTitleAlign: 'center',\n      headerTitleStyle:{...ApplicationStyles.navigationHeader},\n      headerLeft: () => (\n        <View style={{padding:6, paddingLeft: 15}}>\n          <Icon type='ionicon' name=\"md-arrow-back\" size={25} color=\"black\" onPress={() => NavigationService.navigate('MainStack')}/>\n        </View>\n      ),\n      headerRight: () => (<View style={{padding:6}}></View>),\n    },\n  }\n)\n\nexport default StackNavigator\n","import { StyleSheet } from 'react-native'\nimport { Helpers, Metrics, Fonts, Colors } from '../../../Theme'\n\nexport default StyleSheet.create({\n\n})\n","import React, { useEffect, Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, ScrollView } from 'react-native'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../../Services/NavigationService'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs } from '../../../Stores/Firebase/Selectors'\n\nimport { Button, Button_Panel } from '../../../Components'\nimport Style from './UserPanelStyle'\nimport { ApplicationStyles, Helpers, Metrics, Images } from '../../../Theme'\n\nclass FrontScreen extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ISLOADPAGE: true,\n    }\n  }\n\n  getData() {\n  }\n\n  checkData(props) {\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props);\n    this.getData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps) {\n      this.checkData(this.props);\n      if (this.props.firebase.viewError != prevProps.firebase.viewError) {\n        this.forceUpdate()\n      }\n    }\n  }\n\n  render() {\n    const firebase = this.props.firebase;\n\n    const IsLoading = firebase.firebaseIsLoading\n    const firebaseErrorMessage = firebase.firebaseErrorMessage\n    const ErrorMessage = this.props.firebase.viewError\n    const firebaseUser = firebase.firebaseUser\n\n    return(\n      <ScrollView style={[Helpers.fullSize, Helpers.fill]}>\n        <View\n          style={[\n            Helpers.mainContainer,\n          ]}\n        >\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\n          {firebaseErrorMessage ? (\n            <Text style={ApplicationStyles.error}>{firebaseErrorMessage}</Text>\n          ):(<></>)}\n          {firebaseUser?(\n          <View style={ Helpers.textContainer }>\n            <Text style={ApplicationStyles.text}>Welcome: {firebaseUser.displayName ? firebaseUser.displayName : firebaseUser.email}</Text>\n          </View>):(<></>)}\n\n          <Button_Panel \n            Texts={[\"Dashboard\", \"Pens\", \"Batchs\", \"Growth curves\", \"Operations\", \"AutoPigs\", \"Feeding\", \"Pigs\"]}\n            Images={[Images.DashBoard, Images.Pens, Images.Section, Images.GCurves, Images.System, Images.AutoPig, Images.Feed, Images.Sow ]}\n            onPress={(ele) => {\n              switch(ele.text){\n                case \"Dashboard\":\n                  NavigationService.navigate(\"UserDashBoard\")\n                  break;\n                case \"Pens\":\n                  NavigationService.navigate(\"UserPens\")\n                  break;\n                case \"Batchs\":\n                  NavigationService.navigate(\"UserBatchs\")\n                  break;\n                case \"Growth curves\":\n                  NavigationService.navigate(\"UserCurves\")\n                  break;\n                case \"Operations\":\n                  NavigationService.navigate(\"UserOperations\")\n                  break;\n                case \"AutoPigs\":\n                  break;\n                case \"Feeding\":\n                  break;\n                case \"Pigs\":\n                  NavigationService.navigate(\"UserPigs\")\n                  break;\n              }\n            }}\n          />\n          \n          {firebaseUser && firebaseUser.state === \"admin\"?(<></>):(\n          <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\n            <Button Text=\"LogOut\"\n              onPress={() => {\n                this.props.logOut()\n              }}/>\n          </View>\n          )}\n        </View>\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n        }\n      </View>\n      </ScrollView>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n\n    logOut: () => dispatch(FirebaseActions.actionStarting(Actions.SIGN, DataRefs.USERSDATA)),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FrontScreen);\n//export default FrontScreen;\n","import React, { useEffect, Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, ScrollView, FlatList } from 'react-native'\nimport { Input, Icon } from 'react-native-elements'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../../Services/NavigationService'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { DataRefs, Actions, GetBatchEnd, CurvePredict, GetCurve_FromBatch, GetStats_FromBatch  } from '../../../Stores/Firebase/Selectors'\n\nimport { Button, TitleElement, ContentProp, ProgressBar } from '../../../Components'\nimport Style from './UserPanelStyle'\nimport { ApplicationStyles, Helpers, Metrics, Colors } from '../../../Theme'\n\nclass Dashboard extends Component {\n  constructor(props){\n    super(props);\n\n    const {Name, Manager, Mail, SectionsList, BatchList, MaxCap, CurCap} = this.setData(props)\n    this.state = {\n      farmName: Name,\n      farmManager: Manager,\n      farmMail: Mail, \n\n      BatchList: BatchList,\n\n      MaxCap:MaxCap, \n      CurCap:CurCap,\n    }\n  }\n\n  setData(Props) {\n    const localDataStore = Props.firebase.localDataStore;\n    const firebaseUser = this.props.firebase.firebaseUser\n\n    var Name = \"Not set\"\n    var Manager = \"Not set\"\n    var Mail = \"Not set\"\n\n    if (localDataStore && localDataStore.farms && firebaseUser.farms && localDataStore.farms[Object.keys(firebaseUser.farms)[0]]) {\n      var Farm = localDataStore.farms[Object.keys(firebaseUser.farms)[0]]\n      Name = Farm.name?Farm.name: Name\n      Manager = Farm.name?Farm.manager: Manager\n      Mail = Farm.name?Farm.email: Mail\n    }\n\n    var BatchList = {}//localDataStore.batchs\n    var MaxCap = 0;\n    var CurCap = 0;\n\n    if (localDataStore.batchs) {\n      Object.keys(localDataStore.batchs).filter(e => e !== '__jsogObjectId' && e !== 'update_time').map((BatchID) => {\n        var Batch = localDataStore.batchs[BatchID]\n        var Data = GetStats_FromBatch(Batch, localDataStore)\n        if (Data) {\n          var {StartDate, EndDate, TargetWeight, PenCount, Animals, AverageWeight, AverageGrowth, isClosed, isVirtual} = Data\n          \n          if (Batch.pens) {\n            MaxCap += Object.keys(Batch.pens).reverse().filter(e => (e !== '__jsogObjectId')).length * 1;\n          }\n          CurCap += Animals;\n\n          Batch.count = Animals\n          Batch.weight = AverageWeight\n          Batch.target = TargetWeight\n          Batch.End = EndDate\n\n          BatchList[BatchID] = Batch\n        }\n      })\n    }\n\n    if (MaxCap === 0) MaxCap++;\n    return { Name, Manager, Mail, BatchList, MaxCap, CurCap }\n  }\n\n  getData() {\n    const localDataStore = this.props.firebase.localDataStore;\n\n    if (!localDataStore.sections) localDataStore.sections = {}\n    if (!localDataStore.pens) localDataStore.pens = {}\n\n    this.props.getFarm()\n    this.props.getSections(localDataStore.sections?localDataStore.sections.update_time:null)\n    this.props.getPens(localDataStore.pens?localDataStore.pens.update_time:null)\n    this.props.getBatch()\n    this.props.getWeights(localDataStore.weighings?localDataStore.weighings.update_time:null, localDataStore.sections)\n    this.props.getCurve()\n  }\n\n  checkData(props) {\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps) {\n      this.checkData(this.props);\n\n      if (this.props.firebase.localDataStore && prevProps.firebase.localDataStore) {\n        const firebaseUser = this.props.firebase.firebaseUser\n        const localDataStore = this.props.firebase.localDataStore;\n\n        if (localDataStore.farms && firebaseUser.farms && localDataStore.farms[Object.keys(firebaseUser.farms)[0]]) {\n          var Farm = localDataStore.farms[Object.keys(firebaseUser.farms)[0]]\n\n          if ((this.state.farmName !== Farm.name || this.state.farmManager !== Farm.manager || this.state.farmMail !== Farm.email) ||\n              localDataStore.batchs && JSON.stringify(this.state.BatchList) !== JSON.stringify(localDataStore.batchs) ||\n              localDataStore.graphs && localDataStore.graphs !== prevProps.firebase.localDataStore.graphs) {\n            const {Name, Manager, Mail, BatchList, MaxCap, CurCap} = this.setData(this.props)\n            this.setState({\n              farmName: Name,\n              farmManager: Manager,\n              farmMail: Mail,\n        \n              BatchList: BatchList,\n\n              MaxCap:MaxCap, \n              CurCap:CurCap,\n            }, () => {\n              this.forceUpdate()\n            })\n          }\n        }\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props);\n    this.getData();\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n    const localDataStore = this.props.firebase.localDataStore\n\n    var FarmProgress = 0\n    if (this.state.BatchList) {\n      var BatchList = Object.keys(this.state.BatchList).filter(e => e !== '__jsogObjectId' && e !== 'update_time' && (!this.state.BatchList[e].state || this.state.BatchList[e].state !== \"Closed\"))\n      BatchList.forEach(element => {\n        var Batch = this.state.BatchList[element]\n        FarmProgress += (Batch.weight/Batch.target)*100;\n      });\n      FarmProgress = (FarmProgress/(100*BatchList.length))*100\n    }\n\n    return(\n      <View\n        style={[\n          Helpers.mainContainer,\n        ]}\n      >\n        <View style={[Helpers.contentContainer, Helpers.fullWidth, Helpers.fill]}>\n          <TitleElement Text=\"Farm description\"/>\n\n          <View style={[Helpers.buttonContainer, Helpers.fullWidth, {height:110,}]}>\n            <ContentProp texts={[\"Farm name\", \"Manager\", \"E-mail\"]} datas={[this.state.farmName, this.state.farmManager, this.state.farmMail ]} />\n          </View>\n          <View style={{height:20}}/>\n          <ProgressBar text={\"Farm capacity: \" + this.state.CurCap + \" of \" + this.state.MaxCap} progress={(this.state.CurCap/this.state.MaxCap) * 100 }/>\n          <ProgressBar text={\"Farm performance:\"} progress={FarmProgress}/>\n\n          {this.state.BatchList?(\n            <View style={[Helpers.borderContainer, Helpers.fullWidth, {borderWidth:0, marginTop:10}]}>\n              <Text>Batches:</Text>\n              <FlatList\n                data={Object.keys(this.state.BatchList).filter(e => e !== '__jsogObjectId' && e !== 'update_time' && \n                                                              (!this.state.BatchList[e].state || this.state.BatchList[e].state !== \"Closed\"))}\n                renderItem={({item, i}) => {\n                  var Batch = this.state.BatchList[item]\n                  var TempCurve = GetCurve_FromBatch(Batch, localDataStore.graphs)\n                  var End = GetBatchEnd(Batch, TempCurve)\n                  var EndDate = Batch.End;\n                  var Color = Colors.AgriGreen\n                  if (EndDate > End) Color = Colors.error\n                  var count = Batch.count\n                  if (!count) count = 0\n                  var progress = (Batch.weight/Batch.target)*100;\n\n                  EndDate = new Date(EndDate).getDate() + \"/\" + (new Date(EndDate).getMonth() +1) + \"/\" + new Date(EndDate).getFullYear()\n                  var StartDate = new Date(Batch.time).getDate() + \"/\" + (new Date(Batch.time).getMonth() +1) + \"/\" + new Date(Batch.time).getFullYear()\n                  return(\n                    <ProgressBar text={item + \" Startdate: \" + StartDate + \" EndForcast: \" + EndDate + \", \" + count + \" pigs\"} progress={progress} color={Color}/>\n                  )\n                }}\n                keyExtractor={(item, index) => index.toString()}\n              />\n            </View>\n          ):(<></>)}\n          <Button Text=\"Clear local datastore\"\n            onPress={() => {\n              this.props.clearDataMem()\n              this.getData()\n            }}/>\n        </View>\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n        }\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n\n    clearDataMem: () => dispatch(FirebaseActions.actionStarting(Actions.CLEAR, DataRefs.USERSDATA)),\n\n    getFarm: () => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.FARMS, {})),\n    getSections: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.SECTIONS, {DataTime: DataTime})),\n    getPens: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PENS, {DataTime: DataTime})),\n    getBatch: () => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.BATCHS, {})),\n    getCurve: () => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.GRAPH, {})),\n    getWeights: (DataTime, MemSections) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.WEIGHING, {DataTime: DataTime, MemSections: MemSections})),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);\n//export default Dashboard;\n","import { StyleSheet } from 'react-native'\nimport { Helpers, Metrics, Fonts, Colors } from '../../Theme'\n\nexport default StyleSheet.create({\n  loading: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#F5FCFF88',\n  },\n\n  textContainer: {\n    ...Fonts.normal,\n    marginBottom: Metrics.normal,\n  },\n  inputContainer: {\n    marginBottom: Metrics.small,\n  },\n\n  input: {\n    ...Fonts.normal,\n    height: 24, \n  },\n  \n})\n","import React, { useEffect, useState, Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, SafeAreaView, FlatList } from 'react-native'\nimport { ListItem, Input } from 'react-native-elements'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../../Services/NavigationService'\n\n//import { ConnectionState } from '../../../Stores/Device/Selectors'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs, sortObject } from '../../../Stores/Firebase/Selectors'\n\nimport { Button, OperationsPanel, CustomListItem, ContentProp } from '../../../Components'\nimport Style from '../../../Containers/Cloud/CloudScreenStyle'\nimport { ApplicationStyles, Helpers, Metrics } from '../../../Theme'\n\nimport { FlatGrid, SectionGrid } from 'react-native-super-grid';\n\nclass Pigs extends Component {\n  constructor(props){\n    super(props);\n\n    const {PigsList} = this.setData(props)\n    this.state = {\n      PigsList: PigsList,\n      PigTag: \"\"\n    }\n  }\n\n  getData() {\n    const localDataStore = this.props.firebase.localDataStore\n    if (!localDataStore.pens) localDataStore.pens = {}\n    this.props.getPigs()\n    this.props.getPens(localDataStore.pens.update_time)\n  }\n\n  setData(Props) {\n    const localDataStore = Props.firebase.localDataStore\n\n    var PigsList = null\n    if (localDataStore && localDataStore.pigs) {\n      PigsList = sortObject(localDataStore.pigs)\n    }\n    \n    return {PigsList}\n  }\n\n  checkData(props) {\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props);\n    this.getData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps){\n      this.checkData(this.props);\n\n      if (this.props.firebase) {\n        if (this.props.firebase.localDataStore) {\n          if (this.props.firebase.localDataStore.pigs && JSON.stringify(this.state.PigsList)!==JSON.stringify(sortObject(this.props.firebase.localDataStore.pigs))) {\n            const {PigsList} = this.setData(this.props)\n            this.setState({\n              PigsList: PigsList,\n            })\n          }\n        }\n      }\n    }\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n\n    const localDataStore = this.props.firebase.localDataStore\n\n    const connectedDevice = null\n    const connectedState = null\n    const DeviceData = null\n\n    return(\n      <View\n        style={[\n          Helpers.mainContainer,\n        ]}\n      >\n        <View style={[Helpers.contentContainer, Helpers.fullWidth, Helpers.fill]}>\n          <View style={[Helpers.fill, Helpers.buttonContainer, Helpers.fullWidth, Metrics.bottomMargin, Helpers.column]}>\n            <Device_Display connectedState={connectedState}/>\n            <Scanner_Display DeviceData={DeviceData}/>\n            {this.state.PigsList ? (\n              <View style={[Helpers.fill, Helpers.borderContainer, Metrics.smallHorizontalPadding, Metrics.smallVerticalPadding, {maxWidth:800, marginTop:10}]}>\n                <SafeAreaView style={styles.container}>\n                  <FlatList\n                    data={Object.keys(this.state.PigsList)}\n                    renderItem={({item})=>{\n                      var Pen = \"-\"\n                      var Section = \"-\"\n                      if (this.state.PigsList[item].pen && this.state.PigsList[item].pen != 0) {\n                        Pen = this.state.PigsList[item].pen\n                        if (localDataStore.pens && localDataStore.pens[Pen]){\n                          var PenData = localDataStore.pens[Pen];\n                          Section = PenData.section;\n                        }\n                      }\n                      return(\n                        <View style={[Helpers.fill, Helpers.rowCenter, Helpers.fullWidth, {height:35}]}>\n                          <CustomListItem Title={item} itemStyle={[{height:35,}]} onPress={() => {\n                              this.props.setData(item, Section, Pen)\n                              NavigationService.navigate(\"DataDisplay\")\n                            }}/>\n\n                          <CustomListItem itemStyle={[{width:70, height:35, justifyContent:\"center\"}]} Title={Pen} onPress={() => {\n                              this.setState({\n                                PigTag: item\n                              })\n                            }}/>\n\n                          <CustomListItem itemStyle={[{width:90, height:35}]} Title={Section} onPress={() => {\n                              this.setState({\n                                PigTag: item\n                              })\n                            }}/>\n                        </View>\n                      )\n                    }}\n                    keyExtractor={item => \"PigTag_\" + item}\n                  />\n                </SafeAreaView>\n              </View>\n            ):(<></>)} \n            <Input\n              label={\"Pig-tag:\"}\n              containerStyle={[{borderWidth:1, marginTop:10}]}\n              style={[ApplicationStyles.input, ]}\n              onChangeText={text => {\n                this.setState({\n                  PigTag: text\n                })\n              }}\n              value={\n                this.state.PigTag\n              }\n            />\n            <OperationsPanel pig={true} pigTag={this.state.PigTag} PigsList={this.state.PigsList} />\n          </View>\n        </View>\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n        }\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n\n    getPens: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PENS, {DataTime: DataTime})),\n    getPigs: (tagId = null) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PIGS, {TagId: tagId})),\n    setData: (pigId, Section, Pen) => dispatch(FirebaseActions.setCurrentData({pigId:pigId, type:DataRefs.PIGS, section:Section, dataId:Pen})),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Pigs);\n//export default Pigs;\n\n//TODO extract to own component also used in DataDisplay\nconst Device_Display = (props) => {\n  if (Platform.OS === 'ios' || Platform.OS === 'android') {\n    return(\n      <View style={[Helpers.buttonContainer, Helpers.fullWidth, Metrics.bottomMargin, Helpers.rowCenter, ]}>\n        <View style={[Helpers.fill, Helpers.fullWidth, Helpers.rowMain]}>\n          <View style={[Helpers.fill, Helpers.column, {backgroundColor:\"red\"}]}>\n            <View style={[Helpers.fill, Helpers.row, Helpers.fullWidth, {backgroundColor: \"blue\"}]}>\n              <View style={{justifyContent:'center', alignItems: 'center'}}/>\n            </View>\n            <View style={[ Helpers.fill, Helpers.row, Helpers.fullWidth,]}>\n              <Text>Messages</Text>\n              <Text>Errors</Text>\n            </View>\n          </View>\n          <View style={[Helpers.fill, Helpers.fullWidth, Helpers.rowCenter, {maxWidth:150}]}>\n            {props.connectedState === ConnectionState.CONNECTED ? (\n              <View style={{...styles.circle, backgroundColor:\"green\", justifyContent:'center', alignItems: 'center'}}>\n                <Text>Device is</Text>\n                <Text>connected</Text>\n              </View>\n            ):(\n              <View style={{...styles.circle, backgroundColor:\"red\", justifyContent:'center', alignItems: 'center'}}>\n                <Text>No Device</Text>\n                <Text>connected</Text>\n              </View>\n            )}\n          </View>\n        </View>\n      </View>\n    )\n  }else {\n    return(<></>)\n  }\n}\n\nconst Scanner_Display = (props) => {\n  if (Platform.OS === 'ios' || Platform.OS === 'android') {\n    const dispatch = useDispatch()\n    const DeviceData = props.DeviceData\n    return(\n      <View style={{flexDirection: 'row',justifyContent: 'space-between', borderWidth:1, borderColor:'#000', borderRadius: 25, paddingHorizontal:15, paddingVertical:10, marginBottom:10}}>\n        <View style={Style.textContainer, {paddingTop: 10}}>\n          {\n            // App scanners data\n          }\n          {DeviceData&&DeviceData.tagid? (\n          <View style={{marginBottom:5}}>\n            <Text>TAG Id:</Text>\n            <Text>{DeviceData.tagid}</Text>\n          </View>\n          ):(<></>)}\n          {DeviceData&& DeviceData.FatLayers && DeviceData.FatLayers > 0 ? (\n            <View style={{marginBottom:5}}>\n              <Text>Layers received: {DeviceData.FatLayers}</Text>\n              <Text>Layer 1: {DeviceData.FatL1}</Text>\n              <Text>Layer 2: {DeviceData.FatL2}</Text>\n              <Text>Layer 3: {DeviceData.FatL3}</Text>\n            </View>\n          ):(<></>)}\n        </View>\n        {DeviceData&& DeviceData.tagid ? (\n          <View style={{flexDirection: 'row',justifyContent: 'space-between'}}>\n            {known ?(\n            <Button buttonStyle={ApplicationStyles.button, {minWidth: 0}} Text=\"Open data\" onPress={() => {\n              dispatch(FirebaseActions.setCurrentData({pigId:known, type:DataRefs.PIGS}))\n              NavigationService.navigate(\"DataDisplay\")\n            }}/>\n            ):(<></>)}\n            <Button buttonStyle={ApplicationStyles.button, {minWidth: 0}} Text=\"Save Tag\" onPress={() => {\n              //dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.PIGS, {FarmId: Object.keys(localDataStore.userData.farms)[0]}))\n            }}/>\n          </View>\n        ):(<></>)}\n      </View>\n    )\n  }else {\n    return(<></>)\n  }\n}\n\nconst styles = StyleSheet.create({\n  circle: {\n    width: 125,\n    height: 125,\n    borderRadius: 125/2,\n    marginTop: Metrics.tiny,\n    marginLeft: Metrics.tiny,\n  },\n});","import React, { useEffect, Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, ScrollView, FlatList, TouchableOpacity, Image } from 'react-native'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../../Services/NavigationService'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs, sortObject, CurvePredict } from '../../../Stores/Firebase/Selectors'\n\nimport { Button } from '../../../Components'\nimport Style from '../../../Containers/Cloud/CloudScreenStyle'\nimport { ApplicationStyles, Helpers, Metrics, Images, Colors } from '../../../Theme'\n\nimport { SectionGrid } from 'react-native-super-grid';\n\nclass Pens extends Component {\n  constructor(props){\n    super(props);\n\n    const {Sections, Weighings, Mid} = this.setData(props)\n    this.state = {\n      Mid: Mid,\n      Sections: Sections,\n      Weighings: Weighings\n    }\n  }\n\n  setData(Props) {\n    const localDataStore = Props.firebase.localDataStore;\n\n    var Sections = {}\n    if (localDataStore && localDataStore.sections) {\n      Sections = sortObject(Props.firebase.localDataStore.sections)\n    }\n\n    var Mid = 0;\n    var Weighings = {}\n    if (localDataStore && localDataStore.weighings) {\n      Weighings = localDataStore.weighings\n      for (const property in localDataStore.weighings) {\n        if (localDataStore.weighings[property] && Object.keys(localDataStore.weighings[property]).length > 0){\n          var weight = localDataStore.weighings[property][Object.keys(localDataStore.weighings[property])[0]].weight\n          if (weight){\n            if (Mid > 0){\n              Mid = ((Mid + weight)/2)\n            } else {\n              Mid = (Mid + weight)\n            }\n          }\n        }\n      }\n    }\n\n    return {Sections, Weighings, Mid}\n  }\n\n  getData() {\n    const localDataStore = this.props.firebase.localDataStore;\n\n    if (!localDataStore.sections) localDataStore.sections = {}\n    if (!localDataStore.pens) localDataStore.pens = {}\n    if (!localDataStore.weighings) localDataStore.weighings = {}\n    if (!localDataStore.batchs) localDataStore.batchs = {}\n    if (!localDataStore.graphs) localDataStore.graphs = {}\n\n    this.props.getSections(localDataStore.sections.update_time)\n    this.props.getPens(localDataStore.pens.update_time)\n    this.props.getWeights(localDataStore.weighings.update_time, localDataStore.sections)\n\n    this.props.getBatch(localDataStore.batchs.update_time)\n    this.props.getCurve(localDataStore.graphs.update_time)\n  }\n\n  checkData(props) {\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props);\n    this.getData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps){\n      this.checkData(this.props);\n\n      if (this.props.firebase.localDataStore) {\n        if ((this.props.firebase.localDataStore.sections && JSON.stringify(this.state.Sections)!==JSON.stringify(sortObject(this.props.firebase.localDataStore.sections))) ||\n            (this.props.firebase.localDataStore.weighings && JSON.stringify(this.state.Weighings)!==JSON.stringify(sortObject(this.props.firebase.localDataStore.weighings)))\n        ) {\n          const {Sections, Mid} = this.setData(this.props)\n          this.setState({\n            Mid: Mid,\n            Sections: Sections\n          })\n        }\n      }\n    }\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n    const localDataStore = this.props.firebase.localDataStore\n\n    return(\n      <View\n      style={[\n        Helpers.mainContainer,\n      ]}\n      >\n        <View style={[Helpers.fullSize, Helpers.fill]}>\n          {this.state.Sections? (\n            <ScrollView style={[Metrics.verticalMargin, {paddingRight: 5}]}>\n              <SectionGrid\n                itemDimension={70}\n                spacing={10}\n                sections={\n                  Object.keys(this.state.Sections).filter(e => e !== 'update_time').map((Section) => {\n                    var Pens = sortObject(this.state.Sections[Section].pens)\n                    return(\n                      {\n                        title: Section,\n                        data: Object.keys(Pens)\n                      }\n                    )\n                  })\n                }\n\n                renderSectionHeader={({ section }) => (\n                  <View style={[Helpers.buttonContainer, Helpers.midWidth, {marginBottom:0}]}>\n                    <Button Text={section.title} buttonStyle={{backgroundColor: Colors.AgriDarkblue}}\n                      onPress={() => {} }/>\n                  </View>\n                )}\n\n                renderItem={({ item }) => {\n                  var color = Colors.gray\n                  var displayWeight = null\n\n                  var Predict = CurvePredict(localDataStore, item)\n                  if (Predict != null) color = Colors.pigpink\n                  console.log(item, Predict)\n                  if (Predict && Predict.Now) {\n                    var Batch = Predict.Batch  //Mabye optain batch self ??\n\n                    var devianceMin = 2\n                    var devianceMax = 5\n                    if (Batch.datas.devianceMin) {\n                      devianceMin = Batch.datas.devianceMin\n                    }\n                    if (Batch.datas.devianceMax) {\n                      devianceMax = Batch.datas.devianceMax\n                    }\n                    var ExValue = Predict.TempEx\n                    var Weight = Predict.Now;\n                    var devianceValMin = (ExValue/100)* devianceMin\n                    var devianceValMax = (ExValue/100)* devianceMax\n                    if (ExValue && Weight < ExValue && Weight < ExValue - devianceValMin) {\n                      color = Colors.error\n                    } else if (ExValue && Weight > ExValue && Weight > ExValue + devianceValMax) {\n                      color = Colors.overest\n                    } else {\n                      color = Colors.success\n                    }\n                    displayWeight = Math.round(Weight * 100) / 100\n                  }\n\n                  return(\n                    <TouchableOpacity style={[Helpers.borderContainer, {width:70, height:70, alignItems:\"center\", justifyContent:\"center\", backgroundColor:color}]}\n                      onPress={() => {\n                        this.props.setCurrentData(item)\n                        NavigationService.navigate(\"DataDisplay\")\n                      }}>\n                      <Text>{item}</Text>\n                      {displayWeight?(<Text>{displayWeight + \" kg\"}</Text>):(<></>)}\n                    </TouchableOpacity>\n                  )\n                }}\n              />\n            </ScrollView>\n          ):(\n            <View style={[Helpers.fillRowCenter, Helpers.center, Helpers.logoContainer]}>\n              <Image style={Helpers.fullSize} source={Images.Hexa_icon} resizeMode={'contain'} />\n            </View>\n          )}\n        </View>\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n        }\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n\n    getSections: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.SECTIONS, {DataTime: DataTime})),\n    getPens: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PENS, {DataTime: DataTime})),\n    getWeights: (DataTime, MemSections) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.WEIGHING, {DataTime: DataTime, MemSections: MemSections})),\n    \n    getBatch: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.BATCHS, {DataTime: DataTime})),\n    getCurve: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.GRAPH, {GraphId: \"\", DataTime: DataTime})),\n\n    setCurrentData: penId => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PENS, penId: penId})),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Pens);\n//export default Pens;\n","import React, { useEffect, useState, Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, Dimensions, SafeAreaView, FlatList, Picker } from 'react-native'\nimport { Input } from 'react-native-elements'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../../Services/NavigationService'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs, sortObject, GetStats_FromBatch, DataStringCheck } from '../../../Stores/Firebase/Selectors'\n\nimport { Button, TitleElement, CustomListItem, Datetime_Picker } from '../../../Components'\nimport Style from './UserPanelStyle'\nimport { ApplicationStyles, Helpers, Metrics, Colors } from '../../../Theme'\n\nimport Icon from 'react-native-vector-icons/MaterialIcons'\nimport SectionedMultiSelect from 'react-native-sectioned-multi-select'\n\n//import moment from 'moment';\n//import SimplerDatePicker from '@cawfree/react-native-simpler-date-picker';\n//import DatePicker from 'react-native-simple-date-picker';\n\n//import DateTimePicker from '@react-native-community/datetimepicker';\n\nimport SelectBox from 'react-native-multi-selectbox'\nimport { xorBy } from 'lodash'\n\nconst window = Dimensions.get(\"window\");\nconst screen = Dimensions.get(\"screen\");\n\nclass Batchs extends Component {\n  constructor(props){\n    super(props);\n\n    const {BatchList, freePens} = this.setData(props)\n    this.state = {\n      dimensions: {window, screen},\n      BatchList: BatchList,\n\n      Display: 0,\n\n      BatchName: \"\",\n      ShowPicker: false,\n      StartD: new Date().getTime(),\n      Curve: \"\",\n      DevianceMin: \"\",\n      DevianceMax: \"\",\n\n      freePens: freePens,\n      avaiblePens: freePens,\n      selectedPens: [],\n    }\n  }\n\n  setData(Props) {\n    const localDataStore = Props.firebase.localDataStore;\n\n    var BatchList = localDataStore.batchs\n    \n    var freePens = []\n    if (BatchList && localDataStore.sections) {\n      Object.keys(localDataStore.sections).forEach(section => {\n        if (localDataStore.sections[section].pens) {\n          var pens = []\n          Object.keys(localDataStore.sections[section].pens).filter(e => e !== '__jsogObjectId'  && e !== 'update_time').forEach(pen => {\n            var add = true\n            Object.keys(BatchList).forEach(batch => {\n              if (!BatchList[batch].state || BatchList[batch].state !== \"Closed\") {\n                if (BatchList[batch].pens && BatchList[batch].pens[pen] && !BatchList[batch].pens[pen].enddate) {\n                  add = false;\n                }\n              }\n            });\n            if (add) {\n              var item = {\n                item: pen,\n                id: section + \"_\" + pen\n              }\n              freePens.push(item)\n            }\n          })\n        }\n      });\n    }\n    return { BatchList, freePens }\n  }\n\n  getData() {\n    const localDataStore = this.props.firebase.localDataStore;\n    if (!localDataStore.sections) localDataStore.sections = {}\n    if (!localDataStore.pens) localDataStore.pens = {}\n\n    this.props.getBatch(localDataStore.batchs?localDataStore.batchs.update_time:null)\n    this.props.getSections(localDataStore.sections?localDataStore.sections.update_time:null)\n    this.props.getPens(localDataStore.pens?localDataStore.pens.update_time:null)\n    this.props.getCurve()\n  }\n\n  checkData(props) {\n  }\n\n  onChange = ({ window, screen }) => {\n    this.setState({\n      dimensions: {window, screen},\n    })\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps) {\n      this.checkData(this.props);\n\n      if (this.props.firebase.localDataStore) {\n        if ((this.props.firebase.localDataStore.batchs && JSON.stringify(this.state.BatchList)!==JSON.stringify(this.props.firebase.localDataStore.batchs)) ||\n            (this.props.firebase.localDataStore.pens && JSON.stringify(this.state.pens)!==JSON.stringify(this.props.firebase.localDataStore.pens))) {\n          const {BatchList, freePens} = this.setData(this.props)\n          this.setState({\n            freePens: freePens,\n            BatchList: BatchList,\n          })\n        }\n      }\n    }\n  }\n\n  componentDidMount() {\n    Dimensions.addEventListener(\"change\", this.onChange);\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props);\n    this.getData();\n  }\n\n  componentWillUnmount(){\n    Dimensions.removeEventListener(\"change\", this.onChange);\n  }\n\n  onMultiChange = (item) => {\n    var items = xorBy(this.state.selectedPens, [item], 'id')\n    this.setState({\n      selectedPens: items\n    })\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n    const ErrorMessage = this.props.firebase.viewError\n\n    const localDataStore = this.props.firebase.localDataStore\n\n    var wide = this.state.dimensions.window.width>900?true:false\n    var App = (Platform.OS === 'ios' || Platform.OS === 'android')||!wide\n\n    return(\n      <ScrollView style={[Metrics.verticalMargin, {paddingRight: 5}]}>\n        <View\n          style={[\n            Helpers.mainContainer,\n          ]}\n        >\n          <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\n            {ErrorMessage ? (\n              <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\n            ):(<></>)}\n            {this.state.Display === 0?(\n              //#region Normal Front View to display all batches.\n              <View style={[Helpers.contentContainer, Helpers.fullSize, {marginHorizontal:0, paddingHorizontal:-20}]}>\n                {this.state.BatchList ? (\n                  <View style={[Helpers.fill, Helpers.fullWidth, Metrics.smallHorizontalPadding, Metrics.smallVerticalPadding, {maxWidth:800, marginTop:10}]}>\n                    <FlatList scrollEnabled={true} style={[Helpers.fill]}\n                      data={Object.keys(this.state.BatchList).filter(e => e !== '__jsogObjectId' && e !== 'update_time')}\n                      renderItem={({item, i})=>{\n                        var name = item;\n                        if (this.state.BatchList[item] && this.state.BatchList[item].state && this.state.BatchList[item].state === \"Closed\") {\n                          name += \"  Closed\"\n                        }\n                        return(\n                          <Button Text={name} onPress={() => {\n                            var curveId = \"default\"\n                            if (this.state.BatchList[item] && this.state.BatchList[item].gcurve) {\n                              curveId = this.state.BatchList[item].gcurve\n                              if (typeof curveId !== 'string') curveId = null\n                            }\n                            this.props.setCurrentData(item, curveId)\n                            \n                            NavigationService.navigate('DataPlotter')\n                          }}/>\n                        )\n                      }}\n                      keyExtractor={(item, index) => index.toString()}\n                    />\n                  </View>\n                ):(<></>)}\n                <View style={[Helpers.buttonContainer, Helpers.borderContainer, Helpers.midWidth]}>\n                  <Button Text={\"New Batch\"} onPress={() => {\n                    var graph = 0\n                    if (localDataStore && localDataStore.graphs) {\n                      graph = Object.keys(localDataStore.graphs).filter(e => e !== '__jsogObjectId'  && e !== 'update_time')[0]\n                    }\n                    this.setState({\n                      Display: 1,\n\n                      DevianceMin: String(2),\n                      DevianceMax: String(2),\n                      Curve: graph,\n\n                      freePens: this.state.freePens,\n                      avaiblePens: this.state.freePens,\n                      selectedPens: [],\n                    })\n                  }}/>\n                  {this.state.BatchList?(\n                  <Button Text={\"Edit or Close Batch\"} onPress={() => {\n                    var batchName = Object.keys(this.state.BatchList)\n                                      .filter(e => e !== '__jsogObjectId'  && e !== 'update_time' && \n                                              (!this.state.BatchList[e].state || this.state.BatchList[e].state !== \"Closed\")\n                                      )[0]\n                    var batch = this.state.BatchList[batchName]\n                    if (batch) {\n                      var Pens = []\n                      var pens = sortObject(batch.pens)\n                      Object.keys(pens).forEach(element => {\n                        if (!batch.pens[element].enddate) {\n                          if (localDataStore.pens && localDataStore.pens[element]){\n                            var _pen = localDataStore.pens[element]\n                            var item = {}\n                            item.item = element;\n                            item.id = _pen.section + \"_\" + element;\n                            Pens.push(item)\n                          }\n                        }\n                      });\n\n                      this.setState({\n                        Display: 2,\n                        BatchName: batchName,\n                        StartD: batch.time,\n                        Curve: batch.gcurve,\n                        DevianceMin: String(batch.datas.devianceMin),\n                        DevianceMax: String(batch.datas.devianceMax),\n                        avaiblePens: this.state.freePens.concat(Pens),\n                        selectedPens: Pens\n                      })\n                    }\n                  }}/>):(<></>)}\n                </View>\n              </View>\n              //#endregion\n            ):(\n              //#region Edit or create\n              <View style={[Helpers.contentContainer, Helpers.fullSize, {marginHorizontal:0, paddingHorizontal:-20}]}>\n                {this.state.Display === 1?( // Create\n                  <Input label={\"BatchName\"}\n                    containerStyle={[{borderWidth:1, marginTop:10}]}\n                    style={[ApplicationStyles.input, ]}\n                    onChangeText={text => {\n                      if (text){\n                        if (DataStringCheck(text)){\n                          this.setState({BatchName: text})\n                        }\n                      }else {\n                        this.setState({BatchName: text})\n                      }\n                    }}\n                    value={\n                      this.state.BatchName\n                    }\n                  />\n                ):( // Edit\n                  <View style={[Helpers.borderContainer, Helpers.fullWidth, {height:60, borderRadius:0, alignItems:\"center\"}]}>\n                    <Picker\n                      mode=\"dropdown\"\n                      selectedValue={this.state.BatchName}\n                      style={[Helpers.fullWidth, { height: 50, justifyContent:\"flex-end\"}]}\n                      onValueChange={(itemValue, itemIndex) => {\n                        if (this.state.BatchList && this.state.BatchList[itemValue]) {\n                          var batch = this.state.BatchList[itemValue]\n\n                          var Pens = []\n                          var pens = sortObject(batch.pens)\n                          Object.keys(pens).forEach(element => {\n                            if (!batch.pens[element].enddate) {\n                              if (localDataStore.pens && localDataStore.pens[element]){\n                                var _pen = localDataStore.pens[element]\n                                var item = {}\n                                item.item = element;\n                                item.id = _pen.section + \"_\" + element;\n                                Pens.push(item)\n                              }\n                            }\n                          });\n\n                          this.setState({\n                            BatchName: itemValue,\n                            StartD: batch.time,\n                            Curve: batch.gcurve,\n                            DevianceMin: String(batch.datas.devianceMin),\n                            DevianceMax: String(batch.datas.devianceMax),\n                            avaiblePens: this.state.freePens.concat(Pens),\n                            selectedPens: Pens,\n                          })\n                        }\n                      }}\n                    >\n                      {Object.keys(this.state.BatchList)\n                                      .filter(e => e !== '__jsogObjectId'  && e !== 'update_time' && \n                                              (!this.state.BatchList[e].state || this.state.BatchList[e].state !== \"Closed\")\n                                      ).map((graph, i) => {\n                        return (<Picker.Item label={graph} value={graph} key={i}/>)\n                      })}\n                    </Picker>\n                  </View>\n                )}\n                <View style={[Helpers.fullWidth, App?{}:Helpers.row, {zIndex:999}]}>\n                  <View style={[App?{}:Helpers.halvWidth, {borderWidth:1 , marginTop:10, paddingHorizontal:5, paddingTop:0, borderRadius:0, alignItems:\"center\", zIndex:1}]}>\n                    <View style={[Helpers.fullWidth, {alignItems:\"flex-start\", marginBottom: -5}]}>\n                      <Text style={[ApplicationStyles.text, {marginHorizontal:5, marginTop:2, color:Colors.input, fontSize: 15, fontWeight: \"bold\"}]}>Start date:</Text>\n                    </View>\n                    <View style={[Helpers.fullWidth, App?{marginBottom:10}:{},{alignItems:'flex-start',}]}>\n                      <Datetime_Picker Selected={this.state.StartD}\n                        onValueChange={(date)=>{\n                          this.setState({\n                            StartD: date.getTime()\n                          })\n                      }}/>\n                    </View>\n                  </View>\n                  \n                  <View style={[App?{}:Helpers.halvWidth, {borderWidth:1, marginTop:10, paddingHorizontal:5, paddingTop:0, borderRadius:0, alignItems:\"center\", zIndex:1}]}>\n                    <View style={[Helpers.fullWidth, {alignItems:\"flex-start\", marginBottom: -5}]}>\n                      <Text style={[ApplicationStyles.text, {marginHorizontal:5, marginTop:2, color:Colors.input, fontSize: 15, fontWeight: \"bold\"}]}>Growth curve:</Text>\n                    </View>\n                    <View style={[Helpers.fullWidth, {alignItems:\"center\"}]}>\n                      <Picker\n                        mode=\"dropdown\"\n                        selectedValue={this.state.Curve}\n                        style={[Helpers.fullWidth, {height: 30}]}\n                        onValueChange={(itemValue, itemIndex) => {\n                          this.setState({\n                            Curve: itemValue\n                          })\n                        }}\n                      >\n                        {Object.keys(localDataStore.graphs).filter(e => e !== '__jsogObjectId'  && e !== 'update_time').map((graph, i) => {\n                          return (<Picker.Item label={graph} value={graph} key={i}/>)\n                        })}\n                      </Picker>\n                    </View>\n                  </View>\n                </View>\n                <View style={[Helpers.fullWidth, Helpers.row]}>\n                  <Input label={\"Deviance Min alert procentage\"}\n                    containerStyle={[Helpers.halvWidth,{borderWidth:1, marginTop:10}]}\n                    style={[ApplicationStyles.input, {marginBottom:-10}]}\n                    onChangeText={text => {\n                      if (isNaN(text)) {\n                        if (!text.endsWith(\".\")) return;\n                      }\n                      this.setState({\n                        DevianceMin: text\n                      })\n                    }}\n                    value={\n                      this.state.DevianceMin\n                    }\n                  />\n                  <Input label={\"Deviance Max alert procentage\"}\n                    containerStyle={[Helpers.halvWidth,{borderWidth:1, marginTop:10}]}\n                    style={[ApplicationStyles.input, {marginBottom:-10}]}\n                    onChangeText={text => {\n                      if (isNaN(text)) {\n                        if (!text.endsWith(\".\")) return;\n                      }\n                      this.setState({\n                        DevianceMax: text\n                      })\n                    }}\n                    value={\n                      this.state.DevianceMax\n                    }\n                  />\n                </View>\n                <View style={[Helpers.fullWidth, {borderWidth:1, marginTop:10, paddingHorizontal:10, paddingTop:5}]}>\n                  <SelectBox\n                    label=\"Pens in Batch..\"\n                    labelStyle={{color:Colors.input, fontSize: 15, fontWeight: \"bold\"}}\n                    optionsLabelStyle={{minWidth:100, color:\"black\", fontSize: 12, fontWeight: \"bold\"}}\n\n                    options={this.state.avaiblePens}\n                    selectedValues={this.state.selectedPens}\n                    onMultiSelect={this.onMultiChange}\n                    onTapClose={this.onMultiChange}\n                    isMulti\n                  />\n                </View>\n                <View style={[Helpers.buttonContainer, Helpers.borderContainer, Helpers.midWidth, {marginTop:10}]}>\n                  {this.state.Display === 2?(\n                    <Button Text={\"Close Batch\"} onPress={() => {\n                      var Batch = localDataStore.batchs[this.state.BatchName];\n                      if (Batch) {\n                        var {StartDate, EndDate, TargetWeight, PenCount, Animals, AverageWeight, AverageGrowth, isClosed, isVirtual} = GetStats_FromBatch(Batch, localDataStore)\n                        if (Animals){\n                          this.props.setViewError(\"The batch still contains active pens, please clear pens before closing the batch\")\n                        }else {\n                          var newBatch = {name:this.state.BatchName, state:\"Closed\"}\n                          this.props.updateBatch(newBatch)\n                          this.setState({\n                            Display: 0\n                          })\n                          this.props.getPens(localDataStore.pens.update_time)\n                        }\n                      }\n                    }}/>\n                  ):(\n                    <></>\n                  )}\n                  <Button Text={\"Save\"} onPress={() => {\n                    var update = true;\n\n                    if (this.state.BatchName !== \"\") {\n                      var Name = this.state.BatchName;\n                      if (!Object.keys(this.state.BatchList).includes(Name)){\n                        if (this.state.Display === 2) { // update on non existing\n                          update = false \n                          this.props.setViewError(\"BatchName error, batch does not exists\")\n                        }\n                      } \n                      else {\n                        if (this.state.Display === 1) { // create on allready existing\n                          update = false \n                          this.props.setViewError(\"BatchName error, batch allready exists\")\n                        }\n                      }\n                    } else {\n                      update = false \n                      this.props.setViewError(\"BatchName error\")\n                    }\n\n                    if (this.state.StartD !== \"\") {\n                      /*var StartD = this.state.StartD.split(\".\")\n                      if (StartD.length !== 3 || StartD[0].length !== 4 || isNaN(StartD[0]) || \n                                                (StartD[1].length <= 0 && StartD[1].length >= 3) || isNaN(StartD[1]) ||\n                                                (StartD[2].length <= 0 && StartD[2].length >= 3)|| isNaN(StartD[2])) {\n                        update = false \n                        this.props.setViewError(\"Startdate error\")\n                      }*/\n                    }else {\n                      update = false \n                      this.props.setViewError(\"Startdate error\")\n                    }\n\n                    if (this.state.DevianceMin !== \"\") {\n                      var Dev = this.state.DevianceMin\n                      if (Dev.length > 3 || isNaN(Dev) || Dev > 100){\n                        update = false \n                      }\n                    }else {\n                      update = false \n                      this.props.setViewError(\"DevianceMin setting error\")\n                    }\n\n                    if (this.state.DevianceMax !== \"\") {\n                      var Dev = this.state.DevianceMax\n                      if (Dev.length > 3 || isNaN(Dev) || Dev > 100){\n                        update = false \n                      }\n                    }else {\n                      update = false \n                      this.props.setViewError(\"DevianceMax setting error\")\n                    }\n\n                    if (this.state.Curve === \"\"){\n                      update = false \n                      this.props.setViewError(\"Growth curve setting error, please reselect a curve\")\n                    }\n\n                    var Pens = {}\n                    if (this.state.selectedPens && this.state.selectedPens.length > 0) {\n                      this.state.selectedPens.forEach(element => {\n                        Pens[element.item] = true\n                      });\n                    }\n                    if (Object.keys(Pens).length !== this.state.selectedPens.length) {\n                      update = false\n                      this.props.setViewError(\"An error occurred during Pen assigning (please update the page)\")\n                    }\n\n                    if (update) {\n                      this.props.setViewLoading(true)\n                      var _Date = new Date(this.state.StartD)\n                      var StartD = new Date(_Date.getFullYear(), _Date.getMonth(), _Date.getDate()).getTime()\n                      var newBatch = {name:this.state.BatchName, gcurve:this.state.Curve, pens:Pens, time: StartD, datas:{devianceMin: this.state.DevianceMin, devianceMax: this.state.DevianceMax}}\n                      if (this.state.Display === 1) {\n                        this.props.setBatch(newBatch)\n                      }\n                      else if (this.state.Display === 2) {\n                        this.props.updateBatch(newBatch)\n                      }\n                      this.setState({\n                        Display: 0\n                      })\n                      this.props.getPens(localDataStore.pens.update_time)\n                      this.props.setViewError(null)\n                      this.props.setViewLoading(false)\n                    }\n                  }}/>\n                </View>\n              </View>\n              //#endregion\n            )}\n          </View>\n          {(IsLoading || this.props.firebase.viewIsLoading) &&\n            <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n          }\n        </View>\n      </ScrollView>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n\n    getCurve: () => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.GRAPH, {})),\n\n    getSections: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.SECTIONS, { DataTime: DataTime})),\n    getPens: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PENS, {DataTime: DataTime})),\n    getBatch: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.BATCHS, {DataTime: DataTime})),\n\n    setBatch: (batch) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.BATCHS, {Batch: batch})),\n    updateBatch: (batch) => dispatch(FirebaseActions.actionStarting(Actions.UPDATE, DataRefs.BATCHS, {BatchId: batch.name, Batch: batch})),\n    \n    setCurrentData: (batchId, curveId) => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PENS, batchId:batchId, curveId: curveId})),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Batchs);\n//export default Batchs;\n","import React, { useEffect, Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, Dimensions } from 'react-native'\nimport { Input, Icon } from 'react-native-elements'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../../Services/NavigationService'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs, GetCurve_FromBatch, AccumulateTime, get_DataSpot, CurvePredict } from '../../../Stores/Firebase/Selectors'\n\nimport { LineChart } from 'react-native-chart-kit'\nimport { Button, TitleElement, CustomListItem, ContentProp } from '../../../Components'\nimport Style from './UserPanelStyle'\nimport { ApplicationStyles, Helpers, Metrics, Colors } from '../../../Theme'\n\nimport { FlatGrid } from 'react-native-super-grid';\n\nfunction getRandomNumber(low, high) {\n  var r = Math.floor(Math.random() * (high - low + 1)) + low;\n  return r;\n}\n\nfunction getRandomColor() {\n  var red_range = [10, 250];\n  var green_range = [10, 250];\n  var blue_range = [10, 250];\n  var a_range = [0.2, 1];\n\n  var red = getRandomNumber(red_range[0], red_range[1]);\n  var green = getRandomNumber(green_range[0], green_range[1]);\n  var blue = getRandomNumber(blue_range[0], blue_range[1]);\n\n  var alpha = getRandomNumber(a_range[0] * 100, a_range[1] * 100) / 100;\n\n  return {\n    r: red,\n    g: green,\n    b: blue,\n    a: alpha,\n    rgbaValue: 'rgba(' + red + ',' + green + ',' + blue + ',' + alpha + ')'\n  }\n}\n\nconst window = Dimensions.get(\"window\");\nconst screen = Dimensions.get(\"screen\");\n\nfunction WeightsToGraphData(localDataStore, Batch, TempGraph = null, StartDate = undefined, _EndDate = undefined, Prediction = false) {\n  var DataSets = []\n  var EndDate = 0;\n\n  var DoPredict = (Batch && (!Batch.state || Batch.state !== \"Closed\"))?true:false\n  var Legends = []\n  if (Batch.pens) Legends = Object.keys(Batch.pens).filter(e => (e !== '__jsogObjectId')).reverse()\n  Legends.forEach(Pen => {\n    var BatchPen = Batch.pens[Pen]\n    var color = getRandomColor();\n\n    var DataSet = []\n    var DataSetX = []\n\n    if (localDataStore.weighings[Pen] || (Batch.state && Batch.state === \"Closed\")) {\n      var PenWeighings = localDataStore.weighings[Pen];\n      if (Batch.state && Batch.state === \"Closed\") {\n        PenWeighings = Batch.closed.weighings[Pen]\n      }\n\n      if (PenWeighings && Object.keys(PenWeighings).length >= 1) {\n        Object.keys(PenWeighings).sort(function(a, b) {\n          return PenWeighings[a].time - PenWeighings[b].time;\n        }).forEach(key => {\n          var data = PenWeighings[key]\n          if (data.weight) {\n            if ((!StartDate || data.time >= StartDate) && (!_EndDate || data.time <= _EndDate)) {\n              if ((!BatchPen.startdate || data.time >= BatchPen.startdate) && (!BatchPen.enddate || data.time <= BatchPen.enddate)) {\n                var weight = data.weight\n                if (data.count) {\n                  weight = weight / data.count\n                }\n                DataSet.push(weight)\n                var Time = new Date(data.time)\n                //Time = new Date(Time.getFullYear(),Time.getMonth(),Time.getDate()).getTime() // allows midday placement\n                DataSetX.push(Time)\n                if (!_EndDate && data.time > EndDate) {\n                  EndDate = data.time\n                }\n              }\n            }\n          }\n        });\n\n        if (DoPredict && Prediction) {\n          var Predict = CurvePredict(localDataStore, Pen)\n          if (Predict && Predict.lastWeighing) {\n            var Time = Predict.FirstSpot?new Date(Predict.FirstSpot):new Date(Predict.lastWeighing.time)\n            //var DatePredict = []\n            //var DataPredicttX = []\n            Predict.data.forEach((element,index) => {\n              DataSet.push(element)\n              Time = (index===0&&Predict.FirstSpot)?Time:AccumulateTime(Time, TempGraph.periode)\n              DataSetX.push(Time)\n              //DataSetX.push(new Date(Time.getFullYear(),Time.getMonth(),Time.getDate()).getTime())\n            });\n            //if (Predict.length > 0){\n            //  DataSets.push({Pen: Pen + \"_Predict\", data: DatePredict, dataX: DataPredictX, color:(opacity = 0) => color.rgbaValue})\n            //}\n          }\n        }\n      }\n    }\n    \n    while(DataSet.length < TempGraph.data.length) {\n      DataSet.push(null)\n      DataSetX.push(null)\n    }\n    DataSets.push({Pen: Pen, data: DataSet, dataX: DataSetX, color:(opacity = 1) => color.rgbaValue})\n  });\n  return {DataSets, EndDate};\n}\n\nclass CurveElement extends Component {\n  constructor(props) {\n    super(props);\n\n    if (!this.props.Display) {\n      const {TempGraph, Legends, DataSets, StartDate, EndDate } = this.setData(props)\n      this.state = {\n        dimensions: {window, screen},\n\n        TempGraph: TempGraph,\n        Legends: Legends,\n        DataSets: DataSets,\n        StartDate: StartDate,\n        EndDate: EndDate,\n\n        Labels: [],\n        ActiveIndex: 0,\n        ActiveLength: \"Batch\",\n        ActiveDataSets: DataSets,\n        ActiveStartDate: StartDate,\n        ActiveEndDate: EndDate,\n\n        ViewPoint: null,\n      }\n    } else {\n      this.state = {\n        dimensions: {window, screen},\n      }\n    }\n  }\n\n  setData(Props) {\n    const localDataStore = Props.firebase.localDataStore;\n    const CurrentData = Props.firebase.currentData;\n\n    var TempGraph = {periode:\"Weeks\", data: []} //Template Graph\n    var Legends = []     //Name lables\n    var DataSets = []    //Data Points\n\n    var D = new Date()\n    var StartDate = D.getTime()\n    var EndDate = new Date(D.setDate(D.getDate()+(7*8))) //Default timespand is 2 months or 8 weeks (will be changed acording to batch)\n\n    if (localDataStore && localDataStore.batchs && CurrentData && CurrentData.batchId) {\n      var Batch = localDataStore.batchs[CurrentData.batchId];\n      TempGraph = GetCurve_FromBatch(Batch, localDataStore.graphs, CurrentData.curveId)\n\n      if (TempGraph) {\n        if (CurrentData.curveId) TempGraph.name = CurrentData.curveId\n        else TempGraph.name = \"Template\"\n        //Find Startdate\n        StartDate = Batch.time\n        //Find Batch Pens (Legends)\n        if (Batch.pens) Legends = Legends.concat(Object.keys(Batch.pens).reverse().filter(e => (e !== '__jsogObjectId')))\n\n        var DataX = []\n        //#region Find Template X values and EndDate\n        if (!TempGraph.periode){\n          TempGraph.periode = \"Weeks\"\n        }\n        var currentTime = new Date(StartDate)\n        for (var i = 0; i < TempGraph.data.length; i++) {\n          DataX.push(currentTime.getTime())\n          if (i < TempGraph.data.length -1) {\n            currentTime = new Date(AccumulateTime(currentTime, TempGraph.periode))\n          }\n        }\n        EndDate = currentTime.getTime();\n        DataX.push(EndDate)\n        //#endregion\n        \n        //Set TempGraph data\n        DataSets.push({\n          data: TempGraph.data,\n          dataX: DataX,\n          color: (opacity = 0.1) => `rgba(0, 0, 0, ${opacity})`, // optional\n        })\n\n        //Find DataSets from Legends\n        if (localDataStore.weighings) {\n          var TempData = DataSets\n          var TempEndDate = EndDate\n          var NextEnd = new Date(AccumulateTime(new Date(TempEndDate), TempGraph.periode)).getTime()\n          var {DataSets, EndDate} = WeightsToGraphData(localDataStore, Batch, TempGraph, StartDate, NextEnd, this.props.Predict)\n          DataSets = TempData.concat(DataSets)\n\n          if (TempEndDate > EndDate) {\n            EndDate = TempEndDate\n          }\n\n          Legends = Legends.filter(e => (e !== '__jsogObjectId' && (e === TempGraph.name || DataSets.some(i => i.Pen === e))));\n          Legends.unshift(TempGraph.name)\n        }\n      }\n    }\n    return {TempGraph, Legends, DataSets, StartDate, EndDate }\n  }\n\n  setGraphPeriode(ActiveLength = this.state.ActiveLength) {\n    var Labels = []\n\n    var StartDate = this.state.StartDate\n    var EndDate = this.state.EndDate\n    var ActiveIndex = this.state.ActiveIndex\n\n    var TemplatePeriode = \"Weeks\"\n    if (this.state.TempGraph && this.state.TempGraph.periode) TemplatePeriode = this.state.TempGraph.periode\n    var CurrentDate = new Date(StartDate)\n    var TempActiveDataSet = this.state.ActiveDataSets;\n\n    var Today = new Date().getTime()\n    switch(this.state.ActiveLength) {\n      case \"Days\":\n        for (var i = 0; (i < ActiveIndex || ActiveIndex === -1); i++){\n          var getNewDate = new Date(AccumulateTime(CurrentDate, this.state.ActiveLength))\n          if (ActiveIndex === -1 && getNewDate > Today) {\n            ActiveIndex = i-1;\n            break;\n          }\n          CurrentDate = getNewDate;\n        }\n        StartDate = CurrentDate.getTime();\n        Labels.push(CurrentDate.getDate() + \"/\" + (CurrentDate.getMonth() + 1))\n        \n        CurrentDate = new Date(AccumulateTime(CurrentDate, this.state.ActiveLength))\n        Labels.push(CurrentDate.getDate() + \"/\" + (CurrentDate.getMonth() + 1))\n\n        EndDate = CurrentDate.getTime();\n        CurrentDate = new Date(AccumulateTime(CurrentDate, this.state.ActiveLength))\n        break;\n      case \"Weeks\":\n        for (var i = 0; (i < ActiveIndex || ActiveIndex === -1); i++){\n          var getNewDate = new Date(AccumulateTime(CurrentDate, this.state.ActiveLength))\n          if (ActiveIndex === -1 && getNewDate > Today) {\n            ActiveIndex = i;\n            break;\n          }\n          CurrentDate = getNewDate;\n        }\n        StartDate = CurrentDate.getTime();\n\n        for (var i = 0; i <= 7; i++) {\n          Labels.push(CurrentDate.getDate() + \"/\" + (CurrentDate.getMonth() + 1))\n          EndDate = CurrentDate.getTime();\n          CurrentDate = new Date(AccumulateTime(CurrentDate, \"Days\"))\n        }\n        break;\n      case \"Batch\":\n      default:\n        while (CurrentDate.getTime() <= EndDate) {\n          switch (TemplatePeriode){\n            case \"Days\":\n              Labels.push(CurrentDate.getDate() + \"/\" + (CurrentDate.getMonth() + 1))\n              break;\n            case \"Month\":\n              Labels.push(CurrentDate.getDate() + \"/\" + (CurrentDate.getMonth() + 1))\n              break;\n            case \"Weeks\":\n            default:\n              Labels.push(CurrentDate.getDate() + \"/\" + (CurrentDate.getMonth() + 1))\n              break;\n          }\n          CurrentDate = new Date(AccumulateTime(CurrentDate, TemplatePeriode))\n        }\n        break;\n    }\n\n    var ActiveDataSets = []\n    if (!ActiveLength || ActiveLength === \"Batch\") {\n      ActiveDataSets = this.state.DataSets;\n    }\n    else {\n      var End = AccumulateTime(new Date(EndDate), this.state.ActiveLength).getTime()\n      this.state.DataSets.forEach(element => {\n        var NewData = {...element, data:[], dataX: []}\n\n        var first = null\n        var last = null\n        if (new Date(element.dataX[0]).getTime() <= EndDate) {\n          for(var i = 0; i < element.data.length; i++) {\n            if (new Date(element.dataX[i]).getTime() >= StartDate) {\n              NewData.data.push(element.data[i])\n              NewData.dataX.push(element.dataX[i])\n\n              var time = AccumulateTime(new Date(element.dataX[i]), this.state.ActiveLength)\n              if (time.getTime() > End){\n                if (element.dataX.length -1 >= i) last = i\n                break;\n              }\n            } else if (element.dataX[i] !== null) {\n              first = i\n            }\n          }\n          if (first !== null && NewData.dataX[0] > StartDate && element.data.length >= first+1) {\n            var DataSpot = get_DataSpot([element.dataX[first], element.dataX[first+1]], [element.data[first], element.data[first +1]], StartDate, element.data[first], element.dataX[first])\n            console.log(DataSpot)\n            NewData.data.unshift(DataSpot.ExValue)\n            NewData.dataX.unshift(StartDate)\n          }\n          if (last != null) {\n            //NewData.data.push(ExValue)\n            //NewData.dataX.push(StartDate)\n          }\n        }\n\n        ActiveDataSets.push(NewData)\n      });\n    }\n\n    //var lastDataPoint = this.state.DataSets[0].dataX[this.state.DataSets[0].dataX.length-1]\n    if (this.state.ActiveIndex > 0 && ActiveDataSets[0].data.length === 0){\n      var i = this.state.ActiveIndex\n      i = i-1;\n      this.setState({\n        ActiveIndex: i\n      })\n    } else {\n      this.setState({\n        ActiveLength: ActiveLength,\n        \n        Labels: Labels,\n        ActiveDataSets: ActiveDataSets,\n        ActiveStartDate: StartDate,\n        ActiveEndDate: EndDate,\n        ActiveIndex: ActiveIndex,\n      }, () => {\n        this.forceUpdate()\n      })\n    }\n  }\n\n  getData() {\n    const localDataStore = this.props.firebase.localDataStore;\n    const CurrentData = this.props.firebase.currentData;\n\n    /*if (CurrentData && CurrentData.batchId && localDataStore.batchs[CurrentData.batchId]){\n      const batchData = localDataStore.batchs[CurrentData.batchId]\n      \n      var PenMemTime = null\n      if (localDataStore.pens) PenMemTime = localDataStore.pens.update_time\n      var WeightsMemTime = null\n      if (localDataStore.weighings) WeightsMemTime = localDataStore.weighings.update_time\n      Object.keys(batchData.pens).filter(e => e !== '__jsogObjectId').forEach(Pen => {\n        this.props.getPen(Pen, PenMemTime)\n        this.props.getWeights(Pen, WeightsMemTime, localDataStore.sections)\n      })\n\n      var TempGraph = \"\"\n      if (CurrentData.curveId) {\n        TempGraph = CurrentData.curveId;\n        this.props.getCurve(TempGraph)\n      }\n    }*/\n  }\n\n  onChange = ({ window, screen }) => {\n    this.setState({\n      dimensions: {window, screen},\n    })\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (!this.props.Display && this.props !== prevProps) {\n      if (this.props.firebase.localDataStore) {\n        if (JSON.stringify(prevProps.firebase.localDataStore.weighings) !== JSON.stringify(this.props.firebase.localDataStore.weighings) ||\n            JSON.stringify(prevProps.firebase.localDataStore.pens) !== JSON.stringify(this.props.firebase.localDataStore.pens) ||\n            JSON.stringify(prevProps.firebase.localDataStore.graphs) !== JSON.stringify(this.props.firebase.localDataStore.graphs) || \n            prevProps.Predict !== this.props.Predict || \n            prevProps.weighings !== this.props.weighings) {\n          const {TempGraph, Legends, DataSets, StartDate, EndDate } = this.setData(this.props)\n          if (JSON.stringify(this.state.TempGraph)!==JSON.stringify(TempGraph) ||\n              JSON.stringify(this.state.Legends)!==JSON.stringify(Legends) ||\n              JSON.stringify(this.state.DataSets)!==JSON.stringify(DataSets) ||\n\n              JSON.stringify(this.state.StartDate)!==JSON.stringify(StartDate) ||\n              JSON.stringify(this.state.EndDate)!==JSON.stringify(EndDate)\n          ) {\n            this.setState({\n              TempGraph: TempGraph,\n              Legends: Legends,\n              DataSets: DataSets,\n        \n              StartDate: StartDate,\n              EndDate: EndDate,\n            }, () => {\n              this.setGraphPeriode(this.state.ActiveLength)\n            });\n          }\n        }\n      }\n    }\n    if (!this.props.Display && this.state !== prevState) {\n      if (this.state.ActiveLength != prevState.ActiveLength || this.state.ActiveIndex != prevState.ActiveIndex) {\n        this.setGraphPeriode(this.state.ActiveLength)\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.getData();\n    if (!this.props.height) Dimensions.addEventListener(\"change\", this.onChange);\n    if (!this.props.Display) this.setGraphPeriode(this.state.ActiveLength)\n  }\n\n  componentWillUnmount(){\n    if (!this.props.height) Dimensions.removeEventListener(\"change\", this.onChange);\n  }\n\n  render() {\n    const localDataStore = this.props.firebase.localDataStore\n    var BatchIsOpen = false;\n    if (localDataStore.batchs && this.props.firebase.currentData && this.props.firebase.currentData.batchId) {\n      BatchIsOpen= ((localDataStore.batchs && localDataStore.batchs[this.props.firebase.currentData.batchId]) && (!localDataStore.batchs[this.props.firebase.currentData.batchId].state || localDataStore.batchs[this.props.firebase.currentData.batchId].state !== \"Closed\"))?true:false\n    }\n    var wide = this.state.dimensions.window.width>1000?true:false\n    if (this.props.Display) wide = false\n    var App = (Platform.OS === 'ios' || Platform.OS === 'android')||!wide\n\n    var height = this.state.dimensions.window.height //Full Screen\n    if (this.props.Height) {\n      height = this.props.Height;\n      //height = height - 100 // ?? beautify'er\n    } else {\n      height = 500 \n      /*if (Platform.OS !== 'ios' && Platform.OS !== 'android') height = height - 64 //Navigation title\n      height = height - 49 //TitleElement\n      height = height - 145 //Data Props\n      height = height - 71 //View Selector\n      if (BatchIsOpen) height = height - 74 //Editor\n\n      height = height - 100 // ?? beautify'er*/\n    }\n    //height = height - parseInt(10 + 15) //Margins \n\n    var width = this.state.dimensions.window.width * 2; //Full Screen\n    if (this.props.Width) {\n      width = this.props.Width;\n    } else {\n      width = width - (Metrics.normal * 4) // Margins\n      width = width / (wide?2.05:1) //If not WideScreen - Split diagram in 2\n    }\n    \n    var DataSets = this.props.Display?[{color: (opacity = 0.1) => `rgba(0, 0, 0, ${opacity})`,data:[],dataX:[]}]:this.state.ActiveDataSets\n    var Legends = this.props.Display?[]:this.state.Legends.slice(0, DataSets.length)\n    var StartDate = this.props.Display?1:this.state.ActiveStartDate\n    var EndDate = this.props.Display?this.props.DataPoints.length:this.state.ActiveEndDate\n    var Labels = [];\n    if (this.props.Display) {\n      this.props.DataPoints.forEach((point,index)=>{\n        DataSets[0].data.push(point.value)\n        DataSets[0].dataX.push(index +1)\n        Labels.push(index +1)\n      })\n    }else Labels = this.state.Labels\n\n    return(\n      <View style={[Helpers.fullWidth, Helpers.fill]}>\n        <View style={[Helpers.fullWidth, Helpers.fill]}>\n          <ScrollView horizontal={true} showsHorizontalScrollIndicator={wide||this.props.Display?false:true} style={[Helpers.fullSize, App&&!this.props.Display?{maxWidth:width/2, maxHeight:540}:{}]}>\n            {this.state.TempGraph||this.props.Display && (Labels && Labels.length > 0) && (DataSets && DataSets.length > 0)?(\n            <LineChart\n              //bezier\n              style={[{marginLeft: -15, minHeight: height, minWidth: width}]}\n              width={width}\n              height={height}\n\n              data={{\n                labels: Labels,\n                xMinMax: [StartDate, EndDate, Labels.length -1],\n                legend: Legends,\n                datasets: DataSets,\n              }}\n\n              onDataPointClick={(data) => {\n                this.setState({\n                  ViewPoint: data\n                })\n              }}\n\n              withShadow={false}\n              withVerticalLines={true}\n              fromZero={false}\n              segments={15} //Horizontal-Lines\n              \n              verticalLabelRotation={0} //Not Working in browser\n              xLabelsOffset={0}\n\n              chartConfig={{\n                backgroundColor: Colors.white,\n                backgroundGradientFrom: Colors.white,  //#FFFFFF\n                backgroundGradientTo: Colors.white,     \n                decimalPlaces: 1, // optional, defaults to 2dp\n                color: (opacity = 1) => `rgba(0, 0, 0, ${opacity})`,  //Lines / Grid\n                labelColor: (opacity = 1) => `rgba(0, 0, 0, ${opacity})`, //Lables\n                style: {\n                  borderRadius: 16,\n                  height: height,\n                },\n                propsForDots: {\n                  r: \"5\",\n                  strokeWidth: \"0.5\",\n                  stroke: Colors.white\n                }\n              }}\n            />):(<></>)}\n          </ScrollView>\n        </View>\n        {!this.props.Display?(\n          <View style={[Helpers.fullWidth, Helpers.mainCenter]}>\n            <View style={[Helpers.fill, Helpers.fullWidth, Helpers.rowCenter, ]}>\n              <View style={{paddingRight: 2.5}}>\n                <Icon name=\"md-arrow-back\" type='ionicon' size={25} color=\"black\" onPress={() => {\n                  if (this.state.ActiveIndex != 0){\n                    var i = this.state.ActiveIndex;\n                    i = i-1;\n                    this.setState({\n                      ActiveIndex: i\n                    })\n                  }\n                }}/>\n              </View>\n              <Button Text=\"Day view\" buttonStyle={{width:wide?100:80}}\n                onPress={() => {\n                  this.setState({\n                    ActiveIndex: -1,\n                    ActiveLength: \"Days\"\n                  })\n                } }/>\n              <Button Text=\"Week view\" buttonStyle={{width:wide?100:80, marginLeft:2.5}}\n                onPress={() => {\n                  this.setState({\n                    ActiveIndex: -1,\n                    ActiveLength: \"Weeks\"\n                  })\n                } }/>\n              <Button Text=\"Full Batch\" buttonStyle={{width:wide?100:80, marginLeft:2.5}}\n                onPress={() => {\n                  this.setState({\n                    ActiveIndex: 0,\n                    ActiveLength: \"Batch\"\n                  })\n                } }/>\n              <View style={{paddingLeft: 2.5}}>\n                <Icon name=\"md-arrow-forward\" type='ionicon' size={25} color=\"black\" onPress={() => {\n                  var i = this.state.ActiveIndex;\n                  i = i+1;\n                  this.setState({\n                    ActiveIndex: i\n                  })\n                }}/>\n              </View>\n            </View>\n            {BatchIsOpen&&!App?(\n              <View style={[Helpers.fullWidth, Helpers.rowCenter]}>\n                  <CurveEditor control={this} props={this.props} state={this.state} />\n              </View>\n            ):(<></>)}\n          </View>\n        ):(<></>)}\n      </View>\n    )\n  }\n}\n\nconst CurveEditor = (props) => {\n  if (Platform.OS === 'ios' || Platform.OS === 'android') {\n    if (props.state.ViewPoint){\n      var TimeText = props.state.Labels[props.state.ViewPoint.index]\n      if (props.state.ViewPoint.dataset.dataX) {\n        var Time = new Date(props.state.ViewPoint.dataset.dataX[props.state.ViewPoint.index])\n        TimeText = Time.getFullYear() + \".\" + (Time.getMonth() +1) + \".\" + Time.getDate()\n      }\n\n      var Data = props.state.ViewPoint.value\n      return (\n        <View style={[Helpers.buttonContainer, Helpers.fullWidth, Helpers.rowCenter, {maxHeight:100}] }>\n          <View style={[Helpers.colCenter, Helpers.borderContainer, {borderRadius:0}]}>\n            <Text>{TimeText}</Text>\n          </View>\n          <View style={[Helpers.colCenter, Helpers.borderContainer, {borderRadius:0}]}>\n            <Text>{Data} Kg.</Text>\n          </View>\n        </View>\n      )\n    }\n    else return(<></>)\n  } else {\n    const [Point, setPoint] = React.useState(0)\n    if (!props.state.TempGraph) {\n      return(<></>)\n    }\n    else {\n      return (\n        <View style={[Helpers.buttonContainer, Helpers.fullWidth, Helpers.rowCenter, {maxHeight:100,marginTop:10}] }>\n          <View style={{padding:6, paddingRight: 15}}>\n            <Icon name=\"md-arrow-back\" type='ionicon' size={25} color=\"black\" onPress={() => {\n              var index = Point;\n              index = index -1\n              if (index < 0) {\n                index = props.state.TempGraph.data.length -1\n              }\n              setPoint(index)\n            }}/>\n          </View>\n          <Input\n              type='number'\n              step=\"0.1\"\n\n              label={props.state.Labels[Point]}\n              containerStyle={[{width:\"auto\", borderWidth:1}]}\n              style={[ApplicationStyles.input, Helpers.borderContainer, {borderRadius:0}]}\n\n              onChange= {(evt) => {\n                var text = evt.target.value\n                if (!isNaN(text) || text.endsWith('.') && text.split('.').length <= 2) {\n                  var NewData = props.state.TempGraph.data;\n                  NewData[Point] = text\n                  \n                  props.control.setState({\n                    state: props.state,\n                    TempGraph: {...props.state.TempGraph, data: NewData}\n                  })\n                  props.control.setGraphPeriode(props.state.ActiveLength)\n                }\n              }}\n              /*onChangeText={text => {\n                if (!isNaN(text) || text.endsWith('.') && text.split('.').length <= 2) {\n                  var NewData = props.state.TempGraph.data;\n                  if (text === \"\" || text === null) text = 0\n                  if (text.endsWith('.')) text = text + \"0\"\n                  NewData[Point] = parseFloat(text)\n                  console.log(NewData[Point], text)\n                  props.control.setState({\n                    TempGraph: {...props.state.TempGraph, data: NewData}\n                  })\n\n                  props.control.forceUpdate()\n                }\n              }}*/\n              value={\n                props.state.TempGraph.data[Point]\n              }\n            />\n          <View style={{padding:6, paddingRight: 15}}>\n            <Icon name=\"md-arrow-forward\" type='ionicon' size={25} color=\"black\" onPress={() => {\n              var index = Point;\n              index = index +1\n              if (index > props.state.TempGraph.data.length -1){\n                index = 0\n              }\n              setPoint(index)\n            }}/>\n          </View>\n          <Input\n              label=\"Curve Name\"\n              containerStyle={[{width:\"auto\", borderWidth:1}]}\n              style={[ApplicationStyles.input, Helpers.borderContainer, {borderRadius:0}]}\n              \n              onChangeText={text => {\n                /*var name = text;\n                name = name.replace(' ', '_')\n                if (isNaN(name[0])){\n                  var NewLegends = props.state.Legends;\n                  NewLegends[0] = name\n                  props.control.setState({\n                    TempGraph: {...props.state.TempGraph, name: name},\n                    Legends: NewLegends\n                  })\n                }*/\n              }}\n              value={\n                props.state.TempGraph.name\n              }\n            />\n        </View>\n      )\n    }\n  }\n} \n\n/*\n<Button Text=\"Save\" buttonStyle={{width:100, marginLeft:20}}\n            onPress={() => {\n              props.props.setCurve(props.state.TempGraph)\n            } }/>\n*/\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    getPen: (penId, DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PENS, {PenId: penId, DataTime:DataTime})),\n    getWeights: (penId, DataTime, MemSections) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.WEIGHING, {PenId: penId, DataTime: DataTime, MemSections: MemSections})),\n    getCurve: (curveid) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.GRAPH, {GraphId: curveid})),\n    setCurve: (curve) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.GRAPH, {Graph: curve}))\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CurveElement);\nexport {\n  WeightsToGraphData,\n}","import React, { useEffect, useState, Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, Dimensions, SafeAreaView, FlatList, Picker } from 'react-native'\nimport { Input, Icon } from 'react-native-elements'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../../Services/NavigationService'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs, DataStringCheck } from '../../../Stores/Firebase/Selectors'\n\nimport { Button, TitleElement, CustomListItem, ContentProp } from '../../../Components'\nimport Style from './UserPanelStyle'\nimport { ApplicationStyles, Helpers, Metrics, Images } from '../../../Theme'\nimport CurveElement from './CurveElement'\n\nclass GrowthCurve extends Component {\n  constructor(props){\n    super(props);\n\n    const {CurveList} = this.setData(props)\n    var D = new Date()\n    this.state = {\n      CurveList: CurveList,\n\n      Display: 0,\n\n      CurveName: \"\",\n      DataPoints: [],\n      Periode: \"Weeks\",\n    }\n  }\n\n  setData(Props) {\n    const localDataStore = Props.firebase.localDataStore;\n\n    var CurveList = localDataStore.graphs\n    return { CurveList }\n  }\n\n  getData(){\n    this.props.getCurve()\n  }\n\n  checkData(props){\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props);\n    this.getData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps) {\n      this.checkData(this.props);\n\n      if (this.props.firebase.localDataStore) {\n        if (this.props.firebase.localDataStore.graphs && JSON.stringify(this.state.CurveList)!==JSON.stringify(this.props.firebase.localDataStore.graphs)) {\n          const {CurveList} = this.setData(this.props)\n          this.setState({\n            CurveList: CurveList,\n          })\n        }\n      }\n    }\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n    const ErrorMessage = this.props.firebase.viewError\n\n    var AverageGrowth = 0\n    for(var i = 0; i < this.state.DataPoints.length; i++){\n      var value = this.state.DataPoints[i].value\n      if (value === \"\" || value === null) value = 0\n      value = parseFloat(value)\n\n      if (i === 0) continue;\n      var Growth = value - this.state.DataPoints[i-1].value\n      AverageGrowth = (AverageGrowth + Growth) / 2\n    }\n    AverageGrowth = AverageGrowth.toFixed(3)\n\n    var App = Platform.OS === \"android\" || Platform.OS === \"ios\" ? true: false\n    return(\n      <ScrollView style={[Helpers.fullSize, Helpers.fill]}>\n        <View\n          style={[\n            Helpers.mainContainer,\n          ]}\n        >\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\n          {ErrorMessage ? (\n            <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\n          ):(<></>)}\n          {this.state.Display === 0?(\n            <View style={[Helpers.contentContainer, Helpers.fullSize, {marginHorizontal:0, paddingHorizontal:-20}]}>\n            {this.state.CurveList ? (\n              <View style={[Helpers.fill, Helpers.fullWidth, Metrics.smallHorizontalPadding, Metrics.smallVerticalPadding, {maxWidth:800, marginTop:10}]}>\n                <FlatList\n                  data={Object.keys(this.state.CurveList).filter(e => e !== '__jsogObjectId' && e !== 'update_time')}\n                  renderItem={({item})=>{\n                    return(\n                      <Button Text={item} onPress={() => {\n                        var CurveData = this.state.CurveList[item]\n\n                        var DataPoints = []\n                        CurveData.data.forEach(element => {\n                          DataPoints.push({value: element})\n                        });\n                        this.setState({\n                          Display: 2,\n                          CurveName: item,\n                          DataPoints: DataPoints,\n                          Periode: CurveData.periode\n                        })\n                      }}/>\n                    )\n                  }}\n                  keyExtractor={(item, index) => index.toString()}\n                />\n              </View>\n            ):(<></>)}\n            <View style={[Helpers.buttonContainer, Helpers.borderContainer, Helpers.midWidth]}>\n              <Button Text={\"New Curve\"} onPress={() => {\n                this.setState({\n                  Display: 1,\n                  DataPoints: [{value:\"0\"},{value:\"0\"}]\n                })\n              }}/>\n            </View>\n          </View>\n          ):(\n            //#region Edit or create\n            <View style={[Helpers.contentContainer, Helpers.fullSize, {marginHorizontal:0, paddingHorizontal:-20}]}>\n              {this.state.Display === 1?( // Create\n                <Input label={\"CurveName\"}\n                  containerStyle={[{borderWidth:1, marginTop:10}]}\n                  style={[ApplicationStyles.input, ]}\n                  onChangeText={text => {\n                    if (text){\n                      if (DataStringCheck(text)){\n                        this.setState({CurveName: text})\n                      }\n                    }else {\n                      this.setState({CurveName: text})\n                    }\n                  }}\n                  value={\n                    this.state.CurveName\n                  }\n                />\n              ):( //Edit\n                <TitleElement Text={this.state.CurveName}/>\n              )}\n              <View style={[Helpers.fill, Helpers.fullWidth]}>\n                <ContentProp texts={[\"Data Points\"]} datas={[\"Periode: \" + this.state.Periode]} />\n                <ContentProp texts={[\"Average Growth: \" + AverageGrowth]} datas={[]} />\n                <View style={[Helpers.borderContainer, Helpers.fillCenter, Helpers.fullWidth, {alignSelf:'center'}]}>\n                  <CurveElement Display={true} DataPoints={this.state.DataPoints} Height={200} Width={455}/>\n                </View>\n                <View>\n                  <FlatList\n                    data={this.state.DataPoints}\n                    style={[App?styles.AppStyle:styles.WebStyle]}\n                    renderItem={({item, index}) => {\n                      return(\n                        <Input \n                          type='number'\n                          step=\"0.1\"\n\n                          label={\"Day: \" + (index)}\n                          containerStyle={[Helpers.fullWidth,{borderWidth:1, marginTop:10}]}\n                          style={[ApplicationStyles.input]}\n                          \n                          onChangeText={text => {\n                            if (!isNaN(text) || text.endsWith('.') && text.split('.').length <= 2) {\n                              var DataPoints = [ ...this.state.DataPoints ];\n                              DataPoints[index].value = text;\n                              this.setState({DataPoints});\n                            }\n                          }}\n                          value={\n                            \"\" + item.value\n                          }\n                        />\n                      )}\n                    }\n                      //Setting the number of column\n                      numColumns={1}\n                  />\n                </View>\n                <View style={{height:20}} />\n                <Button Text={\"New Point\"} onPress={() => {\n                  var DataPoints = [ ...this.state.DataPoints ];\n                  var value = this.state.DataPoints&&this.state.DataPoints.length >= 1?this.state.DataPoints[this.state.DataPoints.length-1].value:\"0\"\n                  DataPoints.push({value:value})\n                  this.setState({\n                    DataPoints\n                  })\n                }}/>\n              </View>\n\n              <View style={[Helpers.buttonContainer, Helpers.borderContainer, Helpers.midWidth, {marginTop:10}]}>\n                <Button Text={\"Save\"} onPress={() => {\n                  var update = true;\n\n                  if (this.state.CurveName !== \"\"){\n                    var Name = this.state.CurveName;\n                    if (!Object.keys(this.state.CurveList).includes(Name)){\n                      if (this.state.Display === 2) { // update on non existing\n                        this.props.setViewError(\"Cannot update non-existing Curve. (Please refresh)\")\n                        update = false \n                      }\n                    } \n                    else {\n                      if (this.state.Display === 1) { // create on allready existing\n                        this.props.setViewError(\"Cannot create allready existing Curve.\")\n                        update = false \n                      }\n                    }\n                  }else {\n                    this.props.setViewError(\"Curve template need a name.\")\n                    update = false\n                  }\n\n                  if (update) {\n                    this.props.setViewError(null)\n                    this.props.setViewLoading(true)\n                    var newCurve = {name:this.state.CurveName, periode:this.state.Periode}\n                    var Data = []\n                    var index = 0;\n                    this.state.DataPoints.forEach(element => {\n                      Data[index] = parseFloat(element.value)\n                      index++;\n                    });\n                    newCurve.data = Data;\n                    this.props.updateCurve(newCurve)\n                    \n                    this.setState({\n                      Display: 0\n                    })\n                  }\n                }}/>\n              </View>\n            </View>\n            //#endregion\n          )}\n        </View>\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n        }\n      </View>\n      </ScrollView>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  AppStyle: {\n    \n  },\n  WebStyle: {\n    height:400\n  },\n});\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n\n    getCurve: () => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.GRAPH, {GraphId: \"\"})),\n    updateCurve: (curve) => dispatch(FirebaseActions.actionStarting(Actions.UPDATE, DataRefs.GRAPH, {Graph: curve})),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GrowthCurve);\n//export default GrowthCurve;\n","import React, { useEffect, Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, ScrollView } from 'react-native'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../../Services/NavigationService'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs, sortObject } from '../../../Stores/Firebase/Selectors'\n\nimport { Button, OperationsPanel } from '../../../Components'\nimport Style from './UserPanelStyle'\nimport { ApplicationStyles, Helpers, Metrics } from '../../../Theme'\n\nclass Operations extends Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n    }\n  }\n\n  getData() {\n    this.props.setCurrentData({})\n  }\n\n  checkData(props) {\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props);\n    this.getData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n    const ErrorMessage = this.props.firebase.viewError\n\n    return(\n      <View\n        style={[\n          Helpers.mainContainer,\n        ]}\n      >\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\n          {ErrorMessage ? (\n            <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\n          ):(<></>)}\n          <View style={[Helpers.buttonContainer, Helpers.midWidth, Metrics.bottomMargin, {marginBottom:60}] }>\n          </View>\n\n          <View style={[Helpers.buttonContainer, Helpers.halvWidth, Helpers.fillColMain]}>\n            <OperationsPanel section={true}/>\n          </View>\n        </View>\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n        }\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n\n    setCurrentData: actionType => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PENS, action: actionType})),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Operations);\n//export default Operations;\n","import React, { useEffect, Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, Picker } from 'react-native'\nimport { Input } from 'react-native-elements'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../../Services/NavigationService'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs, sortObject } from '../../../Stores/Firebase/Selectors'\n\nimport { Button, Datetime_Picker } from '../../../Components'\nimport Style from '../CloudScreenStyle'\nimport { ApplicationStyles, Helpers, Metrics, Colors } from '../../../Theme'\n\nclass Weighing extends Component {\n  constructor(props){\n    super(props);\n\n    const {Sections, Section, Pens, Pen, quantity} = this.setData(this.props)\n    this.state = {\n      Sections: Sections,\n      Section: Section,\n\n      Pens: Pens,\n      Pen: Pen,\n      weight: \"\",\n      quantity: quantity,\n      date: new Date().getTime()\n    }\n  }\n\n  getData() {\n    const localDataStore = this.props.firebase.localDataStore;\n    if (!localDataStore.sections) localDataStore.sections = {}\n    this.props.getSections(localDataStore.sections.update_time)\n  }\n\n  setData(Props) {\n    //Set Sections\n    const localDataStore = Props.firebase.localDataStore;\n    var Sections = false;\n    if (localDataStore && localDataStore.sections && localDataStore.sections !== Sections) {\n      Sections = sortObject(localDataStore.sections)\n    }\n\n    //Set Section\n    const CurrentData = Props.firebase.currentData;\n    var Section = Sections? Object.keys(Sections)[0] : \"\"\n    if (CurrentData && CurrentData.data && CurrentData.data.section && Sections[CurrentData.data.section]) {\n      if (CurrentData.data.section != Section) {\n        Section = CurrentData.data.section\n      }\n    }\n\n    //Pens & Pen\n    var Pens = Sections? sortObject(Sections[Section].pens): {}\n    var Pen = Sections? Object.keys(Pens)[0]: \"\"\n    if (CurrentData && CurrentData.penId && Pens[CurrentData.penId] && CurrentData.penId != Pen){\n      Pen = CurrentData.penId\n    }\n    var quantity = 1\n    if (localDataStore && localDataStore.pens) {\n      var _Pen = localDataStore.pens[Pen]\n      if (_Pen && _Pen.datas && _Pen.datas.count) quantity = _Pen.datas.count\n    }\n\n    if (!Sections) Sections = {}\n    return {Sections, Section, Pens, Pen, quantity}\n  }\n\n  checkData(props) {\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props);\n    this.getData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps){\n      this.checkData(this.props);\n\n      if (this.props.firebase.localDataStore) {\n        if (this.props.firebase.localDataStore.sections && JSON.stringify(this.state.Sections)!==JSON.stringify(sortObject(this.props.firebase.localDataStore.sections))) {\n\n          const {Sections, Section, Pens, Pen, quantity} = this.setData(this.props)\n\n          this.setState({\n            Sections: Sections,\n            Section: Section,\n            Pens: Pens,\n            Pen: Pen,\n\n            quantity: quantity,\n            weight: \"\",\n          })\n        }\n      }\n    }\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n    const ErrorMessage = this.props.firebase.viewError\n\n    const localDataStore = this.props.firebase.localDataStore\n\n    return(\n      <View\n      style={[\n        Helpers.mainContainer,\n      ]}\n      >\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\n          {ErrorMessage ? (\n            <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\n          ):(<></>)}\n          <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\n            <View style={[Helpers.buttonContainer, Helpers.midWidth, Metrics.bottomMargin] }>\n              <Button Text=\"Weighing\" buttonStyle={{backgroundColor: Colors.AgriDarkblue}}\n                onPress={() => {} }/>\n            </View>\n            \n            <View style={[Helpers.borderContainer, Helpers.fullWidth, {marginBottom:20}] }>\n              <Picker\n                mode=\"dropdown\"\n                selectedValue={this.state.Section}\n                style={{ height: 50, width: 150 }}\n                onValueChange={(itemValue, itemIndex) => {\n                  if (this.state.Sections[itemValue]){\n                    const Pens = sortObject(this.state.Sections[itemValue].pens)\n                    var quantity = 1\n                    if (localDataStore && localDataStore.pens) {\n                      var Pen = localDataStore.pens[Object.keys(Pens)[0]]\n                      if (Pen && Pen.datas && Pen.datas.count) quantity = Pen.datas.count\n                    }\n                    this.setState({\n                      Section: itemValue,\n                      Pens: Pens,\n                      Pen: Object.keys(Pens)[0],\n                      quantity: quantity,\n                    })\n                  }\n                }}\n              >\n                {Object.keys(this.state.Sections).map((Section, i) => {\n                    return (<Picker.Item label={Section} value={Section} key={i}/>)\n                })}\n              </Picker>\n\n              <Picker\n                mode=\"dropdown\"\n                selectedValue={this.state.Pen}\n                style={{ height: 50, width: 150 }}\n                onValueChange={(itemValue, itemIndex) => {\n                  var quantity = 1\n                  if (localDataStore && localDataStore.pens) {\n                    var Pen = localDataStore.pens[itemValue]\n                    if (Pen && Pen.datas && Pen.datas.count) quantity = Pen.datas.count\n                  }\n                  this.setState({\n                    quantity: quantity,\n                    Pen: itemValue\n                  })\n                }}\n              >\n                {Object.keys(this.state.Pens).map((Pen, i) => {\n                    return (<Picker.Item label={Pen} value={Pen} key={i}/>)\n                })}\n              </Picker>\n\n              <View style={[Helpers.fullWidth, {borderWidth:0 ,height: 65, marginTop:10, paddingHorizontal:5, paddingTop:0, borderRadius:0, alignItems:\"center\"}]}>\n                <View style={[Helpers.fullWidth, {alignItems:\"flex-start\"}]}>\n                  <Text style={[ApplicationStyles.text, {marginHorizontal:5, marginTop:2, color:Colors.input, fontSize: 15, fontWeight: \"bold\"}]}>Weight date:</Text>\n                </View>\n                <View style={[Helpers.fullWidth, {alignItems:'flex-start'}]}>\n                  <Datetime_Picker Selected={this.state.date}\n                      onValueChange={(date)=>{\n                        this.setState({\n                          date: date.getTime()\n                        })\n                    }}/>\n                </View>\n              </View>\n              \n              <Input\n                label=\"Animal quantity\"\n                style={{ ...Style.input}}\n                onChangeText={text => {\n                  if (!isNaN(text)){\n                    this.setState({\n                      quantity: text\n                    })\n                  }\n                }}\n                value={this.state.quantity}\n              />\n              <Input\n                label=\"Total Weight\"\n                style={{ ...Style.input}}\n                onChangeText={text => {\n                  this.setState({\n                    weight: text\n                  })\n                }}\n                value={this.state.weight}\n              />\n            </View>\n\n            <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\n              <Button Text=\"Submit\"\n                onPress={() => {\n                  if (!this.state.Section){\n                    this.props.setViewError(\"A section is needed\")\n                  } else if (!this.state.Pen){\n                    this.props.setViewError(\"A pen is needed\")\n                  } else if (isNaN(this.state.quantity) || this.state.quantity === \"\" || this.state.quantity <= 0){\n                    this.props.setViewError(\"Quantity have to be a number bigger than 0\")\n                  } else if (isNaN(this.state.weight) || this.state.weight === \"\") {\n                    this.props.setViewError(\"Weight have to be a number\")\n                  }\n                  else {\n                    this.props.setViewLoading(true)\n                    this.props.setViewError(null)\n                    this.props.newWeight(this.state.Pen, parseFloat(this.state.weight), this.state.date, parseFloat(this.state.quantity))\n                    this.setState({\n                      weight: \"\",\n                      date: new Date().getTime()\n                    })\n                  }\n                } }/>\n            </View>\n          </View>\n        </View>\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n        }\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n\n    getSections: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.SECTIONS, {DataTime: DataTime})),\n    newWeight: (penId, weight, date, quantity) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.WEIGHING, {PenId: penId, Weight:weight, Quantity:quantity, Date:date})),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Weighing);\n//export default Weighing;","import React, { useEffect, Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, Picker } from 'react-native'\nimport { Input } from 'react-native-elements'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../../Services/NavigationService'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs, sortObject, DataStringCheck } from '../../../Stores/Firebase/Selectors'\n\nimport { Button, TitleElement } from '../../../Components'\nimport Style from '../../../Containers/Cloud/CloudScreenStyle'\nimport { ApplicationStyles, Helpers, Metrics, Colors } from '../../../Theme'\n\nclass DataEditor extends Component {\n  constructor(props){\n    super(props);\n\n    const {Sections, Section, Pens, Pen} = this.setData(props)\n    this.state = {\n      Sections: Sections,\n      Section: Section,\n\n      Pens: Pens,\n      Pen: Pen,\n      NewSection: (Sections&&Object.keys(Sections).length > 0)?false:true,\n    }\n  }\n\n  getData() {\n    const localDataStore = this.props.firebase.localDataStore;\n    if (!localDataStore.sections) localDataStore.sections = {}\n    this.props.getSections(localDataStore.sections.update_time)\n  }\n\n  setData(Props) {\n    //Set Sections\n    const localDataStore = Props.firebase.localDataStore;\n    var Sections = false;\n    \n    if (localDataStore && localDataStore.sections && localDataStore.sections !== Sections) {\n      Sections = sortObject(localDataStore.sections)\n    }\n\n    //Set Section\n    const CurrentData = Props.firebase.currentData;\n    var Section = Sections? Object.keys(Sections)[0] : \"\"\n    if (CurrentData && CurrentData.data && CurrentData.data.section && Sections[CurrentData.data.section]) {\n      if (CurrentData.data.section != Section) {\n        Section = CurrentData.data.section\n      }\n    }\n\n    //Pens & Pen\n    var Pens = (Sections&&Sections[Section])? sortObject(Sections[Section].pens): {}\n    var Pen = Sections? Object.keys(Pens)[0]: \"\"\n    if (CurrentData && CurrentData.dataId && Pens[CurrentData.dataId] && CurrentData.dataId != Pen){\n      Pen = CurrentData.dataId\n    }\n\n    if (!Sections) Sections = {}\n    return {Sections, Section, Pens, Pen}\n  }\n\n  checkData(props) {\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props);\n    this.getData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps){\n      this.checkData(this.props);\n\n      if (this.props.firebase)  {\n        if (this.props.firebase.localDataStore) {\n          if (this.props.firebase.localDataStore.sections && JSON.stringify(this.state.Sections)!==JSON.stringify(sortObject(this.props.firebase.localDataStore.sections))) {\n            \n            const {Sections, Section, Pens, Pen} = this.setData(this.props)\n\n            this.setState({\n              Sections: Sections,\n              Section: Section,\n              Pens: Pens,\n              Pen: Pen,\n              NewSection: (Sections&&Object.keys(Sections).length > 0)?false:true,\n            })\n          }\n        }\n        if (this.props.firebase.currentData) {\n          if (this.props.firebase.currentData != prevProps.firebase.currentData){\n            this.forceUpdate()\n          }\n        }\n      }\n    }\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n    const ErrorMessage = this.props.firebase.viewError\n\n    const localDataStore = this.props.firebase.localDataStore\n    const CurrentData = this.props.firebase.currentData\n\n    var DataView = (<View></View>);\n\n    switch(CurrentData.type){\n      case DataRefs.PENS:\n        DataView = PenEditor_View_Creator(this, CurrentData, localDataStore)\n        break;\n      case DataRefs.PIGS:\n        DataView = PigEditor_View_Creator(this, CurrentData, localDataStore)\n        break;\n    }\n\n    return(\n      <View\n      style={[\n        Helpers.mainContainer,\n      ]}\n      >\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\n          {ErrorMessage ? (\n            <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\n          ):(<></>)}\n          {DataView}\n        </View>\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n        }\n      </View>\n    )\n  }\n}\n\nconst PenEditor_View_Creator = (Control, CurrentData, localDataStore) => {\n  var Sections = Control.state.Sections;\n  if (CurrentData.action === Actions.CREATE) {\n    Sections[\"New Section\"] = {}\n  }\n\n  return(\n    <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\n      <PenEditor_Titles CurrentAction={CurrentData.action}/>\n      \n      <View style={ [Helpers.borderContainer, Helpers.midWidth, {marginBottom:20}] }>\n        <Section_Picker Control={Control} CurrentData={CurrentData} localDataStore={localDataStore}/>\n        {CurrentData.action === Actions.CREATE ?(\n          <Input\n            label=\"Pen name\"\n            style={{ ...Style.input}}\n            onChangeText={text => {\n              if (text){\n                if (DataStringCheck(text)){\n                  Control.setState({Pen: text})\n                }\n              }else {\n                Control.setState({Pen: text})\n              }\n            }}\n            value={Control.state.Pen}\n          />\n        ):(<></>)}\n        {CurrentData.action === Actions.DELETE ?(\n          <Picker\n            mode=\"dropdown\"\n            selectedValue={Control.state.Pen}\n            style={{ height: 50, width: 150 }}\n            onValueChange={(itemValue, itemIndex) => {\n              Control.setState({\n                Pen: itemValue\n              })\n            }}\n          >\n            {Object.keys(Control.state.Pens).map((Pen, i) => {\n                return (<Picker.Item label={Pen} value={Pen} key={i}/>)\n            })}\n          </Picker>\n        ):(<></>)}\n      </View>\n\n      {CurrentData.action === Actions.CREATE || CurrentData.action === Actions.DELETE ?(\n        <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\n          <Button Text=\"Submit\"\n            onPress={() => {\n              if (!Control.state.Section || Control.state.Section === \"\"){\n                Control.props.setViewError(\"A section is needed\")\n              } else if (!Control.state.Pen || Control.state.Pen === \"\"){\n                Control.props.setViewError(\"A pen name is needed\")\n              } else if (!isNaN(Control.state.Section) || !isNaN(Control.state.Section[0])){\n                Control.props.setViewError(\"Section name cannot be or start with a number\")\n              } else if (!isNaN(Control.state.Pen) || !isNaN(Control.state.Pen[0])){\n                Control.props.setViewError(\"Pen name cannot be or start with a number\")\n              }\n              else {\n                var exists = false;\n\n                Object.keys(Control.state.Sections).map((section, i) => {\n                  if (Control.state.Sections[section].pens){\n                    var test = Object.keys(Control.state.Sections[section].pens).filter(e => e === Control.state.Pen).length\n                    if (test) exists = true\n                  }\n                })\n\n                if (exists && CurrentData.action === Actions.CREATE) {\n                  Control.props.setViewError(\"Given pen name already exists\")\n                } else if (!exists && CurrentData.action === Actions.DELETE){\n                  Control.props.setViewError(\"Cannot remove non-existing pen\")\n                }\n                else {\n                  Control.props.setViewLoading(true)\n                  Control.props.setViewError(null)\n                  Control.props.penAction(CurrentData.action, Control.state.Section, Control.state.Pen)\n                  NavigationService.navigate(\"UserOperations\")\n                }\n              }\n            } }/>\n        </View>\n      ):(<></>)}\n    </View>\n  )\n}\n\nconst PenEditor_Titles = (props) => {\n  switch(props.CurrentAction) {\n    case Actions.CREATE:\n      return(\n        <TitleElement Text={\"Add Pen\"}/>\n      )\n    case Actions.DELETE:\n      return(\n        <TitleElement Text={\"Remove Pen\"}/>\n      )\n    default:\n      return(<></>)\n  }\n}\n\nconst PigEditor_View_Creator = (Control, CurrentData, localDataStore) => {\n  var Sections = Control.state.Sections;\n  if (CurrentData.action === Actions.CREATE) {\n    //Sections[\"New Section\"] = {}\n  }\n\n  return(\n    <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\n      <TitleElement Text={\"Add Pig: \" + CurrentData.pigtag}/>\n      \n      <View style={ [Helpers.borderContainer, Helpers.midWidth, {marginBottom:20}] }>\n        <Section_Picker Control={Control} CurrentData={CurrentData} localDataStore={localDataStore}/>\n        {Control.state.NewSection?(\n        <Input\n          label=\"Pen name\"\n          style={{ ...Style.input}}\n          onChangeText={text => {\n            if (text){\n              if (DataStringCheck(text)){\n                Control.setState({Pen: text})\n              }\n            }else {\n              Control.setState({Pen: text})\n            }\n          }}\n          value={Control.state.Pen}\n        />\n        ):(\n          <Picker\n            mode=\"dropdown\"\n            selectedValue={Control.state.Pen}\n            style={{ height: 50, width: 150 }}\n            onValueChange={(itemValue, itemIndex) => {\n              Control.setState({\n                Pen: itemValue\n              })\n            }}\n          >\n            {Object.keys(Control.state.Pens).map((Pen, i) => {\n                return (<Picker.Item label={Pen} value={Pen} key={i}/>)\n            })}\n          </Picker>\n        )}\n        {CurrentData.action === Actions.CREATE?(\n        <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\n          <Button Text=\"Submit\"\n            onPress={() => {\n              if (!Control.state.Section || Control.state.Section === \"\"){\n                Control.props.setViewError(\"A section is needed\")\n              } else if (!Control.state.Pen || Control.state.Pen === \"\"){\n                Control.props.setViewError(\"A pen name is needed\")\n              } else if (!isNaN(Control.state.Section) || !isNaN(Control.state.Section[0])){\n                Control.props.setViewError(\"Section name cannot be or start with a number\")\n              } else if (!isNaN(Control.state.Pen) || !isNaN(Control.state.Pen[0])){\n                Control.props.setViewError(\"Pen name cannot be or start with a number\")\n              }\n              else {\n                var exists = false;\n\n                Object.keys(Control.state.Sections).map((section, i) => {\n                  if (Control.state.Sections[section].pens){\n                    var test = Object.keys(Control.state.Sections[section].pens).filter(e => e === Control.state.Pen).length\n                    if (test) exists = true\n                  }\n                })\n\n                if (exists && CurrentData.action === Actions.CREATE && Control.state.NewSection) {\n                  Control.props.setViewError(\"Given pen name already exists\")\n                } else {\n                  Control.props.setViewLoading(true)\n                  Control.props.setViewError(null)\n                  Control.props.pigAction(CurrentData.action, CurrentData.pigtag, Control.state.Pen)\n                  NavigationService.navigate(\"UserPigs\")\n                }\n              }\n            } }/>\n        </View>\n      ):(<></>)}\n      </View>\n    </View>\n  )\n}\n\nconst Section_Picker = ({Control, CurrentData, localDataStore}) => {\n  if (Control.state.NewSection && CurrentData.action === Actions.CREATE){\n    return(\n      <Input\n        label=\"Section Name\"\n        style={{ ...Style.input}}\n        onChangeText={text => {\n          if (text){\n            if (DataStringCheck(text)){\n              Control.setState({Section: text})\n            }\n          }else {\n            Control.setState({Section: text})\n          }\n        }}\n        value={Control.state.Section}\n      />\n    )\n  } else {\n    return(\n      <Picker\n        mode=\"dropdown\"\n        selectedValue={Control.state.Section}\n        style={{ height: 50, width: 150 }}\n        onValueChange={(itemValue, itemIndex) => {\n          var Section = itemValue\n          var NewSection = Control.state.NewSection\n          var Pens = Control.state.Pens\n          var Pen = Control.state.Pen\n\n          if (itemValue === \"New Section\"){\n            NewSection = true;\n            Section = \"Section_\" + Object.keys(Control.state.Sections).length\n          } else {\n            Pens = sortObject(Control.state.Sections[itemValue].pens)\n            \n            if (CurrentData.action === Actions.DELETE){\n              Pen = Object.keys(Pens)[Object.keys(Pens).length-1]\n            }\n            else {\n              if (CurrentData.type == DataRefs.PIGS){\n                Pen = Object.keys(Pens)[0]\n              }else {\n                Pen = \"Pen_\" + (Object.keys(Pens).length +1)\n              }\n            }\n          }\n          \n          Control.setState({\n            Section: Section,\n            NewSection: NewSection,\n            Pens: Pens,\n            Pen: Pen,\n          })\n        }}>\n        {Object.keys(Control.state.Sections).map((Section, i) => {\n            return (<Picker.Item label={Section} value={Section} key={i}/>)\n        })}\n      </Picker>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n\n    getSections: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.SECTIONS, {DataTime: DataTime})),\n    penAction: (action, senctionId, penId) => dispatch(FirebaseActions.actionStarting(action, DataRefs.PENS, {SectionId:senctionId, PenId:penId})),\n    pigAction: (action, tagId, penId,) => dispatch(FirebaseActions.actionStarting(action, DataRefs.PIGS, {TagId:tagId, PenId:penId})),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DataEditor);\n//export default DataEditor;\n","import React, { Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, FlatList } from 'react-native'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\nimport { Icon, Input } from 'react-native-elements'\n\nimport NavigationService from '../../../Services/NavigationService'\n\n//import DeviceActions from '../../../Stores/Device/Actions'\n//import { ConnectionState } from '../../../Stores/Device/Selectors'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs, sortObject, format_Time, CurvePredict } from '../../../Stores/Firebase/Selectors'\n\nimport { Button, Button_Panel, ContentProp, OperationsPanel } from '../../../Components'\n\nimport { ApplicationStyles, Helpers, Metrics, Images, Colors } from '../../../Theme'\n\nclass DataDisplay_Pens extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentData: props.currentData,\n    }\n\n    const {CurrentData, WeighingsList, Weighings, CommentsList, Comments} = this.setData(props)\n    this.state = {\n      currentData: CurrentData,\n\n      WeighingsList: WeighingsList,\n      Weighings: Weighings,\n\n      CommentsList: CommentsList,\n      Comments: Comments,\n\n      action: \"\"\n    }\n  }\n\n  setData(Props) {\n    const localDataStore = Props.firebase.localDataStore;\n\n    var CurrentData = this.state.currentData;\n    var Pens = sortObject(localDataStore.pens)\n    if (Pens[CurrentData.penId]){\n      CurrentData.data = Pens[CurrentData.penId]\n    }\n\n    var WeighingsList = [];\n    var Weighings = [];\n    var App = Platform.OS === \"android\" || Platform.OS === \"ios\" ? true: false\n    if (localDataStore && localDataStore.weighings) {\n      if (localDataStore.weighings[CurrentData.penId]) {\n        WeighingsList = localDataStore.weighings[CurrentData.penId];\n        for(var i = 0; i < Object.keys(WeighingsList).length; i++) {\n          var name = Object.keys(WeighingsList)[i]\n          if (!name) continue;\n          var object = WeighingsList[name];\n          if (!object || !object.time) continue;\n          Weighings.push({[name]:object})\n        }\n        Weighings = Weighings.sort((a, b) => (a.time > b.time) ? 1 : -1)\n        if (App) {\n          Weighings = Weighings.slice(0,5)\n        }\n      }\n    }\n\n    var CommentsList = [];\n    var Comments = [];\n    if (localDataStore && localDataStore.comments) {\n      if (localDataStore.comments[CurrentData.penId]) {\n        CommentsList = localDataStore.comments[CurrentData.penId];\n        for(var i = 0; i < Object.keys(CommentsList).length; i++) {\n          var name = Object.keys(CommentsList)[i]\n          if (!name) continue;\n          var object = CommentsList[name];\n          if (!object || !object.time) continue;\n          Comments.push({[name]:object})\n        }\n        Comments = Comments.sort((a, b) => (a.time > b.time) ? 1 : -1)\n        if (App) {\n          Comments = Comments.slice(0,5)\n        }\n      }\n    }\n\n    if (CurrentData.data && !CurrentData.data.datas) CurrentData.data.datas = {}\n\n    return {CurrentData, WeighingsList, Weighings, CommentsList, Comments}\n  }\n\n  getData() {\n    if (this.props.firebase && this.props.firebase.localDataStore && this.state.currentData.penId) {\n      const localDataStore = this.props.firebase.localDataStore\n      if (!localDataStore.pens) localDataStore.pens = {}\n      this.props.getPens(localDataStore.pens.update_time)\n\n      var MemTime = null\n      if (localDataStore.weighings && localDataStore.weighings[this.state.currentData.penId]) MemTime = localDataStore.weighings.update_time\n      this.props.getWeights(this.state.currentData.penId, MemTime, localDataStore.sections)\n\n      this.props.getComments(this.state.currentData.penId)\n      this.props.getBatch(localDataStore.batchs.update_time)\n    }\n  }\n\n  checkData(props) {\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props);\n    this.getData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps){\n      this.checkData(this.props);\n\n      if (this.props.firebase.localDataStore) {\n        const localDataStore = this.props.firebase.localDataStore\n        if ((JSON.stringify(prevProps.currentData)!==JSON.stringify(this.state.currentData)) ||\n            (localDataStore.sections && JSON.stringify(this.state.Sections)!==JSON.stringify(sortObject(localDataStore.sections))) ||\n            (localDataStore.weighings && JSON.stringify(this.state.Weighings)!==JSON.stringify(sortObject(localDataStoree.weighings))) ||\n            (localDataStore.comments && JSON.stringify(this.state.Comments)!==JSON.stringify(sortObject(localDataStoree.comments)))\n        ) {\n          const {CurrentData, WeighingsList, Weighings, CommentsList, Comments} = this.setData(this.props)\n          this.setState({\n            currentData: CurrentData,\n\n            WeighingsList: WeighingsList,\n            Weighings: Weighings,\n\n            CommentsList: CommentsList, \n            Comments: Comments,\n          })\n        }\n      }\n    }\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n\n    const localDataStore = this.props.firebase.localDataStore\n    const CurrentData = this.state.currentData\n\n    if (!CurrentData.data) {\n      return(\n        <View style={[Helpers.fillRowCenter, Helpers.center, Helpers.logoContainer]}>\n          <Image style={Helpers.fullSize} source={Images.Hexa_icon} resizeMode={'contain'} />\n        </View>\n      )\n    } else {\n      var pigcount = CurrentData.data.datas.count?CurrentData.data.datas.count:0\n      var penWeight = []\n      if (this.state.Weighings.length > 0) {\n        penWeight = this.state.Weighings[0][Object.keys(this.state.Weighings[0])].weight / this.state.Weighings[0][Object.keys(this.state.Weighings[0])].count\n      }\n\n      var batch_name = CurrentData.data.datas.batch?CurrentData.data.datas.batch:\"No Batch\"\n      var batch = {}\n\n      //TODO: Cleanup load mem throws..\n      var age = \"\";\n      var displayWeight = penWeight;\n      \n      if (CurrentData.data.datas.batch && localDataStore.batchs && localDataStore.batchs[CurrentData.data.datas.batch]) {\n        batch = localDataStore.batchs[CurrentData.data.datas.batch];\n        var StartTime = batch.time;\n        age = Math.floor(((Date.now()-StartTime)/(1000*60*60*24)));\n        CurrentData.data.datas.gcurve = batch.gcurve;\n\n        var Predict = CurvePredict(localDataStore, CurrentData.penId)\n        if (Predict && Predict.Now) displayWeight = Predict.Now\n      }\n\n      if (!batch.datas) batch.datas = {};\n      if (!batch.datas.devianceMin) batch.datas.devianceMin = 0;\n      if (!batch.datas.devianceMax) batch.datas.devianceMax = 0;\n\n      return(\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\n          <View style={[Helpers.buttonContainer, Helpers.midWidth, Metrics.bottomMargin, Helpers.rowCenter] }>\n            <View style={{padding:6, paddingRight: 15}}>\n              <Icon name=\"md-arrow-back\" type='ionicon' size={25} color=\"black\" onPress={() => onPageSwipe(this, localDataStore, CurrentData, false)}/>\n            </View>\n            <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\n              <Button Text={CurrentData.penId} buttonStyle={{backgroundColor: Colors.AgriDarkblue}}\n                onPress={() => {} }/>\n            </View>\n            <View style={{padding:6, paddingLeft: 15}}>\n              <Icon name=\"md-arrow-forward\" type='ionicon' size={25} color=\"black\" onPress={() => onPageSwipe(this, localDataStore, CurrentData, true)}/>\n            </View>\n          </View>\n          \n          <View style={[Helpers.fullWidth]}>\n            <ContentProp texts={[\"Pig count\", \"Batch\", \"Age Days\", \"Weight\", \"Growth Cruve\", \"Alarm Max\", \"Alarm Min\", \"Mixtur\", \"Correction\", \"Portion in kg\"]} onPress={(element) => onDataPress(1, element)} \n              datas={[pigcount, batch_name, age, /*penWeight*/ displayWeight, CurrentData.data.datas.gcurve?CurrentData.data.datas.gcurve:\"default\", batch.datas.devianceMin + \" %\", batch.datas.devianceMax + \" %\", \"-\", \"-\", \"-\"]} />\n          </View>\n\n          <View style={{height:20}} />\n          <View style={[Helpers.fill, Helpers.midWidth, {height:215}]}>\n            {/* diff for app / web here ^ */}\n            <ContentProp texts={[\"Last weighings\"]} datas={[]} />\n            <View style={{height:10}} />\n              <FlatList\n                data={this.state.Weighings}\n                renderItem={({item, index}) => {\n                  if (item === \"__jsogObjectId\") return (<></>);\n                  var Weight = this.state.WeighingsList[Object.keys(item)[0]]\n                  return(\n                    <ContentProp texts={[format_Time(Weight.time)]}\n                                datas={[Weight.weight + \"   : \" + Weight.count + \" pigs\"]}\n                    />\n                  )}\n                }\n                  //Setting the number of column\n                  numColumns={1}\n                  keyExtractor={(item, index) => String(index)}\n                />\n          </View>\n\n          <View style={{height:20}} />\n          <View style={[Helpers.fill, Helpers.midWidth, {height:215}]}>\n            {/* diff for app / web here ^ */}\n            <ContentProp texts={[\"Action log\"]} datas={[]} />\n            <View style={{height:10}} />\n            <FlatList\n              data={this.state.Comments}\n              renderItem={({item, index}) => {\n                if (item === \"__jsogObjectId\") return (<></>);\n                var Comment = this.state.CommentsList[Object.keys(item)[0]]\n                return(\n                  <ContentProp texts={[format_Time(Comment.time) + \":\\n\" + Comment.user]}\n                              datas={[(Comment.quantity?(Comment.quantity + \" * \"):(\"\")) + Comment.action + \":\\n\" + Comment.data]}\n                  />\n                )}\n              }\n                //Setting the number of column\n                numColumns={1}\n                keyExtractor={(item, index) => String(index)}\n              />\n          </View>\n\n          <View style={{height:30}} />\n\n          <View style={[Helpers.borderContainer, Helpers.midWidth]}>\n            <OperationsPanel />\n          </View>\n        </View>\n      )\n    }\n  }\n}\n\nfunction onPageSwipe(Control, localDataStore, CurrentData, dir) {\n  const section = localDataStore.pens[CurrentData.penId].section\n  const Pens = sortObject(localDataStore.sections[section].pens)\n\n  if (CurrentData.type === DataRefs.PENS && CurrentData.data && Pens[CurrentData.penId]) {\n    var index = Object.keys(Pens).indexOf(CurrentData.penId)\n\n    switch (dir) {\n      case true: //forward\n        index = index +1\n        break;\n      case false: //backward\n        index = index -1\n        break;\n    }\n\n    if (index < 0) index = Object.keys(Pens).length - 1\n    else if (index >= Object.keys(Pens).length) index = 0\n\n    Control.props.setCurrentData(Object.keys(Pens)[index])\n    NavigationService.replace(\"DataDisplay\")\n  }\n}\n\nfunction onDataPress(sender, element){\n  switch(sender){\n    case 1:\n      switch(element.index){\n        case 0:\n          console.log(\"test\")\n          break;\n      }\n      break;\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n\n    getPens: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PENS, {DataTime: DataTime})),\n    getWeights: (penId, DataTime, MemSections) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.WEIGHING, {PenId: penId, DataTime: DataTime,  MemSections: MemSections})),\n    getComments: (penId) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.COMMENTS, {PenId: penId})),\n    getBatch: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.BATCHS, {DataTime: DataTime})),\n\n    setCurrentData: penId => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PENS, penId: penId})),\n    setCurrentDataElement: element => dispatch(FirebaseActions.setCurrentData(element)),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DataDisplay_Pens);\n//export default DataDisplay_Pens;","import React, { useEffect, Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, FlatList } from 'react-native'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\nimport { Icon, Input } from 'react-native-elements'\n\nimport NavigationService from '../../../Services/NavigationService'\n\n//import DeviceActions from '../../../Stores/Device/Actions'\n//import { ConnectionState } from '../../../Stores/Device/Selectors'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs, sortObject, format_Time } from '../../../Stores/Firebase/Selectors'\n\nimport { Button, Button_Panel, ContentProp, OperationsPanel } from '../../../Components'\n\nimport { ApplicationStyles, Helpers, Metrics, Images, Colors } from '../../../Theme'\n\nclass DataDisplay_Pigs extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentData: props.currentData,\n    }\n\n    const {CurrentData, WeighingsList, Weighings} = this.setData(props)\n    this.state = {\n      currentData: CurrentData,\n\n      WeighingsList: WeighingsList,\n      Weighings: Weighings,\n    }\n  }\n\n  setData(Props) {\n    const localDataStore = Props.firebase.localDataStore;\n\n    var CurrentData = this.state.currentData;\n    var Pigs = sortObject(localDataStore.pigs)\n    if (Pigs[CurrentData.TagId]){\n      CurrentData.data = Pigs[CurrentData.TagId]\n    }\n\n    var WeighingsList = [];\n    var Weighings = [];\n    var App = Platform.OS === \"android\" || Platform.OS === \"ios\" ? true: false\n    if (localDataStore && localDataStore.weighings) {\n      if (localDataStore.weighings[CurrentData.penId]) {\n        WeighingsList = localDataStore.weighings[CurrentData.penId];\n        for(var i = 0; i < Object.keys(WeighingsList).length; i++) {\n          var name = Object.keys(WeighingsList)[i]\n          if (!name) continue;\n          var object = WeighingsList[name];\n          if (!object || !object.time) continue;\n          Weighings.push({[name]:object})\n        }\n        Weighings = Weighings.sort((a, b) => (a.time > b.time) ? 1 : -1)\n        if (App) {\n          Weighings = Weighings.slice(0,5)\n        }\n      }\n    }\n    if (CurrentData.data && !CurrentData.data.datas) CurrentData.data.datas = {}\n\n    return {CurrentData, WeighingsList, Weighings}\n  }\n\n  getData() {\n    if (this.props.firebase && this.props.firebase.localDataStore && this.state.currentData.penId) {\n      const localDataStore = this.props.firebase.localDataStore\n      if (!localDataStore.pens) localDataStore.pens = {}\n      this.props.getPens(localDataStore.pens.update_time)\n      this.props.getWeights(this.state.currentData.penId)\n      this.props.getBatch(null)\n    }\n  }\n\n  checkData(props) {\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props);\n    this.getData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps){\n      this.checkData(this.props);\n\n      if (this.props.firebase.localDataStore) {\n        const localDataStore = this.props.firebase.localDataStore\n        if ((JSON.stringify(prevProps.currentData)!==JSON.stringify(this.state.currentData)) ||\n            (localDataStore.sections && JSON.stringify(this.state.Sections)!==JSON.stringify(sortObject(localDataStore.sections))) ||\n            (localDataStore.weighings && JSON.stringify(this.state.Weighings)!==JSON.stringify(sortObject(localDataStoree.weighings)))\n        ) {\n          const {CurrentData, WeighingsList, Weighings} = this.setData(this.props)\n          this.setState({\n            currentData: CurrentData,\n\n            WeighingsList: WeighingsList,\n            Weighings: Weighings,\n          })\n        }\n      }\n    }\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n\n    const localDataStore = this.props.firebase.localDataStore\n    const CurrentData = this.state.currentData\n\n    if (!CurrentData.data) {\n      return(\n        <View style={[Helpers.fillRowCenter, Helpers.center, Helpers.logoContainer]}>\n          <Image style={Helpers.fullSize} source={Images.Hexa_icon} resizeMode={'contain'} />\n        </View>\n      )\n    } else {\n      var pigcount = CurrentData.data.datas.count?CurrentData.data.datas.count:0\n      var penWeight = []\n      if (this.state.Weighings.length > 0) {\n        var count = pigcount?pigcount:1\n        penWeight = this.state.Weighings[0][Object.keys(this.state.Weighings[0])].weight / this.state.Weighings[0][Object.keys(this.state.Weighings[0])].count\n      }\n\n      var batch_name = CurrentData.data.datas.batch?CurrentData.data.datas.batch:\"No Batch\"\n      var batch = {}\n\n      //TODO: Cleanup load mem throws..\n      var age = \"\";\n      var displayWeight = penWeight;\n      if (CurrentData.data.datas.batch && localDataStore.batchs && localDataStore.batchs[CurrentData.data.datas.batch]) {\n        batch = localDataStore.batchs[CurrentData.data.datas.batch];\n        var StartTime = batch.time;\n        age = Math.floor(((Date.now()-StartTime)/(1000*60*60*24)));\n        CurrentData.data.datas.gcurve = batch.gcurve;\n\n        var Predict = CurvePredict(localDataStore, CurrentData.penId)\n        displayWeight = Predict.Now\n      }\n\n      if (!batch.datas) batch.datas = {};\n      if (!batch.datas.devianceMin) batch.datas.devianceMin = 0;\n      if (!batch.datas.devianceMax) batch.datas.devianceMax = 0;\n\n      return(\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\n          <View style={[Helpers.buttonContainer, Helpers.midWidth, Metrics.bottomMargin, Helpers.rowCenter] }>\n            <View style={{padding:6, paddingRight: 15}}>\n              <Icon name=\"md-arrow-back\" type='ionicon' size={25} color=\"black\" onPress={() => onPageSwipe(this, localDataStore, CurrentData, false)}/>\n            </View>\n            <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\n              <Button Text={CurrentData.penId} buttonStyle={{backgroundColor: Colors.AgriDarkblue}}\n                onPress={() => {} }/>\n            </View>\n            <View style={{padding:6, paddingLeft: 15}}>\n              <Icon name=\"md-arrow-forward\" type='ionicon' size={25} color=\"black\" onPress={() => onPageSwipe(this, localDataStore, CurrentData, true)}/>\n            </View>\n          </View>\n          \n          <View style={[Helpers.fullWidth]}>\n            <ContentProp texts={[\"Pig count\", \"Batch\", \"Age Days\", \"Weight\", \"Growth Cruve\", \"Alarm Max\", \"Alarm Min\", \"Mixtur\", \"Correction\", \"Portion in kg\"]} onPress={(element) => onDataPress(1, element)} \n              datas={[pigcount, batch_name, age, /*penWeight*/ displayWeight, CurrentData.data.datas.gcurve?CurrentData.data.datas.gcurve:\"default\", batch.datas.devianceMin + \" %\", batch.datas.devianceMax + \" %\", \"-\", \"-\", \"-\"]} />\n          </View>\n\n          <View style={{height:20}} />\n          <View style={[Helpers.fill, Helpers.midWidth, {height:250}]}>\n            {/* diff for app / web here ^ */}\n            <ContentProp texts={[\"Last weighings\"]} datas={[]} />\n            <View style={{height:10}} />\n            <FlatList\n              data={this.state.Weighings}\n              renderItem={({item, index}) => {\n                if (item === \"__jsogObjectId\") return (<></>);\n                var Weight = this.state.WeighingsList[Object.keys(item)[0]]\n                return(\n                  <ContentProp texts={[format_Time(Weight.time)]}\n                              datas={[Weight.weight]} \n                  />\n                )}\n              }\n                //Setting the number of column\n                numColumns={1}\n                keyExtractor={(item, index) => String(index)}\n              />\n          </View>\n\n          <View style={{height:30}} />\n\n          <View style={[Helpers.borderContainer, Helpers.midWidth]}>\n            <OperationsPanel />\n          </View>\n        </View>\n      )\n    }\n  }\n}\n\nfunction onPageSwipe(Control, localDataStore, CurrentData, dir) {\n  const section = localDataStore.pens[CurrentData.penId].section\n  const Pens = sortObject(localDataStore.sections[section].pens)\n\n  if (CurrentData.type === DataRefs.PENS && CurrentData.data && Pens[CurrentData.penId]) {\n    var index = Object.keys(Pens).indexOf(CurrentData.penId)\n\n    switch (dir) {\n      case true: //forward\n        index = index +1\n        break;\n      case false: //backward\n        index = index -1\n        break;\n    }\n\n    if (index < 0) index = Object.keys(Pens).length - 1\n    else if (index >= Object.keys(Pens).length) index = 0\n\n    Control.props.setCurrentData(Object.keys(Pens)[index])\n    NavigationService.replace(\"DataDisplay\")\n  }\n}\n\nfunction onDataPress(sender, element){\n  switch(sender){\n    case 1:\n      switch(element.index){\n        case 0:\n          console.log(\"test\")\n          break;\n      }\n      break;\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n\n    getPens: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PENS, {DataTime: DataTime})),\n    getWeights: (penId) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.WEIGHING, {PenId: penId})),\n    getBatch: (batchId) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.BATCHS, {BatchId: batchId})),\n\n    setCurrentData: penId => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PENS, penId: penId})),\n    setCurrentDataElement: element => dispatch(FirebaseActions.setCurrentData(element)),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DataDisplay_Pigs);\n//export default DataDisplay_Pigs;","import React, { useEffect, Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, FlatList } from 'react-native'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\nimport { Icon, Input } from 'react-native-elements'\n\nimport NavigationService from '../../../Services/NavigationService'\n\n//import DeviceActions from '../../../Stores/Device/Actions'\n//import { ConnectionState } from '../../../Stores/Device/Selectors'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs, sortObject, format_Time } from '../../../Stores/Firebase/Selectors'\n\nimport { Button, Button_Panel, ContentProp, OperationsPanel } from '../../../Components'\nimport DataDisplay_Pens from './DataDisplay_Pens'\nimport DataDisplay_Pigs from './DataDisplay_Pigs'\n\nimport { ApplicationStyles, Helpers, Metrics, Images, Colors } from '../../../Theme'\n\nclass DataDisplay extends Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      currentData:{}\n    }\n  }\n\n  getData() {\n    if (this.props.firebase && this.props.firebase.localDataStore) {\n      const localDataStore = this.props.firebase.localDataStore\n      if (this.props.firebase.currentData && this.props.firebase.currentData.type){\n        const CurrentData = this.props.firebase.currentData;\n        switch(CurrentData.type){\n          case DataRefs.PIGS:\n            //this.props.getWeights()\n            break;\n        }\n      }\n    }\n  }\n\n  checkData(props) {\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props);\n    this.getData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps){\n      this.checkData(this.props);\n\n      if (this.props.firebase.localDataStore) {\n        const localDataStore = this.props.firebase.localDataStore\n        if (this.props.firebase.currentData && this.props.firebase.currentData.type &&\n            JSON.stringify(this.state.currentData)!==JSON.stringify(this.props.firebase.currentData)) {\n          \n          const CurrentData = this.props.firebase.currentData;\n\n          switch(CurrentData.type){\n            case DataRefs.PENS:\n              if (localDataStore.pens) {\n                var Pens = sortObject(localDataStore.pens)\n                if (Pens[CurrentData.penId]){\n                  if (JSON.stringify(CurrentData.data)!==JSON.stringify(Pens[CurrentData.penId])){\n                    CurrentData.data = Pens[CurrentData.penId]\n                  }\n                  \n                  this.props.setCurrentDataElement(CurrentData)\n                }\n              }\n              this.setState({\n                currentData:CurrentData\n              })\n              break;\n            case DataRefs.PIGS:\n              this.setState({\n                currentData:CurrentData\n              })\n              break;\n            default:\n              this.setState({\n                currentData:CurrentData\n              })\n              break;\n          }\n        }\n      }\n    }\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n\n    const localDataStore = this.props.firebase.localDataStore\n    const ErrorMessage = this.props.firebase.viewError\n    const CurrentData = this.state.currentData\n\n    var DataView = (<View></View>);\n    switch(CurrentData.type){\n      case DataRefs.PENS:\n        DataView = (<DataDisplay_Pens currentData={this.state.currentData}/>)\n        break;\n      case DataRefs.PIGS:\n        DataView = PigData_View(this, CurrentData, localDataStore) //(<DataDisplay_Pigs currentData={this.state.currentData}/>)\n        break;\n    }\n\n    return(\n      <ScrollView style={[Helpers.fullSize, Helpers.fill]}>\n        <View\n          style={[\n            Helpers.mainContainer,\n          ]}\n        >\n          <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\n            {ErrorMessage ? (\n              <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\n            ):(<></>)}\n              {DataView}\n          </View>\n          \n          {(IsLoading || this.props.firebase.viewIsLoading) &&\n            <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n          }\n        </View>\n      </ScrollView>\n    )\n  }\n}\n\nfunction onPageSwipe(Control, localDataStore, CurrentData, dir) {\n  const section = localDataStore.pens[CurrentData.penId].section\n  const Pens = sortObject(localDataStore.sections[section].pens)\n\n  if (CurrentData.type === DataRefs.PENS && CurrentData.data && Pens[CurrentData.penId]) {\n    var index = Object.keys(Pens).indexOf(CurrentData.penId)\n\n    switch (dir) {\n      case true: //forward\n        index = index +1\n        break;\n      case false: //backward\n        index = index -1\n        break;\n    }\n\n    if (index < 0) index = Object.keys(Pens).length - 1\n    else if (index >= Object.keys(Pens).length) index = 0\n\n    Control.props.setCurrentData(Object.keys(Pens)[index])\n    NavigationService.replace(\"DataDisplay\")\n  }\n}\n\nfunction onDataPress(sender, element){\n  switch(sender){\n    case 1:\n      switch(element.index){\n        case 0:\n          console.log(\"test\")\n          break;\n      }\n      break;\n  }\n}\n\nconst PigData_View = (Control, CurrentData, localDataStore) => {\n  /*const connectedDevice = useSelector((state) => state.device.connectedDevice)\n  const DeviceData = useSelector((state) => state.device.deviceData)\n  const connectedState = useSelector((state) => state.device.connectionState)*/\n\n  var Pigs;\n  if (localDataStore && localDataStore.pigs) {\n    Pigs = sortObject(localDataStore.pigs)\n    if (Pigs[CurrentData.TagId]){\n      CurrentData.data = Pigs[CurrentData.TagId]\n    }\n  }\n  \n  if (CurrentData.data && !CurrentData.data.datas) CurrentData.data.datas = {}\n\n  if (!CurrentData.data) {\n    return(\n      <View style={[Helpers.fillRowCenter, Helpers.center, Helpers.logoContainer]}>\n        <Image style={Helpers.fullSize} source={Images.Hexa_icon} resizeMode={'contain'} />\n      </View>\n    )\n  }\n  \n  /*\n    <Row size={1.3}>\n          <Col size={1.5} style={{backgroundColor:\"red\"}}>\n            <Row size={2.25} style={{backgroundColor:\"blue\"}}>\n              <View style={{justifyContent:'center', alignItems: 'center'}}/>\n            </Row>\n            <Row size={1.50}>\n              <Col><Text>Messages</Text></Col>\n              <Col><Text>Errors</Text></Col>\n            </Row>\n          </Col>\n          <Col>\n            {connectedState === ConnectionState.CONNECTED ? (\n              <View style={{...styles.circle, backgroundColor:\"green\", justifyContent:'center', alignItems: 'center'}}>\n                <Text>Device is</Text>\n                <Text>connected</Text>\n              </View>\n            ):(\n              <View style={{...styles.circle, backgroundColor:\"red\", justifyContent:'center', alignItems: 'center'}}>\n                <Text>No Device</Text>\n                <Text>connected</Text>\n              </View>\n            )}\n          </Col>\n        </Row>\n  */\n  var App = Platform.OS === \"android\" || Platform.OS === \"ios\" ? true: false\n  return(\n    <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\n      {App ? (\n        <View style={[ Helpers.fill, Helpers.row, Helpers.fullWidth]}>\n          <View style={[ Helpers.fill, Helpers.column, {backgroundColor:\"red\"}]}>\n            <View style={[ Helpers.fill, Helpers.row, Helpers.fullWidth, {backgroundColor: \"blue\"}]}>\n              <View style={{justifyContent:'center', alignItems: 'center'}}/>\n            </View>\n            <View style={[ Helpers.fill, Helpers.row, Helpers.fullWidth,]}>\n              <Text>Messages</Text>\n              <Text>Errors</Text>\n            </View>\n          </View>\n          <View style={[ Helpers.fill, Helpers.column]}>\n            {connectedState === ConnectionState.CONNECTED ? (\n              <View style={{...styles.circle, backgroundColor:\"green\", justifyContent:'center', alignItems: 'center'}}>\n                <Text>Device is</Text>\n                <Text>connected</Text>\n              </View>\n            ):(\n              <View style={{...styles.circle, backgroundColor:\"red\", justifyContent:'center', alignItems: 'center'}}>\n                <Text>No Device</Text>\n                <Text>connected</Text>\n              </View>\n            )}\n          </View>\n        </View>\n      ):(<></>)}\n      <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\n        <Button Text={CurrentData.TagId} buttonStyle={{backgroundColor: Colors.AgriDarkblue}}\n          onPress={() => {} }/>\n      </View>\n      <View style={[Helpers.fullWidth]}>\n        <ContentProp ingrid={true} texts={[\"Section\", \"Pen\"]} datas={[CurrentData.data.section, CurrentData.data.pen]} />\n        <View style={{height:20}}/>\n        <View style={Helpers.midWidth, Helpers.colCenter}>\n          <Input\n            label={\"Comment:\"}\n            multiline={true}\n            containerStyle={[{borderWidth:1}]}\n            style={[ApplicationStyles.input]}\n            onChangeText={text => {\n              \n            }}\n            value={\n              \"NONE\"\n            }\n          />\n        </View>\n      </View>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  circle: {\n    width: 125,\n    height: 125,\n    borderRadius: 125/2,\n    marginTop: Metrics.tiny,\n    marginLeft: Metrics.tiny,\n  },\n});\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n    \n    getWeights: (penId) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.WEIGHING, {PenId: penId})),\n\n    setCurrentData: penId => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PENS, penId: penId})),\n    setCurrentDataElement: element => dispatch(FirebaseActions.setCurrentData(element)),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DataDisplay);\n//export default DataDisplay;","import React, { useEffect, Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, FlatList } from 'react-native'\nimport { Input, Icon } from 'react-native-elements'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../../Services/NavigationService'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs, GetCurve_FromBatch, CurvePredict, GetBatchEnd, AccumulateTime, format_Time, GetStats_FromBatch, GetStats_FromPen } from '../../../Stores/Firebase/Selectors'\n\nimport { LineChart } from 'react-native-chart-kit'\nimport { Button, TitleElement, CustomListItem, ContentProp } from '../../../Components'\nimport Style from './UserPanelStyle'\nimport { ApplicationStyles, Helpers, Metrics, Colors } from '../../../Theme'\nimport CurveElement, { WeightsToGraphData } from './CurveElement'\n\nimport { FlatGrid } from 'react-native-super-grid';\n\nclass DataDisplay extends Component {\n  constructor(props) {\n    super(props);\n\n    var {isClosed, isVirtual, StartDate, EndDate, Animals, TargetWeight, AverageWeight, AverageGrowth, Comments_List, Comments} = this.setData(props)\n    this.state = {\n      Prediction: false,\n\n      isClosed: isClosed,\n      isVirtual: isVirtual,\n\n      StartDate: StartDate,\n      EndDate: EndDate,\n      Animals: Animals,\n      TargetWeight: TargetWeight,\n      AverageWeight: AverageWeight, \n      AverageGrowth:AverageGrowth,\n      Comments_List: Comments_List,\n      Comments: Comments,\n    }\n  }\n\n  setData(Props) {\n    const localDataStore = Props.firebase.localDataStore;\n    const CurrentData = Props.firebase.currentData;\n\n    var Batch = localDataStore.batchs[this.props.firebase.currentData.batchId];\n    var StartDate, EndDate, TargetWeight, PenCount, Animals, AverageWeight, AverageGrowth, isClosed, isVirtual\n    var Data = GetStats_FromBatch(Batch, localDataStore)\n    if (Data) {\n      StartDate = Data.StartDate\n      EndDate = Data.EndDate\n      TargetWeight = Data.TargetWeight\n      PenCount = Data.PenCount\n      Animals = Data.Animals\n      AverageWeight = Data.AverageWeight\n      AverageGrowth = Data.AverageGrowth\n      isClosed = Data.isClosed \n      isVirtual = Data.isVirtual\n    }\n\n    var Comments_List = null\n    var Comments = [];\n    if (Batch && Batch.state && Batch.state === \"Closed\" && Batch.closed && Batch.closed.comments) {\n      Comments_List = []\n      Object.keys(Batch.pens).reverse().filter(e => (e !== '__jsogObjectId')).forEach(element => {\n        var CommentsList = [];\n        if (Batch.closed.comments[element]) {\n          CommentsList = Batch.closed.comments[element];\n          for(var i = 0; i < Object.keys(CommentsList).length; i++) {\n            var name = Object.keys(CommentsList)[i]\n            if (!name) continue;\n            var object = CommentsList[name];\n            if (!object || !object.time) continue;\n            object.pen = element\n            Comments.push({[name]:object})\n          }\n        }\n        Comments_List = Comments_List.concat(CommentsList);\n      });\n    }\n    Comments = Comments.sort((a, b) => (a.time > b.time) ? 1 : -1)\n    return { isClosed, isVirtual, StartDate, EndDate, Animals, TargetWeight, AverageWeight, AverageGrowth, Comments_List, Comments }\n  }\n\n  getData() {\n    const localDataStore = this.props.firebase.localDataStore;\n    const CurrentData = this.props.firebase.currentData;\n\n    if (CurrentData && CurrentData.batchId && localDataStore.batchs[CurrentData.batchId]){\n      const batchData = localDataStore.batchs[CurrentData.batchId]\n      \n      this.props.getWeights(localDataStore.weighings?localDataStore.weighings.update_time:null, localDataStore.sections)\n\n      var PenMemTime = null\n      if (localDataStore.pens) PenMemTime = localDataStore.pens.update_time\n      if (batchData.pens) {\n        Object.keys(batchData.pens).filter(e => e !== '__jsogObjectId').forEach(Pen => {\n          this.props.getPen(Pen, PenMemTime)\n        })\n      }\n\n      var TempGraph = \"\"\n      if (CurrentData.curveId) {\n        TempGraph = CurrentData.curveId;\n      }\n      this.props.getCurve(TempGraph)\n    }\n  }\n\n  checkData(props) {\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps) {\n      this.checkData(this.props);\n      if (this.props.firebase.localDataStore) {\n        var { isClosed, isVirtual, StartDate, EndDate, Animals, TargetWeight, AverageWeight, AverageGrowth, Comments_List, Comments } = this.setData(this.props)\n        this.setState({\n          Prediction: false,\n          isClosed: isClosed,\n          isVirtual: isVirtual,\n\n          StartDate: StartDate,\n          EndDate: EndDate,\n          Animals: Animals,\n          TargetWeight: TargetWeight,\n          AverageWeight: AverageWeight, \n          AverageGrowth:AverageGrowth,\n          Comments_List: Comments_List,\n          Comments: Comments,\n        })\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props);\n    this.getData();\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n    const ErrorMessage = this.props.firebase.viewError\n\n    const localDataStore = this.props.firebase.localDataStore\n    const CurrentData = this.props.firebase.currentData;\n\n    var StartDate = this.state.StartDate\n\n    var Dif_Time = new Date().getTime() - StartDate\n    var Days = Dif_Time / (1000 * 3600 * 24);\n    Days = Days.toFixed(0) //TODO: closed date...\n\n    StartDate = new Date(StartDate).getDate() + \"/\" + (new Date(StartDate).getMonth() +1) + \"/\" + new Date(StartDate).getFullYear()\n\n    var EndDate = this.state.EndDate\n    EndDate = new Date(EndDate).getDate() + \"/\" + (new Date(EndDate).getMonth() +1) + \"/\" + new Date(EndDate).getFullYear()\n\n    var Virtual = String(this.state.isVirtual)\n    Virtual = Virtual.charAt(0).toUpperCase() + Virtual.slice(1)\n    return(\n      <ScrollView style={[Helpers.fullSize, Helpers.fill]}>\n      <View\n        style={[\n          Helpers.mainContainer,\n        ]}\n      >\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\n          {ErrorMessage ? (\n            <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\n          ):(<></>)}\n          <TitleElement Text={this.props.firebase.currentData.batchId?this.props.firebase.currentData.batchId:\"-NON-\"}/>\n          <View>\n            <View style={[Helpers.fullWidth, {justifyContent:'center'}]}>\n              <FlatGrid\n                itemDimension={120}\n                spacing={10}\n\n                data={[\n                  {title: 'Start', data: StartDate},\n                  {title: 'End Forecast', data: EndDate},\n                  {title: 'Target Weight', data: this.state.TargetWeight},\n                  //{title: 'Virtual cal', data: Virtual}\n                ]}\n                renderItem={({ item }) => (\n                  <View style={[Helpers.borderContainer, {textAlign:'center'}]}>\n                    <Text>{item.title}</Text>\n                    <Text>{item.data}</Text>\n                  </View>\n                )}\n                />\n            </View>\n            <View style={[Helpers.fullWidth, {justifyContent:'center'}]}>\n              <FlatGrid\n                itemDimension={120}\n                spacing={10}\n\n                data={[\n                  {title: 'Animals', data: this.state.Animals},\n                  {title: 'Day', data: Days},\n                  {title: 'Avarage weight', data: this.state.AverageWeight},\n                  {title: 'Average growth', data: this.state.AverageGrowth}\n                ]}\n                renderItem={({ item }) => (\n                  <View style={[Helpers.borderContainer, {textAlign:'center'}]}>\n                    <Text>{item.title}</Text>\n                    <Text>{item.data}</Text>\n                  </View>\n                )}\n                />\n            </View>\n            <Button Text=\"Show Predict\"\n                onPress={() => {\n                  this.setState({\n                    Prediction: !this.state.Prediction\n                  })\n                } }/>\n          </View>\n          <View style={[Helpers.fill, Helpers.fullWidth, {minHeight:750}]}>\n            <CurveElement Predict={this.state.Prediction} weighings={localDataStore.weighings}/>\n          </View>\n          {this.state.Comments_List?(\n            <View style={[Helpers.fill, Helpers.midWidth, {height:415}]}>\n              {/* diff for app / web here ^ */}\n              <ContentProp texts={[\"Action log\"]} datas={[]} />\n              <View style={{height:10}} />\n              <FlatList\n                data={this.state.Comments.filter(e => (e !== '__jsogObjectId'))}\n                renderItem={({item, index}) => {\n                  var Comment = this.state.Comments_List[0][Object.keys(item)[0]]\n                  if (!Comment) return null\n                  return(\n                    <ContentProp texts={[format_Time(Comment.time) + \":\\n\" + Comment.user]}\n                                datas={[Comment.pen + \": \" + Comment.action + \":\\n\" + Comment.data]}\n                    />\n                  )}\n                }\n                  //Setting the number of column\n                  numColumns={1}\n                  keyExtractor={(item, index) => String(index)}\n                />\n            </View>\n          ):(<></>)}\n        </View>\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n        }\n      </View>\n      </ScrollView>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n    \n    getPen: (penId, DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PENS, {PenId: penId, DataTime:DataTime})),\n    getWeights: (DataTime, MemSections) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.WEIGHING, {DataTime: DataTime, MemSections: MemSections})),\n    \n    getBatch: (batchId) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.BATCHS, {})),\n    getCurve: (curveid) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.GRAPH, {GraphId: curveid})),\n    setCurve: (curve) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.GRAPH, {Graph: curve}))\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DataDisplay);\n//export default DataDisplay;","import React from 'react'\nimport { createAppContainer } from 'react-navigation'\nimport { createStackNavigator } from 'react-navigation-stack'\nimport { TouchableOpacity, View, Text } from 'react-native'\nimport { Icon } from 'react-native-elements'\n\nimport NavigationService from '../Services/NavigationService'\n\nimport UserFrontScreen from '../Containers/Cloud/UserPanel/FrontScreen'\nimport UserDashBoardScreen from '../Containers/Cloud/UserPanel/Dashboard'\nimport UserPigsScreen from '../Containers/Cloud/UserPanel/Pigs'\nimport UserPensScreen from '../Containers/Cloud/UserPanel/Pens'\nimport UserBatchsScreen from '../Containers/Cloud/UserPanel/Batchs'\nimport UserCurvesScreen from '../Containers/Cloud/UserPanel/GrowthCurves'\n\nimport UserOperationsScreen from '../Containers/Cloud/UserPanel/Operations'\nimport Weighing from '../Containers/Cloud/UserPanel/Weighing'\n\nimport UserDataEditor from '../Containers/Cloud/UserPanel/DataEditor'\nimport UserDataDisplay from '../Containers/Cloud/UserPanel/DataDisplay'\nimport UserDataPlotter from '../Containers/Cloud/UserPanel/DataPlotter'\n\nimport { ApplicationStyles } from '../Theme'\n\n/**\n * The root screen contains the application's navigation.\n *\n * @see https://reactnavigation.org/docs/en/hello-react-navigation.html#creating-a-stack-navigator\n */\nconst StackNavigator = createStackNavigator(\n  {\n    // Create the application routes here (the key is the route name, the value is the target screen)\n    // See https://reactnavigation.org/docs/en/stack-navigator.html#routeconfigs\n    \n    UserFront: {\n      screen: UserFrontScreen,\n      navigationOptions: () => ({\n        title: 'User Data',\n        headerLeft: (props) => (\n          <View style={{padding:6, paddingLeft: 15}}>\n            <Icon type='ionicon' name=\"md-arrow-back\" size={25} color=\"black\" onPress={() => {\n              if (props.label === \"System Board\") {\n                NavigationService.nacigationPop()\n              }\n              else NavigationService.navigate('MainStack')\n            }}/>\n          </View>\n        ),\n      }),\n      path: 'user_front',\n    },\n\n    UserDashBoard: {\n      screen: UserDashBoardScreen,\n      navigationOptions: () => ({\n        title: 'Dash Board',\n      }),\n      path: 'user_dashboard',\n    },\n\n    UserPigs: {\n      screen: UserPigsScreen,\n      navigationOptions: () => ({\n        title: 'Pigs',\n      }),\n      path: 'user_pigs',\n    },\n\n    UserPens: {\n      screen: UserPensScreen,\n      navigationOptions: () => ({\n        title: 'Pens',\n      }),\n      path: 'user_pens',\n    },\n\n    UserBatchs: {\n      screen: UserBatchsScreen,\n      navigationOptions: () => ({\n        title: 'Batchs',\n      }),\n      path: 'user_batchs',\n    },\n\n    UserCurves: {\n      screen: UserCurvesScreen,\n      navigationOptions: () => ({\n        title: 'Curves',\n      }),\n      path: 'user_curves',\n    },\n\n    /**************** Operations */\n    UserOperations: {\n      screen: UserOperationsScreen,\n      navigationOptions: () => ({\n        title: 'Operations',\n      }),\n      path: 'user_operations',\n    },\n\n    WeighingOperations: {\n      screen: Weighing,\n      navigationOptions: () => ({\n        title: 'Operations',\n      }),\n      path: 'user_operations',\n    },\n\n    /**************** Data Displays */\n    DataEditor: {\n      screen: UserDataEditor,\n      navigationOptions: () => ({\n        title: 'User Data',\n      }),\n      path: 'user_dataedtior',\n    },\n\n    DataDisplay: {\n      screen: UserDataDisplay,\n      navigationOptions: () => ({\n        title: 'User Data',\n      }),\n      path: 'user_datadisplay',\n    },\n\n    DataPlotter: {\n      screen: UserDataPlotter,\n      navigationOptions: () => ({\n        title: 'User Data',\n      }),\n      path: 'user_dataplotter',\n    },\n  },\n  {\n    initialRouteName: 'UserFront', \n\n    // See https://reactnavigation.org/docs/en/stack-navigator.html#stacknavigatorconfig\n    headerMode: 'float',\n    defaultNavigationOptions:{\n      headerTitleAlign: 'center',\n      headerTitleStyle:{...ApplicationStyles.navigationHeader},\n      headerRight: () => (<View style={{padding:6}}></View>),\n    },\n  }\n)\n\nexport default StackNavigator\n","import { StyleSheet } from 'react-native'\nimport { Helpers, Metrics, Fonts, Colors } from '../../../Theme'\n\nexport default StyleSheet.create({\n\n})\n","import React, { useEffect, Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator } from 'react-native'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../../Services/NavigationService'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs } from '../../../Stores/Firebase/Selectors'\n\nimport { Button, Button_Panel } from '../../../Components'\nimport Style from './AdminPanelStyle'\nimport { ApplicationStyles, Helpers, Metrics, Images } from '../../../Theme'\n\nclass FrontScreen extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ISLOADPAGE: true,\n    }\n  }\n\n  getData(){\n  }\n\n  checkData(props) {\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.props.clearDataMem()\n    this.checkData(this.props)\n    this.getData()\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps){\n      this.checkData(this.props);\n    }\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n    const firebaseUser = this.props.firebase.firebaseUser\n    \n    return(\n      <View\n      style={[\n        Helpers.mainContainer,\n      ]}\n      >\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\n          {firebaseUser?(\n          <View style={ Helpers.textContainer }>\n            <Text style={ApplicationStyles.text}>Welcome: {firebaseUser.displayName ? firebaseUser.displayName : firebaseUser.email}</Text>\n          </View>):(<></>)}\n\n          <Button_Panel \n            Texts={[\"User Board\", \"Systems\"]}\n            Images={[Images.DashBoard, Images.System,]}\n            onPress={(ele) => {\n              switch(ele.text){\n                case \"User Board\":\n                  NavigationService.navigate(\"UserBoard\")\n                  break;\n                case \"Systems\":\n                  NavigationService.navigate(\"SystemBoard\")\n                  break;\n              }\n              ele.text\n            }}\n          />\n          \n          <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\n            <Button Text=\"LogOut\"\n              onPress={() => {\n                this.props.logOut()\n              }}/>\n          </View>\n        </View>\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n        }\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n\n    clearDataMem: () => dispatch(FirebaseActions.actionStarting(Actions.CLEAR, DataRefs.USERSDATA)),\n    logOut: () => dispatch(FirebaseActions.actionStarting(Actions.SIGN, DataRefs.USERSDATA)),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FrontScreen);\n//export default FrontScreen;\n","import React, { useEffect, useState, Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, SafeAreaView, FlatList } from 'react-native'\nimport { ListItem, Input } from 'react-native-elements'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../../Services/NavigationService'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs, sortObject } from '../../../Stores/Firebase/Selectors'\n\nimport { Button, OperationsPanel, CustomListItem, ContentProp } from '../../../Components'\nimport Style from '../../../Containers/Cloud/CloudScreenStyle'\nimport { ApplicationStyles, Helpers, Metrics } from '../../../Theme'\n\nimport { FlatGrid, SectionGrid } from 'react-native-super-grid';\n\nclass UserListBoard extends Component {\n  constructor(props){\n    super(props);\n\n    const {UserList} = this.setData(props)\n    this.state = {\n      UserList: UserList,\n      User: \"\"\n    }\n  }\n\n  getData() {\n    this.props.getUsers()\n  }\n\n  setData(Props) {\n    const localDataStore = Props.firebase.localDataStore\n\n    var UserList = null\n    if (localDataStore && localDataStore.users) {\n      UserList = sortObject(localDataStore.users)\n    }\n    \n    return {UserList}\n  }\n\n  checkData(props) {\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props)\n    this.getData()\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps){\n      this.checkData(this.props);\n\n      if (this.props.firebase) {\n        if (this.props.firebase.localDataStore) {\n          if (this.props.firebase.localDataStore.users && JSON.stringify(this.state.UserList)!==JSON.stringify(sortObject(this.props.firebase.localDataStore.users))) {\n            const {UserList} = this.setData(this.props)\n            this.setState({\n              UserList: UserList,\n            })\n          }\n        }\n      }\n    }\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n\n    return(\n      <View\n        style={[\n          Helpers.mainContainer,\n        ]}\n      >\n        <View style={[Helpers.contentContainer, Helpers.fullWidth, Helpers.fill]}>\n          <View style={[Helpers.fill, Helpers.buttonContainer, Helpers.fullWidth, Metrics.bottomMargin, Helpers.column]}>\n            {this.state.UserList ? (\n              <View style={[Helpers.fill, Helpers.borderContainer, Metrics.smallHorizontalPadding, Metrics.smallVerticalPadding, {maxWidth:800, marginTop:10}]}>\n                <SafeAreaView style={styles.container}>\n                  <FlatList\n                    data={Object.keys(this.state.UserList).filter(e => e !== '__jsogObjectId')}\n                    renderItem={({item, index})=>{\n                      var User = this.state.UserList[item];\n                      return(\n                        <View style={[Helpers.fill, Helpers.rowCenter, Helpers.fullWidth, {height:35}]}>\n                          <CustomListItem Title={User.name} itemStyle={[{minWidth: 190, height:35,}]} onPress={() => {\n                              //this.props.setData(item, Section, Pen)\n                              //NavigationService.navigate(\"DataDisplay\")\n                            }}/>\n\n                          <CustomListItem itemStyle={[{width:70, height:35, justifyContent:\"center\"}]} Title={\"\"} onPress={() => {\n                              this.setState({\n                                User: User.name\n                              })\n                            }}/>\n\n                          <CustomListItem itemStyle={[{width:90, height:35}]} Title={User.state} onPress={() => {\n                              this.setState({\n                                User: User.name\n                              })\n                            }}/>\n                        </View>\n                      )\n                    }}\n                    keyExtractor={(item, index) => index.toString()}\n                  />\n                </SafeAreaView>\n              </View>\n            ):(<></>)} \n            <Input\n              label={\"User-tag:\"}\n              containerStyle={[{borderWidth:1, marginTop:10}]}\n              style={[ApplicationStyles.input, ]}\n              onChangeText={text => {\n                this.setState({\n                  User: text\n                })\n              }}\n              value={\n                this.state.User\n              }\n            />\n          </View>\n        </View>\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n        }\n      </View>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  circle: {\n    width: 125,\n    height: 125,\n    borderRadius: 125/2,\n    marginTop: Metrics.tiny,\n    marginLeft: Metrics.tiny,\n  },\n});\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n\n    getUsers: () => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.USERS, {UserId:\"\"})),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserListBoard);","import React, { useEffect, useState, Component } from 'react'\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, SafeAreaView, FlatList } from 'react-native'\nimport { ListItem, Input } from 'react-native-elements'\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\n\nimport NavigationService from '../../../Services/NavigationService'\n\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\nimport { Actions, DataRefs, sortObject } from '../../../Stores/Firebase/Selectors'\n\nimport { Button, OperationsPanel, CustomListItem, ContentProp } from '../../../Components'\nimport Style from '../../../Containers/Cloud/CloudScreenStyle'\nimport { ApplicationStyles, Helpers, Metrics } from '../../../Theme'\n\nimport { FlatGrid, SectionGrid } from 'react-native-super-grid';\n\nclass SystemListBoard extends Component {\n  constructor(props){\n    super(props);\n\n    const {FarmList} = this.setData(props)\n    this.state = {\n      FarmList: FarmList,\n      Farm: {name: \"\"}\n    }\n  }\n\n  getData() {\n    this.props.getFarms()\n  }\n\n  setData(Props) {\n    const localDataStore = Props.firebase.localDataStore\n\n    var FarmList = null\n    if (localDataStore && localDataStore.farms) {\n      FarmList = sortObject(localDataStore.farms)\n    }\n    return {FarmList}\n  }\n\n  checkData(props) {\n  }\n\n  componentDidMount() {\n    this.props.setViewLoading(false)\n    this.props.setViewError(null)\n    this.checkData(this.props)\n    this.getData()\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props !== prevProps){\n      this.checkData(this.props);\n\n      if (this.props.firebase) {\n        if (this.props.firebase.localDataStore) {\n          if (this.props.firebase.localDataStore.farms && JSON.stringify(this.state.FarmList)!==JSON.stringify(sortObject(this.props.firebase.localDataStore.farms))) {\n            const {FarmList} = this.setData(this.props)\n            this.setState({\n              FarmList: FarmList,\n            })\n          }\n        }\n      }\n    }\n  }\n\n  render() {\n    const IsLoading = this.props.firebase.firebaseIsLoading\n\n    return(\n      <View\n        style={[\n          Helpers.mainContainer,\n        ]}\n      >\n        <View style={[Helpers.contentContainer, Helpers.fullWidth, Helpers.fill]}>\n          <View style={[Helpers.fill, Helpers.buttonContainer, Helpers.fullWidth, Metrics.bottomMargin, Helpers.column]}>\n            {this.state.FarmList ? (\n              <View style={[Helpers.fill, Helpers.borderContainer, Metrics.smallHorizontalPadding, Metrics.smallVerticalPadding, {maxWidth:800, marginTop:10}]}>\n                <SafeAreaView style={styles.container}>\n                  <FlatList\n                    data={Object.keys(this.state.FarmList).filter(e => e !== '__jsogObjectId')}\n                    renderItem={({item, index})=>{\n                      var Farm = this.state.FarmList[item];\n                      Farm.id = item\n                      return(\n                        <View style={[Helpers.fill, Helpers.rowCenter, Helpers.fullWidth, {height:35}]}>\n                          <CustomListItem Title={Farm.name} itemStyle={[{minWidth: 100, height:35,}]} onPress={() => {\n                              //this.props.setData(item, Section, Pen)\n                              //NavigationService.navigate(\"DataDisplay\")\n                            }}/>\n\n                          <CustomListItem itemStyle={[{minWidth:150, height:35, justifyContent:\"center\"}]} Title={Farm.manager} onPress={() => {\n                              this.setState({\n                                Farm: Farm\n                              })\n                            }}/>\n\n                          <CustomListItem itemStyle={[{minWidth:150, height:35}]} Title={Farm.email} onPress={() => {\n                              this.setState({\n                                Farm: Farm\n                              })\n                            }}/>\n                        </View>\n                      )\n                    }}\n                    keyExtractor={(item, index) => index.toString()}\n                  />\n                </SafeAreaView>\n              </View>\n            ):(<></>)} \n            <View style={[Helpers.rowCenter, Helpers.fullWidth, {height:120}]}>\n              <Input\n                label={\"Farm-tag:\"}\n                containerStyle={[Helpers.halvWidth,{borderWidth:1, marginTop:10}]}\n                style={[ApplicationStyles.input, ]}\n                editable={false}\n                onChangeText={text => {\n                  var Farm = this.state.Farm;\n                  Farm.name = text;\n                  this.setState({\n                    Farm: Farm\n                  })\n                }}\n                value={\n                  this.state.Farm.name\n                }\n              />\n              <Button Text=\"Consys\"\n                boxStyle={[{marginLeft:10}]}\n                onPress={() => {\n                  //this.props.logOut()\n                }}/>\n              <Button Text=\"Farm Panel\"\n                boxStyle={[{marginLeft:10}]}\n                onPress={() => {\n                  if (this.state.Farm.id !== \"\") {\n                    this.props.setUserFarm(this.state.Farm.id)\n                    NavigationService.navigate(\"UserPanel\")\n                  }\n                }}/>\n            </View>\n          </View>\n        </View>\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\n        }\n      </View>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  circle: {\n    width: 125,\n    height: 125,\n    borderRadius: 125/2,\n    marginTop: Metrics.tiny,\n    marginLeft: Metrics.tiny,\n  },\n});\n\nconst mapStateToProps = (state) => {\n  const { firebase } = state\n  return { firebase }\n};\n\nconst mapDispatchToProps  = (dispatch) => {\n  return {\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\n\n    getFarms: () => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.FARMS, {FarmId: \"\"})),\n    setUserFarm: (FarmId) => dispatch(FirebaseActions.actionStarting(Actions.UPDATE, DataRefs.USERS, {farms:{[FarmId]: true}})),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SystemListBoard);","import React from 'react'\nimport { createAppContainer } from 'react-navigation'\nimport { createStackNavigator } from 'react-navigation-stack'\nimport { TouchableOpacity, View, Text } from 'react-native'\nimport { Icon } from 'react-native-elements'\n\nimport NavigationService from '../Services/NavigationService'\n\nimport AdminFrontScreen from '../Containers/Cloud/AdminPanel/FrontScreen'\n\nimport AdminUserBoard from '../Containers/Cloud/AdminPanel/UserBoard'\nimport AdminSystemBoard from '../Containers/Cloud/AdminPanel/SystemBoard'\n\nimport UserPanelNavigation from '../Navigators/UserPanelNavigator'\n\nimport { ApplicationStyles } from '../Theme'\n\n/**\n * The root screen contains the application's navigation.\n *\n * @see https://reactnavigation.org/docs/en/hello-react-navigation.html#creating-a-stack-navigator\n */\nconst StackNavigator = createStackNavigator(\n  {\n    // Create the application routes here (the key is the route name, the value is the target screen)\n    // See https://reactnavigation.org/docs/en/stack-navigator.html#routeconfigs\n    \n    AdminFront: {\n      screen: AdminFrontScreen,\n      navigationOptions: () => ({\n        title: 'Admin Panel',\n        headerLeft: () => (\n          <View style={{padding:6, paddingLeft: 15}}>\n            <Icon type='ionicon' name=\"md-arrow-back\" size={25} color=\"black\" onPress={() => NavigationService.navigate('MainStack')}/>\n          </View>\n        ),\n      }),\n      path: 'admin_front',\n    },\n\n    UserBoard: {\n      screen: AdminUserBoard,\n      navigationOptions: () => ({\n        title: 'User Board',\n      }),\n      path: 'admin_user_board',\n    },\n    SystemBoard: {\n      screen: AdminSystemBoard,\n      navigationOptions: () => ({\n        title: 'System Board',\n      }),\n      path: 'admin_system_board',\n    },\n\n    UserPanel: {\n      screen: UserPanelNavigation,\n      navigationOptions: () => ({\n        title: 'Admin Panel',\n        headerLeft: () => (\n          <View style={{padding:6, paddingLeft: 15}}>\n            <Icon type='ionicon' name=\"md-arrow-back\" size={25} color=\"black\" onPress={() => NavigationService.navigate('SystemBoard')}/>\n          </View>\n        ),\n      }),\n      path: 'admin_front',\n    },\n  },\n  {\n    initialRouteName: 'AdminFront', \n\n    // See https://reactnavigation.org/docs/en/stack-navigator.html#stacknavigatorconfig\n    headerMode: 'float',\n    defaultNavigationOptions:{\n      headerTitleAlign: 'center',\n      headerTitleStyle:{...ApplicationStyles.navigationHeader},\n      headerRight: () => (<View style={{padding:6}}></View>),\n    },\n  }\n)\n\nexport default StackNavigator\n","import React from 'react'\nimport { createAppContainer } from 'react-navigation'\nimport { createStackNavigator } from 'react-navigation-stack'\nimport { TouchableOpacity, Icon, View, Text } from 'react-native'\n\nimport SplashScreen from '../Containers/SplashScreen/SplashScreen'\nimport DeepLinkingScreen from '../Containers/DeepLinking/DeepLinkingScreen'\n\nimport FrontNavigation from '../Navigators/FrontNavigator'\nimport AuthNavigation from '../Navigators/AuthNavigator'\n\nimport UserPanelNavigation from '../Navigators/UserPanelNavigator'\nimport AdminPanelNavigator from '../Navigators/AdminPanelNavigator'\nimport { ApplicationStyles } from '../Theme'\n\n/**\n * The root screen contains the application's navigation.\n *\n * @see https://reactnavigation.org/docs/en/hello-react-navigation.html#creating-a-stack-navigator\n */\nconst StackNavigator = createStackNavigator(\n  {\n    // Create the application routes here (the key is the route name, the value is the target screen)\n    // See https://reactnavigation.org/docs/en/stack-navigator.html#routeconfigs\n    SplashScreen: {\n      screen: SplashScreen,\n      navigationOptions: () => ({\n        headerShown: false,\n      }),\n    },\n\n    MainStack: {\n      screen: FrontNavigation, // Called By StartupSaga.js\n      path: 'Front',\n    },\n    \n    AuthStack: AuthNavigation, // All user pages\n\n    UserPanel: UserPanelNavigation, // 'Free' Users Pages... \n\n    AdminPanel: AdminPanelNavigator, // Admin Pages\n\n    DeepLinkingScreen: {\n      screen: DeepLinkingScreen,\n      path: 'deeplink',\n    },\n  },\n  {\n    // By default the application will show the splash screen\n    initialRouteName: 'SplashScreen',\n    // See https://reactnavigation.org/docs/en/stack-navigator.html#stacknavigatorconfig\n    headerMode: 'none',\n    defaultNavigationOptions:{\n      headerTitleAlign: 'center',\n      headerRight: () => (<View style={{padding:6}}></View>),\n    },\n  }\n)\n\nexport default createAppContainer(StackNavigator)\n","import React, { useEffect } from 'react'\nimport { View } from 'react-native'\nimport { useDispatch } from 'react-redux'\n\nimport NavigationService from '../../Services/NavigationService'\nimport AppNavigator from '../../Navigators/AppNavigator'\n\nimport StartupActions from '../../Stores/Startup/Actions'\nimport { Helpers } from '../../Theme'\n\nconst RootScreen = () => {\n  // Deep linking prefix\n  const prefix = 'agrisysapp://';\n  \n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    dispatch(StartupActions.startup())\n  }, [])\n\n  return (\n    <View style={Helpers.fill}>\n      <AppNavigator\n        // Initialize the NavigationService (see https://reactnavigation.org/docs/en/navigating-without-navigation-prop.html)\n        ref={(navigatorRef) => {\n          NavigationService.setTopLevelNavigator(navigatorRef)\n        }}\n        uriPrefix={prefix}\n      />\n    </View>\n  )\n}\n\nexport default RootScreen\n","import { combineReducers } from 'redux'\nimport configureStore from './CreateStore'\nimport rootSaga from '../Sagas'\n\nimport { reducer as ExampleReducer } from './Example/Reducers'\nimport { reducer as FirebaseReducer } from './Firebase/Reducers'\n\nexport default () => {\n  const rootReducer = combineReducers({\n    /**\n     * Register your reducers here.\n     * @see https://redux.js.org/api-reference/combinereducers\n     */\n    example: ExampleReducer,\n    firebase: FirebaseReducer,\n  })\n\n  return configureStore(rootReducer, rootSaga)\n}\n","import React from 'react'\nimport { Provider } from 'react-redux'\nimport { PersistGate } from 'redux-persist/lib/integration/react'\n\nimport createStore from './Src/Stores'\nimport RootScreen from './Src/Containers/Root/RootScreen'\n\nconst { store, persistor } = createStore()\n\nconst App = () => (\n  <Provider store={store}>\n    {/**\n     * PersistGate delays the rendering of the app's UI until the persisted state has been retrieved\n     * and saved to redux.\n     * The `loading` prop can be `null` or any react instance to show during loading (e.g. a splash screen),\n     * for example `loading={<SplashScreen />}`.\n     * @see https://github.com/rt2zz/redux-persist/blob/master/docs/PersistGate.md\n     */}\n    <PersistGate loading={null} persistor={persistor}>\n      <RootScreen />\n    </PersistGate>\n  </Provider>\n);\n\nexport default App\n","module.exports = __webpack_public_path__ + \"static/media/Home.1fff8434.png\";","module.exports = __webpack_public_path__ + \"static/media/Dashboard.26766c7a.png\";","module.exports = __webpack_public_path__ + \"static/media/System.7e4af00c.png\";","module.exports = __webpack_public_path__ + \"static/media/Feed-Curves.da739887.png\";","module.exports = __webpack_public_path__ + \"static/media/Growth-curve.7f9a7fea.png\";","module.exports = __webpack_public_path__ + \"static/media/User.d73be9fd.png\";","module.exports = __webpack_public_path__ + \"static/media/Sow.beff0aff.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABRCAYAAACuepoLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAq9JREFUeNrsnT1Lw1AUhk9FRFEhDhV0qgouLlrcjYOLi3XpasEfYjo62X/Quorg5iS0P0D8GBzVOAkWP6CVigg1197E0Naa3ER7b/K+cLig3tP4eJJz8g5XIig0JRS8Zr3Pn1+JUgE0JYgjK1JRqEz2y9DE1IJwgrdalRr1BxoZm6Th8aTvfVwvVqxacaE8zLXtQ+EEN+cHdH12QHPpLM0uZX3tbdSrdHmyS7VH0wY6w1caQNvwp5GxJC2v57+q2pJmRc7+HmAKaHBolGbTTkVvAGYIFdoBucfPp7p1rH8efwr280iJiu3ytUUr9iSY5+yZrqIqTAayzB+sIgOqHtJgq7vGD1IRpsaHUY3PTptWmCJjC5+/Ao8/7hlONZgZ/ow0OQylqkIGubv5Cl/3ATI4zFQUX+T7BRMCTMCM5mumqhf+fH8lvLdRqzqraJ7aU++pscznuyBvPk3XjEh/lKcpWZSVr8x+mMNufby/2p6m+rc58xRFZZvD0/O6b3PY/Zg5Pd5BA0I3B0yMRlsU3Ms0ALOlXAh5dwCzpZIVdwEh5uP4x+gGk1lwlYAQjDjCRAMCTMAETAgwARMwoZ5zphJiNpqonri73lrF8thu/U+C0x5Dpz0v2fWYKlcmGhC6OQSYMo1GMjnthkSsfr2WRFsD0lFfnlh5rswSyeO0y5BHyKiO4mgURh7POdCA0M0BEzAhwARMwIQAEzABEzAhwARMwIQ6FRen3fgPmHDaxVh5rswSwWnvlsOX4LQHzIEGhG4OmIAJASZgAiYEmIAJmPGEafJVBxZHi21sPCvH30Fv8W7uqMj3F/1uZCe6PtP3vxvQYg7TcO33dLe6LTh2ACk7Gpe5RxkeFcELKYd0m/UrT4q+zxMtBODgHOLcjHnc8oLyrMQvUDWKr3xX46cAAwCxt3YCfnN46AAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/Area_Colour.f4a4e098.png\";","module.exports = __webpack_public_path__ + \"static/media/AutoPig.ec16c410.png\";","module.exports = __webpack_public_path__ + \"static/media/Feed-Components.224ca1b3.png\";","module.exports = __webpack_public_path__ + \"static/media/Hexagon-globe.fce26805.png\";","module.exports = __webpack_public_path__ + \"static/media/Hexa-icon.5129d536.png\";","module.exports = __webpack_public_path__ + \"static/media/Logo.9b051259.png\";","module.exports = __webpack_public_path__ + \"static/media/TOM.c88886f3.png\";"],"sourceRoot":""}