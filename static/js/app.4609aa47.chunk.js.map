{"version":3,"sources":["Src/Stores/CreateStore.js","Src/Stores/Startup/Actions.js","Src/Stores/Example/Actions.js","Src/Stores/Device/BLE/Actions.js","Src/Stores/Device/BlueTooth/Actions.js","Src/Stores/Device/Actions.js","Src/Services/NavigationService.js","Src/Stores/Firebase/Actions.js","Src/Sagas/StartupSaga.js","Src/Config/index.js","Src/Services/UserService.js","Src/Sagas/Example/ExampleSaga.js","Src/Services/DeviceService.js","Src/Stores/Device/Selectors.js","Src/Sagas/Device/BLE/BLESaga.js","Src/Sagas/Device/BlueTooth/BlueToothSaga.js","Src/Sagas/Device/DeviceSaga.js","Src/Stores/Firebase/Selectors.js","Src/Services/FirebaseService.js","Src/Services/ConsysService.js","Src/Sagas/Firebase/FirebaseSaga.js","Src/Sagas/index.js","Src/Stores/Example/InitialState.js","Src/Stores/Example/Reducers.js","Src/Stores/Device/BLE/InitialState.js","Src/Stores/Device/BlueTooth/InitialState.js","Src/Stores/Device/InitialState.js","Src/Stores/Device/BLE/Reducers.js","Src/Stores/Device/BlueTooth/Reducers.js","Src/Stores/Device/Reducers.js","Src/Stores/Firebase/Reducers.js","Src/Stores/Firebase/InitialState.js","Src/Theme/Colors.js","Src/Theme/Fonts.js","Src/Theme/Metrics.js","Src/Theme/Images.js","Src/Theme/Helpers.js","Src/Theme/ApplicationStyles.js","Src/Containers/SplashScreen/SplashScreen.js","Src/Containers/SplashScreen/SplashScreenStyle.js","Src/Containers/DeepLinking/DeepLinkingScreen.js","Src/Components/Button.js","Src/Components/Button_Panel.js","Src/Components/TitleElement.js","Src/Components/CustomListItem.js","Src/Components/ContentProp.js","Src/Components/Loading.js","Src/Components/OperationsPanel.js","Src/Components/Progressbar.js","Src/Components/DateTime_Picker.js","Src/Components/Comment_Module.js","Src/Containers/Agrisys/FrontScreenStyle.js","Src/Containers/Agrisys/FrontScreen.js","Src/Stores/Example/Selectors.js","Src/Containers/Example/ExampleScreenStyle.js","Src/Containers/Example/ExampleScreen.js","Src/Containers/Device/DeviceScreenStyle.js","Src/Containers/Device/DeviceScreen.js","Src/Navigators/FrontNavigator.js","Src/Containers/Cloud/AuthScreens/UserLoadingScreen.js","Src/Containers/Cloud/AuthScreens/AuthStyle.js","Src/Containers/Cloud/AuthScreens/VerifyScreen.js","Src/Containers/Cloud/AuthScreens/UserLoginScreen.js","Src/Containers/Cloud/UserPanel/UserPanelStyle.js","Src/Containers/Cloud/UserPanel/UserInformation.js","Src/Containers/Cloud/UserPanel/Subscription.js","Src/Containers/Cloud/UserPanel/FarmInformation.js","Src/Containers/Cloud/AuthScreens/CreateUserDataScreen.js","Src/Navigators/AuthNavigator.js","Src/Containers/Cloud/UserPanel/FrontScreen.js","Src/Containers/Cloud/UserPanel/Dashboard.js","Src/Containers/Cloud/CloudScreenStyle.js","Src/Containers/Cloud/UserPanel/Pigs.js","Src/Containers/Cloud/UserPanel/Pens.js","Src/Containers/Cloud/UserPanel/Batchs.js","Src/Containers/Cloud/UserPanel/CurveElement.js","Src/Containers/Cloud/UserPanel/GrowthCurves.js","Src/Containers/Cloud/UserPanel/Operations.js","Src/Containers/Cloud/UserPanel/Weighing.js","Src/Containers/Cloud/UserPanel/DataEditor.js","Src/Containers/Cloud/UserPanel/DataDisplay_Pens.js","Src/Containers/Cloud/UserPanel/DataDisplay_Pigs.js","Src/Containers/Cloud/UserPanel/DataDisplay.js","Src/Containers/Cloud/UserPanel/DataPlotter.js","Src/Navigators/UserPanelNavigator.js","Src/Containers/Cloud/AdminPanel/AdminPanelStyle.js","Src/Containers/Cloud/AdminPanel/FrontScreen.js","Src/Containers/Cloud/AdminPanel/UserBoard.js","Src/Containers/Cloud/AdminPanel/SystemBoard.js","Src/Navigators/AdminPanelNavigator.js","Src/Navigators/AppNavigator.js","Src/Containers/Root/RootScreen.js","Src/Stores/index.js","App.tsx","Src/Assets/Images/Home.png","Src/Assets/Images/Dashboard.png","Src/Assets/Images/System.png","Src/Assets/Images/Feed-Curves.png","Src/Assets/Images/Growth-curve.png","Src/Assets/Images/User.png","Src/Assets/Images/Sow.png","Src/Assets/Images/Section.png","Src/Assets/Images/Area_Colour.png","Src/Assets/Images/AutoPig.png","Src/Assets/Images/Feed-Components.png","Src/Assets/Images/Hexagon-globe.png","Src/Assets/Images/Hexa-icon.png","Src/Assets/Images/Logo.png","Src/Assets/Images/TOM.png"],"names":["JSOGTransform","createTransform","inboundState","key","JSOG","encode","outboundState","decode","persistConfig","storage","transforms","blacklist","createActions","startup","Types","Creators","StartupTypes","fetchUser","fetchUserLoading","fetchUserSuccess","fetchUserFailure","ExampleTypes","bleStartup","bleStateUpdated","startBleScan","stopBleScan","readBleDeviceData","BleTypes","bluetoothStartup","startBluetoothScan","stopBluetoothScan","bluetoothScanAble","readBlueDeviceData","BluetoothTypes","deviceStartup","setDeviceError","scannerStateUpdated","addDevice","removeDevice","clearDevices","connectedDeviceUpdated","connectionStateUpdated","connectionMethodeUpdated","setDeviceData","updateDeviceData","connectDevice","disconnectDevice","readDeviceData","fetchDevice","DeviceTypes","BleCreators","BlueToothCreators","navigator","firebaseStartup","firebaseIsLoading","setFirebaseError","setViewError","viewIsLoading","setCurrentData","actionStarting","fetchStarting","dataFetchSuccess","fetchSuccess","fetchFailure","FirebaseTypes","navigate","routeName","params","dispatch","NavigationActions","replace","StackActions","navigateAndReset","reset","index","actions","setTopLevelNavigator","navigatorRef","nacigationPop","back","console","log","Platform","OS","put","DeviceActions","FirebaseActions","NavigationService","Config","API_URL","HTTPS_START","CONSYS_CLIENT_ID","CONSYS_CLIENT_SECRET","CONSYS_AUTH","CONSYS_API","GetCheckToken_URL","Site_URL","GetConsumtion_URL","GetConsumtionData_URL","Consumptiontype","SystemId","res","GetConsumtionData_Var","Offset","Limit","Starttime","Stoptime","Lastid","in200s","curryN","min","max","value","isNumber","is","Number","gte","isWithin","userApiClient","axios","create","baseURL","headers","Accept","timeout","userService","Math","random","Promise","resolve","reject","number","floor","get","toString","then","response","status","data","ExampleActions","call","user","deviceService","Version","a","async","PermissionsAndroid","check","PERMISSIONS","ACCESS_COARSE_LOCATION","request","RESULTS","GRANTED","ScannerState","ConnectionState","ConnectionMethode","handleBleState","connectBle","handleConnection","handleScanning","scanBle","setBleScannerStart","sagaArgs","permitError","fork","BLEManager","manager","eventChannel","emit","subscription","onStateChange","state","remove","buffers","expanding","stateChannel","take","newState","BleActions","cancelled","close","device","select","connectionMethode","connectedDevice","_manager","isConnected","onDisconnected","error","type","disconnectedChannel","actionChannel","deviceActionChannel","connect","discoverAllServicesAndCharacteristics","_device","race","deviceAction","disconnected","cancelConnection","KnownUUIDS","services","_services","serviceUUIDs","filter","service","includes","uuid","monitor","characteristics","characteristic","push","forEach","i","monitorCharacteristicForService","readingChannel","TempData_Reading","Buffer","from","length","PacketId","BatteryLevel","base64","charCodeAt","Battery","RawData","header","slice","compare","parseInt","NewData","concat","TagId","tagid","FatLayers","FatL1","FatL2","FatL3","layers","layer1","layer2","layer3","scanTask","bleState","scannerState","connectionState","channel","action","State","PoweredOn","cancel","startDeviceScan","allowDuplicates","scannedDevice","localName","stopDeviceScan","scanningChannel","scanBluetooth","setBlueScannerStart","BlueManager","PairDevice","id","receiveData","Message","TAGId","Discover","NativeEventEmitter","addListener","Device","address","name","alias","bluetoothChannel","StopDiscovery","BluetoothSearchAble","methode","UserStates","DataStates","DataRefs","FIREBASEUSER","USERSDATA","USERS","FARMS","SECTIONS","PENS","PIGS","BATCHS","WEIGHING","GRAPH","COMMENTS","FARMDATAS","SHARES","CONSYS","Actions","SIGN","FETCH","CREATE","UPDATE","MOVE","DELETE","CLEAR","ADD","Operations","ErrorTypes","format_num","num","format_Time","time","s","Date","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","auth","messaging","database","reA","reN","sortAlphaNum","b","aA","bA","aN","bN","sortObject","o","sorted","hasOwnProperty","sort","DataStringCheck","Check_num","first","numbers","specialChars","indexOf","GetWeight_FromPen","PenId","WeighingsStore","AfterTime","BeforeTime","Weighing","_weighing","weighing","GetBatch_FromPen","localDataStore","batchs","_batch","batch","pens","GetStats_FromPen","PenData","StartDate","EndDate","PenWeighings","Animals","PenWeight","PenGrowth","AveragePenGrowth","datas","count","weighings","GrowthCount","lastDate","LastWeight","undefined","LastWeightDay","FirstWeight","Object","keys","weight","Weight","now","getTime","isVirtual","Batch","TempGraph","GetCurve_FromBatch","graphs","BatchEndDate","Predict","CurvePredict","Now","_date","lastWeighing","Addition","setDate","days","tempEnd","date","Growth","GetStats_FromBatch","PenCount","CollectedWeight","CollectedGrowth","isClosed","TargetWeight","target","GetBatchEnd","PenEnds","reverse","e","Batch_Pen","Pen","closed","PenStats","AverageWeight","parseFloat","toFixed","AverageGrowth","GraphsStore","CurrentData","Garph","gcurve","curveId","Id","DataPoints","_index","map","TempCurve","currentTime","AccumulateTime","periode","Time","PeriodeLength","NewTime","setMonth","get_DataSpot","MinMax_Time","MinMax_Data","FindTime","Data","DataTime","ExValue","VirData","ExTime","slope","GetSlope_Between","minX","maxX","minY","Weighing2","weight2","StartIndex","PredictCurve","CurrentTime","Temp_CurrentIndex","unshift","PredictStart","TempEx","DataSpot","FirstSpot","Temp_CurrentTime","WeightNow","CurrentIndex","require","default","_firebase","apps","Constants","manifest","web","config","firebase","initializeApp","isSupported","createFirebaseUserWithemailandpassword","Email","Pass","createUserWithEmailAndPassword","User","currentUser","Name","displayName","email","UserId","uid","_data","updateProfile","sendEmailVerification","catch","code","viewError","message","signinWithemailandpassword","logoutUser","signInWithEmailAndPassword","sendResetPassword","sendPasswordResetEmail","signOut","path","refreshUser","reload","ref","CurrentUser","createFarm","Farms","farmid","updateFarmData","FarmId","sections","Sections","Pens","updateUserData","UserData","farms","fetchFarm","updateFarm","fetchSections","fetchPens","createNewPen","deletePen","updatePen","fetchPigs","updatePigdata","fetchBatchs","createBatchs","updateBatchs","fetchWeights","createWeight","fetchComments","createComment","fetchGraphData","updateGraphData","SetUpdateTime","DataRef","update","update_time","ServerValue","TIMESTAMP","CheckDataTime","once","_Time","UpdateTime","val","List","userData","_farmData","farm","set","SectionId","DoFetch","_sectionidData","_pensData","penData","pen","ref2","section","_Pen","Datas","_pigsData","pigData","pig","updatePigPen","Action","counts","isNaN","pigs","BatchId","_batchdata","curve","batchdata","devianceMin","devianceMax","BatchPens","JSON","stringify","RemovedPens","x","enddate","NewPens","SamePens","pendata","startdate","CurveId","comments","p","_","_resolve","setTimeout","weights","limitStart","limitTo","MemSections","orderByChild","limitToLast","snapshot","c","_weighingTime","Weighings_Time","itemsProcessed","newWeights","Quantity","weightRef","comment","commentRef","quantity","GraphId","graph","Graphs","GraphVal","newGraph","Agraph","AgraphVal","Graph","_Graph","firebaseService","requestPermission","authStatus","AuthorizationStatus","AUTHORIZED","PROVISIONAL","isPermit_UserPermission","title","okText","_cancelable","Alert","alert","text","onPress","cancelable","onDismiss","Create_Axios","Acc_Token","getAccessToken","SiteUrl","Ref_Token","Refresh_Token","GetToken_URL","access_token","checkRenew_AccessToken","consysService","limit","starttime","offset","lastid","Token","token","handleAuthState","handleActions","onMessageHandler","onBackgroundMessageHandler","disableYellowBox","onAuthStateChanged","authChannel","newAuth","firebaseUser","values","FirebaseUser","FarmsData","FarmData","site","refToken","Params","sysId","start","lastId","ScaleData","result","messageListener","onMessage","remoteMessage","onMessageChannel","notification","body","onNotificationOpenedApp","setBackgroundMessageHandler","root","all","takeLatest","STARTUP","StartupSaga","FETCH_USER","ExampleSaga","DEVICE_STARTUP","DeviceSaga","CONNECT_DEVICE","DISCONNECT_DEVICE","READ_DEVICE_DATA","FETCH_DEVICE","BLE_STARTUP","START_BLE_SCAN","STOP_BLE_SCAN","READ_BLE_DEVICE_DATA","BLUETOOTH_STARTUP","START_BLUETOOTH_SCAN","STOP_BLUETOOTH_SCAN","BLUETOOTH_SCAN_ABLE","READ_BLUE_DEVICE_DATA","FIREBASE_STARTUP","FirebaseSaga","reducer","createReducer","userIsLoading","userErrorMessage","FETCH_USER_LOADING","FETCH_USER_SUCCESS","FETCH_USER_FAILURE","errorMessage","INITIAL_STATE","PoweredOff","deviceIsLoading","deviceErrorMessage","DeviceList","deviceData","BLE_INITIAL_STATE","BLUETOOTH_INITIAL_STATE","HANDLERS","BLE_STATE_UPDATED","SET_DEVICE_ERROR","SCANNER_STATE_UPDATED","ADD_DEVICE","some","NewList","REMOVE_DEVICE","splice","CLEAR_DEVICES","CONNECTED_DEVICE_UPDATED","CONNECTION_STATE_UPDATED","CONNECTION_METHODE_UPDATED","SET_DEVICE_DATA","UPDATE_DEVICE_DATA","newData","BLEReducers","BluetoothReducers","FIREBASE_IS_LOADING","loadingstate","SET_FIREBASE_ERROR","firebaseErrorMessage","SET_VIEW_ERROR","VIEW_IS_LOADING","SET_CURRENT_DATA","currentData","ACTION_STARTING","FETCH_STARTING","DATA_FETCH_SUCCESS","NewDataStore","NewFirebaseUser","_user","element","_auth","Values","users","FETCH_SUCCESS","newlocalDataStore","_newState","mergeDeep","source","isObject","obj","targetValue","sourceValue","Array","isArray","append","FETCH_FAILURE","h1","fontSize","h2","h3","normal","tiny","small","medium","tinyBottomMargin","marginBottom","smallBottomMargin","bottomMargin","mediumBottomMargin","tinyVerticalMargin","marginVertical","smallVerticalMargin","verticalMargin","mediumVerticalMargin","tinyHorizontalMargin","marginHorizontal","smallHorizontalMargin","horizontalMargin","mediumHorizontalMargin","tinyHorizontalPadding","paddingHorizontal","smallHorizontalPadding","horizontalPadding","mediumHorizontalPadding","tinyVerticalPadding","paddingVertical","smallVerticalPadding","verticalPadding","mediumVerticalPadding","Home","DashBoard","System","Curves","GCurves","Sow","Section","AutoPig","Feed","Haxa_globe","Hexa_icon","Logo","logo","column","flexDirection","colMain","justifyContent","colCenter","alignItems","colCross","columnReverse","row","rowMain","rowCenter","rowCross","rowReverse","center","crossCenter","crossEnd","crossStart","crossStretch","fill","flex","fillCenter","fillCol","fillColCenter","fillColCross","fillColMain","fillColReverse","fillRow","fillRowCenter","fillRowCross","fillRowMain","fillRowReverse","fullSize","height","width","halvWidth","midWidth","fullWidth","mainCenter","mainEnd","mainSpaceAround","mainSpaceBetween","mainStart","mainContainer","Metrics","contentContainer","marginTop","borderContainer","borderWidth","borderColor","borderRadius","maxWidth","zIndex","textContainer","Fonts","buttonContainer","loadingContainer","position","left","right","top","bottom","backgroundColor","logoContainer","backgroundReset","Colors","rotate90","transform","rotate","rotate90Inverse","mirror","scaleX","scrollSpaceAround","flexGrow","scrollSpaceBetween","selfStretch","alignSelf","textCenter","textAlign","textJustify","textLeft","textRight","button","color","buttonText","input","navigationHeader","StyleSheet","container","SplashScreen","props","getInitialNotification","this","checkData","getData","prevProps","prevState","View","style","Helpers","Style","Image","Images","resizeMode","Component","DeepLinkingScreen","Text","styles","boxContainer","ApplicationStyles","icon","Button","TextView","textStyle","ImageView","_Image","iconStyle","TouchableOpacity","boxStyle","buttonStyle","Button_Panel","Texts","Buttons","image","itemStyle","TitleElement","listitem","CustomListItem","containerStyle","Content","Title","Subtitle","contentBox","minHeight","ContentProp","texts","textsStyle","datasStyle","onLongPress","view","dataRow","OperationsPanel","pigTag","PigsList","newPig","getPenAndSection","setCurrentPig","editPens","onDone","charAt","toUpperCase","newWeight","penId","newComment","newPigCount","setState","ScrollView","paddingRight","setCurrentDataElement","pigtag","dataId","countChange","ProgressBar","animation","useRef","Animated","Value","progress","Color","useEffect","timing","current","toValue","duration","interpolate","inputRange","outputRange","extrapolate","paddingBottom","alignContent","progressBar","absoluteFill","paddingTop","padding","monthNames","DateTime_Picker","getStates","year","month","day","Selected","Year","Month","Day","forceUpdate","changed","Today","YearItems","String","Picker","Item","label","MonthItems","DayItems","selectedValue","minWidth","marginRight","onValueChange","_year","_month","_day","textAreaContainer","textArea","Comment_Module","useState","InputText","setInputText","QuantityText","setQuantityText","WeightText","setWeightText","App","marginLeft","TextInput","multiline","onChangeText","underlineColorAndroid","placeholder","placeholderTextColor","numberOfLines","FrontScreen","ShowMainError","FocusSubscription","Props","navigation","payload","setViewLoading","ErrorMessage","ele","liveInEurope","entries","example","city","instructions","fontStyle","ios","android","ExampleScreen","useDispatch","useSelector","ActivityIndicator","size","deviceContainer","deviceDataContainer","text2","DeviceScreen","DeviceData","Devices","Unknown","ConnectedDevice_View","Dev","StackNavigator","createStackNavigator","screen","Front","navigationOptions","headerMode","headerShown","headerTitleStyle","Example","initialRouteName","defaultNavigationOptions","headerTitleAlign","headerRight","PanelsSorter","userType","UserLoadingScreen","ISLOADPAGE","firebaseData","page","emailVerified","prev","getUser","IsLoading","clearDataMem","UserLoginScreen","CreateUser","secureTextEntry","createUser","signIN","resetPass","VerifyScreen","setUser","Verified","UserInformation","setData","FirstN","LastN","Contact","ContactP","Address","Country","lastN","contact","phoneNumber","F_FirstN","React","createRef","F_LastN","F_Contact","F_ContactP","F_Address","test","_UserData","phone","country","updateUser","OnDone","window","Dimensions","Subscription","onChange","dimensions","CurrentSub","Billing","addEventListener","removeEventListener","wide","fontWeight","CheckBox","FarmInformation","FarmName","Cvr","Manager","cvr","getFarm","_FarmData","_sections","_pens","i2","sectionPens","CreateNewUserData","ViewState","Display","precreateUserData","Subsc","LoadingUserScreen","LoginUser","LoginUserScreen","headerLeft","paddingLeft","CreateUserData","CreateUserDataScreen","getAutoPig","logOut","Dashboard","Mail","BatchList","SectionsList","MaxCap","CurCap","farmName","farmManager","farmMail","Farm","BatchID","End","getSections","getPens","getBatch","getWeights","getCurve","FarmProgress","FlatList","renderItem","item","keyExtractor","loading","inputContainer","Pigs","PigTag","getPigs","connectedState","SafeAreaView","tagId","pigId","Device_Display","circle","Scanner_Display","known","Weighings","Mid","property","itemDimension","spacing","renderSectionHeader","displayWeight","round","Batchs","onMultiChange","items","xorBy","selectedPens","freePens","BatchName","ShowPicker","StartD","Curve","DevianceMin","DevianceMax","avaiblePens","add","scrollEnabled","batchName","_pen","mode","itemValue","itemIndex","step","endsWith","split","labelStyle","optionsLabelStyle","options","selectedValues","onMultiSelect","onTapClose","isMulti","newBatch","updateBatch","_Date","setBatch","batchId","getRandomNumber","low","high","getRandomColor","red_range","green_range","blue_range","a_range","red","green","blue","alpha","r","g","rgbaValue","CurveElement","Legends","DataSets","Labels","ActiveIndex","ActiveLength","ActiveDataSets","ActiveStartDate","ActiveEndDate","ViewPoint","D","DataX","dataX","opacity","TempData","TempEndDate","NextEnd","_EndDate","Prediction","DoPredict","BatchPen","DataSet","DataSetX","WeightsToGraphData","TemplatePeriode","CurrentDate","getNewDate","setGraphPeriode","BatchIsOpen","Height","Width","point","horizontal","showsHorizontalScrollIndicator","maxHeight","labels","xMinMax","legend","datasets","onDataPointClick","withShadow","withVerticalLines","fromZero","segments","verticalLabelRotation","xLabelsOffset","chartConfig","backgroundGradientFrom","backgroundGradientTo","decimalPlaces","labelColor","propsForDots","strokeWidth","stroke","control","CurveEditor","TimeText","dataset","Point","setPoint","evt","getPen","curveid","setCurve","GrowthCurve","CurveList","CurveName","Periode","dataindex","nestedScrollEnabled","CurveData","AppStyle","WebStyle","onFocus","onBlur","editable","_Selected","FirstData","pop","nativeEvent","numColumns","lastDataIndex","Eindex","newCurve","updateCurve","actionType","DataEditor","NewSection","DataView","PenEditor_View_Creator","PigEditor_View_Creator","Control","CurrentAction","exists","penAction","PenEditor_Titles","pigAction","Section_Picker","senctionId","DataDisplay_Pens","WeighingsList","CommentsList","Comments","object","MemTime","getComments","localDataStoree","pigcount","penWeight","batch_name","age","StartTime","onPageSwipe","sender","onDataPress","Comment","dir","DataDisplay_Pigs","DataDisplay","PigData_View","ingrid","Comments_List","batchData","PenMemTime","Days","Virtual","UserFront","UserFrontScreen","UserDashBoard","UserDashBoardScreen","UserPigs","UserPigsScreen","UserPens","UserPensScreen","UserBatchs","UserBatchsScreen","UserCurves","UserCurvesScreen","UserOperations","UserOperationsScreen","WeighingOperations","UserDataEditor","UserDataDisplay","DataPlotter","UserDataPlotter","UserListBoard","UserList","getUsers","SystemListBoard","FarmList","getFarms","setUserFarm","AdminFront","AdminFrontScreen","UserBoard","AdminUserBoard","SystemBoard","AdminSystemBoard","UserPanel","UserPanelNavigation","MainStack","FrontNavigation","AuthStack","AuthNavigation","AdminPanel","AdminPanelNavigator","createAppContainer","RootScreen","StartupActions","AppNavigator","uriPrefix","rootReducer","rootSaga","middleware","enhancers","sagaMiddleware","createSagaMiddleware","applyMiddleware","persistedReducer","persistReducer","store","createStore","compose","persistor","persistStore","blemanager","BleManager","setLogLevel","LogLevel","Verbose","NativeModules","BlueToothControl","run","configureStore","combineReducers","ExampleReducer","DeviceReducer","FirebaseReducer","module","exports"],"mappings":"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","file":"static/js/app.4609aa47.chunk.js","sourcesContent":["import { Platform } from 'react-native'\r\n\r\nimport { applyMiddleware, compose, createStore } from 'redux'\r\nimport createSagaMiddleware from 'redux-saga'\r\nimport { persistReducer, persistStore, createTransform } from 'redux-persist'\r\n\r\nimport { NativeModules } from 'react-native'\r\nimport { BleManager, BleError, LogLevel } from 'react-native-ble-plx'\r\n\r\n//** fix: error serializing state TypeError: Converting circular structure to JSON  */\r\n// https://www.npmjs.com/package/jsog\r\n// https://www.npmjs.com/package/flatted\r\nimport JSOG from 'jsog';\r\nexport const JSOGTransform = createTransform(\r\n  (inboundState, key) => JSOG.encode(inboundState),\r\n  (outboundState, key) => JSOG.decode(outboundState),\r\n)\r\n\r\n/**\r\n * This import defaults to localStorage for web and AsyncStorage for react-native.\r\n *\r\n * Keep in mind this storage *is not secure*. Do not use it to store sensitive information\r\n * (like API tokens, private and sensitive data, etc.).\r\n *\r\n * If you need to store sensitive information, use redux-persist-sensitive-storage.\r\n * @see https://github.com/CodingZeal/redux-persist-sensitive-storage\r\n */\r\nimport storage from 'redux-persist/lib/storage'\r\n\r\nconst persistConfig = {\r\n  key: 'root',\r\n  storage: storage,\r\n  transforms: [JSOGTransform],\r\n  /**\r\n   * Blacklist state that we do not need/want to persist\r\n   */\r\n  blacklist: [\r\n    // 'auth',\r\n  ],\r\n}\r\n\r\nexport default (rootReducer, rootSaga) => {\r\n  const middleware = []\r\n  const enhancers = []\r\n\r\n  // Connect the sagas to the redux store\r\n  const sagaMiddleware = createSagaMiddleware()\r\n  middleware.push(sagaMiddleware)\r\n\r\n  enhancers.push(applyMiddleware(...middleware))\r\n\r\n  // Redux persist\r\n  const persistedReducer = persistReducer(persistConfig, rootReducer)\r\n\r\n  const store = createStore(persistedReducer, compose(...enhancers))\r\n  const persistor = persistStore(store)\r\n\r\n  if (Platform.OS === 'ios' || Platform.OS === 'android') {\r\n    // First step is to create BleManager which should be used as an entry point\r\n    // to all BLE related functionalities\r\n    const blemanager = new BleManager();\r\n    blemanager.setLogLevel(LogLevel.Verbose);\r\n\r\n    const bluemanager = NativeModules.BlueToothControl;\r\n\r\n    // SagaArgs Construcktor\r\n    const sagaArgs = {BLEManager: blemanager, BlueManager: bluemanager}\r\n\r\n    // Kick off the root saga\r\n    sagaMiddleware.run(rootSaga, sagaArgs)\r\n  }else {\r\n    sagaMiddleware.run(rootSaga)\r\n  }\r\n  \r\n  return { store, persistor }\r\n}\r\n","import { createActions } from 'reduxsauce'\r\n\r\nconst { Types, Creators } = createActions({\r\n  // This action is triggered when the application starts\r\n  startup: null,\r\n})\r\n\r\nexport const StartupTypes = Types\r\nexport default Creators\r\n","import { createActions } from 'reduxsauce'\r\n\r\n/**\r\n * We use reduxsauce's `createActions()` helper to easily create redux actions.\r\n *\r\n * Keys are action names and values are the list of parameters for the given action.\r\n *\r\n * Action names are turned to SNAKE_CASE into the `Types` variable. This can be used\r\n * to listen to actions:\r\n *\r\n * - to trigger reducers to update the state, for example in App/Stores/Example/Reducers.js\r\n * - to trigger sagas, for example in App/Sagas/index.js\r\n *\r\n * Actions can be dispatched:\r\n *\r\n * - in React components using `dispatch(...)`, for example in App/App.js\r\n * - in sagas using `yield put(...)`, for example in App/Sagas/ExampleSaga.js\r\n *\r\n * @see https://github.com/infinitered/reduxsauce#createactions\r\n */\r\nconst { Types, Creators } = createActions({\r\n  // Fetch user informations\r\n  fetchUser: null,\r\n  // The operation has started and is loading\r\n  fetchUserLoading: null,\r\n  // User informations were successfully fetched\r\n  fetchUserSuccess: ['user'],\r\n  // An error occurred\r\n  fetchUserFailure: ['errorMessage'],\r\n})\r\n\r\nexport const ExampleTypes = Types\r\nexport default Creators\r\n","import { createActions } from 'reduxsauce'\r\n\r\n/**\r\n * We use reduxsauce's `createActions()` helper to easily create redux actions.\r\n *\r\n * Keys are action names and values are the list of parameters for the given action.\r\n *\r\n * Action names are turned to SNAKE_CASE into the `Types` variable. This can be used\r\n * to listen to actions:\r\n *\r\n * - to trigger reducers to update the state, for example in App/Stores/Example/Reducers.js\r\n * - to trigger sagas, for example in App/Sagas/index.js\r\n *\r\n * Actions can be dispatched:\r\n *\r\n * - in React components using `dispatch(...)`, for example in App/App.js\r\n * - in sagas using `yield put(...)`, for example in App/Sagas/ExampleSaga.js\r\n *\r\n * @see https://github.com/infinitered/reduxsauce#createactions\r\n */\r\nconst { Types, Creators } = createActions({\r\n  bleStartup: null,\r\n  bleStateUpdated: ['bleState'],\r\n\r\n  startBleScan: null,\r\n  stopBleScan: null,\r\n\r\n  readBleDeviceData: null,\r\n})\r\n\r\nexport const BleTypes = Types\r\nexport default Creators","import { createActions } from 'reduxsauce'\r\n\r\n/**\r\n * We use reduxsauce's `createActions()` helper to easily create redux actions.\r\n *\r\n * Keys are action names and values are the list of parameters for the given action.\r\n *\r\n * Action names are turned to SNAKE_CASE into the `Types` variable. This can be used\r\n * to listen to actions:\r\n *\r\n * - to trigger reducers to update the state, for example in App/Stores/Example/Reducers.js\r\n * - to trigger sagas, for example in App/Sagas/index.js\r\n *\r\n * Actions can be dispatched:\r\n *\r\n * - in React components using `dispatch(...)`, for example in App/App.js\r\n * - in sagas using `yield put(...)`, for example in App/Sagas/ExampleSaga.js\r\n *\r\n * @see https://github.com/infinitered/reduxsauce#createactions\r\n */\r\nconst { Types, Creators } = createActions({\r\n  bluetoothStartup: null,\r\n\r\n  startBluetoothScan: null,\r\n  stopBluetoothScan: null,\r\n  \r\n  bluetoothScanAble: null,\r\n\r\n  readBlueDeviceData: null,\r\n})\r\n\r\nexport const BluetoothTypes = Types\r\nexport default Creators","import { createActions } from 'reduxsauce'\r\n\r\nimport BleCreators, {BleTypes} from './BLE/Actions'\r\nimport BlueToothCreators, {BluetoothTypes} from './BlueTooth/Actions'\r\n\r\n/**\r\n * We use reduxsauce's `createActions()` helper to easily create redux actions.\r\n *\r\n * Keys are action names and values are the list of parameters for the given action.\r\n *\r\n * Action names are turned to SNAKE_CASE into the `Types` variable. This can be used\r\n * to listen to actions:\r\n *\r\n * - to trigger reducers to update the state, for example in App/Stores/Example/Reducers.js\r\n * - to trigger sagas, for example in App/Sagas/index.js\r\n *\r\n * Actions can be dispatched:\r\n *\r\n * - in React components using `dispatch(...)`, for example in App/App.js\r\n * - in sagas using `yield put(...)`, for example in App/Sagas/ExampleSaga.js\r\n *\r\n * @see https://github.com/infinitered/reduxsauce#createactions\r\n */\r\nconst { Types, Creators } = createActions({\r\n  //Device Saga\r\n  deviceStartup: null,\r\n  setDeviceError: ['errorMessage'], // Device-saga error occurred\r\n\r\n  scannerStateUpdated: ['scannerState'],\r\n\r\n  addDevice: ['device'],\r\n  removeDevice: ['device'],\r\n  clearDevices: null,\r\n\r\n  connectedDeviceUpdated: ['connectedDevice'], \r\n\r\n  connectionStateUpdated: ['connectionState'],\r\n  connectionMethodeUpdated: ['connectionMethode'],\r\n\r\n  setDeviceData: ['data'],\r\n  updateDeviceData: ['data'],\r\n\r\n  connectDevice: ['device'],\r\n  disconnectDevice: ['methode'],\r\n  readDeviceData: null,\r\n\r\n  fetchDevice: null, // Fetch device informations\r\n})\r\n\r\nexport const DeviceTypes = {...Types, ...BleTypes, ...BluetoothTypes}\r\nexport default {...Creators, ...BleCreators, ...BlueToothCreators}","import React from 'react'\r\nimport { BackHandler } from 'react-native'\r\nimport { NavigationActions, StackActions } from 'react-navigation'\r\n\r\n/**\r\n * The navigation is implemented as a service so that it can be used outside of components, for example in sagas.\r\n *\r\n * @see https://reactnavigation.org/docs/en/navigating-without-navigation-prop.html\r\n */\r\n\r\nlet navigator\r\nvar LastPage\r\n/**\r\n * This function is called when the RootScreen is created to set the navigator instance to use.\r\n */\r\nfunction setTopLevelNavigator(navigatorRef) {\r\n  navigator = navigatorRef\r\n\r\n  /*BackHandler.addEventListener('hardwareBackPress', () => {\r\n    console.log(navigator._navigation)\r\n    if (navigator && navigator._navigation && navigator._navigation.state) {\r\n      var Stackindex = navigator._navigation.state.index\r\n      var Stack = navigator._navigation.state.routes[Stackindex]\r\n      if (Stack.routes){\r\n        var index = Stack.index;\r\n        var routeName = Stack.routes[index].routeName;\r\n        if (routeName === 'UserFront' || routeName === 'LoginUser'){\r\n          navigator.dispatch(\r\n            NavigationActions.back()\r\n          )\r\n          //navigate('FrontScreen');\r\n          //return true;\r\n        }\r\n      }\r\n    }\r\n  });*/\r\n}\r\n\r\nfunction replace(routeName, params){\r\n  //if (LastPage === routeName) return null\r\n  //else {\r\n    LastPage = routeName;\r\n    navigator.dispatch(\r\n      StackActions.replace({\r\n        routeName,\r\n        params,\r\n      })\r\n    )\r\n  //}\r\n}\r\n\r\n/**\r\n * Call this function when you want to navigate to a specific route.\r\n *\r\n * @param routeName The name of the route to navigate to. Routes are defined in RootScreen using createStackNavigator()\r\n * @param params Route parameters.\r\n */\r\nfunction navigate(routeName, params) {\r\n  //if (LastPage === routeName) return null\r\n  //else {\r\n    LastPage = routeName;\r\n    navigator.dispatch(\r\n      NavigationActions.navigate({\r\n        routeName,\r\n        params,\r\n      })\r\n    )\r\n  //}\r\n}\r\n\r\n/**\r\n * Call this function when you want to navigate to a specific route AND reset the navigation history.\r\n *\r\n * That means the user cannot go back. This is useful for example to redirect from a splashscreen to\r\n * the main screen: the user should not be able to go back to the splashscreen.\r\n *\r\n * @param routeName The name of the route to navigate to. Routes are defined in RootScreen using createStackNavigator()\r\n * @param params Route parameters.\r\n */\r\nfunction navigateAndReset(routeName, params) {\r\n  //if (LastPage === routeName) return null\r\n  //else {\r\n    LastPage = routeName;\r\n    navigator.dispatch(\r\n      StackActions.reset({\r\n        index: 0,\r\n        key: null,\r\n        actions: [\r\n          NavigationActions.navigate({\r\n            routeName,\r\n            params,\r\n          }),\r\n        ],\r\n      })\r\n    )\r\n  //}\r\n}\r\n\r\nfunction nacigationPop() {\r\n  LastPage = \"\";\r\n  navigator.dispatch(NavigationActions.back())\r\n}\r\n\r\nexport default {\r\n  navigate,\r\n  replace,\r\n  navigateAndReset,\r\n  setTopLevelNavigator,\r\n  nacigationPop,\r\n}\r\n","import { createActions } from 'reduxsauce'\r\n\r\n/**\r\n * We use reduxsauce's `createActions()` helper to easily create redux actions.\r\n *\r\n * Keys are action names and values are the list of parameters for the given action.\r\n *\r\n * Action names are turned to SNAKE_CASE into the `Types` variable. This can be used\r\n * to listen to actions:\r\n *\r\n * - to trigger reducers to update the state, for example in App/Stores/Example/Reducers.js\r\n * - to trigger sagas, for example in App/Sagas/index.js\r\n *\r\n * Actions can be dispatched:\r\n *\r\n * - in React components using `dispatch(...)`, for example in App/App.js\r\n * - in sagas using `yield put(...)`, for example in App/Sagas/ExampleSaga.js\r\n *\r\n * @see https://github.com/infinitered/reduxsauce#createactions\r\n */\r\nconst { Types, Creators } = createActions({\r\n  //Firebase Saga events\r\n  firebaseStartup: null,\r\n  //Firebase Saga and service\r\n  firebaseIsLoading: ['loadingstate'],\r\n  setFirebaseError: ['errorMessage'], // Firebase-saga error occurred\r\n\r\n  setViewError: ['errorMessage'], // view error\r\n  viewIsLoading: ['loadingstate'],\r\n  \r\n  setCurrentData: ['data'],\r\n\r\n  //Firebase Data fetches\r\n  actionStarting: ['action', 'ref', 'params'], // Data action (create, singin, share)\r\n  fetchStarting: ['action', 'ref', 'params'], // Fetch data informations\r\n  dataFetchSuccess: ['params'],\r\n  fetchSuccess: ['data'], // Informations were successfully fetched\r\n  fetchFailure: ['errorMessage'], // An error occurred\r\n})\r\n\r\nexport const FirebaseTypes = {...Types }\r\nexport default {...Creators }","import { Platform } from 'react-native';\r\n\r\nimport { put, call } from 'redux-saga/effects'\r\n\r\nimport NavigationService from '../Services/NavigationService'\r\n\r\nimport ExampleActions from '../Stores/Example/Actions'\r\nimport DeviceActions from '../Stores/Device/Actions'\r\nimport FirebaseActions from '../Stores/Firebase/Actions'\r\n\r\n/**\r\n * The startup saga is the place to define behavior to execute when the application starts.\r\n */\r\nexport function* startup() {\r\n  // Dispatch a redux action using `put()`\r\n  // @see https://redux-saga.js.org/docs/basics/DispatchingActions.html\r\n  console.log(\"Starting sagas\")\r\n  \r\n  // Add more operations you need to do at startup here\r\n  //yield put(ExampleActions.fetchUser())\r\n  if (Platform.OS === 'ios' || Platform.OS === 'android') {\r\n    yield put(DeviceActions.deviceStartup())\r\n  }\r\n  yield put(FirebaseActions.firebaseStartup())\r\n\r\n  // When those operations are finished we redirect to the main screen\r\n  NavigationService.navigateAndReset('MainStack')\r\n}\r\n","const HTTPS_START = 'https://';\r\nexport const Config = {\r\n  API_URL: HTTPS_START+ 'jsonplaceholder.typicode.com/users/',\r\n\r\n  CONSYS_CLIENT_ID: 'consysapp',\r\n  CONSYS_CLIENT_SECRET: 'Kjsd832n8DIO32kmsdds3',\r\n  CONSYS_AUTH: '.agrisys.cloud/oauthserver/getaccesstoken/?redirect_uri=urn:ietf:wg:oauth:2.0:oob',\r\n  CONSYS_API: '.agrisys.cloud/consys-api-v1/',\r\n}\r\n\r\nexport function GetToken_URL(Site_URL, Refresh_Token) {\r\n  var res = HTTPS_START + Site_URL + Config.CONSYS_AUTH\r\n  res = res + '&client_id='+Config.CONSYS_CLIENT_ID+'&client_secret='+Config.CONSYS_CLIENT_SECRET+'&refresh_token=' + Refresh_Token\r\n  return res;\r\n}\r\n\r\nexport function GetCheckToken_URL(Site_URL) {\r\n  var res = HTTPS_START + Site_URL + Config.CONSYS_API + 'checkaccesstoken'\r\n  return res;\r\n}\r\n\r\nexport function GetConsumtion_URL(Site_URL) {\r\n  var res = HTTPS_START + Site_URL + Config.CONSYS_API + 'getconsumptiondata?'\r\n  return res;\r\n}\r\n\r\nexport function GetConsumtionData_URL(Site_URL, Consumptiontype, SystemId, Offset=null, Limit=null, Starttime=null, Stoptime=null, Lastid=null){\r\n  var res = GetConsumtion_URL(Site_URL)\r\n  res = res + GetConsumtionData_Var(Consumptiontype, SystemId, Offset=null, Limit=null, Starttime=null, Stoptime=null, Lastid=null)\r\n  return res;\r\n}\r\n\r\nexport function GetConsumtionData_Var(Consumptiontype, SystemId, Offset=null, Limit=null, Starttime=null, Stoptime=null, Lastid=null){\r\n  var res = 'consumptiontype=' + Consumptiontype + '&systemid=' + SystemId;\r\n  if (Offset) res = res + '&offset=' + Offset;\r\n  if (Limit) res = res + '&limit=' + Limit;\r\n  if (Starttime) res = res + '&starttime=' + Starttime;\r\n  if (Stoptime) res = res + '&stoptime=' + Stoptime;\r\n  if (Lastid) res = res + '&lastid=' + Lastid;\r\n  return res;\r\n}","import axios from 'axios'\r\nimport { Config } from '../Config'\r\nimport { is, curryN, gte } from 'ramda'\r\n\r\nconst isWithin = curryN(3, (min, max, value) => {\r\n  const isNumber = is(Number)\r\n  return isNumber(min) && isNumber(max) && isNumber(value) && gte(value, min) && gte(max, value)\r\n})\r\nconst in200s = isWithin(200, 299)\r\n\r\n/**\r\n * This is an example of a service that connects to a 3rd party API.\r\n *\r\n * Feel free to remove this example from your application.\r\n */\r\nconst userApiClient = axios.create({\r\n  /**\r\n   * Import the config from the App/Config/index.js file\r\n   */\r\n  baseURL: Config.API_URL,\r\n  headers: {\r\n    Accept: 'application/json',\r\n    'Content-Type': 'application/json',\r\n  },\r\n  timeout: 3000,\r\n})\r\n\r\nfunction fetchUser() {\r\n  // Simulate an error 50% of the time just for testing purposes\r\n  console.log(\"user fetch test\");\r\n  if (Math.random() > 0.5) {\r\n    return new Promise((resolve, reject) => {\r\n      console.log(\"error\");\r\n      resolve(null)\r\n    })\r\n  }\r\n\r\n  const number = Math.floor(Math.random() / 0.1) + 1\r\n\r\n  return userApiClient.get(number.toString()).then((response) => {\r\n    if (in200s(response.status)) {\r\n      return response.data\r\n    }\r\n\r\n    return null\r\n  })\r\n}\r\n\r\nexport const userService = {\r\n  fetchUser,\r\n}\r\n","import { put, call } from 'redux-saga/effects'\r\n\r\nimport ExampleActions from '../../Stores/Example/Actions'\r\nimport { userService } from '../../Services/UserService'\r\n\r\n/**\r\n * A saga can contain multiple functions.\r\n *\r\n * This example saga contains only one to fetch fake user informations.\r\n * Feel free to remove it.\r\n */\r\nexport function* fetchUser() {\r\n  // Dispatch a redux action using `put()`\r\n  // @see https://redux-saga.js.org/docs/basics/DispatchingActions.html\r\n  yield put(ExampleActions.fetchUserLoading())\r\n\r\n  // Fetch user informations from an API\r\n  const user = yield call(userService.fetchUser)\r\n  if (user) {\r\n    yield put(ExampleActions.fetchUserSuccess(user))\r\n  } else {\r\n    yield put(\r\n      ExampleActions.fetchUserFailure('There was an error while fetching user informations.')\r\n    )\r\n  }\r\n}\r\n","import { Platform, PermissionsAndroid } from 'react-native'\r\nimport { Config } from '../Config'\r\n\r\nasync function isPermit_Android() {\r\n  if (Platform.OS === 'android' && Platform.Version >= 23) {\r\n    const Have_Coarse_Location = await PermissionsAndroid.check(PermissionsAndroid.PERMISSIONS.ACCESS_COARSE_LOCATION);\r\n   if (!Have_Coarse_Location) {\r\n      const Got_Access = await PermissionsAndroid.request(PermissionsAndroid.PERMISSIONS.ACCESS_COARSE_LOCATION);\r\n      if (Got_Access !== PermissionsAndroid.RESULTS.GRANTED) {\r\n        console.log(\"No Ble Permission granted : Android\");\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction isBlePermitted() {\r\n  return new Promise((resolve, reject) => {\r\n    if (Platform.OS === 'android' && Platform.Version >= 23) {\r\n      if (!isPermit_Android()){\r\n        resolve('This application needs premissions to be using BLE');\r\n      }\r\n    }\r\n    resolve(null)\r\n  })\r\n}\r\n\r\nexport const deviceService = {\r\n  isBlePermitted,\r\n  //isPermit_Android,\r\n}\r\n","export const ScannerState = {\r\n  IDLE: 'IDLE',\r\n  AVAILABLE: 'AVAILABLE',\r\n  SCANNING: 'SCANNING',\r\n};\r\n\r\nexport const ConnectionState = {\r\n  DISCONNECTED: 'DISCONNECTED',\r\n  CONNECTING: 'CONNECTING',\r\n  DISCOVERING: 'DISCOVERING',\r\n  CONNECTED: 'CONNECTED',\r\n  DISCONNECTING: 'DISCONNECTING',\r\n};\r\n\r\nexport const ConnectionMethode = {\r\n  NONE: 'NONE',\r\n  BLE: 'BLE',\r\n  SERIAL: 'SERIAL',\r\n  BLUETOOTH: 'BLUETOOTH',\r\n  WIFI: 'WIFI',\r\n};","import {buffers, eventChannel} from 'redux-saga'\r\nimport { put, call, fork, take, cancelled, cancel, actionChannel, race, select } from 'redux-saga/effects'\r\nimport base64 from 'react-native-base64'\r\nimport { Buffer } from 'buffer'\r\n\r\nimport DeviceActions from '../../../Stores/Device/Actions'\r\nimport { deviceService } from '../../../Services/DeviceService'\r\n\r\nimport BleActions from '../../../Stores/Device/BLE/Actions'\r\n\r\nimport { ScannerState, ConnectionState, ConnectionMethode } from '../../../Stores/Device/Selectors'\r\n\r\nimport { BleManager, BleError, Device, State, Service, Characteristic, Descriptor } from 'react-native-ble-plx'\r\n\r\nexport function* bleStartup(sagaArgs) {\r\n  //Check and setup BLE....\r\n  const permitError = yield call(deviceService.isBlePermitted)\r\n  if (permitError) {\r\n    yield put( DeviceActions.setDeviceError(permitError))\r\n  } else {\r\n    // All below generators are described below...\r\n    yield fork(handleScanning, sagaArgs.BLEManager)\r\n    yield fork(handleBleState, sagaArgs.BLEManager)\r\n    yield fork(handleConnection, sagaArgs.BLEManager)\r\n  }\r\n  \r\n  console.log('BLE Startup : Done');\r\n}\r\n\r\n// This generator tracks our BLE state. Based on that we can enable scanning, get rid of devices etc.\r\n// eventChannel allows us to wrap callback based API which can be then conveniently used in sagas.\r\nfunction* handleBleState(manager: BleManager) {\r\n  console.log(\"Handle BLE State...\")\r\n\r\n  const stateChannel = yield eventChannel((emit) => {\r\n    const subscription = manager.onStateChange((state) => {\r\n      emit(state)\r\n    }, true)\r\n    return () => {\r\n      subscription.remove()\r\n    };\r\n  }, buffers.expanding(1))\r\n\r\n  try {\r\n    for (;;) {\r\n      const newState = yield take(stateChannel)\r\n      console.log(\"New BLE state: \" + newState)\r\n      yield put(BleActions.bleStateUpdated(newState))\r\n    }\r\n  } finally {\r\n    if (yield cancelled()) {\r\n      stateChannel.close()\r\n    }\r\n  }\r\n}\r\n\r\nexport function* connectBle(device: Device) {\r\n  //dummy function\r\n}\r\n\r\nfunction* handleConnection(manager: BleManager) {\r\n  console.log(\"Handle BLE Connection...\")\r\n  \r\n  for (; ;) {\r\n    // Take action\r\n    var { device }: ConnectAction = yield take('CONNECT_DEVICE');\r\n\r\n    var connectionMethode: $Keys<typeof ConnectionMethode> = yield select((state) => state.device.connectionMethode)\r\n    if (connectionMethode != ConnectionMethode.BLE) continue;\r\n\r\n    var connectedDevice = yield select((state) => state.device.connectedDevice)\r\n    //if (connectedDevice != null) return;  // TODO: Allready connected ? if problem\r\n\r\n    if (device === null || device._manager === null) {\r\n      yield put(DeviceActions.setDeviceError(\"Could not find device..\"));\r\n      yield put(DeviceActions.connectionStateUpdated(ConnectionState.DISCONNECTED));\r\n      return;\r\n    }\r\n    if (device.isConnected()) {\r\n      console.log(\"is connected ??\");\r\n    }\r\n    console.log(\"Connect device\");\r\n\r\n    try {\r\n      const disconnectedChannel = yield eventChannel((emit) => {\r\n          const subscription = device.onDisconnected((error) => {\r\n            emit({ type: 'DISCONNECT_DEVICE', error: error });\r\n          });\r\n        return () => {\r\n          subscription.remove();\r\n        };\r\n      }, buffers.expanding(1));\r\n    \r\n      const deviceActionChannel = yield actionChannel([\r\n        'DISCONNECT_DEVICE',\r\n      ]);\r\n\r\n      try {\r\n        yield put(DeviceActions.connectionStateUpdated(ConnectionState.CONNECTING));\r\n        yield call([device, device.connect]);\r\n        yield put(DeviceActions.connectionStateUpdated(ConnectionState.DISCOVERING));\r\n        yield call([device, device.discoverAllServicesAndCharacteristics]);\r\n        yield put(DeviceActions.connectionStateUpdated(ConnectionState.CONNECTED));\r\n        yield put(DeviceActions.connectionMethodeUpdated(ConnectionMethode.BLE));\r\n\r\n        yield put(DeviceActions.connectedDeviceUpdated(device));\r\n\r\n        var _device = device;\r\n\r\n        yield fork(readBleDeviceData, manager)\r\n\r\n        for (; ;) {\r\n          const { deviceAction, disconnected } = yield race({\r\n            deviceAction: take(deviceActionChannel),\r\n            disconnected: take(disconnectedChannel),\r\n          });\r\n\r\n          if (deviceAction) {\r\n            if (deviceAction.type === 'DISCONNECT_DEVICE') {\r\n              console.log('Disconnected by user...');\r\n              yield call([_device, _device.cancelConnection]);\r\n              yield put(DeviceActions.connectionStateUpdated(ConnectionState.DISCONNECTING));\r\n              //TODO: search for lost \"connected\" device..\r\n              break;\r\n            }\r\n          } else if (disconnected) {\r\n            console.log('Disconnected by device...');\r\n            if (disconnected.error != null) {\r\n              console.log(\"Error \", disconnected.error);\r\n            }\r\n            break;\r\n          }\r\n        }\r\n      } catch (error) {\r\n        /*yield put(\r\n            DeviceActions.setDeviceError(error)\r\n        )*/\r\n      } finally {\r\n        disconnectedChannel.close();\r\n        yield put(DeviceActions.connectedDeviceUpdated(null))\r\n        yield put(DeviceActions.connectionStateUpdated(ConnectionState.DISCONNECTED));\r\n      }\r\n    } catch (error) {\r\n      console.log('Error on device actions...');\r\n      yield put(DeviceActions.removeDevice(device));\r\n      yield put(DeviceActions.connectionStateUpdated(ConnectionState.DISCONNECTING));\r\n    }\r\n  }\r\n}\r\n\r\nexport function* readBleDeviceData(manager: BleManager) {\r\n  // TODO: read service .... se Tests SensorTag-master project ... or try following\r\n  // or https://stackoverflow.com/questions/50137867/send-data-using-react-native-ble-plx-package\r\n  // or https://github.com/Polidea/react-native-ble-plx/issues/392\r\n  // or https://stackoverflow.com/questions/63012926/how-to-read-ble-peripheral-characteristics-in-react-native-using-react-native-bl\r\n  \r\n  // Better jet: https://www.polidea.com/blog/ReactNative_and_Bluetooth_to_An_Other_level/\r\n\r\n  \r\n  // Explanation of plx ble.. notify changes for characteristics and reading / writing\r\n  //https://github.com/Polidea/react-native-ble-plx/wiki/Characteristic-Notifying\r\n  //https://github.com/Polidea/react-native-ble-plx/wiki/Characteristic-Reading\r\n  \r\n  const KnownUUIDS = [\r\n    '0000fff0-0000-1000-8000-00805f9b34fb', //* BF-8 EarTag reader Service's\r\n    '0000fff1-0000-1000-8000-00805f9b34fb',\r\n\r\n    '0000180f-0000-1000-8000-00805f9b34fb', //* Battery service (General BLE)\r\n    '00002a19-0000-1000-8000-00805f9b34fb',\r\n  ];\r\n\r\n  var device: Device = yield select((state) => state.device.connectedDevice)\r\n  if (device === null) return;\r\n\r\n  const _services: Array<Service> = yield call([device, device.services]);\r\n  const serviceUUIDs = device.serviceUUIDs;\r\n\r\n  const services: Array<Service> = _services.filter(service => serviceUUIDs.includes(service.uuid))\r\n\r\n  var monitor = [];\r\n\r\n  for (const service of services) {\r\n    console.log('Device had service: ' + service.uuid);\r\n\r\n    const characteristics: Array<Characteristic> = yield call([service, service.characteristics]);\r\n    for (const characteristic of characteristics) {\r\n      console.log('  characteristic: ' + characteristic.uuid);\r\n\r\n      if (KnownUUIDS.includes(service.uuid) && KnownUUIDS.includes(characteristic.uuid)) {\r\n        monitor.push([service.uuid, characteristic.uuid])\r\n      }\r\n    }\r\n  }\r\n\r\n  //const services: Array<Service> = yield call([device, device.services]);\r\n  //TODO: merch with KnownUUIDS and withouth monitor.. (append services)\r\n  /*for (const service of services) {\r\n    console.log('Found service: ' + service.uuid);\r\n\r\n    const characteristics: Array<Characteristic> = yield call([service, service.characteristics]);\r\n    for (const characteristic of characteristics) {\r\n      const descriptors: Array<Descriptor> = yield call([characteristic, characteristic.descriptors]);\r\n\r\n      for (const descriptor of descriptors) {\r\n        //Can contain value...\r\n        console.log('* Found descriptor: ' + descriptor.uuid);\r\n        const d: Descriptor = yield call([descriptor, descriptor.read]);\r\n        console.log('  ** Descriptor value: ' + (d.value || 'null'));\r\n\r\n        //yield call([descriptor, descriptor.write], 'AAA=');\r\n      }\r\n      if (characteristic.isReadable) {\r\n        //Can contain value...\r\n        var c = yield call([characteristic, characteristic.read]);\r\n        console.log('? characteristic: ' + characteristic.uuid);\r\n        if (characteristic.isNotifiable) {\r\n          console.log('  Is Notifiable');\r\n        }\r\n        //var basevalue = base64.decode(c.value);\r\n        //basevalue = basevalue.charCodeAt(0);\r\n        console.log('  ** Got base64 value: ' + c.value);\r\n        //if (characteristic.isWritableWithResponse) {\r\n      }\r\n    }\r\n  }*/\r\n\r\n  const readingChannel = yield eventChannel((emit) => {\r\n    monitor.forEach((service, i) => {\r\n      device.monitorCharacteristicForService(\r\n        service[0], service[1],\r\n        (error, characteristic) => {\r\n          if (error) {\r\n            emit([error, characteristic]);\r\n            return;\r\n          }\r\n          // ************************\r\n          if (characteristic != null) {\r\n            emit([error, characteristic]);\r\n          }\r\n          // *************************\r\n        },\r\n      );\r\n    });\r\n    \r\n    return () => {\r\n      // ****\r\n    };\r\n  }, buffers.expanding(1));\r\n\r\n  try {\r\n    // Used to receive multiple data packets\r\n    var TempData_Reading = Buffer.from([]);\r\n    var length = 0;\r\n    var PacketId = 0;\r\n\r\n    for (; ;) {\r\n      if (readingChannel != null) {\r\n        const [error, characteristic] = yield take(readingChannel);\r\n        if (error != null) {\r\n          yield put(DeviceActions.setDeviceError(error))\r\n        }\r\n        if (characteristic != null) {\r\n          //console.log(characteristic.uuid);\r\n          // Handler for Battery state Change\r\n          if (characteristic.uuid == \"00002a19-0000-1000-8000-00805f9b34fb\") {\r\n            var BatteryLevel = base64.decode(characteristic.value);\r\n            BatteryLevel = BatteryLevel.charCodeAt(0);\r\n            yield put(DeviceActions.updateDeviceData({Battery: BatteryLevel}))\r\n          } \r\n          // Handler for BF-8 EarTag reader Data\r\n          else if (characteristic.uuid == \"0000fff1-0000-1000-8000-00805f9b34fb\") {\r\n            //console.log(\"Raw \", characteristic.value);                        //Display data raw\r\n            var RawData = Buffer.from(characteristic.value, 'base64');    \r\n            //console.log(\"Base64 Decoded Buffer: \", RawData)               //Display data base64 decoded\r\n            //console.log(\"ascii: \", RawData.toString('ascii'));            //Display string\r\n\r\n            if (PacketId === 0) {                                         // If no data is processing (New Data read)\r\n              var header = RawData.slice(0,4)\r\n              if (Buffer.compare(header, Buffer.from([170,170,170,170])) == 0) {  // Data Read header [AA AA AA AA / -1431655766]\r\n                length = (parseInt(RawData.slice(4,8).toString(\"hex\"), 16) - 8)   // Next int is the data length (-8 for PacketId 8 bit)\r\n                PacketId = parseInt(RawData.slice(8,12).toString(\"hex\"), 16)      // Packet type id [Recv RFID Packet / Recv Fat Layers ID] = [251658240 / 2315255808]\r\n                RawData = RawData.slice(12,RawData.length)                        // Last of packet is filled with data\r\n\r\n                //console.log(\"Id = \", PacketId);\r\n                //console.log(\"data length = \", length);\r\n              }\r\n            }\r\n\r\n            var NewData = Buffer.concat([TempData_Reading, RawData])     // else append data string\r\n            //console.log(\"NewData: \", NewData);\r\n            //console.log(\"NewData base64: \", NewData.toString('base64'));\r\n            //console.log(\"ascii: \", NewData.toString('ascii'));\r\n            \r\n            //console.log(\"new length \", (NewData.length * 8));\r\n            if (NewData.length < 4 || Buffer.compare(NewData.slice(NewData.length -4, NewData.length), Buffer.from([85,85,85,85])) != 0) { // Data Read End [55 55 55 55]\r\n              TempData_Reading = NewData;\r\n            }\r\n            else {\r\n              while (NewData.length * 8 > length || Buffer.compare(NewData.slice(NewData.length-1, NewData.length), Buffer.from([85])) == 0){\r\n                NewData = NewData.slice(0, NewData.length -1)\r\n              }\r\n              if (PacketId == 251658240) { // Recv RFID Packet\r\n                var TagId = NewData.toString('ascii')\r\n                TagId = TagId.slice(0,3) + \"-\" + TagId.slice(3,TagId.length)\r\n                console.log(\"Read Tag: \", TagId);\r\n                yield put(DeviceActions.updateDeviceData({tagid: TagId, FatLayers: 0, FatL1: 0, FatL2: 0, FatL3: 0}))\r\n              } \r\n              else if (PacketId == 2315255808) { //Recv Fat Layers ID\r\n                console.log(\"Fat done\");\r\n                var layers = parseInt(NewData.slice(0,1).toString(\"hex\"), 16);    // First byte is Layer count\r\n                var layer1 = parseInt(NewData.slice(3,4).toString(\"hex\"), 16);    // 4th. byte is layer one fat layer (data is value in mm)\r\n                var layer2 = parseInt(NewData.slice(5,6).toString(\"hex\"), 16);    // 6th. byte is layer two fat layer (data is value in mm)\r\n                var layer3 = parseInt(NewData.slice(7,8).toString(\"hex\"), 16);    // 8th. byte is layer third fat layer (data is value in mm)\r\n\r\n                console.log(\"layers: \" + layers + \" layer1: \" + layer1);\r\n                console.log(\"layer2: \" + layer2 + \" layer3: \" + layer3);\r\n                console.log(\"NewData: \", NewData);\r\n\r\n                yield put(DeviceActions.updateDeviceData({FatLayers: layers, FatL1: layer1, FatL2: layer2, FatL3: layer3}))\r\n                /*var FatData = NewData.toString('ascii')\r\n                console.log(\"Read Data: \", FatData);*/\r\n\r\n                /*\r\n                getRealLayerDepthMM_1() {\r\n                return (((float) this.mRawLayerData1) * 1.0f) / 256.0f;\r\n                */\r\n              }\r\n\r\n              PacketId = 0;\r\n              length = 0;\r\n              TempData_Reading = Buffer.from([]);\r\n            }\r\n\r\n            /*const TestValue = Buffer.from(characteristic.value, 'base64').readUInt16LE(0);\r\n            console.log(\"Test Value: \" + TestValue);*/\r\n            \r\n            /*if (value.startsWith(\"****\")) {\r\n              var TagType = value.slice(value.length - 8, value.length - 5);\r\n              var TagId = value.slice(value.length - 5, value.length);\r\n\r\n              yield put(DeviceActions.updateDeviceData({TAGType: TagType}))\r\n              yield put(DeviceActions.updateDeviceData({TAGId: TagId}))\r\n            } else if (value.endsWith(\"UUUU\")){\r\n              var TagId = yield select((state) => state.device.deviceData)\r\n              TagId = TagId.TAGId + value;\r\n\r\n              while (TagId.startsWith('0')){\r\n                TagId = TagId.slice(1, TagId.length);\r\n              }\r\n              while (TagId.endsWith('U')){\r\n                TagId = TagId.slice(0, TagId.length -1)\r\n              }\r\n\r\n              yield put(DeviceActions.updateDeviceData({TAGId: TagId}))\r\n            }\r\n            else {\r\n              console.log(value);\r\n              yield put(DeviceActions.updateDeviceData({Unknown: value}))\r\n            }*/\r\n          } else {\r\n            console.log(\"unknown char: \", characteristic.uuid);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  } catch (error) {\r\n    //yield put(DeviceActions.setDeviceError(error))\r\n  } finally {\r\n    if (yield cancelled()) {\r\n      if (readingChannel != null) readingChannel.close();\r\n    }\r\n  }\r\n}\r\n\r\n// This generator decides if we want to start or stop scanning depending on specific\r\n// events:\r\n// * BLE state is in PoweredOn state\r\n// * SCANNER is currently AVAILABLE or allready SCANNING\r\n// * ConnectionMethode is on BLE\r\n// * We are not allready Connected to a device..\r\nfunction* handleScanning(manager: BleManager) {\r\n  console.log(\"Handle BLE Scanning...\")\r\n\r\n  var scanTask = null\r\n  var bleState: $Keys<typeof State> = yield select((state) => state.device.bleState);\r\n  var scannerState: $Keys<typeof ScannerState> = yield select((state) => state.device.scannerState)\r\n  var connectionMethode: $Keys<typeof ConnectionMethode> = yield select((state) => state.device.connectionMethode)\r\n  var connectionState: $Keys<typeof ConnectionState> = yield select((state) => state.device.connectionState)\r\n\r\n  const channel = yield actionChannel([\r\n    'BLE_STATE_UPDATED',\r\n    'SCANNER_STATE_UPDATED',\r\n    'CONNECTION_METHODE_UPDATED',\r\n    'CONNECTION_STATE_UPDATED',\r\n  ])\r\n\r\n  for (;;) {\r\n    const action:\r\n      | BLE_STATE_UPDATED\r\n      | SCANNER_STATE_UPDATED\r\n      | CONNECTION_METHODE_UPDATED \r\n      | CONNECTION_STATE_UPDATED = yield take(channel)\r\n\r\n    switch (action.type) {\r\n      case 'BLE_STATE_UPDATED':\r\n        bleState = action.bleState\r\n        break;\r\n      case 'SCANNER_STATE_UPDATED':\r\n        scannerState = action.scannerState\r\n        break;\r\n      case 'CONNECTION_METHODE_UPDATED':\r\n        connectionMethode = action.connectionMethode\r\n        break;\r\n      case 'CONNECTION_STATE_UPDATED':\r\n        connectionState = action.connectionState\r\n        break;\r\n    }\r\n\r\n    const enableScanning =\r\n      bleState === State.PoweredOn && \r\n      (scannerState === ScannerState.AVAILABLE ||\r\n        scannerState === ScannerState.SCANNING) &&\r\n      connectionMethode === ConnectionMethode.BLE &&\r\n      (connectionState === ConnectionState.DISCONNECTING ||\r\n        connectionState === ConnectionState.DISCONNECTED)\r\n    \r\n    if (enableScanning) {\r\n      if (scannerState != ScannerState.SCANNING) { //Dount need to start scanner if allready Scanning\r\n        if (scanTask != null) {\r\n          yield cancel(scanTask)\r\n        }\r\n        scanTask = yield fork(scanBle, manager);\r\n      }\r\n    } else {\r\n      if (scanTask != null) {\r\n        yield cancel(scanTask)\r\n        scanTask = null\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// As long as this generator is working we have enabled scanning functionality.\r\n// **\r\n// When we detect Tag-device, Device with localName or Name, We send device to device list\r\n// Testing with isConnectable\r\nfunction* scanBle(manager: BleManager) {\r\n  yield put(DeviceActions.scannerStateUpdated(ScannerState.SCANNING))\r\n  yield put(DeviceActions.clearDevices())\r\n  \r\n  console.log(\"Scanning started\");\r\n\r\n  const scanningChannel = yield eventChannel((emit) => {\r\n    manager.startDeviceScan(\r\n      null,\r\n      { allowDuplicates: true },\r\n      (error, scannedDevice) => {\r\n        if (error) {\r\n          emit([error, scannedDevice]);\r\n          return;\r\n        }\r\n        // ************************\r\n        if (scannedDevice != null) {\r\n          if (scannedDevice.localName != null) {\r\n            //TODO: auto list only supported devices...\r\n            //TODO: auto connect \"missing / disconnected\" divece..\r\n\r\n            /*if (scannedDevice.id === TagId && TagId != null) { // Catch Specefic SensorTag\r\n              emit([error, scannedDevice]);\r\n            } else { //Else if not ....*/\r\n              emit([error, scannedDevice]);\r\n            //}\r\n          } \r\n          /*else if (scannedDevice.name != null && scannedDevice.name != \"\"){\r\n            console.log(\"Device found Name: \" + scannedDevice.name);\r\n          }\r\n          // Test\r\n          if (scannedDevice.isConnectable != null && scannedDevice.id != null){\r\n            console.log(\"Connect ??: \" + scannedDevice.id);\r\n          }*/\r\n        }\r\n        // *************************\r\n      },\r\n    );\r\n    return () => {\r\n      manager.stopDeviceScan();\r\n    };\r\n  }, buffers.expanding(1));\r\n\r\n  try {\r\n    for (; ;) {\r\n      const [error, scannedDevice]: [?BleError,?Device] = yield take(scanningChannel);\r\n      if (error != null) {\r\n        console.log(\"Ble Scan Error: \", error);\r\n        yield put(DeviceActions.setDeviceError(error))\r\n      }\r\n      if (scannedDevice != null) {\r\n        //console.log(\"Interest Device Found: \" + scannedDevice.localName);\r\n        yield put(DeviceActions.addDevice(scannedDevice));\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.log(\"Ble Scan Error: \", error);\r\n    yield put(DeviceActions.setDeviceError(error))\r\n  } finally {\r\n    if (yield cancelled()) {\r\n      yield put(DeviceActions.scannerStateUpdated(ScannerState.IDLE))\r\n      console.log('Scanning stopped...');\r\n      scanningChannel.close();\r\n    }\r\n  }\r\n}\r\n\r\nexport function* startBleScan(){\r\n  var connectionMethode = yield select((state) => state.device.connectionMethode);\r\n  const scannerState = yield select((state) => state.device.scannerState);\r\n  \r\n  if (connectionMethode !== ConnectionMethode.BLE) {\r\n    yield put(DeviceActions.connectionMethodeUpdated(ConnectionMethode.BLE)) // rem, handleScanning should contain ConnectionMethode check and shutof scanning on change\r\n  } \r\n  yield call(setBleScannerStart);\r\n}\r\n// Aparently functions cannot call itself... so..\r\nfunction* setBleScannerStart(){\r\n  var connectionMethode = yield select((state) => state.device.connectionMethode);\r\n  const scannerState = yield select((state) => state.device.scannerState);\r\n\r\n  if (scannerState === ScannerState.IDLE && connectionMethode === ConnectionMethode.BLE) {\r\n    yield put(DeviceActions.scannerStateUpdated(ScannerState.AVAILABLE));\r\n  }\r\n}\r\n\r\nexport function* stopBleScan(){\r\n  const connectionMethode = yield select((state) => state.device.connectionMethode);\r\n  if (connectionMethode === ConnectionMethode.BLE) {\r\n    yield put(DeviceActions.scannerStateUpdated(ScannerState.IDLE));\r\n  }\r\n}","import { PermissionsAndroid, NativeModules, NativeEventEmitter } from 'react-native'\r\nimport {buffers, eventChannel} from 'redux-saga'\r\nimport { put, call, fork, take, cancelled, cancel, actionChannel, race, select } from 'redux-saga/effects'\r\n\r\nimport DeviceActions from '../../../Stores/Device/Actions'\r\nimport { deviceService } from '../../../Services/DeviceService'\r\n\r\nimport BluetoothActions from '../../../Stores/Device/BlueTooth/Actions'\r\n\r\nimport { ScannerState, ConnectionState, ConnectionMethode } from '../../../Stores/Device/Selectors'\r\n\r\nimport { Device } from 'react-native-ble-plx'\r\n\r\nexport function* bluetoothStartup(sagaArgs) {\r\n  //Check and setup Bluetooth....\r\n  const permitError = yield call(deviceService.isBlePermitted) //BLE permits is same for bluetooth\r\n  if (permitError) {\r\n    yield put( DeviceActions.setDeviceError(permitError))\r\n  } else {\r\n    // All below generators are described below...\r\n    yield fork(handleScanning, sagaArgs.BlueManager)\r\n    yield fork(handleConnection, sagaArgs.BlueManager)\r\n  }\r\n  \r\n  console.log('BlueTooth Startup : Done');\r\n}\r\n\r\n// This generator decides if we want to start or stop scanning depending on specific\r\n// events:\r\n// * SCANNER is currently AVAILABLE or allready SCANNING\r\n// * ConnectionMethode is on BLUETOOTH\r\n// * We are not allready Connected to a device..\r\nfunction* handleScanning(manager) {\r\n  console.log(\"Handle Bluetooh Scanning...\")\r\n\r\n  var scanTask = null\r\n  var scannerState: $Keys<typeof ScannerState> = yield select((state) => state.device.scannerState)\r\n  var connectionMethode: $Keys<typeof ConnectionMethode> = yield select((state) => state.device.connectionMethode)\r\n  var connectionState: $Keys<typeof ConnectionState> = yield select((state) => state.device.connectionState)\r\n\r\n  const channel = yield actionChannel([\r\n    'SCANNER_STATE_UPDATED',\r\n    'CONNECTION_METHODE_UPDATED',\r\n    'CONNECTION_STATE_UPDATED',\r\n  ])\r\n\r\n  for (;;) {\r\n    const action:\r\n      | SCANNER_STATE_UPDATED\r\n      | CONNECTION_METHODE_UPDATED \r\n      | CONNECTION_STATE_UPDATED = yield take(channel)\r\n\r\n    switch (action.type) {\r\n      case 'SCANNER_STATE_UPDATED':\r\n        scannerState = action.scannerState\r\n        break;\r\n      case 'CONNECTION_METHODE_UPDATED':\r\n        connectionMethode = action.connectionMethode\r\n        break;\r\n      case 'CONNECTION_STATE_UPDATED':\r\n        connectionState = action.connectionState\r\n        break;\r\n    }\r\n\r\n    const enableScanning =\r\n      (scannerState === ScannerState.AVAILABLE ||\r\n        scannerState === ScannerState.SCANNING) &&\r\n      connectionMethode === ConnectionMethode.BLUETOOTH &&\r\n      (connectionState === ConnectionState.DISCONNECTING ||\r\n        connectionState === ConnectionState.DISCONNECTED)\r\n\r\n    if (enableScanning) {\r\n      if (scannerState != ScannerState.SCANNING) { //Dount need to start scanner if allready Scanning\r\n        if (scanTask != null) {\r\n          yield cancel(scanTask)\r\n        }\r\n        scanTask = yield fork(scanBluetooth, manager);\r\n      }\r\n    } else {\r\n      if (scanTask != null) {\r\n        yield cancel(scanTask)\r\n        scanTask = null\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n//** Todo: Be done... (code is not touched... can contain lots of error) */\r\nfunction* handleConnection(manager) {\r\n  console.log(\"Handle Bluetooth Connection...\")\r\n\r\n  var testTask = null;\r\n  for (; ;) {\r\n    // Take action\r\n    var { device }: ConnectAction = yield take('CONNECT_BLUETOOTH');\r\n\r\n    var connectionMethode: $Keys<typeof ConnectionMethode> = yield select((state) => state.device.connectionMethode)\r\n    if (connectionMethode != ConnectionMethode.BLUETOOTH) continue;\r\n\r\n    if (device === null) {\r\n      yield put(DeviceActions.setDeviceError(\"Could not find device..\"));\r\n      yield put(DeviceActions.connectionStateUpdated(ConnectionState.DISCONNECTED));\r\n      return;\r\n    }\r\n    console.log(\"Connect device\");\r\n\r\n    try {\r\n      // TODO: handle disconnect\r\n\r\n      /*const disconnectedChannel = yield eventChannel((emit) => {\r\n          const subscription = device.onDisconnected((error) => {\r\n            emit({ type: 'DISCONNECT_DEVICE', error: error });\r\n          });\r\n        return () => {\r\n          subscription.remove();\r\n        };\r\n      }, buffers.expanding(1));\r\n    \r\n      const deviceActionChannel = yield actionChannel([\r\n        'DISCONNECT_DEVICE',\r\n      ]);*/\r\n\r\n      try {\r\n        yield put(DeviceActions.connectionStateUpdated(ConnectionState.CONNECTING));\r\n        const res = yield call(manager.PairDevice, device.id);\r\n        console.log(\"\",res);\r\n        //yield put(DeviceActions.connectionStateUpdated(ConnectionState.DISCOVERING));\r\n        //yield call([device, device.discoverAllServicesAndCharacteristics]);\r\n\r\n        yield put(DeviceActions.connectionStateUpdated(ConnectionState.CONNECTED));\r\n        yield put(DeviceActions.connectionMethodeUpdated(ConnectionMethode.BLE));\r\n\r\n        yield put(DeviceActions.connectedDeviceUpdated(device));\r\n\r\n        //for (; ;) {\r\n          /*const { deviceAction, disconnected } = yield race({\r\n            deviceAction: take(deviceActionChannel),\r\n            disconnected: take(disconnectedChannel),\r\n          });*/\r\n\r\n          /*if (deviceAction) {\r\n            if (deviceAction.type === 'DISCONNECT_DEVICE') {\r\n              console.log('Disconnected by user...');\r\n              yield put(DeviceActions.connectionStateUpdated(ConnectionState.DISCONNECTING));\r\n              yield call([device, device.cancelConnection]);\r\n              break;\r\n            }\r\n          } else if (disconnected) {\r\n            console.log('Disconnected by device...');\r\n            if (disconnected.error != null) {\r\n              console.log(\"Error \", disconnected.error);\r\n            }\r\n            break;\r\n          }*/\r\n\r\n        //}\r\n      } catch (error) {\r\n        console.log(\"?: \", error);\r\n        //yield put(DeviceActions.setDeviceError(error))\r\n      } finally {\r\n        //disconnectedChannel.close();\r\n        yield put(DeviceActions.connectedDeviceUpdated(null))\r\n        yield put(DeviceActions.connectionStateUpdated(ConnectionState.DISCONNECTED));\r\n      }\r\n    } catch (error) {\r\n      console.log('Error on device actions... ', error);\r\n      yield put(DeviceActions.removeDevice(device));\r\n      yield put(DeviceActions.connectionStateUpdated(ConnectionState.DISCONNECTING));\r\n    }\r\n  }\r\n}\r\n\r\nexport function* readBlueDeviceData(sagaArgs) {\r\n  console.log(\"Blue Read\");\r\n  const manager = sagaArgs.BlueManager;\r\n\r\n  var device: Device = yield select((state) => state.device.connectedDevice)\r\n  if (device === null) return;\r\n\r\n  const Message = yield call(manager.receiveData, device.id);\r\n  console.log(Message);\r\n  if (Message != \"\") {\r\n    yield put(DeviceActions.updateDeviceData({TAGId: Message}))\r\n  }\r\n}\r\n\r\n// As long as this generator is working we have enabled scanning functionality.\r\n// **\r\n// When we detect Tag-device, Device with localName or Name, We send device to device list\r\n// Testing with isConnectable\r\nfunction* scanBluetooth(manager) {\r\n  yield put(DeviceActions.scannerStateUpdated(ScannerState.SCANNING))\r\n  yield put(DeviceActions.clearDevices())\r\n\r\n  console.log(\"Scanning started\");\r\n\r\n  yield call(manager.Discover);\r\n  const bluetoothChannel = yield eventChannel((emit) => {\r\n    const blueTootControlEmitter = new NativeEventEmitter(manager);\r\n    const subscription = blueTootControlEmitter.addListener('blueToothDeviceFound', (device) => {\r\n      if (device != null){\r\n        var scannedDevice = new Device();\r\n        scannedDevice.id = device.address\r\n        scannedDevice.localName = (device.name != null ? device.name : \"NONE\");\r\n        scannedDevice.name = device.alias\r\n        \r\n        if (scannedDevice.localName != null) {\r\n          if (scannedDevice.localName === 'SensorTag') { // Catch Specefic SensorTag\r\n            //console.log(\"Device with Tag found: \" + scannedDevice.localName + \" : \" + scannedDevice.id);\r\n            emit(scannedDevice);\r\n          } else { //Else if not ....\r\n            //console.log(\"Device found localName: \" + scannedDevice.localName + \" : \" + scannedDevice.id);\r\n            emit(scannedDevice);\r\n          }\r\n        } \r\n        else if (device.alias != null && device.alias != \"\"){\r\n          scannedDevice.name = device.alias\r\n          emit(scannedDevice);\r\n          //console.log(\"Device found Name: \" + scannedDevice.name);\r\n        }\r\n      }\r\n    })\r\n    return () => {\r\n      subscription.remove();\r\n    };\r\n  }, buffers.expanding(1))\r\n\r\n  try {\r\n    for (;;) {\r\n      const scannedDevice: Device = yield take(bluetoothChannel);\r\n      if (scannedDevice != null) {\r\n        console.log(\"Interest Device Found: \" + scannedDevice.localName + \" : \" + scannedDevice.id);\r\n        yield put(DeviceActions.addDevice(scannedDevice))\r\n      }\r\n    }\r\n  } finally {\r\n    if (yield cancelled()) {\r\n      yield call(manager.StopDiscovery);\r\n      yield put(DeviceActions.scannerStateUpdated(ScannerState.IDLE))\r\n      console.log('Scanning stopped...');\r\n      bluetoothChannel.close()\r\n    }\r\n  }\r\n}\r\n\r\nexport function* startBluetoothScan(){\r\n  var connectionMethode = yield select((state) => state.device.connectionMethode);\r\n  const scannerState = yield select((state) => state.device.scannerState);\r\n  \r\n  if (connectionMethode !== ConnectionMethode.BLUETOOTH) {\r\n    yield put(DeviceActions.connectionMethodeUpdated(ConnectionMethode.BLUETOOTH)) // rem, handleScanning should contain ConnectionMethode check and shutof scanning on change\r\n  } \r\n  yield call(setBlueScannerStart);\r\n}\r\n// Aparently functions cannot call itself... so..\r\nfunction* setBlueScannerStart(){\r\n  var connectionMethode = yield select((state) => state.device.connectionMethode);\r\n  const scannerState = yield select((state) => state.device.scannerState);\r\n\r\n  if (scannerState === ScannerState.IDLE && connectionMethode === ConnectionMethode.BLUETOOTH) {\r\n    yield put(DeviceActions.scannerStateUpdated(ScannerState.AVAILABLE));\r\n  }\r\n}\r\nexport function* stopBluetoothScan(){\r\n  const connectionMethode = yield select((state) => state.device.connectionMethode);\r\n  if (connectionMethode === ConnectionMethode.BLUETOOTH) {\r\n    yield put(DeviceActions.scannerStateUpdated(ScannerState.IDLE));\r\n  }\r\n}\r\n\r\nexport function* bluetoothScanAble(sagaArgs){\r\n  yield call(sagaArgs.BlueManager.BluetoothSearchAble);\r\n}","import {buffers, eventChannel} from 'redux-saga'\r\nimport { put, call, fork, take, cancelled, cancel, actionChannel, race, select } from 'redux-saga/effects'\r\n\r\nimport DeviceActions from '../../Stores/Device/Actions'\r\nimport { deviceService } from '../../Services/DeviceService'\r\n\r\nimport { ScannerState, ConnectionState, ConnectionMethode } from '../../Stores/Device/Selectors'\r\n\r\nimport { BleManager, BleError, Device} from 'react-native-ble-plx'\r\n//Include BLE Saga\r\nimport * as BLE from './BLE/BLESaga'\r\nexport {BLE}\r\n//Include BlueTooth Saga\r\nimport * as BlueTooth from './BlueTooth/BlueToothSaga'\r\nexport {BlueTooth}\r\n\r\nexport function* deviceStartup() {\r\n  //Check and setup BLE.... / Bluetooth\r\n  yield put(DeviceActions.setDeviceError(\"\"))\r\n  yield put(DeviceActions.clearDevices());\r\n  yield put(DeviceActions.connectedDeviceUpdated(null)); // TODO: load connected device if possible\r\n  yield put(DeviceActions.connectionStateUpdated(ConnectionState.DISCONNECTED));\r\n\r\n  yield put(DeviceActions.bleStartup());\r\n  yield put(DeviceActions.bluetoothStartup());\r\n  \r\n  console.log('Device Startup : Done');\r\n}\r\n\r\nexport function* connectDevice(device: Device){\r\n  yield put(DeviceActions.scannerStateUpdated(ScannerState.IDLE))\r\n  //console.log(\"Device: \", device); // dummy call to connect...\r\n}\r\n\r\nexport function* disconnectDevice(methode){\r\n  //console.log(\"Device: \", device); // dummy call to disconnect...\r\n}\r\n\r\nexport function* readDeviceData(){\r\n  var connectedDevice = yield select((state) => state.device.connectedDevice)\r\n  if (connectedDevice != null) {\r\n    var connectionMethode: $Keys<typeof ConnectionMethode> = yield select((state) => state.device.connectionMethode)\r\n    if (connectionMethode == ConnectionMethode.BLE) {\r\n      yield put(DeviceActions.readBleDeviceData())\r\n    } else if (connectionMethode == ConnectionMethode.BLUETOOTH) {\r\n      yield put(DeviceActions.readBlueDeviceData())\r\n    }\r\n  }\r\n}\r\n\r\nexport function* fetchDevice(sagaArgs) {\r\n  console.log(\"??\");\r\n  //yield put(DeviceActions.fetchDeviceLoading())\r\n  //yield call(scan_BLE, sagaArgs);\r\n}","//#region Defines\r\nexport const UserStates = {\r\n  STARTER: 'starter',\r\n  FREE: 'free',\r\n  WORKER: 'worker',\r\n  OWNER: 'owner',\r\n  ADMIN: 'admin',\r\n}\r\n\r\nexport const DataStates = {\r\n  CLOSED: 'Closed'\r\n}\r\n\r\nexport const DataRefs = {\r\n  FIREBASEUSER: 'firebaseuser',\r\n  USERSDATA: 'usersdata',\r\n  USERS: 'users',\r\n  FARMS: 'farms',\r\n  SECTIONS: 'farms_data/$farmid/sections',\r\n  PENS: 'farms_data/$farmid/pens',\r\n  PIGS: 'farms_data/$farmid/pigs',\r\n  BATCHS: 'farms_data/$farmid/batchs',\r\n\r\n  WEIGHING: 'farms_data/$farmid/pens/$penid/weighings/',\r\n  GRAPH: 'farms_data/$farmid/Graph/$graphid/',\r\n\r\n  COMMENTS: 'farms_data/$farmid/datas/comments/',\r\n  FARMDATAS: 'farms_data/$farmid/datas/',\r\n  SHARES: 'shareData',\r\n  CONSYS: 'consys',\r\n}\r\n\r\nexport const Actions = {\r\n  SIGN: 'sign',\r\n\r\n  FETCH: 'fetch',\r\n  CREATE: 'create',\r\n  UPDATE: 'update',\r\n  MOVE: 'move',\r\n  DELETE: 'delete',\r\n  CLEAR: 'clear',\r\n  ADD: 'add',\r\n}\r\n\r\nexport const Operations = {\r\n  ADD: 'Add pig',\r\n  MOVE: 'Move pig',\r\n  LOST: 'Lost pig',\r\n  SOLD: 'Sold pig',\r\n  NOTE: 'Pen Note',\r\n}\r\n\r\nexport const ErrorTypes = {\r\n  SYSTEM: 'System',\r\n  EMAIL: 'Email',\r\n  PASSWORD: 'Password',\r\n  FORMAT: 'Format',\r\n}\r\n//#endregion\r\n\r\n//#region Formaters\r\nfunction format_num(num) {\r\n  if (num < 10){\r\n    num = \"0\"+num\r\n  }\r\n  return num;\r\n}\r\nexport function format_Time(time) {\r\n  var s = new Date(parseInt(time));\r\n  var datetime = format_num(s.getDate()) + \"/\" + format_num(s.getMonth() +1) + \"/\" + s.getFullYear() + \" \" \r\n                  + format_num(s.getHours()) + \":\" + format_num(s.getMinutes()) + \":\" + format_num(s.getSeconds());\r\n  return datetime\r\n}\r\n\r\nvar reA = /[^a-zA-Z]/g;\r\nvar reN = /[^0-9]/g;\r\nfunction sortAlphaNum(a, b) {\r\n  var aA = a.replace(reA, \"\");\r\n  var bA = b.replace(reA, \"\");\r\n  if (aA === bA) {\r\n    var aN = parseInt(a.replace(reN, \"\"), 10);\r\n    var bN = parseInt(b.replace(reN, \"\"), 10);\r\n    return aN === bN ? 0 : aN > bN ? 1 : -1;\r\n  } else {\r\n    return aA > bA ? 1 : -1;\r\n  }\r\n}\r\n\r\nexport function sortObject(o) {\r\n  var sorted = {},\r\n  key, a = [];\r\n\r\n  for (key in o) {\r\n    if (o.hasOwnProperty(key) && key !== \"__jsogObjectId\" && key !== \"update_time\") {\r\n      a.push(key);\r\n    }\r\n  }\r\n  a.sort(sortAlphaNum);\r\n\r\n  for (key = 0; key < a.length; key++) {\r\n    sorted[a[key]] = o[a[key]];\r\n  }\r\n  return sorted;\r\n}\r\n\r\nexport function DataStringCheck(data, Check_num = true) {\r\n  if (!data || data === \"\"){\r\n    return false\r\n  }\r\n  if (!typeof(data) === 'string'){\r\n    return false\r\n  }else {\r\n    if (Check_num) {\r\n      var first = data[0]\r\n      var numbers = '0123456789';\r\n      for(var i = 0; i < numbers.length;i++){\r\n        if(first === numbers[i]){\r\n          return false\r\n        }\r\n      }\r\n    }\r\n\r\n    var specialChars = '/[`!@#$%^&*()+\\-=\\[\\]{};\\':\"\\\\|,.<>\\/?~]/¨´';\r\n    for(var i = 0; i < specialChars.length;i++){\r\n      if(data.indexOf(specialChars[i]) > -1){\r\n        return false\r\n      }\r\n    }\r\n  }\r\n  return true\r\n}\r\n//#endregion\r\n\r\n//#region Data gets\r\nexport function GetWeight_FromPen(PenId, WeighingsStore = null, AfterTime = null, BeforeTime = null) {\r\n  //PenId: Parrent Get ellement (ID),\r\n  //WeighingsStore: LocalDataStore.weighings,\r\n  //AfterTime: Only data after specefied Time,\r\n  //BeforeTime: Only data before specefied Time\r\n  var Weighing = null;\r\n\r\n  if (PenId, WeighingsStore){\r\n    for (const _weighing in WeighingsStore[PenId]) {\r\n      var weighing = WeighingsStore[PenId][_weighing]\r\n      if (weighing && (!Weighing || Weighing.time < weighing.time)) {\r\n        if ((!AfterTime || weighing.time >= AfterTime) &&\r\n          (!BeforeTime || weighing.time <= BeforeTime)) {\r\n          Weighing = weighing\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return Weighing;\r\n}\r\n\r\nexport function GetBatch_FromPen(localDataStore, PenId) {\r\n  if (localDataStore.batchs) {\r\n    //Get batch form pen\r\n    for (const _batch in localDataStore.batchs) {\r\n      var batch = localDataStore.batchs[_batch]\r\n      if (batch.hasOwnProperty(\"pens\") && batch.pens[PenId] != null) {\r\n        return localDataStore.batchs[_batch]\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function GetStats_FromPen(PenId, PenData, localDataStore, StartDate, EndDate, PenWeighings = null){\r\n  var Animals = 0;\r\n  var PenWeight = 0\r\n  var PenGrowth = 0\r\n  var AveragePenGrowth = 0;\r\n\r\n  if (PenData.datas && PenData.datas.count || PenData.count) {\r\n    if (PenData.count) Animals += PenData.count\r\n    else Animals += PenData.datas.count\r\n  }\r\n  \r\n  if (localDataStore.weighings && localDataStore.weighings[PenId]) {\r\n    var GrowthCount = 0\r\n\r\n    var lastDate = 0\r\n    var LastWeight = undefined;\r\n    var LastWeightDay = undefined;\r\n    var FirstWeight = undefined;\r\n\r\n    if (!PenWeighings) PenWeighings = localDataStore.weighings[PenId]\r\n    if (PenWeighings) {\r\n      Object.keys(PenWeighings).forEach((weight) => {\r\n        var Weight = PenWeighings[weight]\r\n        if (Weight.time >= StartDate && Weight.time <= EndDate && Weight.time > lastDate) {\r\n          PenWeight = Weight.weight\r\n          if (Weight.count) PenWeight = Weight.weight / Weight.count;\r\n\r\n          if (LastWeight !== undefined) {\r\n            PenGrowth = PenWeight - LastWeight\r\n            GrowthCount++;\r\n          }\r\n\r\n          lastDate = Weight.time\r\n          LastWeight = PenWeight\r\n          LastWeightDay = Weight.time\r\n          if (!FirstWeight) FirstWeight = Weight.time;\r\n        }\r\n      })\r\n    }\r\n\r\n    var now = new Date().getTime()\r\n    var isVirtual = false;\r\n    if (StartDate && EndDate) {\r\n      var Batch = GetBatch_FromPen(localDataStore,PenId)\r\n      var TempGraph = GetCurve_FromBatch(Batch, localDataStore.graphs)\r\n      var BatchEndDate = EndDate;\r\n      var Predict = CurvePredict(localDataStore, PenId, Batch, TempGraph)\r\n      if (Predict != null && Predict.Now && now > new Date(lastDate).getDate()) {\r\n        PenWeight = Predict.Now\r\n        if (LastWeight !== undefined) {\r\n          PenGrowth += PenWeight - LastWeight\r\n          GrowthCount++;\r\n        }\r\n        var _date = new Date(Predict.lastWeighing.time + Predict.Addition)\r\n        _date.setDate(_date.getDate() + Predict.days)\r\n        LastWeightDay = _date.getTime()\r\n        isVirtual = true\r\n      }\r\n      if (Predict && Predict.lastWeighing && Predict.days) {\r\n        var tempEnd = new Date(EndDate).getTime()\r\n        var date = new Date(Predict.lastWeighing.time)\r\n        date.setDate(date.getDate() + Predict.days)\r\n        tempEnd = date.getTime()\r\n        if (Predict.Addition) {\r\n          tempEnd += Predict.Addition\r\n        }\r\n        if (EndDate === BatchEndDate || EndDate < tempEnd) {\r\n          EndDate = tempEnd;\r\n        }\r\n      }\r\n    }\r\n    if (GrowthCount > 0) {\r\n      var Growth = (PenGrowth / GrowthCount)\r\n      var days = (LastWeightDay - FirstWeight) / 86400000\r\n      Growth = Growth / days\r\n      AveragePenGrowth += Growth //AverageGrowth for specefic pen\r\n    }\r\n  }\r\n  return { Animals, PenWeight, AveragePenGrowth, EndDate, isVirtual }\r\n}\r\n\r\nexport function GetStats_FromBatch(Batch, localDataStore, Closed=true) {\r\n  var isVirtual = false;\r\n  var PenCount = 0;\r\n  var Animals = 0\r\n  var CollectedWeight = 0;\r\n  var CollectedGrowth = 0;\r\n  \r\n  var isClosed = (Batch.state && Batch.state === \"Closed\")?true:false\r\n\r\n  var TempGraph = GetCurve_FromBatch(Batch, localDataStore.graphs)\r\n  if (!TempGraph) return null;\r\n  var TargetWeight = (Batch && Batch.datas && Batch.datas.target)?Batch.datas.target:TempGraph.data[TempGraph.data.length -1]\r\n  var EndDate = GetBatchEnd(Batch, TempGraph)\r\n  var StartDate = Batch.time;\r\n\r\n  var PenEnds = 0\r\n  if (Batch && Batch.pens && localDataStore.pens) {\r\n    Object.keys(Batch.pens).reverse().filter(e => (e !== '__jsogObjectId')).forEach(Batch_Pen => {\r\n      if (localDataStore && localDataStore.pens && localDataStore.pens[Batch_Pen] && localDataStore.weighings && localDataStore.weighings[Batch_Pen] || isClosed) {\r\n        var Pen = isClosed?Batch.pens[Batch_Pen]:localDataStore.pens[Batch_Pen]\r\n        PenCount++\r\n        \r\n        var PenWeighings = isClosed?Batch.closed.weighings[Batch_Pen]:localDataStore.weighings[Batch_Pen]\r\n        if (PenWeighings) {\r\n          var PenStats = GetStats_FromPen(Batch_Pen, Pen, localDataStore, StartDate, EndDate, PenWeighings)\r\n          Animals += PenStats.Animals;\r\n          var PenWeight = PenStats.PenWeight\r\n          if (PenWeight === 0) {\r\n            PenCount--\r\n          } else {\r\n            CollectedWeight += PenWeight\r\n            CollectedGrowth += PenStats.AveragePenGrowth\r\n            if (PenEnds < PenStats.EndDate) PenEnds = PenStats.EndDate\r\n            if (!isVirtual) isVirtual = PenStats.isVirtual\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  if (PenEnds > 0) EndDate = PenEnds\r\n  var AverageWeight = CollectedWeight / PenCount\r\n  AverageWeight = parseFloat(AverageWeight).toFixed(2)\r\n  var AverageGrowth = CollectedGrowth / PenCount\r\n  AverageGrowth = parseFloat(AverageGrowth).toFixed(2)\r\n\r\n  return {StartDate, EndDate, TargetWeight, PenCount, Animals, AverageWeight, AverageGrowth, isClosed, isVirtual}\r\n}\r\n\r\nexport function GetCurve_FromBatch(Batch, GraphsStore = null, CurrentData = null) {\r\n  //Batch: Parrent Get ellement,\r\n  //GraphsStore: LocalDataStore.graphs,\r\n  //CurrentData: Data state get,\r\n  if (Batch) {\r\n    var Garph = null\r\n    if (Batch.gcurve && Batch.state && Batch.state === DataStates.CLOSED) {\r\n      Garph = Batch.gcurve;\r\n    }\r\n    if (GraphsStore) {\r\n      if (CurrentData && (typeof CurrentData === 'string' || CurrentData.curveId)) {\r\n        var Id = (typeof CurrentData === 'string')? CurrentData: CurrentData.curveId\r\n        Garph = GraphsStore[Id]\r\n      }\r\n      if (Batch.gcurve){\r\n        Garph = GraphsStore[Batch.gcurve];\r\n      }\r\n    }\r\n    if (Garph) {\r\n      var DataPoints = []\r\n      var _index = 0;\r\n      Object.keys(Garph.data).filter(e => e !== '__jsogObjectId').map((index) => {\r\n        DataPoints[index] = Garph.data[index]\r\n        for(var i = index-1; i > _index;i--) {\r\n          DataPoints[i] = null\r\n        }\r\n        _index = index\r\n      })\r\n      Garph.data = DataPoints\r\n      return Garph;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function GetBatchEnd(Batch, TempCurve) {\r\n  if (Batch && Batch.time && TempCurve) {\r\n    var currentTime = new Date(Batch.time) //Does not allow weight's after Batch end\r\n    for (var i = 0; i < TempCurve.data.length; i++) {\r\n      if (i < TempCurve.data.length -1) {\r\n        currentTime = new Date(AccumulateTime(currentTime, TempCurve.periode))\r\n      }\r\n    }\r\n    return currentTime.getTime();\r\n  }\r\n  return null\r\n}\r\n//#endregion\r\n\r\n//#region Curve Functions\r\nexport function AccumulateTime(Time, PeriodeLength) {\r\n  var NewTime = new Date(Time.getTime())\r\n  switch(PeriodeLength) {\r\n    case \"Days\":\r\n    //86.400.000 ms\r\n    NewTime.setDate(NewTime.getDate() + 1)\r\n    break;\r\n    case \"Month\":\r\n    NewTime.setMonth(NewTime.getMonth() + 1)\r\n    break;\r\n    case \"Weeks\":\r\n    default:\r\n    NewTime.setDate(NewTime.getDate() + 7)\r\n    break;\r\n  }\r\n  return NewTime;\r\n}\r\n\r\n//Get Today-point expected data and virtual simulation For PenId with Batch / or given\r\nexport function get_DataSpot_FromData(localDataStore, PenId, Batch, Closed = false) {\r\n  if (localDataStore.weighings && localDataStore.weighings[PenId]) {\r\n    var Weighing = null;\r\n\r\n    //get newest weighing\r\n    for (const _weighing in localDataStore.weighings[PenId]) {\r\n      var weighing = localDataStore.weighings[PenId][_weighing]\r\n      if (weighing && (!Weighing || Weighing.time < weighing.time)) { \r\n        Weighing = weighing\r\n      }\r\n    }\r\n\r\n    if (Weighing) {\r\n      var weight = Weighing.weight\r\n      weight = weight / Weighing.count\r\n      if (weight && !isNaN(weight)) {\r\n        if (!Batch) {\r\n          //Get batch form pen\r\n          for (const _batch in localDataStore.batchs) {\r\n            var batch = localDataStore.batchs[_batch]\r\n            if (batch.hasOwnProperty(\"pens\") && batch.pens[PenId] != null) {\r\n              Batch = localDataStore.batchs[_batch]\r\n              //break; //diffrenc from web ??? (needed in mobile..)\r\n            }\r\n          }\r\n        }\r\n\r\n        if (Batch && Batch.time && Batch.datas \r\n          && localDataStore.graphs && localDataStore.graphs[Batch.gcurve]) {\r\n          var Curve = localDataStore.graphs[Batch.gcurve]\r\n          var WeighingTime = Weighing.time\r\n\r\n          if (Closed || (WeighingTime > Batch.time && (!Batch.state || Batch.state !== \"Closed\"))) {\r\n            var StartTime = Batch.time\r\n            var EndTime = Batch.time\r\n            var index = 0;\r\n            var currentTime = new Date(StartTime)\r\n            for (index = 0; index < Curve.data.length-1; index++) {\r\n              currentTime = new Date(AccumulateTime(currentTime, Curve.periode))\r\n              EndTime = currentTime.getTime()\r\n              if (EndTime >= WeighingTime) {\r\n                break;\r\n              } else {\r\n                StartTime = EndTime\r\n              }\r\n            }\r\n            //var EndDate = EndDate = currentTime.getTime();\r\n            \r\n            var Keys = Object.keys(Curve.data);\r\n            var DataSpot = get_DataSpot([StartTime, EndTime], [Curve.data[Keys[index]], Curve.data[index +1]], new Date().getTime(), weight, WeighingTime)\r\n            DataSpot.Batch = Batch\r\n            return DataSpot\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return null\r\n}\r\n\r\n//Get point expected data and virtual simulation from data.\r\n//ExValue = Expected value if slope continues, for spots given (or inbetween).\r\n//VirData = Virtual calculation for Data progress to DataTime, if slope continues.\r\nexport function get_DataSpot(MinMax_Time, MinMax_Data, FindTime, Data, DataTime) {\r\n  var ExValue = null\r\n  var VirData = null\r\n  var ExTime = null\r\n  if (FindTime) {\r\n    var slope = GetSlope_Between(MinMax_Time, MinMax_Data)\r\n    var FindX = FindTime- MinMax_Time[0]\r\n    // ExValue = (FindX * Slope) + MinY             // Setting FindTime, due b then = Min data.. (b is y = 0)\r\n    ExValue = (FindX * slope) + MinMax_Data[0]          // ( X * a ) + b = Expeted data for spot on CalcTime\r\n    \r\n    if (Data && DataTime) {\r\n      var Findx2 = DataTime- MinMax_Time[0]\r\n      var ExData = (Findx2 * slope) + MinMax_Data[0]    //Expeted data for given Time 2\r\n      \r\n      var DataDiff = ExData - Data;\r\n      VirData = ExValue + DataDiff;\r\n\r\n      ExTime = (Data - MinMax_Data[0]) / slope          // (y-b)/a = Expeted time for data\r\n      ExTime = MinMax_Time[0] + ExTime\r\n      ExTime = Math.floor(ExTime)\r\n    }\r\n  }\r\n  return {ExValue, VirData, ExTime}\r\n}\r\n\r\n//Get Slope Between two points\r\nfunction GetSlope_Between(MinMax_Time, MinMax_Data){\r\n  var minX = MinMax_Time[0]\r\n  var maxX = MinMax_Time[1]\r\n  var minY = MinMax_Data[0]\r\n  var maxY = MinMax_Data[1]\r\n\r\n  //Slope = DeltaY / DeltaX\r\n  var slope = (maxY - minY) / (maxX - minX)\r\n  if (minY > minX) slope = -slope;\r\n  return slope\r\n}\r\n\r\nexport function CurvePredict(localDataStore, PenId, Batch, TempCurve) {\r\n  if (localDataStore) {\r\n    /* Get data */\r\n    if (!PenId && Batch && Batch.pens){\r\n      PenId = Object.keys(Batch.pens).filter(e => (e !== '__jsogObjectId'))[0]\r\n    }\r\n    if (!Batch) {\r\n      Batch = GetBatch_FromPen(localDataStore, PenId)\r\n    }\r\n    if (Batch && Batch.time) {\r\n      if (!TempCurve) {\r\n          TempCurve = GetCurve_FromBatch(Batch, localDataStore.graphs)\r\n      }\r\n      if (TempCurve && TempCurve.data) {\r\n        var BatchEndDate = GetBatchEnd(Batch, TempCurve)\r\n        var Weighing = GetWeight_FromPen(PenId, localDataStore.weighings, Batch.time, BatchEndDate);\r\n        if (Weighing && Weighing.weight) {\r\n          var weight = Weighing.weight\r\n          if (Weighing.count) weight = weight / Weighing.count\r\n          var Weighing2 = GetWeight_FromPen(PenId, localDataStore.weighings, Batch.time, Weighing.time -1);\r\n          var weight2 = Weighing2?Weighing2.weight:0\r\n          if (Weighing2 && Weighing2.count) weight2 = weight2 / Weighing2.count\r\n\r\n          var StartIndex = \"none\";\r\n          var PredictCurve = { periode: TempCurve.periode, data: [] }\r\n          var now = new Date(Date.now())\r\n          now = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime()\r\n          var CurrentTime = new Date(Batch.time)\r\n          var Temp_CurrentIndex = 0;\r\n\r\n          /* find template fit */\r\n          for (var index = 0; index < TempCurve.data.length; index++) {\r\n            if (CurrentTime.getTime() <= now) {\r\n              CurrentTime = new Date(AccumulateTime(CurrentTime, TempCurve.periode))\r\n              Temp_CurrentIndex++;\r\n            }\r\n\r\n            if (weight <= TempCurve.data[index]) {\r\n              if (StartIndex === \"none\") {\r\n                StartIndex = index\r\n                if (index === 0) {\r\n                  var slope = GetSlope_Between([Weighing.time,AccumulateTime(new Date(Weighing.time), TempCurve.periode)],[TempCurve.data[0], TempCurve.data[1]])\r\n                  var time = (TempCurve.data[0]- weight)/slope\r\n                  Weighing2 = Weighing\r\n                  weight2 = weight\r\n                  Weighing = {weight: TempCurve.data[0], time: Math.floor(Weighing.time + time)}\r\n                  weight = TempCurve.data[0]\r\n                }\r\n              }\r\n              PredictCurve.data.push(TempCurve.data[index])\r\n            }\r\n          }\r\n\r\n          if (weight < weight2) {\r\n            StartIndex = StartIndex -1\r\n            PredictCurve.data.unshift(TempCurve.data[StartIndex])\r\n          }\r\n\r\n          var PredictStart = new Date(Batch.time)\r\n          for (let index = 0; index < StartIndex; index++) {\r\n            PredictStart = new Date(AccumulateTime(PredictStart, TempCurve.periode))\r\n          }\r\n\r\n          PredictCurve.Now = weight\r\n          PredictCurve.TempEx = TempCurve.data[Temp_CurrentIndex]\r\n          if (StartIndex !== \"none\") {\r\n            var DataSpot = null\r\n            if (Weighing2) {\r\n              DataSpot = get_DataSpot([Weighing2.time, Weighing.time], [weight2, weight], Weighing.time, TempCurve.data[StartIndex], PredictStart.getTime())\r\n            }\r\n            if (DataSpot && DataSpot.ExTime) {\r\n              PredictCurve.FirstSpot = DataSpot.ExTime \r\n              PredictCurve.Addition = DataSpot.ExTime - Weighing.time\r\n            } else {\r\n              PredictCurve.FirstSpot = new Date(Weighing.time + 86400000)\r\n              PredictCurve.Addition = 86400000\r\n            }\r\n\r\n            if (BatchEndDate) {\r\n              var now = new Date(Date.now())\r\n              /*if (BatchEndDate <= now) {\r\n                now = new Date(BatchEndDate)\r\n              }*/\r\n\r\n              now = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime()\r\n              var Temp_CurrentTime\r\n              CurrentTime = new Date(Weighing.time)\r\n              var CurrentIndex = 0;\r\n              for (var index = 0; index < PredictCurve.data.length; index++) {\r\n                if (CurrentTime.getTime() < now) {\r\n                  Temp_CurrentTime = CurrentTime\r\n                  CurrentTime = new Date(AccumulateTime(CurrentTime, TempCurve.periode))\r\n                  CurrentIndex ++;\r\n                }\r\n              }\r\n              var WeightNow\r\n              if (CurrentIndex >= PredictCurve.data.length) {\r\n                DataSpot = get_DataSpot([Temp_CurrentTime, CurrentTime], [PredictCurve.data[PredictCurve.data.length-2], PredictCurve.data[PredictCurve.data.length-1]], Date.now())\r\n                WeightNow = DataSpot.ExValue\r\n              } else {\r\n                CurrentIndex--\r\n                WeightNow = PredictCurve.data[CurrentIndex];\r\n              }\r\n              if (WeightNow) PredictCurve.Now = WeightNow\r\n              else PredictCurve.Now = weight\r\n            }\r\n          }\r\n\r\n          var days = 0;\r\n          if (TempCurve.periode === \"Days\") days = PredictCurve.data.length\r\n          else if (TempCurve.periode === \"Weeks\") days = (PredictCurve.data.length) * 7\r\n          PredictCurve.days = days\r\n          PredictCurve.lastWeighing = Weighing\r\n\r\n          Batch.datas.target = (Batch.datas.target)?Batch.datas.target:TempCurve.data[TempCurve.data.length-1]\r\n          PredictCurve.Batch = Batch;\r\n          return PredictCurve;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n}\r\n//#endregion","import { Platform, Alert } from 'react-native'\r\n\r\nimport { UserStates } from '../Stores/Firebase/Selectors'\r\nimport { Actions, DataRefs, format_Time } from '../Stores/Firebase/Selectors';\r\n\r\nlet auth, messaging, database, firebase;\r\nif (Platform.OS === 'ios' || Platform.OS === 'android') {\r\n  //#region App version imports\r\n  auth = require('@react-native-firebase/auth').default;\r\n  messaging = require('@react-native-firebase/messaging').default;\r\n  database = require('@react-native-firebase/database').default;\r\n  //#endregion\r\n} else {\r\n  console.log(\"firebase load\")\r\n  //#region Web Version imports\r\n  var _firebase = require('firebase/app').default;\r\n  require('firebase/auth').default;\r\n  require('firebase/messaging').default;\r\n  require('firebase/database').default;\r\n\r\n  firebase = _firebase\r\n\r\n  if (!firebase.apps.length) {\r\n    console.log(\"Starting\")\r\n    var Constants = require('expo-constants').default;\r\n    console.log(Constants.manifest.web.config.firebase)\r\n    _firebase.initializeApp(Constants.manifest.web.config.firebase);\r\n  }\r\n\r\n  auth = _firebase.auth;\r\n  if (_firebase.messaging.isSupported()){\r\n    messaging = _firebase.messaging;\r\n  }\r\n  database = _firebase.database;\r\n  console.log(\"Started\")\r\n  //#endregion\r\n}\r\n\r\n//#region Firebase specefic services\r\nasync function isPermit_UserPermission() {\r\n  console.log(\"permit test\")\r\n  if (messaging) {\r\n    const authStatus = await messaging().requestPermission();\r\n    const enabled =\r\n      authStatus === messaging.AuthorizationStatus.AUTHORIZED ||\r\n      authStatus === messaging.AuthorizationStatus.PROVISIONAL;\r\n\r\n    if (!enabled) {\r\n      console.log('Authorization status:', authStatus);\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction requestUserPermission() {\r\n  return new Promise((resolve, reject) => {\r\n    if ((Platform.OS === \"ios\" || Platform.OS == \"android\") && !isPermit_UserPermission()) {\r\n      resolve('This application needs premissions to be using notifications')\r\n    }\r\n    resolve(null)\r\n  })\r\n}\r\n\r\nasync function is_getToken() {\r\n  var fcmToken = \"\"\r\n  if (messaging) {\r\n    try{\r\n      fcmToken = await messaging().getToken();\r\n      console.log('Device_token: ', fcmToken)\r\n    }catch(error){\r\n      console.log(error)\r\n    }\r\n  }\r\n  return fcmToken;\r\n}\r\n\r\nfunction requestFirebaseToken() {\r\n  return new Promise((resolve, reject) => {\r\n    var token;\r\n    if (Platform.OS === 'ios' || Platform.OS === 'android') {\r\n      try {\r\n        token = is_getToken();\r\n      } catch{}\r\n    } else if (messaging && messaging.isSupported()) {\r\n      try {\r\n        token = is_getToken();\r\n      } catch{}\r\n    }\r\n    if (!token) {\r\n      resolve('Could not find Firebase messaging Token')\r\n    }\r\n    resolve(token)\r\n  })\r\n}\r\n\r\nfunction wrappedAlert(title, message, okText, _cancelable) {\r\n  return new Promise(resolve => {\r\n    Alert.alert(\r\n      title,\r\n      message,\r\n      [{text: okText, onPress: function() { resolve(); }}],\r\n      {cancelable: _cancelable, onDismiss: function() {resolve(); }},\r\n    );\r\n  });\r\n}\r\n//#endregion\r\n\r\n//#region Firebase Auth services\r\nfunction createFirebaseUserWithemailandpassword({Email, Pass}) {\r\n  return new Promise((resolve, reject) => {\r\n    auth().createUserWithEmailAndPassword(Email,Pass).then(() => {\r\n      var User = auth().currentUser;\r\n      var Name = User.displayName ? User.displayName : User.email\r\n      actionStarting(DataRefs.USERSDATA, Actions.UPDATE, {UserId: User.uid, Data: {\r\n        name: Name,\r\n        state: UserStates.STARTER,\r\n      }}).then((_data) => {\r\n        User.updateProfile({\r\n          displayName: Name\r\n        }).then((data) => {\r\n          User.sendEmailVerification().then(function() {\r\n            // Email sent.\r\n            resolve(null)\r\n          }).catch(function(error) {\r\n            console.log(\"error in send EmailVerification\", error)\r\n            resolve({error:error.code, viewError:'Verification could not be send'})\r\n          });\r\n        }).catch(function(error) {\r\n          console.log(\"update profile\")\r\n          resolve({error:error.code, viewError:'Update error, please refresh'})\r\n        });\r\n      })\r\n      \r\n    }).catch(error => {\r\n      console.log(\"UserCreate Error: \", error);\r\n      if (error.code === 'auth/email-already-in-use') {\r\n        resolve({error:error.code, viewError:'The email address is already in use.'})\r\n        //Should not exploid the users... (this could be used as a find user-mails) ???\r\n      }\r\n      else if (error.code === 'auth/invalid-email') {\r\n        resolve({error:error.code, viewError:'The email addres is invalid.'})\r\n      }\r\n      else if (error.code === 'auth/weak-password') {\r\n        resolve({error:error.code, viewError: error.message})\r\n      } else {\r\n        resolve({error:error.code, viewError: 'Something went wrong'})\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nfunction signinWithemailandpassword({Email, Pass}){\r\n  if (auth().currentUser){\r\n    if (auth().currentUser.email != Email){\r\n      const res = logoutUser()\r\n    }\r\n    else {\r\n      return new Promise((resolve, reject) => {\r\n        resolve(true)\r\n      })\r\n    }\r\n  }\r\n  return new Promise((resolve, reject) => {\r\n    auth().signInWithEmailAndPassword(Email,Pass).then(() => {\r\n      resolve(true)\r\n    }).catch(error => {\r\n      console.log(\"User Signin Error: \", error);\r\n\r\n      if (error.code === 'auth/invalid-email') {\r\n        resolve({error:error.code, viewError:'The email addres is invalid.'})\r\n      }\r\n      else {\r\n        resolve({error:'Could not singin', viewError:'Could not singin'})\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nfunction sendResetPassword({Email}){\r\n  return new Promise((resolve, reject) => {\r\n    auth().sendPasswordResetEmail(Email).then(() => {\r\n      resolve(true)\r\n    }).catch(error => {\r\n      console.log(\"User resetPass error:\", error);\r\n      if (error.code === 'auth/user-not-found'){\r\n        //Should not exploid the users... (this could be used as a find user-mails)\r\n      }\r\n      resolve(null)\r\n    })\r\n  })\r\n}\r\n\r\nfunction logoutUser(){\r\n  return new Promise((resolve, reject) => {\r\n    auth().signOut().then(() => {\r\n      resolve({type:Actions.UPDATE, path:DataRefs.FIREBASEUSER, data:null })\r\n    }).catch(error => {\r\n      console.log(\"User logout error:\", error);\r\n      resolve({type:Actions.UPDATE, path:DataRefs.FIREBASEUSER, data:null })\r\n    })\r\n  })\r\n}\r\n\r\nfunction refreshUser(){\r\n  return new Promise((resolve, reject) => {\r\n    var user = auth().currentUser\r\n    if (user){\r\n      auth().currentUser.reload().then((data) => {\r\n        user = auth().currentUser\r\n        console.log(data, user)\r\n        //resolve({type:Actions.UPDATE, path:DataRefs.FIREBASEUSER, data:null })\r\n      })\r\n    }\r\n    resolve(null)\r\n  })\r\n}\r\n//#endregion\r\n\r\n//#region Master Control\r\nfunction actionStarting(ref, action, params = null){\r\n  const CurrentUser = auth().currentUser;\r\n  switch(ref){\r\n    case DataRefs.USERSDATA:\r\n      switch(action){\r\n        case Actions.FETCH:\r\n          return fetchUser(params)\r\n        case Actions.CREATE:\r\n          if (params.hasOwnProperty(\"UserData\")) {\r\n            return new Promise((resolve, reject) => {\r\n              var Data = params[0]\r\n              createFarm({Data:{name: params.Farms.name}}).then((farmid) => {\r\n                updateFarmData({FarmId:farmid, Data:{sections:params.Sections, pens: params.Pens}}).then(() => {\r\n                  updateUserData({Data:{state: params.UserData.state, farms: {[farmid]: true}}}).then(() => {\r\n                    fetchUser(CurrentUser.uid).then((data) => {\r\n                      var Data = data.data\r\n                      resolve({type:Actions.UPDATE, path:DataRefs.FIREBASEUSER, data:Data })\r\n                    });\r\n                  })\r\n                })\r\n              })\r\n            })\r\n          }\r\n          break;\r\n        case Actions.UPDATE:\r\n          return updateUserData(params)\r\n        case Actions.SIGN:\r\n          if (!params){\r\n            return logoutUser()\r\n          }else {\r\n            if (params.hasOwnProperty(\"refresh\")){ // TODO: verify\r\n              return refreshUser()\r\n            } else return signinWithemailandpassword(params)\r\n          }\r\n          break;\r\n        case Actions.CLEAR:\r\n          if (!CurrentUser) {\r\n            return {type:Actions.CLEAR, path:DataRefs.USERS, data:{}}\r\n          } else {\r\n            return {type:Actions.CLEAR, path:DataRefs.USERSDATA, data:{}}\r\n          }\r\n          break;\r\n      }\r\n      break;\r\n\r\n    case DataRefs.USERS:\r\n      switch(action){\r\n        case Actions.FETCH:\r\n          return fetchUser(params, true)\r\n        case Actions.CREATE:\r\n          if (params.hasOwnProperty(\"Email\") && params.hasOwnProperty(\"Pass\")) return createFirebaseUserWithemailandpassword(params)\r\n          else if (params.hasOwnProperty(\"Email\")) return sendResetPassword(params)\r\n          break;\r\n        case Actions.UPDATE:\r\n          return {type:Actions.UPDATE, path:DataRefs.FIREBASEUSER, data:params}\r\n        case Actions.CLEAR:\r\n          return {type:Actions.CLEAR, path:DataRefs.USERS, data:{}}\r\n      }\r\n      break;\r\n\r\n    case DataRefs.FARMS:\r\n      switch(action){\r\n        case Actions.FETCH:\r\n          return fetchFarm(params);\r\n        case Actions.CREATE:\r\n          break;\r\n        case Actions.UPDATE:\r\n          return updateFarm(params)\r\n        case Actions.CLEAR:\r\n          return {type:Actions.CLEAR, path:DataRefs.FARMS, data:{}}\r\n      }\r\n      break;\r\n\r\n    case DataRefs.FARMDATAS:\r\n      switch(action) {\r\n        case Actions.UPDATE:\r\n          return updateFarmData(params)\r\n      }\r\n      break;\r\n\r\n    case DataRefs.SECTIONS:\r\n      switch(action){\r\n        case Actions.FETCH:\r\n          return fetchSections(params);\r\n        case Actions.CREATE:\r\n          break;\r\n        case Actions.UPDATE:\r\n          break;\r\n        case Actions.CLEAR:\r\n          return {type:Actions.CLEAR, path:DataRefs.SECTIONS, data:{}}\r\n      }\r\n      break;\r\n\r\n    case DataRefs.PENS:\r\n      switch(action){\r\n        case Actions.FETCH:\r\n          return fetchPens(params);\r\n        case Actions.CREATE:\r\n          return createNewPen(params);\r\n        case Actions.DELETE:\r\n          return deletePen(params)\r\n        case Actions.UPDATE:\r\n          return updatePen(params);\r\n        case Actions.CLEAR:\r\n          return {type:Actions.CLEAR, path:DataRefs.PENS, data:{}}\r\n      }\r\n      break;\r\n\r\n    case DataRefs.PIGS:\r\n      switch(action){\r\n        case Actions.FETCH:\r\n          return fetchPigs(params);\r\n        case Actions.CREATE:\r\n          return updatePigdata(params);\r\n        case Actions.UPDATE:\r\n          break;\r\n        case Actions.CLEAR:\r\n          return {type:Actions.CLEAR, path:DataRefs.PIGS, data:{}}\r\n      }\r\n      break;\r\n\r\n    case DataRefs.BATCHS:\r\n      switch(action){\r\n        case Actions.FETCH:\r\n          return fetchBatchs(params)\r\n        case Actions.CREATE:\r\n          return createBatchs(params)\r\n        case Actions.UPDATE:\r\n          return updateBatchs(params)\r\n        case Actions.DELETE:\r\n          //return deleteBatch(params)\r\n          break;\r\n        case Actions.CLEAR:\r\n          return {type:Actions.CLEAR, path:DataRefs.BATCHS, data:{}}\r\n      }\r\n      break;\r\n\r\n    case DataRefs.WEIGHING:\r\n      switch(action){\r\n        case Actions.FETCH:\r\n          return fetchWeights(params);\r\n        case Actions.CREATE:\r\n          return createWeight(params);\r\n        case Actions.UPDATE:\r\n          break;\r\n        case Actions.CLEAR:\r\n          return {type:Actions.CLEAR, path:DataRefs.WEIGHING, data:{}}\r\n      }\r\n      break;\r\n\r\n    case DataRefs.COMMENTS:\r\n      switch(action) {\r\n        case Actions.FETCH:\r\n          return fetchComments(params);\r\n        case Actions.CREATE:\r\n          return createComment(params);\r\n      }\r\n      break;\r\n\r\n    case DataRefs.GRAPH:\r\n      switch(action){\r\n        case Actions.FETCH:\r\n          return fetchGraphData(params);\r\n        case Actions.CREATE:\r\n          return updateGraphData(params);\r\n        case Actions.UPDATE:\r\n          return updateGraphData(params);\r\n        case Actions.CLEAR:\r\n          return {type:Actions.CLEAR, path:DataRefs.GRAPH, data:{}}\r\n      }\r\n      break;\r\n  }\r\n  return new Promise((resolve, reject) => {\r\n    resolve({error: \"Unknown Action\"})\r\n  })\r\n}\r\n//#endregion\r\n\r\nfunction SetUpdateTime(DataRef) {\r\n  return new Promise((resolve, reject) => {\r\n    console.log(\"Setting Update Time\")\r\n    database().ref(DataRef).update({\r\n      update_time: database.ServerValue.TIMESTAMP,\r\n    }).then(() => {\r\n      resolve(true)\r\n    }).catch(error => {\r\n      console.log(error)\r\n      /*if (error.code === 'database/permission-denied') {\r\n        console.log(\"Batch update was permission denied. \");\r\n      }else if (error.code) {\r\n        console.log(\"Batch update Error: \", error);\r\n      }*/\r\n      resolve(true)\r\n    });\r\n  })\r\n}\r\nfunction CheckDataTime(DataRef, DataTime) {\r\n  return new Promise((resolve, reject) => {\r\n    if (!DataTime) resolve(true)\r\n    database().ref(DataRef + \"/update_time\").once('value').then((_Time) => {\r\n      var UpdateTime = _Time.val()\r\n      if (!UpdateTime) {\r\n        SetUpdateTime(DataRef).then((res) => {\r\n          resolve(true)\r\n        })\r\n      } else {\r\n        if (DataTime) {\r\n          if (DataTime === \"SET\"){\r\n            SetUpdateTime(DataRef).then((res) => {\r\n              resolve(res)\r\n            })\r\n          } else if (DataTime < UpdateTime){\r\n            resolve(true)\r\n          }\r\n          else resolve(false)\r\n        }else resolve(true)\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\n//#region User data Controls\r\nfunction fetchUser({UserId}, List = false) {\r\n  var user = \"\";\r\n  if (UserId) user = UserId\r\n  else if (!List && auth().currentUser) user = auth().currentUser.uid;\r\n\r\n  if (user || List) {\r\n    const ref = \"users/\" + user;\r\n    return new Promise((resolve, reject) => {\r\n      database().ref(ref).once('value').then((userData) => {\r\n        var data = userData.val()\r\n        if (!List) {\r\n          resolve({type:Actions.UPDATE, path:DataRefs.FIREBASEUSER, data:{data}})\r\n        } else {\r\n          resolve({type:Actions.UPDATE, path:DataRefs.USERS, data:{data}})\r\n        }\r\n      }).catch(error => {\r\n        console.log(error)\r\n        if (error.code === 'database/permission-denied') {\r\n          console.log(\"User update was permission denied. \");\r\n        }else if (error.code) {\r\n          console.log(\"User update Error: \", error);\r\n        }\r\n        resolve({error:\"An error occurred\"})\r\n      })\r\n    })\r\n  }\r\n  else return new Promise((resolve, reject) => {\r\n    console.log(\"User uid in fecth unknown\");\r\n    resolve(null)\r\n  })\r\n}\r\n\r\nfunction updateUserData({UserId, Data}) {\r\n  const user = UserId? UserId: auth().currentUser.uid;\r\n  if (user) {\r\n    const ref = \"users/\" + user;\r\n    return new Promise((resolve, reject) => {\r\n      database().ref(ref).update(\r\n        Data\r\n      ).then((data) => {\r\n        resolve(null)\r\n      }).catch(error => {\r\n        if (error.code === 'database/permission-denied') {\r\n          console.log(\"User update was permission denied. \");\r\n        }else if (error.code) {\r\n          console.log(\"User update Error: \", error);\r\n        }\r\n        resolve({error:\"An error occurred\"})\r\n      })\r\n    }) \r\n  } else return new Promise((resolve, reject) => {\r\n    console.log(\"User uid in fecth unknown\");\r\n    resolve(null)\r\n  })\r\n}\r\n//#endregion\r\n\r\n//#region Farm info data Controls\r\nfunction fetchFarm({FarmId}) {\r\n  var ref = \"farms/\" + FarmId\r\n  return database().ref(ref).once('value').then((_farmData) => {\r\n    //TODO:Multiple farms\r\n    var data = _farmData.val()\r\n    if (FarmId) {\r\n      data = {[FarmId]:data}\r\n    }\r\n    return {type:Actions.UPDATE, path:DataRefs.FARMS, data: data}\r\n  })\r\n  /*} else return new Promise((resolve, reject) => {\r\n    console.log(\"Farm uid in fecth unknown\");\r\n    resolve(null)\r\n  })*/\r\n}\r\n\r\nfunction updateFarm({FarmId, Data}) {\r\n  return new Promise((resolve, reject) => {\r\n    if (FarmId){\r\n      database().ref('farms/'+ FarmId).update({\r\n        ...Data\r\n      }).then(()=> {\r\n        resolve(null)\r\n      }).catch(error => {\r\n        console.log(\"Create Farm Error: \", error);\r\n        resolve(false)\r\n      })\r\n    } else {\r\n      const farm = database().ref('farms/').push()\r\n      const farmid = farm.key\r\n      farm.set({\r\n        Data\r\n      }).then(() => {\r\n        resolve(farmid)\r\n      }).catch(error => {\r\n        console.log(\"Create Farm Error: \", error);\r\n        resolve(false)\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nfunction createFarm({Data}){\r\n  const user = auth().currentUser;\r\n  const ref = \"users/\" + user.uid;\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const farm = database().ref('farms/').push()\r\n    const farmid = farm.key\r\n    \r\n    farm.set({\r\n      email: user.email,\r\n      manager: user.displayName ? user.displayName : user.email,\r\n      name: Data.name\r\n    }).then(() => {\r\n      resolve(farmid)\r\n    }).catch(error => {\r\n      console.log(\"Create Farm Error: \", error);\r\n      resolve(false)\r\n    })\r\n  })\r\n}\r\n\r\nfunction updateFarmData({FarmId, Data}) {\r\n  if (FarmId) {\r\n    const ref = \"farms_data/\" + FarmId;\r\n    return new Promise((resolve, reject) => {\r\n      database().ref(ref).update(\r\n        Data\r\n      ).then(() => {\r\n        resolve(null)\r\n      }).catch(error => {\r\n        if (error.code === 'database/permission-denied') {\r\n          console.log(\"Farm data update was permission denied.\");\r\n        }else if (error.code) {\r\n          console.log(\"User update Error: \", error);\r\n        }\r\n\r\n        resolve(false)\r\n      })\r\n    })\r\n  } else return new Promise((resolve, reject) => {\r\n    console.log(\"Farm uid in fecth unknown\");\r\n    resolve(null)\r\n  })\r\n}\r\n//#endregion\r\n\r\n//#region Farm data Controls\r\n\r\n//#region Sections\r\nfunction fetchSections({FarmId, SectionId, DataTime}){\r\n  if (FarmId) {\r\n    var ref = \"farms_data/\" + FarmId + \"/sections\";\r\n    if (SectionId){\r\n      ref += \"/\" + SectionId\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n      CheckDataTime(\"farms_data/\" + FarmId + \"/sections\", DataTime).then((DoFetch) => {\r\n        if (DoFetch) {\r\n          console.log(\"Sections fetch called\")\r\n          return database().ref(ref).once('value').then((_sectionidData) => {\r\n            resolve({type:Actions.UPDATE, path:DataRefs.SECTIONS, data:_sectionidData.val()})\r\n          })\r\n        }\r\n        else {\r\n          resolve(null)\r\n        }\r\n      })\r\n    })\r\n  }\r\n  return new Promise((resolve, reject) => {\r\n    console.log(\"Fecth Sections Error\");\r\n    resolve(null)\r\n  })\r\n}\r\n//#endregion\r\n\r\n//#region Pens\r\nfunction fetchPens({FarmId, PenId, DataTime}){\r\n  if (FarmId) {\r\n    var ref = \"farms_data/\" + FarmId + \"/pens\";\r\n    if (PenId){\r\n      ref += \"/\" + PenId\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n      CheckDataTime(\"farms_data/\" + FarmId + \"/pens\", DataTime).then((DoFetch) => {\r\n        if (DoFetch){\r\n          console.log(\"Pens fetch Called\")\r\n\r\n          database().ref(ref).once('value').then((_pensData) => {\r\n            if (PenId) {\r\n              var penData = _pensData.val()\r\n              if (!penData) penData = {}\r\n              if (!penData.datas) penData.datas = {}\r\n              //if (!penData.datas.gcurve) penData.datas.gcurve = \"default\";\r\n      \r\n              var pen = {[PenId]: penData};\r\n              resolve({type:Actions.UPDATE, path:DataRefs.PENS, data:pen})\r\n            } else {\r\n              resolve({type:Actions.UPDATE, path:DataRefs.PENS, data:_pensData.val()})\r\n            }\r\n          })\r\n        }\r\n        else {\r\n          resolve(null)\r\n        }\r\n      })\r\n    })\r\n  } \r\n  return new Promise((resolve, reject) => {\r\n    console.log(\"Fecth Pens Error\");\r\n    resolve(null)\r\n  })\r\n}\r\n\r\nfunction createNewPen({FarmId, PenId, SectionId}){\r\n  if (FarmId) {\r\n    var ref = \"farms_data/\" + FarmId + \"/\";\r\n    return new Promise((resolve, reject) => {\r\n      if (PenId) {\r\n        var ref2 = ref + \"pens/\" + PenId + \"/\"\r\n        database().ref(ref2).set({\r\n          section: SectionId,\r\n        }).then(() => {\r\n          database().ref(ref + \"sections/\" + SectionId + \"/pens\").update({\r\n            [PenId]: true,\r\n          }).then(() => {\r\n            database().ref(ref + \"sections/\").update({\r\n              update_time: database.ServerValue.TIMESTAMP,\r\n            }).then(() => {\r\n              fetchPens({FarmId: FarmId, PenId: PenId, DataTime: \"SET\"}).then((_Pen) => {\r\n                resolve({type:Actions.UPDATE, path:DataRefs.PENS, data:_Pen.data})\r\n              });\r\n            });\r\n          });\r\n        });\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nfunction deletePen({FarmId, PenId, SectionId}){\r\n  if (FarmId && PenId){\r\n    var ref = \"farms_data/\" + FarmId + \"/\";\r\n    return new Promise((resolve, reject) => {\r\n      database().ref(ref + \"pens/\" + PenId).remove().then(() => {\r\n        if (SectionId){\r\n          database().ref(ref + \"sections/\" + SectionId + \"/pens/\" + PenId).remove().then(() => {\r\n            database().ref(ref + \"sections/\").update({\r\n              update_time: database.ServerValue.TIMESTAMP,\r\n            }).then(() => {\r\n              fetchPens({FarmId: FarmId, PenId: PenId, DataTime: \"SET\"}).then((_Pen) => {\r\n                resolve({type:Actions.UPDATE, path:DataRefs.PENS, data:_Pen.data})\r\n              })\r\n            });\r\n          })\r\n        }else {\r\n          resolve(null)\r\n        }\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\nfunction updatePen({FarmId, PenId, Pen}){\r\n  if (FarmId) {\r\n    var ref = \"farms_data/\" + FarmId + \"/\";\r\n    return new Promise((resolve, reject) => {\r\n      if (PenId){\r\n        fetchPens({FarmId: FarmId, PenId: PenId}).then((_Pen) => {\r\n          var ref2 = ref + \"pens/\" + PenId + \"/\"\r\n          var data = Pen.datas\r\n          var Datas = {..._Pen.data[PenId].datas, ...data}\r\n          database().ref(ref2).update({\r\n            ...Pen,\r\n            datas: Datas\r\n          }).then(() => {\r\n            if (Pen.section) {\r\n              database().ref(ref + \"sections/\" + SectionId + \"/pens\").update({\r\n                [PenId]: true,\r\n              }).then(() => {\r\n                database().ref(ref + \"sections/\").update({\r\n                  update_time: database.ServerValue.TIMESTAMP,\r\n                }).then(() => {\r\n                  resolve(null)\r\n                });\r\n              });\r\n            }\r\n          });\r\n        })\r\n      }\r\n    })\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region Pigs\r\nfunction fetchPigs({FarmId, TagId}){\r\n  if (FarmId) {\r\n    var ref = \"farms_data/\" + FarmId + \"/pigs\";\r\n    if (TagId){\r\n      ref += \"/\" + TagId\r\n    }\r\n\r\n    return database().ref(ref).once('value').then((_pigsData) => {\r\n      if (TagId) {\r\n        var pigData = _pigsData.val()\r\n        if (!pigData) return null;\r\n        if (!pigData.datas) pigData.datas = {}\r\n        if (!pigData.datas.gcurve) pigData.datas.gcurve = \"default\";\r\n\r\n        var pig = {[TagId]: pigData};\r\n        return {type:Actions.UPDATE, path:DataRefs.PIGS, data:pig}\r\n      } else {\r\n        return {type:Actions.UPDATE, path:DataRefs.PIGS, data:_pigsData.val()}\r\n      }\r\n    })\r\n  }\r\n  return new Promise((resolve, reject) => {\r\n    console.log(\"Fecth Pigs Error\");\r\n    resolve(null)\r\n  })\r\n}\r\n\r\nfunction updatePigPen({FarmId, TagId, PenId, Action}) {\r\n  if (PenId) {\r\n    var ref2 = \"farms_data/\" + FarmId + \"/\" + \"pens/\" + PenId + \"/datas\"\r\n    return new Promise((resolve, reject) => {\r\n      database().ref(ref2 + \"/count\").once('value').then((counts) => {\r\n        var val = counts.val()\r\n        if (!val) val = 0\r\n        if (Action && !isNaN(Action)) {\r\n          val = parseInt(val) + parseInt(Action)\r\n        } else {\r\n          val = parseInt(val) +1\r\n        }\r\n        database().ref(ref2).update({\r\n          count: val,\r\n        }).then(() => {\r\n          fetchPens({FarmId: FarmId, PenId: PenId}).then((pen) => {\r\n            resolve({type:Actions.UPDATE, path:DataRefs.PENS, data:pen.data})\r\n          })\r\n        });\r\n      }).catch(error => {\r\n        console.log(\"Update pig pen Error: \", error);\r\n        resolve(null)\r\n      })\r\n    })\r\n  }else {\r\n    return new Promise((resolve, reject) => {\r\n      resolve(null)\r\n    })\r\n  }\r\n}\r\n\r\nfunction updatePigdata({FarmId, TagId, PenId, Action}) {\r\n  if (FarmId) {\r\n    var ref = \"farms_data/\" + FarmId + \"/\";\r\n    if (TagId) {\r\n      return new Promise((resolve, reject) => {\r\n        var ref2 = ref + \"pigs/\" + TagId + \"/\"\r\n        fetchPigs({FarmId: FarmId, TagId: TagId}).then((pig) => {\r\n          if (pig && pig.data) {\r\n            pig = pig.data[TagId]?pig.data[TagId]:null\r\n          }\r\n          if (!pig || !pig.hasOwnProperty('pen')){\r\n            database().ref(ref2).update({\r\n              pen: 0,\r\n            }).then(() => {\r\n              fetchPigs({FarmId: FarmId}).then((pigs) => {\r\n                console.log(\"?\", pigs)\r\n                resolve(null)\r\n                //resolve({type:Actions.UPDATE, path:DataRefs.PIGS, data:pigs})\r\n              })\r\n            })\r\n          }\r\n          else if (PenId && PenId != pig.pen) {\r\n            updatePigPen({FarmId: FarmId, TagId: TagId, PenId: pig.pen, Action:-1}).then((data)=>{\r\n              updatePigPen({FarmId: FarmId, TagId: TagId, PenId: PenId, Action:+1}).then((data)=>{\r\n                database().ref(ref2).update({\r\n                  pen: PenId\r\n                }).then(() => {\r\n                  fetchPigs({FarmId: FarmId}).then((pigs)=> {\r\n                    resolve({type:Actions.UPDATE, path:DataRefs.PIGS, data:pigs.data})\r\n                  })\r\n                })\r\n              })\r\n            })\r\n          } else {\r\n            resolve(null)\r\n          }\r\n        })\r\n      })\r\n    } else {\r\n      return new Promise((resolve, reject) => {\r\n        updatePigPen({FarmId: FarmId, TagId: TagId, PenId: PenId, Action:Action}).then((data) => {\r\n          resolve({type:Actions.UPDATE, path:DataRefs.PENS, data:data.data})\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region Batchs\r\nfunction fetchBatchs({FarmId, BatchId, Data, DataTime}) {\r\n  if (FarmId) {\r\n    var ref = \"farms_data/\" + FarmId + \"/batchs\";\r\n    if (BatchId){\r\n      ref += \"/\" + BatchId\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      CheckDataTime(\"farms_data/\" + FarmId + \"/batchs\", DataTime).then((DoFetch) => {\r\n        if (DoFetch) {\r\n          if (!Data) {\r\n            database().ref(ref).once('value').then((_batchdata) => {\r\n              if (BatchId) {\r\n                var batchdata = _batchdata.val()\r\n                if (!batchdata) return null;\r\n                if (!batchdata.datas) batchdata.datas = {}\r\n                if (!batchdata.pens) batchdata.pens = []\r\n                if (!batchdata.datas.gcurve) batchdata.datas.gcurve = \"default\";\r\n\r\n                var batch = {[BatchId]: batchdata};\r\n                resolve({type:Actions.UPDATE, path:DataRefs.BATCHS, data:batch})\r\n              } else {\r\n                resolve({type:Actions.UPDATE, path:DataRefs.BATCHS, data:_batchdata.val()})\r\n              }\r\n            })\r\n          }\r\n          else if (BatchId) {\r\n            switch(Data){\r\n              case DataRefs.BATCHS:\r\n                ref += \"/\" + \"datas\"\r\n                return database().ref(ref).once('value').then((_batchdata) => {\r\n                  var data = {[BatchId]: {datas: _batchdata.val()}}\r\n                  resolve({type:Actions.UPDATE, path:DataRefs.BATCHS, data:data})\r\n                })\r\n              case DataRefs.PENS:\r\n                ref += \"/\" + \"pens\"\r\n                return database().ref(ref).once('value').then((_batchdata) => {\r\n                  var pens = {[BatchId]: {pens: _batchdata.val()}}\r\n                  resolve({type:Actions.UPDATE, path:DataRefs.BATCHS, data:pens})\r\n                })\r\n              case DataRefs.GRAPH:\r\n                ref += \"/\" + \"gcurve\"\r\n                return database().ref(ref).once('value').then((_batchdata) => {\r\n                  var curve = {[BatchId]: {gcurve: _batchdata.val()}}\r\n                  resolve({type:Actions.UPDATE, path:DataRefs.BATCHS, data:curve})\r\n                })\r\n            }\r\n          }\r\n\r\n        } else {\r\n          resolve(null)\r\n        }\r\n      })\r\n    })\r\n  }\r\n  return new Promise((resolve, reject) => {\r\n    console.log(\"Fecth Batchs Error\");\r\n    resolve(null)\r\n  })\r\n}\r\n\r\nfunction createBatchs({FarmId, BatchId, Batch}) {\r\n  if (FarmId) {\r\n    var ref = \"farms_data/\" + FarmId + \"/batchs\";\r\n    return new Promise((resolve, reject) => {\r\n      if (Batch && Batch.name) {\r\n        BatchId = Batch.name;\r\n        ref += \"/\" + Batch.name + \"/\"\r\n        delete Batch.name;\r\n        database().ref(ref).set({\r\n          ...Batch,\r\n        }).then(() => {\r\n          Object.keys(Batch.pens).forEach(pen => {\r\n            updatePen({FarmId:FarmId, PenId:pen, Pen:{datas:{batch:BatchId}}})\r\n          })\r\n          resolve(fetchBatchs({FarmId: FarmId, DataTime: \"SET\"}))\r\n        }).catch(error => {\r\n          if (error.code === 'database/permission-denied') {\r\n            console.log(\"Batch update was permission denied. \");\r\n          }else if (error.code) {\r\n            console.log(\"Batch update Error: \", error);\r\n          }\r\n          resolve({error:\"An error occurred\"})\r\n        })\r\n      } else if (BatchId) { //added else ??? still cleanup ??\r\n        console.log(\"???\") //TODO: why id.. mabye cleanup\r\n        ref += \"/\" + BatchId + \"/\"\r\n        database().ref(ref).set({\r\n          time: database.ServerValue.TIMESTAMP,\r\n          pens:[],\r\n          datas:{\r\n            devianceMin:1,\r\n            devianceMax:2,\r\n          }\r\n        }).then(() => {\r\n          resolve(fetchBatchs({FarmId: FarmId, DataTime: \"SET\"}))\r\n        });\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nfunction updateBatchs({FarmId, BatchId, Batch, Data}) {\r\n  if (FarmId) {\r\n    var ref = \"farms_data/\" + FarmId + \"/batchs\";\r\n    return new Promise((resolve, reject) => {\r\n      if (BatchId && Batch) {\r\n        ref += \"/\" + BatchId\r\n        fetchBatchs({FarmId: FarmId, BatchId: BatchId, Data:DataRefs.PENS}).then((_batch) => {\r\n          var Pens = _batch.data[BatchId].pens\r\n          if (Batch.name) delete Batch.name\r\n\r\n          var BatchPens = {}\r\n          if (Batch.pens && JSON.stringify(Batch.pens)!==JSON.stringify(Pens)) {\r\n            if (!Pens) Pens = []\r\n            var RemovedPens = Object.keys(Pens).filter(x => !Object.keys(Batch.pens).includes(x) && !Pens[x].enddate);\r\n            var NewPens = Object.keys(Batch.pens).filter(x => !Object.keys(Pens).includes(x) || Pens[x].enddate);\r\n            var SamePens = Object.keys(Pens).filter(x => !Object.keys(RemovedPens).includes(x) && !Object.keys(NewPens).includes(x));\r\n\r\n            if (RemovedPens && RemovedPens.length > 0) {\r\n              RemovedPens.forEach(pen => {\r\n                if (Pens[pen]) {\r\n                  var Pen = Pens[pen]\r\n                  Pen.enddate = Date.now()\r\n                  BatchPens[pen] = Pen\r\n                  fetchPens({FarmId: FarmId, PenId:pen}).then((pendata) => {\r\n                    var count = 0\r\n                    if (pendata.data[pen] && pendata.data[pen].datas && pendata.data[pen].datas.count)count=pendata.data[pen].datas.count\r\n                    BatchPens[pen].count = count\r\n                  })\r\n                  updatePen({FarmId:FarmId, PenId:pen, Pen:{datas:{batch:\"\"}}})\r\n                }\r\n              })\r\n            }\r\n            if (NewPens && NewPens.length > 0) {\r\n              NewPens.forEach(pen => {\r\n                var Pen = Pens[pen]?Pens[pen]:{startdate:Date.now()}\r\n                if (Pen.enddate) delete Pen.enddate\r\n                BatchPens[pen] = Pen\r\n                updatePen({FarmId:FarmId, PenId:pen, Pen:{datas:{batch:BatchId}}})\r\n              })\r\n            }\r\n\r\n            if (SamePens && SamePens.length > 0) {\r\n              SamePens.forEach(pen => {\r\n                BatchPens[pen] = Pens[pen]\r\n              })\r\n            }\r\n          }\r\n          Batch.pens = BatchPens\r\n\r\n          if (Batch.state && Batch.state === \"Closed\") {\r\n            fetchBatchs({FarmId: FarmId, BatchId: BatchId, Data:DataRefs.GRAPH}).then((curve) => {\r\n              var CurveId = curve.data[BatchId].gcurve\r\n              fetchGraphData({FarmId: FarmId}).then((curve) => {\r\n                Batch.gcurve = curve.data[CurveId]\r\n                Batch.closed = {comments: [], weighings: []}\r\n                \r\n                for (let i = 0, p = Promise.resolve(); i <= Object.keys(Pens).length; i++) {\r\n                  p = p.then(_ => new Promise(_resolve => {\r\n                    setTimeout(function () {\r\n                      if (i !== Object.keys(Pens).length) {\r\n                        var PenId = Object.keys(Pens)[i]\r\n                        Batch.pens[PenId] = Pens[PenId]\r\n                        fetchPens({FarmId: FarmId, PenId:PenId}).then((pendata) => {\r\n                          var count = 0\r\n                          if (pendata.data[PenId] && pendata.data[PenId].datas && pendata.data[PenId].datas.count)count=pendata.data[PenId].datas.count\r\n                          Batch.pens[PenId].count = count\r\n                        })\r\n                        if (!Batch.pens[PenId].enddate) {\r\n                          Batch.pens[PenId].enddate = Date.now()\r\n                        }\r\n                        updatePen({FarmId:FarmId, PenId:PenId, Pen:{datas:{batch:\"\", count:0}}})\r\n\r\n                        fetchComments({FarmId: FarmId, PenId: PenId}).then((comments) => {\r\n                          Batch.closed.comments[PenId] = comments.data[PenId]\r\n                          database().ref(\"farms_data/\" + FarmId + \"/datas/comments/\" + PenId).remove()\r\n                          \r\n                          fetchWeights({FarmId: FarmId, PenId: PenId}).then((weights) => {\r\n                            Batch.closed.weighings[PenId] = weights.data[PenId]\r\n                            database().ref(\"farms_data/\" + FarmId + \"/weighings/\" + PenId).remove()\r\n                            _resolve();\r\n                          })\r\n                        })\r\n                      }\r\n                      else {\r\n                        database().ref(ref).update({\r\n                          ...Batch\r\n                        }).then(()=>{\r\n                          database().ref(ref + \"/closed\").set(\r\n                            Batch.closed\r\n                          ).then(() => {\r\n                            fetchBatchs({FarmId: FarmId, BatchId: BatchId, DataTime: \"SET\"}).then((data)=>{\r\n                              resolve(data)\r\n                            })\r\n                          }).catch(error => {\r\n                            if (error.code === 'database/permission-denied') {\r\n                              console.log(\"Batch update was permission denied. \");\r\n                            }else if (error.code) {\r\n                              console.log(\"Batch update Error: \", error);\r\n                            }\r\n                            console.log(error)\r\n                            resolve({error:\"An error occurred\"})\r\n                          })\r\n                        })\r\n                      }\r\n                    })\r\n                  }));\r\n                }\r\n              })\r\n            })\r\n          } else {\r\n            database().ref(ref).update({\r\n              ...Batch,\r\n            }).then(() => {\r\n              fetchBatchs({FarmId: FarmId, BatchId: BatchId, DataTime: \"SET\"}).then((data)=>{\r\n                resolve(data)\r\n              })\r\n            }).catch(error => {\r\n              if (error.code === 'database/permission-denied') {\r\n                console.log(\"Batch update was permission denied. \");\r\n              }else if (error.code) {\r\n                console.log(\"Batch update Error: \", error);\r\n              }\r\n              console.log(error)\r\n              resolve({error:\"An error occurred\"})\r\n            })\r\n          }\r\n        })\r\n      }else {\r\n        console.log(\"Update Batchs Error\");\r\n        resolve(null)\r\n      }\r\n    })\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region Weights\r\nfunction fetchWeights({FarmId, PenId, SectionId, limitStart = 0, limitTo = 9999, DataTime, MemSections}) {\r\n  if (FarmId) {\r\n    var ref = \"farms_data/\" + FarmId + \"/weighings\";\r\n    return new Promise((resolve, reject) => {\r\n      CheckDataTime(\"farms_data/\" + FarmId + \"/weighings\", DataTime).then((DoFetch) => {\r\n        if (DoFetch) {\r\n          if (PenId) {\r\n            console.log(\"Weight fetch called, getting Pen\")\r\n            ref += \"/\" + PenId\r\n            database().ref(ref).orderByChild('time').limitToLast(limitTo).once('value', snapshot => {\r\n              var weighing = {[snapshot.key]:{}}\r\n              snapshot.forEach(c => {\r\n                weighing[snapshot.key][c.key] = c.val()\r\n              })\r\n              resolve({type:Actions.UPDATE, path:DataRefs.WEIGHING, data:weighing})\r\n            })\r\n          } else {\r\n            console.log(\"Weight fetch called, getting Sections\")\r\n            database().ref(ref + \"/update_time\").once('value').then((_weighingTime) => {\r\n              //TODO: Section fetch cast :: in mem check ??\r\n              var Weighings_Time = _weighingTime.val()\r\n              fetchSections({FarmId, SectionId, DataTime: MemSections?MemSections.update_time:null}).then((sections) => {\r\n                var itemsProcessed = 0;\r\n                var length = 0;\r\n                var newWeights = {}\r\n                var Sections = sections?sections.data:MemSections\r\n                Object.keys(Sections).forEach(section => {\r\n                  if (Sections[section] && Sections[section].pens) {\r\n                    length += Object.keys(Sections[section].pens).filter(e => e !== '__jsogObjectId').length\r\n                    Object.keys(Sections[section].pens).filter(e => e !== '__jsogObjectId').forEach(pen => {\r\n                      fetchWeights({FarmId:FarmId, PenId:pen, limitStart:0, limitTo:limitTo}).then((weights) => {\r\n                        itemsProcessed++\r\n                        newWeights = {...newWeights, ...weights.data}\r\n                        if (itemsProcessed === length) {\r\n                          newWeights.update_time = Weighings_Time\r\n                          resolve({type:Actions.UPDATE, path:DataRefs.WEIGHING, data:newWeights})\r\n                        }\r\n                      }).catch(error => {\r\n                        console.log(error)\r\n                        resolve({type:Actions.UPDATE, path:DataRefs.WEIGHING, data:newWeights})\r\n                      })\r\n                    })\r\n                  }\r\n                })\r\n              }).catch(error => {\r\n                console.log(error)\r\n              })\r\n            })\r\n          }\r\n\r\n        }\r\n        else {\r\n          resolve(null)\r\n        }\r\n      })\r\n    })\r\n  }\r\n  return new Promise((resolve, reject) => {\r\n    console.log(\"Fecth Weights Error\");\r\n    resolve(null)\r\n  })\r\n}\r\n\r\nfunction createWeight({FarmId, PenId, Weight, Quantity, Date}) {\r\n  if (FarmId) {\r\n    var ref = \"farms_data/\" + FarmId + \"/weighings\";\r\n    if (PenId){\r\n      ref += \"/\" + PenId + \"/\"\r\n\r\n      return new Promise((resolve, reject) => {\r\n        const weightRef = database().ref(ref).push()\r\n        const weightId = weightRef.key\r\n        weightRef.set({\r\n          time: Date,\r\n          weight: Weight,\r\n          count: Quantity,\r\n        }).then(() => {\r\n          fetchWeights({FarmId:FarmId, PenId:PenId, DataTime: \"SET\"}).then((weights)=>{\r\n            resolve(weights)\r\n          })\r\n        }).catch(error => {\r\n          console.log(\"Create Weight Error: \", error);\r\n          resolve(null)\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region Comments\r\nfunction fetchComments({FarmId, PenId, limitStart = 0, limitTo = 5}) {\r\n  if (FarmId) {\r\n    var ref = \"farms_data/\" + FarmId + \"/datas/comments\";\r\n    return new Promise((resolve, reject) => {\r\n      if (PenId) {\r\n        ref += \"/\" + PenId\r\n        database().ref(ref).orderByChild('time').limitToLast(limitTo).once('value', snapshot => {\r\n          var comment = {[snapshot.key]:{}}\r\n          snapshot.forEach(c => {\r\n            comment[snapshot.key][c.key] = c.val()\r\n          }) \r\n          resolve({type:Actions.UPDATE, path:DataRefs.COMMENTS, data:comment})\r\n        })\r\n      } else {\r\n        //TODO: ...Comment other than PenId\r\n      }\r\n    })\r\n  }\r\n  return new Promise((resolve, reject) => {\r\n    console.log(\"Fecth Weights Error\");\r\n    resolve(null)\r\n  })\r\n}\r\n\r\nfunction createComment({FarmId, PenId, Action, Data, Quantity, Weight}) {\r\n  if (FarmId) {\r\n    var ref = \"farms_data/\" + FarmId + \"/datas/comments\";\r\n    if (PenId){\r\n      ref += \"/\" + PenId + \"/\"\r\n\r\n      return new Promise((resolve, reject) => {\r\n        const commentRef = database().ref(ref).push()\r\n        const commentId = commentRef.key\r\n\r\n        commentRef.set({\r\n          time: database.ServerValue.TIMESTAMP,\r\n          user: auth().currentUser.email,\r\n          action: Action,\r\n          quantity: Quantity,\r\n          weight: Weight,\r\n          data: Data,\r\n        }).then(() => {\r\n          fetchComments({FarmId:FarmId, PenId:PenId}).then((weights)=>{\r\n            resolve(weights)\r\n          })\r\n        }).catch(error => {\r\n          console.log(\"Create Comment Error: \", error);\r\n          resolve(null)\r\n        })\r\n      })\r\n    } else {\r\n      //TODO: ...Comment other than PenId\r\n    }\r\n  }\r\n  return new Promise((resolve, reject) => {\r\n    console.log(\"Fecth Graph Error\");\r\n    resolve(null)\r\n  })\r\n}\r\n//#endregion\r\n\r\n//#region Graphs\r\nfunction fetchGraphData({FarmId, GraphId, DataTime}) {\r\n  if (FarmId) {\r\n    var ref = \"farms_data/\" + FarmId + \"/graph\";\r\n    ref = ref + \"/\" + GraphId;\r\n    return new Promise((resolve, reject) => {\r\n      CheckDataTime(\"farms_data/\" + FarmId + \"/graph\", DataTime).then((DoFetch) => {\r\n        console.log(\"Doing Graphs fetch\", DoFetch, \"Always..\")\r\n        //if (DoFetch){\r\n\r\n          database().ref(ref).once('value').then((graph) => {\r\n            var Graphs = null\r\n            var GraphVal = graph.val()\r\n            if (GraphVal) {\r\n              if (GraphId) {\r\n                var newGraph = {[graph.key]: GraphVal}\r\n                Graphs = {...Graphs, ...newGraph}\r\n              }else {\r\n                Graphs = {...Graphs, ...GraphVal}\r\n              }\r\n            }\r\n            if (!GraphId) {\r\n              database().ref(\"farms_data/Agrisys/graph\").once('value').then((Agraph) => {\r\n                var AgraphVal = Agraph.val();\r\n                if (AgraphVal) {\r\n                  Graphs = {...AgraphVal, ...Graphs}\r\n                }\r\n                resolve({type:Actions.UPDATE, path:DataRefs.GRAPH, data:Graphs})\r\n              }).catch(error => {\r\n                console.log(\"Get Agrisys graph Error: \", error);\r\n                resolve({type:Actions.UPDATE, path:DataRefs.GRAPH, data:Graphs})\r\n              })\r\n            }else {\r\n              resolve({type:Actions.UPDATE, path:DataRefs.GRAPH, data:Graphs})\r\n            }\r\n          }).catch(error => {\r\n            console.log(\"Get farm graph Error: \", error);\r\n            resolve(null)\r\n          })\r\n\r\n        /*}\r\n        else {\r\n          resolve({type:Actions.UPDATE, path:DataRefs.GRAPH, data:{}})\r\n        }*/\r\n      })\r\n    })\r\n  }\r\n  return new Promise((resolve, reject) => {\r\n    console.log(\"Fecth Graph Error\");\r\n    resolve(null)\r\n  })\r\n}\r\n\r\nfunction updateGraphData({FarmId, Graph}) {\r\n  if (FarmId) {\r\n    var ref = \"farms_data/\" + FarmId + \"/graph\";\r\n    if (Graph.name) {\r\n      ref += \"/\" + Graph.name + \"/\"\r\n      return new Promise((resolve, reject) => {\r\n        database().ref(ref).update({\r\n          data: Graph.data,\r\n          periode: Graph.periode\r\n        }).then(() => {\r\n          fetchGraphData({FarmId: FarmId, GraphId: Graph.name}).then((_Graph)=>{\r\n            resolve(_Graph)\r\n          })\r\n        }).catch(error => {\r\n          console.log(\"Create Graph Error: \", error);\r\n          resolve(null)\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n//#endregion\r\n//#endregion\r\n\r\nexport const firebaseService = {\r\n  //Firebase\r\n  requestUserPermission,\r\n  requestFirebaseToken,\r\n  wrappedAlert,\r\n\r\n  //Firebase Auth (could be moved to fetch / action)\r\n  createFirebaseUserWithemailandpassword,\r\n  signinWithemailandpassword,\r\n  sendResetPassword,\r\n  logoutUser,\r\n  refreshUser,\r\n\r\n  //Commnads\r\n  actionStarting,\r\n}\r\n","import axios from 'axios'\r\nimport { Config, GetToken_URL, GetCheckToken_URL, GetConsumtionData_URL } from '../Config'\r\nimport { is, curryN, gte } from 'ramda'\r\n\r\nconst isWithin = curryN(3, (min, max, value) => {\r\n  const isNumber = is(Number)\r\n  return isNumber(min) && isNumber(max) && isNumber(value) && gte(value, min) && gte(max, value)\r\n})\r\nconst in200s = isWithin(200, 299)\r\n\r\nfunction Create_Axios(baseURL, Acc_Token = null) {\r\n  var Consys_ApiClient;\r\n  if (Acc_Token){\r\n    Consys_ApiClient = axios.create({\r\n      /**\r\n       * Import the config from the App/Config/index.js file\r\n       */\r\n      baseURL: baseURL,\r\n      headers: {\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${Acc_Token}`\r\n      },\r\n      timeout: 3000,\r\n    })\r\n  }else {\r\n    Consys_ApiClient = axios.create({\r\n      /**\r\n       * Import the config from the App/Config/index.js file\r\n       */\r\n      baseURL: baseURL,\r\n      headers: {\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n      timeout: 3000,\r\n    })\r\n  }\r\n  return Consys_ApiClient\r\n}\r\n\r\nfunction getAccessToken(SiteUrl, Ref_Token){\r\n  return new Promise((resolve, reject) => {\r\n    Create_Axios(GetToken_URL(SiteUrl, Ref_Token)).get().then((response) => {\r\n      if (response && response.data && response.data.access_token) {\r\n        resolve(response.data.access_token)\r\n      }else {\r\n        resolve(null)\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nfunction checkRenew_AccessToken(SiteUrl, Ref_Token, Acc_Token=null) {\r\n  return new Promise((resolve, reject) => {\r\n    if (Acc_Token) {\r\n      Create_Axios(GetCheckToken_URL(SiteUrl),Acc_Token).get().then((response) => {\r\n        if (response.status === 200){\r\n          resolve(Acc_Token)\r\n        } else {\r\n          resolve(getAccessToken(SiteUrl, Ref_Token))\r\n        }\r\n      })\r\n    }else {\r\n      resolve(getAccessToken(SiteUrl, Ref_Token))\r\n    }\r\n  })\r\n}\r\n\r\nfunction fetch_AutoPig(SiteUrl, Ref_Token, limit, SystemId=1, starttime=null, offset=null, lastid=null, Acc_Token=null) {\r\n  return new Promise((resolve, reject) => {\r\n    checkRenew_AccessToken(SiteUrl, Ref_Token, Acc_Token).then((Token)=>{\r\n      if (Token) {\r\n        var baseURL = GetConsumtionData_URL(SiteUrl,700, SystemId, offset, limit, starttime, null, lastid)\r\n        Create_Axios(baseURL, Token).get().then((response)=>{\r\n          if (response && response.data) {\r\n            resolve({...response.data, token:Token})\r\n          } else {\r\n            resolve(null)\r\n          }\r\n        }).catch(error => {\r\n          console.log(\"fetch AutoPig Error: \", error);\r\n          resolve(null)\r\n        })\r\n      }else {\r\n        resolve(null)\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nexport const consysService = {\r\n  fetch_AutoPig,\r\n}\r\n","import { Platform, Alert } from 'react-native'\r\nimport {buffers, eventChannel} from 'redux-saga'\r\nimport { put, call, fork, take, cancelled, cancel, actionChannel, race, select } from 'redux-saga/effects'\r\n\r\nimport FirebaseActions from '../../Stores/Firebase/Actions'\r\nimport { firebaseService } from '../../Services/FirebaseService'\r\nimport { consysService } from '../../Services/ConsysService'\r\n\r\nvar auth, messaging, database, firebase;\r\nif (Platform.OS === 'ios' || Platform.OS === 'android') {\r\n  //#region App version imports\r\n  auth = require('@react-native-firebase/auth').default;\r\n  messaging = require( '@react-native-firebase/messaging').default;\r\n  database = require('@react-native-firebase/database').default;\r\n  //#endregion\r\n} else {\r\n  //#region Web Version imports\r\n  var _firebase = require('firebase/app').default;\r\n  require('firebase/auth').default;\r\n  require('firebase/messaging').default;\r\n  require('firebase/database').default;\r\n\r\n  firebase = _firebase;\r\n  \r\n  if (!firebase.apps.length) {\r\n    console.log(\"Starting\")\r\n    var Constants = require('expo-constants').default;\r\n    console.log(Constants.manifest.web.config.firebase)\r\n    _firebase.initializeApp(Constants.manifest.web.config.firebase);\r\n  }\r\n  \r\n  auth = _firebase.auth;\r\n  if (_firebase.messaging.isSupported()) {\r\n    messaging = _firebase.messaging;\r\n  }\r\n  database = _firebase.database;\r\n  console.log(\"Started\")\r\n  //#endregion\r\n}\r\n\r\nimport { UserStates, DataRefs, Actions } from '../../Stores/Firebase/Selectors'\r\n\r\nexport function* firebaseStartup() {\r\n  console.log(\"Starting firebase saga\")\r\n  //Check and setup Firebase and permissions\r\n  yield put(FirebaseActions.setFirebaseError(null))\r\n\r\n  /*console.log(\"test\")\r\n  if (Platform.OS !== 'ios' && Platform.OS !== 'android') {\r\n    console.log(\"Starting\")\r\n    console.log(Constants.manifest.web.config.firebase)\r\n    firebase.initializeApp(Constants.manifest.web.config.firebase);\r\n  }*/\r\n\r\n  const permitError = yield call(firebaseService.requestUserPermission)\r\n  if (permitError) {\r\n    yield put(FirebaseActions.fetchFailure(permitError))\r\n  }else {\r\n    //yield put(FirebaseActions.firebaseIsLoading(true))\r\n    console.log(\"Starting handlers\")\r\n    //yield put(FirebaseActions.firebaseIsLoading(true))\r\n    yield fork(handleAuthState)\r\n    yield fork(handleActions)\r\n    console.log(\"auth & actions\")\r\n\r\n    if (messaging && messaging.isSupported()) {\r\n      if (Platform.OS === 'ios' || Platform.OS === 'android') {\r\n        yield fork(onMessageHandler)\r\n        yield fork(onBackgroundMessageHandler)\r\n      }\r\n      else {\r\n        yield fork(onMessageHandler)\r\n        yield fork(onBackgroundMessageHandler)\r\n      }\r\n    }\r\n\r\n    //var FirebaseToken = yield call(firebaseService.requestFirebaseToken);\r\n    //console.log('Firebase Token: ', FirebaseToken);\r\n    \r\n    //yield fork(testmessage,FirebaseToken)\r\n  }\r\n\r\n  console.log('Firebase Startup : Done');\r\n  if (Platform.OS === 'ios' || Platform.OS === 'android') {\r\n    console.log('Firebase will disable yellow box debug')\r\n    console.disableYellowBox = true;\r\n  }\r\n}\r\n\r\n//Somehow works ??? but should only work at server hosting XMPP, try firebase functions insted if nessasary\r\n//TODO: check this more... SendNotification to device\r\n//it seams to work ... but slow ???\r\n/*function* testmessage(token) {\r\n  if (messaging) {\r\n    ///////\r\n    messaging().sendMessage({\r\n        to: '11111111111111@fcm.googleapis.com',\r\n        messageId: 'test1',\r\n        messageType: 'test2',\r\n        notification: {\r\n            title: 'Foo',\r\n            body: 'Bar',\r\n        }\r\n      });\r\n    ///////\r\n      //to: 'worker@agrisys.dk',\r\n    var message = {\r\n      to: token,\r\n      messageId: 'test1',\r\n      messageType: 'test2',\r\n      notification: {\r\n          title: 'Foo',\r\n          body: 'Bar',\r\n      }\r\n    }\r\n    messaging().sendMessage(message).then(msg => {\r\n      console.log(msg)\r\n    })\r\n  }\r\n}*/\r\n\r\nexport function* handleAuthState() {\r\n  const authChannel = yield eventChannel((emit) => {\r\n    const subscription = auth().onAuthStateChanged((user) => {\r\n      if (user == null){\r\n        emit(\"NONE\")\r\n      }else {\r\n        emit(user)\r\n      }\r\n    })\r\n    return () => {\r\n      subscription()\r\n    };\r\n  }, buffers.expanding(1))\r\n\r\n  try {\r\n    for (;;) {\r\n      const newAuth = yield take(authChannel)\r\n      var firebaseUser = newAuth === \"NONE\"?null:newAuth;\r\n      if (firebaseUser) {\r\n        const userData = yield call(firebaseService.actionStarting, DataRefs.USERSDATA, Actions.FETCH, {UserId: firebaseUser.uid})\r\n        if (userData.data) {\r\n          firebaseUser.farms = userData.data.data.farms\r\n          firebaseUser.state = userData.data.data.state\r\n          yield put(FirebaseActions.dataFetchSuccess({type:Actions.UPDATE, path:DataRefs.FIREBASEUSER, data: firebaseUser}))\r\n          //yield put(FirebaseActions.dataFetchSuccess({type:Actions.UPDATE, path:DataRefs.USERSDATA, data: userData.data}))    //TODO: mabye moved to firebaseUser..\r\n        }\r\n      } else {\r\n        yield put(FirebaseActions.dataFetchSuccess({type:Actions.UPDATE, path:DataRefs.FIREBASEUSER, data: {}}))\r\n        //yield put(FirebaseActions.dataFetchSuccess({type:Actions.UPDATE, path:DataRefs.USERSDATA, data: {}}))    //TODO: mabye moved to firebaseUser..\r\n      }\r\n    }\r\n  } finally {\r\n    if (yield cancelled()) {\r\n      authChannel.close()\r\n    }\r\n  }\r\n}\r\n\r\nexport function* handleActions() {\r\n  const channel = yield actionChannel([\r\n    'ACTION_STARTING',\r\n  ])\r\n\r\n  for (;;) {\r\n    const action: ACTION_STARTING = yield take(channel)\r\n\r\n    //console.log(action.ref, action.action, action.params)\r\n\r\n    if (Object.values(Actions).includes(action.action)) {\r\n      if (action.ref === DataRefs.CONSYS) {\r\n        const FirebaseUser = yield select((state) => state.firebase.firebaseUser);\r\n        if (FirebaseUser && FirebaseUser.farms) {\r\n          const FarmsData = yield select((state) => state.firebase.localDataStore.farms);\r\n          if (FarmsData && FarmsData[Object.keys(FirebaseUser.farms)[0]]) {\r\n            const FarmData = FarmsData[Object.keys(FirebaseUser.farms)[0]]\r\n            if (FarmData.site && FarmData.refToken) {\r\n              var Token = FarmData.token?FarmData.token:null\r\n              var Params = action.params\r\n\r\n              const ScaleData = yield call(consysService.fetch_AutoPig, FarmData.site,FarmData.refToken, Params.limit, Params.sysId, Params.start, Params.offset, Params.lastId, Token)\r\n              if (ScaleData.result === \"OK\"){\r\n                console.log(ScaleData)\r\n                if (ScaleData.token) {\r\n                  FarmData.token = ScaleData.token\r\n                  yield put(FirebaseActions.dataFetchSuccess({type:Actions.UPDATE, path:DataRefs.FARMS, data: {FarmData}}))\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      else if (Object.values(DataRefs).includes(action.ref)) {\r\n        const FirebaseUser = yield select((state) => state.firebase.firebaseUser);\r\n        if (action.action != Actions.SIGN && FirebaseUser && FirebaseUser.farms) {\r\n          if (!action.params) action.params = {}\r\n          if (!action.params.FarmId) action.params.FarmId = [Object.keys(FirebaseUser.farms)[0]]\r\n        }\r\n\r\n        const NewData = yield call(firebaseService.actionStarting, action.ref, action.action, action.params)\r\n        if (NewData && (NewData.error || NewData.viewError)) {\r\n          yield put(FirebaseActions.fetchFailure(NewData.error))\r\n          yield put(FirebaseActions.setViewError(NewData.viewError))\r\n        } else {\r\n          //console.log(\"resCall: \", NewData)\r\n          if (NewData && NewData.hasOwnProperty(\"type\") && NewData.hasOwnProperty(\"path\") && NewData.hasOwnProperty(\"data\")) {\r\n            yield put(FirebaseActions.dataFetchSuccess(NewData))\r\n          }\r\n          else {\r\n            //console.log(\"Old Path: \", action.ref, action.action, params, NewData)\r\n            yield put(FirebaseActions.fetchSuccess({localDataStore:NewData}))\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// Notification Handler for then App is in Foreground State\r\nexport function* onMessageHandler() {\r\n  if (messaging) {\r\n    const onMessageChannel = yield eventChannel((emit) => {\r\n      const messageListener = messaging().onMessage((remoteMessage) => {\r\n        //console.log(\"message ? \", remoteMessage);\r\n        emit(remoteMessage);\r\n      });\r\n      return () => {\r\n        messageListener();\r\n      };\r\n    }, buffers.expanding(1));\r\n\r\n    try {\r\n      for (;;) {\r\n        const remoteMessage = yield take(onMessageChannel)\r\n        console.log(\"New Firebase message: \", remoteMessage)\r\n        if (remoteMessage.notification && remoteMessage.notification.title && remoteMessage.notification.body){\r\n          yield call(firebaseService.wrappedAlert, remoteMessage.notification.title, remoteMessage.notification.body, \"Ok\", false)\r\n        }else {\r\n          console.log(\"New Firebase data message: \", remoteMessage)\r\n        }\r\n      }\r\n    } finally {\r\n      if (yield cancelled()) {\r\n        onMessageChannel.close()\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// Notification Handler for then App is in Background & Quit state\r\nexport function* onBackgroundMessageHandler() {\r\n  if ((Platform.OS === 'ios' || Platform.OS === 'android') && messaging) {\r\n    // Assume a message-notification contains a \"type\" property in the data payload of the screen to open\r\n    messaging().onNotificationOpenedApp(remoteMessage => {\r\n      console.log(\r\n        'Notification caused app to open from background state:',\r\n        remoteMessage.notification,\r\n      );\r\n      //NavigationService.navigate(remoteMessage.data.type); // this is not view..\r\n    });\r\n\r\n    const onMessageChannel = yield eventChannel((emit) => {\r\n      messaging().setBackgroundMessageHandler((remoteMessage) => {\r\n        emit(remoteMessage);\r\n      });\r\n      return () => {\r\n        //\r\n      };\r\n    }, buffers.expanding(1));\r\n\r\n    try {\r\n      for (;;) {\r\n        const remoteMessage = yield take(onMessageChannel)\r\n        console.log(\"New background Firebase message: \", remoteMessage)\r\n      }\r\n    } finally {\r\n      if (yield cancelled()) {\r\n        onMessageChannel.close()\r\n      }\r\n    }\r\n  }\r\n}","import { takeLatest, all, take } from 'redux-saga/effects'\r\n\r\nimport { StartupTypes } from '../Stores/Startup/Actions'\r\nimport { ExampleTypes } from '../Stores/Example/Actions'\r\nimport { DeviceTypes } from '../Stores/Device/Actions'\r\nimport { FirebaseTypes } from '../Stores/Firebase/Actions'\r\n\r\nimport * as StartupSaga from './StartupSaga'\r\nimport * as ExampleSaga from './Example/ExampleSaga'\r\nimport * as DeviceSaga from './Device/DeviceSaga'\r\nimport * as FirebaseSaga from './Firebase/FirebaseSaga'\r\n\r\nexport default function* root(sagaArgs) {\r\n  yield all([\r\n    /**\r\n     * @see https://redux-saga.js.org/docs/basics/UsingSagaHelpers.html\r\n     */\r\n    // Run the startup saga when the application starts\r\n    takeLatest(StartupTypes.STARTUP, StartupSaga.startup), //Initer\r\n    \r\n\r\n    //Example\r\n    takeLatest(ExampleTypes.FETCH_USER, ExampleSaga.fetchUser), // Call `fetchUser()` when a `FETCH_USER` action is triggered\r\n    \r\n    //Device Main Saga\r\n    takeLatest(DeviceTypes.DEVICE_STARTUP, DeviceSaga.deviceStartup), //Initer\r\n\r\n    takeLatest(DeviceTypes.CONNECT_DEVICE, DeviceSaga.connectDevice),\r\n    takeLatest(DeviceTypes.DISCONNECT_DEVICE, DeviceSaga.disconnectDevice),\r\n    takeLatest(DeviceTypes.READ_DEVICE_DATA, DeviceSaga.readDeviceData),\r\n\r\n    takeLatest(DeviceTypes.FETCH_DEVICE, DeviceSaga.fetchDevice, sagaArgs),\r\n\r\n    //BLE Saga\r\n    takeLatest(DeviceTypes.BLE_STARTUP, DeviceSaga.BLE.bleStartup, sagaArgs), //Initer\r\n    takeLatest(DeviceTypes.START_BLE_SCAN, DeviceSaga.BLE.startBleScan),\r\n    takeLatest(DeviceTypes.STOP_BLE_SCAN, DeviceSaga.BLE.stopBleScan),\r\n    takeLatest(DeviceTypes.READ_BLE_DEVICE_DATA, DeviceSaga.BLE.readBleDeviceData, sagaArgs),\r\n    \r\n    //Android BlueThooth Saga\r\n    takeLatest(DeviceTypes.BLUETOOTH_STARTUP, DeviceSaga.BlueTooth.bluetoothStartup, sagaArgs), //Initer\r\n    takeLatest(DeviceTypes.START_BLUETOOTH_SCAN, DeviceSaga.BlueTooth.startBluetoothScan),\r\n    takeLatest(DeviceTypes.STOP_BLUETOOTH_SCAN, DeviceSaga.BlueTooth.stopBluetoothScan),\r\n    takeLatest(DeviceTypes.BLUETOOTH_SCAN_ABLE, DeviceSaga.BlueTooth.bluetoothScanAble, sagaArgs),\r\n    takeLatest(DeviceTypes.READ_BLUE_DEVICE_DATA, DeviceSaga.BlueTooth.readBlueDeviceData, sagaArgs),\r\n    \r\n\r\n    //Firebase Saga\r\n    takeLatest(FirebaseTypes.FIREBASE_STARTUP, FirebaseSaga.firebaseStartup), //Initer\r\n  ])\r\n}\r\n","/**\r\n * The initial values for the redux state.\r\n */\r\nexport const INITIAL_STATE = {\r\n  user: {},\r\n  userIsLoading: false,\r\n  userErrorMessage: null,\r\n}\r\n","/**\r\n * Reducers specify how the application's state changes in response to actions sent to the store.\r\n *\r\n * @see https://redux.js.org/basics/reducers\r\n */\r\n\r\nimport { INITIAL_STATE } from './InitialState'\r\nimport { createReducer } from 'reduxsauce'\r\nimport { ExampleTypes } from './Actions'\r\n\r\nexport const fetchUserLoading = (state) => ({\r\n  ...state,\r\n  userIsLoading: true,\r\n  userErrorMessage: null,\r\n})\r\n\r\nexport const fetchUserSuccess = (state, { user }) => ({\r\n  ...state,\r\n  user: user,\r\n  userIsLoading: false,\r\n  userErrorMessage: null,\r\n})\r\n\r\nexport const fetchUserFailure = (state, { errorMessage }) => ({\r\n  ...state,\r\n  user: {},\r\n  userIsLoading: false,\r\n  userErrorMessage: errorMessage,\r\n})\r\n\r\n/**\r\n * @see https://github.com/infinitered/reduxsauce#createreducer\r\n */\r\nexport const reducer = createReducer(INITIAL_STATE, {\r\n  [ExampleTypes.FETCH_USER_LOADING]: fetchUserLoading,\r\n  [ExampleTypes.FETCH_USER_SUCCESS]: fetchUserSuccess,\r\n  [ExampleTypes.FETCH_USER_FAILURE]: fetchUserFailure,\r\n})\r\n","import { ConnectionState, ConnectionMethode, ScannerState } from '../Selectors'\r\nimport { State } from 'react-native-ble-plx';\r\n\r\n/**\r\n * The initial values for the redux state.\r\n */\r\nexport const INITIAL_STATE = {\r\n  //Managers States\r\n  bleState: State.PoweredOff, // status of the BLE manger\r\n}","import { ConnectionState, ConnectionMethode, ScannerState } from '../Selectors'\r\nimport { State } from 'react-native-ble-plx';\r\n\r\n/**\r\n * The initial values for the redux state.\r\n */\r\nexport const INITIAL_STATE = {\r\n  //Managers States\r\n}","import { ConnectionState, ConnectionMethode, ScannerState } from './Selectors'\r\nimport { State } from 'react-native-ble-plx';\r\n\r\n//BLE Saga's\r\nimport { INITIAL_STATE as BLE_INITIAL_STATE } from './BLE/InitialState'\r\n//BlueTooth Saga's\r\nimport { INITIAL_STATE as BLUETOOTH_INITIAL_STATE} from './BlueTooth/InitialState'\r\n\r\n/**\r\n * The initial values for the redux state.\r\n */\r\nexport const INITIAL_STATE = {\r\n  //Device Main Info\r\n  deviceIsLoading: false,\r\n  deviceErrorMessage: null,\r\n\r\n  //Device list Info... (only one ???)\r\n  scannerState: ScannerState.IDLE, // status of BLE scanner\r\n  DeviceList: [], //An Array of Discovered Devices\r\n\r\n  //Connection info...\r\n  connectedDevice: {}, // the current connected device element\r\n  connectionState: ConnectionState.DISCONNECTED, // the status of the current device connection\r\n  connectionMethode: ConnectionMethode.NONE,  //the current connected Methode\r\n\r\n  deviceData: {}, // Something\r\n\r\n  //BLE specefic\r\n  ...BLE_INITIAL_STATE,\r\n  //BlueTooth specefic\r\n  ...BLUETOOTH_INITIAL_STATE,\r\n}","/**\r\n * Reducers specify how the application's state changes in response to actions sent to the store.\r\n *\r\n * @see https://redux.js.org/basics/reducers\r\n */\r\n\r\nimport { createReducer } from 'reduxsauce'\r\n\r\nimport { ConnectionState, ConnectionMethode } from '../Selectors'\r\nimport { BleTypes } from './Actions'\r\n\r\nimport { INITIAL_STATE } from './InitialState'\r\n\r\nexport const bleStateUpdated = (state, {bleState}) => {\r\n  return({\r\n    ...state,\r\n    bleState: bleState,\r\n  })\r\n}\r\n\r\n/**\r\n * @see https://github.com/infinitered/reduxsauce#createreducer\r\n */\r\nexport const HANDLERS = {\r\n  //Managers...\r\n  [BleTypes.BLE_STATE_UPDATED]: bleStateUpdated,\r\n}\r\n\r\nexport const reducer = createReducer(INITIAL_STATE, HANDLERS)\r\n","/**\r\n * Reducers specify how the application's state changes in response to actions sent to the store.\r\n *\r\n * @see https://redux.js.org/basics/reducers\r\n */\r\n\r\nimport { createReducer } from 'reduxsauce'\r\n\r\nimport { ConnectionState, ConnectionMethode } from '../Selectors'\r\nimport { BluetoothTypes } from './Actions'\r\n\r\nimport { INITIAL_STATE } from './InitialState'\r\n\r\n/**\r\n * @see https://github.com/infinitered/reduxsauce#createreducer\r\n */\r\nexport const HANDLERS = {\r\n  //Managers...\r\n}\r\n\r\nexport const reducer = createReducer(INITIAL_STATE, HANDLERS)\r\n","/**\r\n * Reducers specify how the application's state changes in response to actions sent to the store.\r\n *\r\n * @see https://redux.js.org/basics/reducers\r\n */\r\n\r\nimport { createReducer } from 'reduxsauce'\r\n\r\nimport { ConnectionState, ConnectionMethode } from './Selectors'\r\nimport { DeviceTypes } from './Actions'\r\n\r\nimport { INITIAL_STATE } from './InitialState'\r\n\r\n//BLE Saga's\r\nimport * as BLEReducers from './BLE/Reducers'\r\n//BlueTooth Saga's\r\nimport * as BluetoothReducers from './BlueTooth/Reducers'\r\n\r\nexport const setDeviceError = (state, { errorMessage }) => ({\r\n  ...state,\r\n  deviceErrorMessage: errorMessage,\r\n})\r\n\r\nexport const scannerStateUpdated = (state, {scannerState}) => {\r\n  return({\r\n    ...state,\r\n    scannerState: scannerState,\r\n  })\r\n}\r\n\r\nexport const addDevice = (state, {device}) => {\r\n  if (state.DeviceList.some(Device => Device.id === device.id )) { //&& device.isConnectable)){\r\n    return({...state});\r\n  } else {\r\n    //device._manager = null; // Type.script Stringify ... not allowing function callback (fix see CreateStore.js)\r\n    var NewList = [...state.DeviceList];\r\n    NewList.push(device);\r\n\r\n    return({\r\n      ...state,\r\n      DeviceList: NewList,\r\n    });\r\n  }\r\n}\r\n\r\nexport const removeDevice = (state, {device}) => {\r\n  var NewList = [...state.DeviceList];\r\n  for( var i = 0; i < NewList.length; i++){ \r\n    if ( NewList[i] === device) {\r\n      NewList.splice(i, 1); \r\n    }\r\n  }\r\n\r\n  return ({\r\n    ...state,\r\n    DeviceList: NewList,\r\n  });\r\n}\r\n\r\nexport const clearDevices = (state) => ({\r\n  ...state,\r\n  DeviceList: [],\r\n  deviceData: {}\r\n})\r\n\r\nexport const connectedDeviceUpdated = (state, {connectedDevice}) => {\r\n  if (!connectedDevice) {\r\n    return ({\r\n      ...state,\r\n      connectedDevice: connectedDevice,\r\n      //deviceData: {}\r\n    })\r\n  } else {\r\n    return ({\r\n      ...state,\r\n      connectedDevice: connectedDevice\r\n    })\r\n  }\r\n}\r\n\r\n// Connections *******************************************\r\nexport const connectionStateUpdated = (state, {connectionState}) => ({\r\n  ...state,\r\n  connectionState: connectionState\r\n})\r\nexport const connectionMethodeUpdated = (state, {connectionMethode}) => ({\r\n  ...state,\r\n  connectionMethode: connectionMethode\r\n})\r\n\r\nexport const setDeviceData = (state, {data}) => ({\r\n  ...state,\r\n  deviceData: data\r\n})\r\nexport const updateDeviceData = (state, {data}) => {\r\n  const newData = {...state.deviceData, ...data}\r\n  return({\r\n  ...state,\r\n  deviceData: newData\r\n})}\r\n\r\n/**\r\n * @see https://github.com/infinitered/reduxsauce#createreducer\r\n */\r\nexport const HANDLERS = {\r\n  //Response...\r\n  [DeviceTypes.SET_DEVICE_ERROR]: setDeviceError,\r\n  \r\n  //Managers...\r\n  [DeviceTypes.SCANNER_STATE_UPDATED]: scannerStateUpdated,\r\n\r\n  [DeviceTypes.ADD_DEVICE]: addDevice,\r\n  [DeviceTypes.REMOVE_DEVICE]: removeDevice,\r\n  [DeviceTypes.CLEAR_DEVICES]: clearDevices,\r\n\r\n  [DeviceTypes.CONNECTED_DEVICE_UPDATED]: connectedDeviceUpdated,\r\n  \r\n  //Connection...\r\n  [DeviceTypes.CONNECTION_STATE_UPDATED]: connectionStateUpdated,\r\n  [DeviceTypes.CONNECTION_METHODE_UPDATED]: connectionMethodeUpdated,\r\n\r\n  //Data...\r\n  [DeviceTypes.SET_DEVICE_DATA]: setDeviceData,\r\n  [DeviceTypes.UPDATE_DEVICE_DATA]: updateDeviceData,\r\n\r\n  //BLE Saga\r\n  ...BLEReducers.HANDLERS,\r\n\r\n  //Android BlueTooth Saga\r\n  ...BluetoothReducers.HANDLERS,\r\n}\r\n\r\nexport const reducer = createReducer(INITIAL_STATE, HANDLERS)","/**\r\n * Reducers specify how the application's state changes in response to actions sent to the store.\r\n *\r\n * @see https://redux.js.org/basics/reducers\r\n */\r\n\r\nimport { createReducer } from 'reduxsauce'\r\nimport { append } from 'funcadelic';\r\n\r\nimport { Actions, DataRefs } from './Selectors'\r\nimport { FirebaseTypes } from './Actions'\r\n\r\nimport { INITIAL_STATE } from './InitialState'\r\n\r\nexport const firebaseIsLoading = (state, { loadingstate }) => ({\r\n  ...state,\r\n  firebaseIsLoading: loadingstate,\r\n})\r\n\r\nexport const setFirebaseError = (state, { errorMessage }) => ({\r\n  ...state,\r\n  firebaseErrorMessage: errorMessage,\r\n})\r\n\r\nexport const setViewError = (state, { errorMessage }) => {\r\n  return({\r\n    ...state,\r\n    viewError: errorMessage,\r\n  })\r\n}\r\n\r\nexport const viewIsLoading = (state, { loadingstate }) => ({\r\n  ...state,\r\n  viewIsLoading: loadingstate,\r\n})\r\n\r\nexport const setCurrentData = (state, {data}) => {\r\n  return({\r\n    ...state,\r\n    currentData: data\r\n  })\r\n}\r\n\r\nfunction IDGenerate(){\r\n  return Math.random().toString(36).substr(2, 9);\r\n}\r\n\r\nexport const actionStarting = (state) => ({\r\n  ...state,\r\n  //firebaseIsLoading: true,\r\n  firebaseErrorMessage: null,\r\n})\r\n\r\nexport const fetchStarting = (state) => ({\r\n  ...state,\r\n  //firebaseIsLoading: true,\r\n  firebaseErrorMessage: null,\r\n})\r\n\r\nfunction mergeDeep(target, source) {\r\n  const isObject = (obj) => obj && typeof obj === 'object';\r\n\r\n  if (!isObject(target) || !isObject(source)) {\r\n    return source;\r\n  }\r\n\r\n  Object.keys(source).forEach(key => {\r\n    const targetValue = target[key];\r\n    const sourceValue = source[key];\r\n\r\n    if (Array.isArray(targetValue) && Array.isArray(sourceValue)) {\r\n      //target[key] = targetValue.concat(sourceValue);  //Mercing value of arrays would creates doubles.. like curve data..\r\n    } else if (isObject(targetValue) && isObject(sourceValue)) {\r\n      target[key] = mergeDeep(Object.assign({}, targetValue), sourceValue);\r\n    } else {\r\n      target[key] = sourceValue;\r\n    }\r\n  });\r\n\r\n  return target;\r\n}\r\n\r\nexport const dataFetchSuccess = (state, { params }) => {\r\n  const {type, path, data} = params\r\n  var NewDataStore = state.localDataStore;\r\n  var NewFirebaseUser = {...state.firebaseUser};\r\n  switch(type) {\r\n    case Actions.UPDATE:\r\n    case Actions.ADD:\r\n      var newData = {...data}\r\n      if (path === DataRefs.FIREBASEUSER) {\r\n        if (data && data.data) newData = {...data.data}\r\n        if (data && data._user) {\r\n          Object.keys(data._user).forEach(element => {\r\n            newData[element] = data._user[element]\r\n          })\r\n          delete newData._user\r\n          delete newData._auth\r\n        }\r\n        if (newData && Object.keys(newData).length > 0) {\r\n          var Values = [\"displayName\", \"name\", \"lastN\", \"email\", \"emailVerified\", \"address\", \"country\", \"farms\", \"isAnonymous\", \"phoneNumber\", \"photoURL\", \"refreshToken\", \"state\", \"uid\"]\r\n          Object.keys(newData).forEach(element => {\r\n            for (var index = 0; index < Values.length; index++) {\r\n              if (Values[index] === element) {\r\n                NewFirebaseUser[element] = newData[element]\r\n                break;\r\n              }\r\n            }\r\n          });\r\n        }else {\r\n          NewFirebaseUser = newData;\r\n        }\r\n      }\r\n      if (!data) break;\r\n      switch(path){\r\n        case DataRefs.FIREBASEUSER:\r\n          //Done above\r\n          break;\r\n        case DataRefs.USERSDATA:\r\n          Object.keys(newData).forEach(element => {\r\n            if (!NewDataStore.userData) NewDataStore.userData = {};\r\n            NewDataStore.userData[element] = newData[element]\r\n          });\r\n          break;\r\n        case DataRefs.USERS:\r\n          if (!NewDataStore.users) NewDataStore.users = {};\r\n          if (data.data) newData = data.data\r\n          if (newData.users) newData = newData.users\r\n          Object.keys(newData).forEach(element => {\r\n            NewDataStore.users[element] = newData[element]\r\n          });\r\n          break;\r\n        case DataRefs.FARMS:\r\n          if (!NewDataStore.farms) NewDataStore.farms = {};\r\n          if (data.farms) newData = data.farms\r\n          Object.keys(newData).forEach(element => {\r\n            NewDataStore.farms[element] = newData[element]\r\n          });\r\n          break;\r\n        case DataRefs.BATCHS:\r\n          if (!NewDataStore.batchs) NewDataStore.batchs = {};\r\n          if (data.batchs) newData = data.batchs\r\n          Object.keys(newData).forEach(element => {\r\n            NewDataStore.batchs[element] = newData[element]\r\n          });\r\n          break;\r\n        case DataRefs.SECTIONS:\r\n          if (!NewDataStore.sections) NewDataStore.sections = {};\r\n          if (data.sections) newData = data.sections\r\n          Object.keys(newData).forEach(element => {\r\n            NewDataStore.sections[element] = newData[element]\r\n          });\r\n          break;\r\n        case DataRefs.PENS:\r\n          if (!NewDataStore.pens) NewDataStore.pens = {};\r\n          if (data.pens) newData = data.pens\r\n          Object.keys(newData).forEach(element => {\r\n            NewDataStore.pens[element] = newData[element]\r\n          });\r\n          break;\r\n        case DataRefs.PIGS:\r\n          if (!NewDataStore.pigs) NewDataStore.pigs = {};\r\n          if (data.pigs) newData = data.pigs\r\n          Object.keys(newData).forEach(element => {\r\n            NewDataStore.pigs[element] = newData[element]\r\n          });\r\n          break;\r\n        case DataRefs.COMMENTS:\r\n          if (!NewDataStore.comments) NewDataStore.comments = {};\r\n          if (data.comments) newData = data.comments\r\n          Object.keys(newData).forEach(element => {\r\n            NewDataStore.comments[element] = newData[element]\r\n          });\r\n          break;\r\n        case DataRefs.GRAPH:\r\n          if (!NewDataStore.graphs) NewDataStore.graphs = {};\r\n          if (data.graphs) newData = data.graphs\r\n          Object.keys(newData).forEach(element => {\r\n            NewDataStore.graphs[element] = newData[element]\r\n          });\r\n          break;\r\n        case DataRefs.WEIGHING:\r\n          if (!NewDataStore.weighings) NewDataStore.weighings = {};\r\n          if (data.weighings) newData = data.weighings\r\n          Object.keys(newData).forEach(element => {\r\n            NewDataStore.weighings[element] = newData[element]\r\n          });\r\n          break;\r\n      }\r\n      //console.log(path, data)\r\n      break;\r\n    case Actions.CLEAR:\r\n      switch(path){\r\n        case DataRefs.USERS:\r\n          if (!NewDataStore.userData) NewDataStore.userData = {};\r\n          NewDataStore.userData.action = \"CLEAR\";\r\n          break;\r\n        case DataRefs.USERSDATA:\r\n          console.log(\"CLEAR\")\r\n          if (NewDataStore.batchs) NewDataStore.batchs = {}\r\n          if (NewDataStore.sections) NewDataStore.sections = {}\r\n          if (NewDataStore.pens) NewDataStore.pens = {}\r\n          if (NewDataStore.pigs) NewDataStore.pigs = {}\r\n          if (NewDataStore.graphs) NewDataStore.graphs = {}\r\n          if (NewDataStore.weighings) NewDataStore.weighings = {}\r\n          if (NewDataStore.userData && NewDataStore.userData.action) {\r\n            NewDataStore.userData.action = {}\r\n            //NewDataStore.userData = {}\r\n          }\r\n          break;\r\n      }\r\n      break;\r\n    default:\r\n      console.log(\"DataFetch Not created / default\")\r\n      break;\r\n  }\r\n  return({\r\n    ...state,\r\n    firebaseUser: NewFirebaseUser,\r\n    localDataStore: NewDataStore,\r\n    firebaseIsLoading: false,\r\n    firebaseErrorMessage: null,\r\n    viewIsLoading: false,\r\n  })\r\n}\r\n\r\nexport const fetchSuccess = (state, { data }) => {\r\n  var newlocalDataStore = {...state.localDataStore}\r\n  var newState = {...state}\r\n\r\n  if (data) {\r\n    let {localDataStore, ..._newState} = data;\r\n\r\n    if (localDataStore) {\r\n      if (Object.keys(localDataStore).length !== 0) {\r\n        newlocalDataStore = mergeDeep(localDataStore, newlocalDataStore)\r\n      }\r\n      else {\r\n        newlocalDataStore = {...localDataStore}\r\n      }\r\n    }\r\n    newState = append(state,_newState)\r\n  }\r\n  return({\r\n    ...newState,\r\n    localDataStore: newlocalDataStore,\r\n    firebaseIsLoading: false,\r\n    firebaseErrorMessage: null,\r\n    viewIsLoading: false,\r\n  })\r\n}\r\n\r\nexport const fetchFailure = (state, { errorMessage }) => ({\r\n  ...state,\r\n  firebaseIsLoading: false,\r\n  firebaseErrorMessage: errorMessage,\r\n  viewIsLoading: false,\r\n})\r\n\r\n/**\r\n * @see https://github.com/infinitered/reduxsauce#createreducer\r\n */\r\nexport const HANDLERS = {\r\n  //Response...\r\n  [FirebaseTypes.FIREBASE_IS_LOADING]: firebaseIsLoading,\r\n  [FirebaseTypes.SET_FIREBASE_ERROR]: setFirebaseError,\r\n\r\n  [FirebaseTypes.SET_VIEW_ERROR]: setViewError,\r\n  [FirebaseTypes.VIEW_IS_LOADING]: viewIsLoading,\r\n\r\n  [FirebaseTypes.SET_CURRENT_DATA]: setCurrentData,\r\n\r\n  [FirebaseTypes.ACTION_STARTING]: actionStarting,\r\n  [FirebaseTypes.FETCH_STARTING]: fetchStarting,\r\n  [FirebaseTypes.DATA_FETCH_SUCCESS]: dataFetchSuccess,\r\n  [FirebaseTypes.FETCH_SUCCESS]: fetchSuccess,\r\n  [FirebaseTypes.FETCH_FAILURE]: fetchFailure,\r\n}\r\n\r\nexport const reducer = createReducer(INITIAL_STATE, HANDLERS)","import { UserStates } from './Selectors'\r\n\r\n/**\r\n * The initial values for the redux state.\r\n */\r\nexport const INITIAL_STATE = {\r\n  firebaseIsLoading: false,     //SystemLoading\r\n  firebaseErrorMessage: null,   //SystemError\r\n\r\n  firebaseUser: null,           //UserData\r\n\r\n  localDataStore: {},           //Full DataStore\r\n  currentData: null,            //State DataStore\r\n\r\n  viewIsLoading: false,         //View / state - waiting for action\r\n  viewError: null,              //View / state - error display\r\n}","/**\r\n * This file contains the application's colors.\r\n *\r\n * Define color here instead of duplicating them throughout the components.\r\n * That allows to change them more easily later on.\r\n */\r\n\r\nexport default {\r\n  transparent: 'rgba(0,0,0,0)',\r\n  white: '#ffffff',\r\n  gray: '#a6a6a6',\r\n\r\n  text: '#4a4a49',\r\n  secountText: '#ffffff',\r\n\r\n  primary: '#a3b9cf',\r\n\r\n  success: '#03a489',\r\n  error: '#dc3545',\r\n  overest: '#4cafea',\r\n  pigpink: '#FFAA95',\r\n\r\n  input: '#86939e',\r\n\r\n  AgriGreen: '#03a489',\r\n  AgriDarkblue: '#4463ab',\r\n  AgriLightblue: '#a3b9cf',\r\n  AgriDark: '#4a4a49',\r\n}\r\n","import { StyleSheet } from 'react-native'\r\n\r\nconst size = {\r\n  h1: 38,\r\n  h2: 34,\r\n  h3: 30,\r\n  input: 18,\r\n  regular: 17,\r\n  medium: 14,\r\n  small: 12,\r\n}\r\n\r\nexport default {\r\n  h1: {\r\n    fontSize: size.h1,\r\n  },\r\n  h2: {\r\n    fontSize: size.h2,\r\n  },\r\n  h3: {\r\n    fontSize: size.h3,\r\n  },\r\n  normal: {\r\n    fontSize: size.regular,\r\n  },\r\n}","/**\r\n * This file contains metric values that are global to the application.\r\n */\r\n\r\n// Examples of metrics you can define:\r\nexport const tiny = 5\r\nexport const small = tiny * 2 // 10\r\nexport const normal = tiny * 3 // 15\r\nexport const medium = normal * 2 // 30\r\n\r\nexport default {\r\n  tiny,\r\n  small,\r\n  normal,\r\n  medium,\r\n  \r\n  tinyBottomMargin: {\r\n    marginBottom: tiny,\r\n  },\r\n  smallBottomMargin: {\r\n    marginBottom: small,\r\n  },\r\n  bottomMargin: {\r\n    marginBottom: normal,\r\n  },\r\n  mediumBottomMargin: {\r\n    marginBottom: medium,\r\n  },\r\n\r\n  tinyVerticalMargin: {\r\n    marginVertical: tiny,\r\n  },\r\n  smallVerticalMargin: {\r\n    marginVertical: small,\r\n  },\r\n  verticalMargin: {\r\n    marginVertical: normal,\r\n  },\r\n  mediumVerticalMargin: {\r\n    marginVertical: medium,\r\n  },\r\n\r\n  tinyHorizontalMargin: {\r\n    marginHorizontal: tiny,\r\n  },\r\n  smallHorizontalMargin: {\r\n    marginHorizontal: small,\r\n  },\r\n  horizontalMargin: {\r\n    marginHorizontal: normal,\r\n  },\r\n  mediumHorizontalMargin: {\r\n    marginHorizontal: medium,\r\n  },\r\n\r\n  tinyHorizontalPadding: {\r\n    paddingHorizontal: tiny,\r\n  },\r\n  smallHorizontalPadding: {\r\n    paddingHorizontal: small,\r\n  },\r\n  horizontalPadding: {\r\n    paddingHorizontal: normal,\r\n  },\r\n  mediumHorizontalPadding: {\r\n    paddingHorizontal: medium,\r\n  },\r\n\r\n  tinyVerticalPadding: {\r\n    paddingVertical: tiny,\r\n  },\r\n  smallVerticalPadding: {\r\n    paddingVertical: small,\r\n  },\r\n  verticalPadding: {\r\n    paddingVertical: normal,\r\n  },\r\n  mediumVerticalPadding: {\r\n    paddingVertical: medium,\r\n  },\r\n}\r\n","/**\r\n * Images should be stored in the `App/Images` directory and referenced using variables defined here.\r\n */\r\n\r\nexport default {\r\n  Home: require('../Assets/Images/Home.png'),\r\n\r\n  DashBoard: require('../Assets/Images/Dashboard.png'),\r\n  System: require('../Assets/Images/System.png'),\r\n  Curves: require('../Assets/Images/Feed-Curves.png'),\r\n  GCurves: require('../Assets/Images/Growth-curve.png'),\r\n\r\n  User: require('../Assets/Images/User.png'),\r\n  Sow: require('../Assets/Images/Sow.png'),\r\n  Section: require('../Assets/Images/Section.png'),\r\n  Pens: require('../Assets/Images/Area_Colour.png'),\r\n  AutoPig: require('../Assets/Images/AutoPig.png'),\r\n  Feed: require('../Assets/Images/Feed-Components.png'),\r\n\r\n  Haxa_globe: require('../Assets/Images/Hexagon-globe.png'),\r\n  Hexa_icon: require('../Assets/Images/Hexa-icon.png'),\r\n  Logo: require('../Assets/Images/Logo.png'),\r\n\r\n  logo: require('../Assets/Images/TOM.png'),\r\n}\r\n","import { StyleSheet } from 'react-native'\r\nimport { Colors, Fonts, Metrics, } from '../Theme'\r\n\r\nexport default {\r\n  //********************** col sets */\r\n  column: {\r\n    flexDirection: 'column',\r\n  },\r\n  colMain: {\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n  },\r\n  colCenter: {\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  colCross: {\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  columnReverse: {\r\n    flexDirection: 'column-reverse',\r\n  },\r\n\r\n  //********************** Row sets */\r\n  row: {\r\n    flexDirection: 'row',\r\n  },\r\n  rowMain: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n  },\r\n  rowCenter: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  rowCross: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n  },\r\n  rowReverse: {\r\n    flexDirection: 'row-reverse',\r\n  },\r\n\r\n  //********************** Cross sets */\r\n  center: {\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  crossCenter: {\r\n    alignItems: 'center',\r\n  },\r\n  crossEnd: {\r\n    alignItems: 'flex-end',\r\n  },\r\n  crossStart: {\r\n    alignItems: 'flex-start',\r\n  },\r\n  crossStretch: {\r\n    alignItems: 'stretch',\r\n  },\r\n\r\n  //********************** Fill sets */\r\n  fill: {\r\n    flex: 1,\r\n  },\r\n  fillCenter: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  fillCol: {\r\n    flex: 1,\r\n    flexDirection: 'column',\r\n  },\r\n  fillColCenter: {\r\n    flex: 1,\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  fillColCross: {\r\n    flex: 1,\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  fillColMain: {\r\n    flex: 1,\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n  },\r\n  fillColReverse: {\r\n    flex: 1,\r\n    flexDirection: 'column-reverse',\r\n  },\r\n  fillRow: {\r\n    flex: 1,\r\n    flexDirection: 'row',\r\n  },\r\n  fillRowCenter: {\r\n    flex: 1,\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  fillRowCross: {\r\n    flex: 1,\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n  },\r\n  fillRowMain: {\r\n    flex: 1,\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n  },\r\n  fillRowReverse: {\r\n    flex: 1,\r\n    flexDirection: 'row-reverse',\r\n  },\r\n\r\n  //********************** Size sets */\r\n  fullSize: {\r\n    height: '100%',\r\n    width: '100%',\r\n  },\r\n  halvWidth: {\r\n    width: '50%',\r\n  },\r\n  midWidth: {\r\n    width: '75%',\r\n  },\r\n  fullWidth: {\r\n    width: '100%',\r\n  },\r\n\r\n  //********************** Main sets */\r\n  mainCenter: {\r\n    justifyContent: 'center',\r\n  },\r\n  mainEnd: {\r\n    justifyContent: 'flex-end',\r\n  },\r\n  mainSpaceAround: {\r\n    justifyContent: 'space-around',\r\n  },\r\n  mainSpaceBetween: {\r\n    justifyContent: 'space-between',\r\n  },\r\n  mainStart: {\r\n    justifyContent: 'flex-start',\r\n  },\r\n\r\n  //********************** Container sets */\r\n  mainContainer:{\r\n    flex: 1,\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    ...Metrics.mediumHorizontalMargin,\r\n  },\r\n  contentContainer:{\r\n    flex:1,\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    ...Metrics.mediumHorizontalMargin,\r\n    marginTop: Metrics.small,\r\n    ...Metrics.bottomMargin,\r\n  },\r\n  borderContainer: {\r\n    borderWidth: 1,\r\n    borderColor: '#000',\r\n    borderRadius: 15,\r\n    ...Metrics.tinyHorizontalPadding,\r\n    ...Metrics.tinyVerticalPadding,\r\n    maxWidth:450,\r\n    zIndex: 1,\r\n  },\r\n  textContainer:{\r\n    ...Fonts.normal,\r\n    marginBottom: Metrics.normal,\r\n    alignItems: 'center',\r\n  },\r\n  buttonContainer: {\r\n    marginBottom: Metrics.small,\r\n    maxWidth:450,\r\n  },\r\n  loadingContainer: {\r\n    position: 'absolute',\r\n    left: 0,\r\n    right: 0,\r\n    top: 0,\r\n    bottom: 0,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    backgroundColor: '#F5FCFF88',\r\n  },\r\n  logoContainer: {\r\n    width: '100%',\r\n    height: 220,\r\n  },\r\n\r\n  //**********************  */\r\n  backgroundReset: {\r\n    backgroundColor: Colors.transparent,\r\n  },\r\n\r\n  rotate90: {\r\n    transform: [{ rotate: '90deg' }],\r\n  },\r\n  rotate90Inverse: {\r\n    transform: [{ rotate: '-90deg' }],\r\n  },\r\n  mirror: {\r\n    transform: [{ scaleX: -1 }],\r\n  },\r\n\r\n  scrollSpaceAround: {\r\n    flexGrow: 1,\r\n    justifyContent: 'space-around',\r\n  },\r\n  scrollSpaceBetween: {\r\n    flexGrow: 1,\r\n    justifyContent: 'space-between',\r\n  },\r\n\r\n  selfStretch: {\r\n    alignSelf: 'stretch',\r\n  },\r\n\r\n  textCenter: {\r\n    textAlign: 'center',\r\n  },\r\n  textJustify: {\r\n    textAlign: 'justify',\r\n  },\r\n  textLeft: {\r\n    textAlign: 'left',\r\n  },\r\n  textRight: {\r\n    textAlign: 'right',\r\n  },\r\n};\r\n","/**\r\n * This file defines the base application styles.\r\n *\r\n * Use it to define generic component styles (e.g. the default text styles, default button styles...).\r\n */\r\nimport { StyleSheet } from 'react-native'\r\nimport { Colors, Fonts, Metrics, } from '../Theme'\r\n\r\nexport default {\r\n  button: {\r\n    backgroundColor: Colors.primary,\r\n    color: Colors.secountText,\r\n  },\r\n  buttonText: {\r\n    color: Colors.secountText,\r\n  },\r\n\r\n  error: {\r\n    ...Fonts.normal,\r\n    color: Colors.error,\r\n    marginBottom: Metrics.tiny,\r\n    textAlign: 'center',\r\n  },\r\n  result: {\r\n    ...Fonts.normal,\r\n    marginBottom: Metrics.tiny,\r\n    textAlign: 'center',\r\n  },\r\n  text: {\r\n    ...Fonts.normal,\r\n    marginBottom: Metrics.tiny,\r\n    textAlign: 'center',\r\n  },\r\n  input: {\r\n    ...Fonts.normal,\r\n    height: 24, \r\n  },\r\n\r\n  navigationHeader:{\r\n    textAlign: 'center',\r\n    alignSelf:'center',\r\n    flexGrow:1,\r\n  }\r\n};\r\n","import React, { useEffect, Component } from 'react'\r\nimport { Text, View, Image, Platform } from 'react-native'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../Services/NavigationService'\r\n\r\nlet messaging;\r\nif (Platform.OS === 'ios' || Platform.OS === 'android') {\r\n  //#region App version imports\r\n  messaging = require('@react-native-firebase/messaging').default;\r\n  //#endregion\r\n} else {\r\n  //#region Web Version imports\r\n  var firebase = require('firebase/app').default;\r\n  require('firebase/messaging').default;\r\n\r\n  if (firebase.messaging.isSupported()) {\r\n    messaging = firebase.messaging();\r\n  }\r\n  //#endregion\r\n}\r\n\r\nimport Style from './SplashScreenStyle'\r\nimport { Helpers, Images } from '../../Theme'\r\n\r\nclass SplashScreen extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    /*this.state = {\r\n    }*/\r\n  }\r\n\r\n  getData(){\r\n    if ((Platform.OS === \"android\" || Platform.OS === \"ios\") && messaging) {\r\n      messaging().onNotificationOpenedApp(remoteMessage => {\r\n        console.log(\r\n          'Notification caused app to open from background state:',\r\n          remoteMessage.notification,\r\n        );\r\n        NavigationService.navigate(remoteMessage.data.type);\r\n      });\r\n\r\n      // Check whether an initial notification is available\r\n      messaging().getInitialNotification().then(remoteMessage => {\r\n        if (remoteMessage) {\r\n          console.log(\r\n            'Notification caused app to open from quit state:',\r\n            remoteMessage.notification,\r\n          );\r\n          NavigationService.navigate(remoteMessage.data.type); // e.g. \"Settings\"\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  checkData(props){\r\n  }\r\n\r\n  componentDidMount(){\r\n    //this.props.setFirebaseError(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps){\r\n      this.checkData(this.props);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <View style={[Helpers.fillRowCenter, Style.container]}>\r\n        <View style={[Helpers.center, Helpers.logoContainer]}>\r\n          <Image style={Helpers.fullSize} source={Images.Hexa_icon} resizeMode={'contain'} />\r\n        </View>\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    //setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SplashScreen);\r\n//export default SplashScreen;\r\n","import { StyleSheet } from 'react-native'\r\nimport { Helpers, Metrics, Fonts, Colors } from '../../Theme'\r\n\r\nexport default StyleSheet.create({\r\n  container: {\r\n    backgroundColor: Colors.primary,\r\n  },\r\n})\r\n","import React from 'react'\r\nimport { Text, View } from 'react-native'\r\nimport { Helpers, Metrics } from '../../Theme'\r\n\r\n/**\r\n * This is an example of a container component with a deep link.\r\n */\r\nconst DeepLinkingScreen = () => (\r\n  <View style={[Helpers.fillCenter, Helpers.rowMain, Metrics.mediumHorizontalMargin]}>\r\n    <Text>\r\n      This is deep linking example screen which can be accessed using agrissysapp://deeplink scheme!\r\n    </Text>\r\n  </View>\r\n)\r\n\r\nexport default DeepLinkingScreen\r\n","import React from 'react';\r\nimport { StyleSheet, View, TouchableOpacity, Text, Image} from 'react-native';\r\n\r\nimport { ApplicationStyles, Helpers, Metrics, Fonts, Colors, Images } from '../Theme'\r\n\r\nconst Button = props => {\r\n  var TextView = [<Text style={[styles.text, props.textStyle]} key={0}>{props.Text}</Text>]\r\n\r\n  var ImageView = []\r\n  if (props.icon) {\r\n    var _Image = <Image style={Helpers.fullSize} source={props.icon} resizeMode={'contain'} />\r\n    ImageView = (\r\n      <View style={[styles.icon, props.iconStyle]}>\r\n        {_Image}\r\n      </View>\r\n    )\r\n  }\r\n  return (\r\n    <TouchableOpacity style={[styles.boxContainer, props.boxStyle]} onPress={props.onPress}>\r\n      {props.icon?(\r\n        <View style={[styles.button, props.buttonStyle, Helpers.rowCenter]}>\r\n          <View style={[Helpers.colCenter, Helpers.fill]}>\r\n            {TextView}\r\n          </View>\r\n            {ImageView}\r\n        </View>\r\n      ):(\r\n        <View style={[styles.button, props.buttonStyle]}>\r\n          {TextView}\r\n        </View>\r\n      )}\r\n    </TouchableOpacity>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  boxContainer:{\r\n    ...Helpers.center,\r\n    ...Metrics.tinyVerticalMargin,\r\n  },\r\n  button: {\r\n    borderRadius: 15,\r\n    ...Helpers.center,\r\n    ...Helpers.fullWidth,\r\n    ...Metrics.horizontalPadding,\r\n    ...ApplicationStyles.button,\r\n  },\r\n  text: {\r\n    ...ApplicationStyles.buttonText,\r\n    ...Metrics.verticalPadding,\r\n    ...Helpers.center,\r\n    textAlign:\"center\",\r\n  },\r\n  icon: {\r\n    ...Helpers.colCenter,\r\n    ...Metrics.smallVerticalMargin,\r\n    width: '25%', \r\n    height: 50,\r\n  },\r\n});\r\n\r\nexport default Button;","import React from 'react';\r\nimport { View, Text, Image} from 'react-native';\r\nimport Button from './Button'\r\n\r\nimport { ApplicationStyles, Helpers, Metrics } from '../Theme'\r\n\r\nconst Button_Panel = props => {\r\n  const Texts = props.Texts;\r\n  const Images = props.Images;\r\n\r\n  const onPress = props.onPress;\r\n\r\n  var Buttons = []\r\n\r\n  Texts.forEach((element, index) => {\r\n    var image = null\r\n    if (Images && Images[index]){\r\n      image = Images[index]\r\n    }\r\n    Buttons.push(\r\n      <Button key={index} Text={element} icon={image}\r\n        iconStyle={props.iconStyle} itemStyle={props.itemStyle}\r\n        onPress={() => {\r\n          if (onPress) {\r\n            onPress({index: index, text: element})\r\n          }\r\n        }}/>\r\n    )\r\n  });\r\n\r\n  return(\r\n    <View style={[Helpers.buttonContainer, Helpers.midWidth, {marginBottom:30}, props.style] }>\r\n      {Buttons}\r\n    </View>\r\n  )\r\n};\r\n\r\nexport default Button_Panel;","import React from 'react';\r\nimport { StyleSheet, View, TouchableOpacity, Text, Image} from 'react-native';\r\n\r\nimport Button from './Button';\r\n\r\nimport { ApplicationStyles, Helpers, Metrics, Fonts, Colors, Images } from '../Theme'\r\n\r\nconst TitleElement = props => {\r\n  return(\r\n    <View style={[Helpers.buttonContainer, Helpers.midWidth, Metrics.bottomMargin,] }>\r\n      <Button Text={props.Text} icon={props.icon} buttonStyle={{backgroundColor: Colors.AgriDarkblue}}\r\n        onPress={() => {\r\n          if (props.onPress){\r\n            props.onPress()\r\n          }\r\n        } }/>\r\n    </View>\r\n  )\r\n};\r\n\r\nexport default TitleElement;","import React from 'react';\r\nimport { StyleSheet, View, TouchableOpacity, Text} from 'react-native';\r\nimport { ListItem } from 'react-native-elements'\r\n\r\nimport { ApplicationStyles, Helpers, Metrics, Fonts, Colors } from '../Theme'\r\n\r\nconst CustomListItem = props => {\r\n  const key = props.key? props.key : 0\r\n  return (\r\n    <ListItem key={key} containerStyle={[styles.listitem, {flexDirection:\"column\", borderRadius:0}, props.itemStyle]} button onPress={props.onPress}>\r\n      <ListItem.Content>\r\n        <ListItem.Title>{props.Title}</ListItem.Title>\r\n        {props.hasOwnProperty(\"Subtitle\") ? <ListItem.Subtitle>{props.Subtitle}</ListItem.Subtitle>\r\n        :(<></>)}\r\n      </ListItem.Content>\r\n    </ListItem>\r\n  )\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  listitem: {\r\n    flex: 1,\r\n    ...Helpers.borderContainer,\r\n    ...Helpers.center,\r\n    backgroundColor: '#fff',\r\n    paddingVertical: 5,\r\n    paddingHorizontal: 5,\r\n  },\r\n});\r\n\r\nexport default CustomListItem;","import React from 'react';\r\nimport { StyleSheet, View, TouchableOpacity, Text, FlatList} from 'react-native';\r\n\r\nimport { ApplicationStyles, Helpers, Metrics, Fonts, Colors } from '../Theme'\r\n\r\nconst ContentProp = props => {\r\n  var texts = [];\r\n  if (props.texts){\r\n    props.texts.forEach((element,i) => {\r\n      texts.push(\r\n        (<View style={[styles.contentBox, props.textsStyle]} key={\"text_\" + i}>\r\n          <Text>{element}</Text>\r\n        </View>)\r\n      )\r\n    });\r\n  }\r\n\r\n  var datas = [];\r\n  if (props.datas) {\r\n    props.datas.forEach((element,i) => {\r\n      datas.push(\r\n        (<TouchableOpacity style={[styles.contentBox, props.datasStyle]} onLongPress={() => {\r\n          if (props.onPress){\r\n            props.onPress({data: element, index: i})\r\n          }\r\n        }} key={\"data_\" + i}>\r\n          <Text>{element}</Text>\r\n        </TouchableOpacity>)\r\n      )\r\n    });\r\n  }\r\n\r\n  var length = texts.length > datas.length? texts.length : datas.length\r\n  \r\n  var view = [];\r\n  for(var i = 0; i < length; i++) {\r\n    var dataRow = [];\r\n    if (i < texts.length) {\r\n      dataRow.push(texts[i])\r\n    } else {\r\n      dataRow.push((<View style={[Helpers.fill, Helpers.colCenter]} key={\"leftSpace_\" + i}/>))\r\n    }\r\n\r\n    if (datas.length > 0) {\r\n      dataRow.push((<View style={[Helpers.fill, Helpers.colCenter, {maxWidth:20}]} key={\"seperator_\" + view.length}/>))\r\n\r\n      if (i < datas.length) {\r\n        dataRow.push(datas[i])\r\n      } else {\r\n        dataRow.push((<View style={[Helpers.fill, Helpers.colCenter]} key={\"rightSpace_\" + i}/>))\r\n      }\r\n    }\r\n\r\n    view.push(\r\n      (<View style={[props.datas?Helpers.rowCenter:Helpers.halvWidth, Metrics.tinyVerticalMargin]} key={\"row_\" + view.length}>\r\n        {dataRow}\r\n      </View>)\r\n    )\r\n  }\r\n  \r\n  return (view);\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  contentBox: {\r\n    ...Helpers.fill,\r\n    ...Helpers.colCenter,\r\n    ...Helpers.borderContainer,\r\n    borderRadius: 0,\r\n    minHeight:30,\r\n  }\r\n});\r\n\r\n\r\nexport default ContentProp;","import React, { useEffect } from 'react'\r\nimport { StyleSheet, Text, View, Image, ActivityIndicator } from 'react-native'\r\n\r\nimport { Helpers, Images, Colors } from '../Theme'\r\n\r\nconst Loading = props => {\r\n  if (props.loading){\r\n    var styles = props.back ? styles.container: {}\r\n    return (\r\n      <View style={[Helpers.fillRowCenter, Helpers.center, Helpers.logoContainer, styles]}>\r\n        <View style={[Helpers.center, Helpers.logoContainer]}>\r\n          <Image style={Helpers.fullSize} source={Images.Hexa_icon} resizeMode={'contain'} />\r\n        </View>\r\n      </View>\r\n    )\r\n  } else return null;\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    backgroundColor: Colors.primary,\r\n  },\r\n});\r\n\r\nexport default Loading\r\n","import React, { Component } from 'react'\r\nimport { Platform, Text, View, ActivityIndicator, ScrollView } from 'react-native'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\nimport NavigationService from '../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs, sortObject, Operations } from '../Stores/Firebase/Selectors'\r\n\r\nimport { Button, Comment_Module } from '../Components'\r\nimport { ApplicationStyles, Helpers, Metrics } from '../Theme'\r\n\r\nclass OperationsPanel extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      View:1,\r\n    }\r\n  }\r\n\r\n  getPenAndSection() {\r\n    var Section, Pen = undefined\r\n    if (this.props.pig && this.props.pigTag && this.props.PigsList) {\r\n      if (this.props.PigsList[this.props.pigTag] && this.props.PigsList[this.props.pigTag].pen && this.props.PigsList[this.props.pigTag].pen != 0) {\r\n        Pen = this.props.PigsList[this.props.pigTag].pen\r\n\r\n        const localDataStore = this.props.firebase.localDataStore\r\n        if (localDataStore && localDataStore.pens && localDataStore.pens[Pen]) {\r\n          var PenData = localDataStore.pens[Pen];\r\n          Section = PenData.section;\r\n        }\r\n      }\r\n    }\r\n    return {Section, Pen}\r\n  }\r\n\r\n  getData() {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps) {\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const CurrentData = this.props.firebase.currentData\r\n\r\n    if (this.props.pig) {\r\n      return(\r\n        <View style={[Helpers.buttonContainer]}>\r\n          <Button Text=\"Add Pig\"\r\n            onPress={() => {\r\n              if (this.props.pigTag !== \"\" ) {\r\n                if (Object.keys(this.props.PigsList).filter(e => e === this.props.pigTag).length > 0){\r\n                  this.props.setFirebaseError(\"Can not add Tag already exist\")\r\n                } else {\r\n                  this.props.setFirebaseError(\"\")\r\n                  this.props.newPig(this.props.pigTag)\r\n                }\r\n              }\r\n              else this.props.setFirebaseError(\"A Tag is needed\")\r\n            } }/>\r\n          <Button Text=\"Move Pig\"\r\n            onPress={() => {\r\n              var {Section, Pen} = this.getPenAndSection()\r\n              this.props.setCurrentPig(this.props.pigTag, Section, Pen)\r\n              NavigationService.navigate(\"DataEditor\")\r\n            } }/>\r\n        </View>\r\n      )\r\n    } else if (this.props.section) {\r\n      return(\r\n        <View style={[Helpers.buttonContainer]}>\r\n          <Button Text=\"Weight\"\r\n              onPress={() => {\r\n                NavigationService.navigate(\"WeighingOperations\")\r\n              }}/>\r\n          <View style={[{marginTop:40}]}>\r\n            <Button Text=\"Add Pen\"\r\n              onPress={() => {\r\n                this.props.editPens(Actions.CREATE)\r\n                NavigationService.navigate(\"DataEditor\")\r\n              } }/>\r\n            <Button Text=\"Remove Pen\"\r\n              onPress={() => {\r\n                this.props.editPens(Actions.DELETE)\r\n                NavigationService.navigate(\"DataEditor\")\r\n              } }/>\r\n          </View>\r\n        </View>\r\n      )\r\n    } else {\r\n      var Action = 1;\r\n      switch(this.state.View) {\r\n        case Operations.MOVE:\r\n        case Operations.LOST:\r\n        case Operations.SOLD:\r\n          Action = -1\r\n        case Operations.ADD:\r\n          return(\r\n            <Comment_Module Title={\"Operations comment:\"} Quantity={true} Weight={true} onDone={(res) => {\r\n              if (res.res) {\r\n                var action = this.state.View\r\n                action = action.charAt(0).toUpperCase() + action.slice(1)\r\n                var quantity = res.quantity\r\n                if (isNaN(quantity)) quantity = 1\r\n                Action = Action * quantity\r\n                if (res.weight && res.weight !== \"\") {\r\n                  var weight = res.weight\r\n                  if (this.state.View === Operations.ADD) {\r\n                    this.props.newWeight(CurrentData.penId, weight, Date.now(),1)\r\n                  }\r\n                }\r\n\r\n                this.props.newComment(CurrentData.penId, action, res.data, quantity, weight)\r\n                this.props.newPigCount(CurrentData.penId, Action)\r\n              }\r\n\r\n              this.setState({\r\n                View: 1\r\n              })\r\n            }}/>\r\n          )\r\n          //this.props.newPigCount(CurrentData.penId, Action * \"count_input\", comment)\r\n        case Operations.NOTE:\r\n          return(\r\n            <Comment_Module Title={\"Pen Note:\"} onDone={(res) => {\r\n              if (res.res && res.data) {\r\n                var action = this.state.View\r\n                action = action.charAt(0).toUpperCase() + action.slice(1)\r\n                \r\n                this.props.newComment(CurrentData.penId, action, res.data)\r\n              }\r\n              \r\n              this.setState({\r\n                View: 1\r\n              })\r\n            }}/>\r\n          )\r\n          break;\r\n        default:\r\n          return(\r\n            <ScrollView style={{paddingRight: 5}}>\r\n              <View style={[Helpers.buttonContainer]}>\r\n                <Button Text=\"Weight\"\r\n                    onPress={() => {\r\n                      NavigationService.navigate(\"WeighingOperations\")\r\n                    }}/>\r\n                <Button Text=\"Note\"\r\n                    onPress={() => {\r\n                      this.setState({\r\n                        View: Operations.NOTE,\r\n                      })\r\n                    }\r\n                  }/>\r\n                <View style={[{marginTop:10}]}>\r\n                  <Button Text=\"Add Pig\"\r\n                    onPress={() => {\r\n                      this.setState({\r\n                        View: Operations.ADD,\r\n                      })\r\n                    } }/>\r\n                  <Button Text=\"Move Pig\"\r\n                    onPress={() => {\r\n                      this.setState({\r\n                        View: Operations.MOVE,\r\n                      })\r\n                    } }/>\r\n                  <Button Text=\"Lost Pig\"\r\n                    onPress={() => {\r\n                      this.setState({\r\n                        View: Operations.LOST,\r\n                      })\r\n                    } }/>\r\n                  <Button Text=\"Sold Pig\"\r\n                    onPress={() => {\r\n                      this.setState({\r\n                        View: Operations.SOLD,\r\n                      })\r\n                    } }/>\r\n                </View>\r\n              </View>\r\n            </ScrollView>\r\n          )\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\r\n\r\n    setCurrentData: penId => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PENS, penId: penId})),\r\n    setCurrentDataElement: element => dispatch(FirebaseActions.setCurrentData(element)),\r\n\r\n    editPens: (action) => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PENS, action:action})),\r\n\r\n    setCurrentPig: (pigTag, Section, Pen) => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PIGS, action:Actions.CREATE, pigtag:pigTag, data:{section:Section}, dataId:Pen})),\r\n    newPig: (pigTag) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.PIGS, {TagId: pigTag})),\r\n    newPigCount: (penId, countChange) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.PIGS, {PenId: penId, Action:countChange})),\r\n\r\n    newComment: (penId, action, data, quantity=null, weight=null) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.COMMENTS, {PenId: penId, Action: action, Data: data, Quantity:quantity, Weight:weight})),\r\n    newWeight: (penId, weight, date, quantity) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.WEIGHING, {PenId: penId, Weight:weight, Quantity:quantity, Date:date})),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OperationsPanel);\r\n//export default OperationsPanel","import React, {useRef, useState, useEffect} from 'react';\r\nimport { Text, View, StyleSheet, Animated } from 'react-native';\r\n\r\nimport { ApplicationStyles, Helpers, Metrics } from '../Theme'\r\n\r\nconst ProgressBar = props => {\r\n  let animation = useRef(new Animated.Value(0));\r\n  const progress = props.progress\r\n  const Color = props.color?props.color:\"#8BED4F\"\r\n  \r\n  useEffect(() => {\r\n    Animated.timing(animation.current, {\r\n      toValue: progress,\r\n      duration: 100\r\n    }).start();\r\n  },[progress])\r\n\r\n  const width = animation.current.interpolate({\r\n    inputRange: [0, 100],\r\n    outputRange: [\"0%\", \"100%\"],\r\n    extrapolate: \"clamp\"\r\n  })\r\n  return (\r\n    <View style={[Helpers.borderContainer, Helpers.fullWidth, {borderWidth:0, minHeight:45, paddingBottom:10}]}>\r\n      <View style={[Helpers.fill, Helpers.fullWidth, Helpers.colMain, {alignContent:'center'}]}>\r\n        {props.text?(\r\n        <Text style={{alignSelf:'flex-start', minHeight:20}}>\r\n          {props.text}\r\n        </Text>):(<></>)}\r\n        <View style={styles.progressBar}>\r\n          <Animated.View style={[StyleSheet.absoluteFill], {backgroundColor: Color, width }}/>\r\n        </View>\r\n      </View>\r\n    </View>\r\n  )\r\n}\r\n\r\nexport default ProgressBar;\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    paddingTop: 5,\r\n    padding: 8,\r\n  },\r\n  progressBar: {\r\n    flexDirection: 'row',\r\n    height: 20,\r\n    width: '100%',\r\n    borderColor: '#000',\r\n    borderWidth: 2,\r\n    borderRadius: 5\r\n  }\r\n});\r\n","import React, { Component } from 'react'\r\nimport { StyleSheet, View, TouchableOpacity, Picker, Text, Image} from 'react-native';\r\n\r\nimport { ApplicationStyles, Helpers, Metrics, Fonts, Colors, Images } from '../Theme'\r\n\r\nconst monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n  \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n];\r\n\r\nclass DateTime_Picker extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n      \r\n    const {year, month, day} = this.getStates(props)\r\n    this.state = {\r\n      year: year,\r\n      month: month,\r\n      day: day,\r\n    }\r\n  }\r\n\r\n  getStates(props) {\r\n    var Today = new Date();\r\n    var Selected = new Date();\r\n    if (props.Selected) {\r\n      Selected = new Date(props.Selected)\r\n    }\r\n\r\n    var year, month, day;\r\n    year = Selected.getFullYear()\r\n    month = Selected.getMonth()\r\n    day = Selected.getDate()\r\n\r\n    if (!props.Selected) {\r\n      if (props.Year){\r\n        year = this.props.Year\r\n      }\r\n      if (props.Month){\r\n        month = this.props.Month\r\n      }\r\n      if (props.Day){\r\n        day = this.props.Day\r\n      }\r\n    }\r\n    return {year, month, day}\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevProps.Selected){\r\n      if (prevProps.Selected != this.props.Selected){\r\n        const {year, month, day} = this.getStates(this.props)\r\n        this.setState({\r\n          year: year,\r\n          month: month,\r\n          day: day,\r\n        }, this.forceUpdate())\r\n      }\r\n    } else {\r\n      var changed = false;\r\n      if (prevProps.Year != this.props.Year) changed = true\r\n      if (prevProps.Month != this.props.Month) changed = true\r\n      if (prevProps.Day != this.props.Day) changed = true\r\n      if (changed) {\r\n        this.forceUpdate()\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var Today = new Date();\r\n\r\n    var year = Today.getFullYear()\r\n    var YearItems = []\r\n    for (let index = year + 25; index > year - 25; index--) {\r\n      var val = String(index)\r\n      YearItems.push(<Picker.Item key={\"Year_\" + index} value={index} label={val} />)\r\n    }\r\n      \r\n    var MonthItems = []\r\n    var month = Today.getMonth()\r\n    for (let index = 0; index < monthNames.length; index++) {\r\n      var val = String(index)\r\n      MonthItems.push(<Picker.Item key={\"Month_\" + index} value={index} label={monthNames[index]} />)\r\n    }\r\n  \r\n    var DayItems = []\r\n    var days = new Date(year, month + 1, 0).getDate()\r\n    for (let index = 1; index <= days; index++) {\r\n      var val = String(index)\r\n      DayItems.push(<Picker.Item key={\"Day_\" + index} value={index} label={val} />)\r\n    }\r\n\r\n    return(\r\n      <View style={[Helpers.fullWidth, Helpers.row, {marginBottom:-10,}, this.props.style]}>\r\n        <Picker selectedValue={this.state.year} style={[{minWidth: 101, marginRight:5}]}\r\n          onValueChange={(_year) => {\r\n            year = _year\r\n            this.props.onValueChange(new Date(year, this.state.month, this.state.day))\r\n          }}>\r\n          {YearItems}\r\n        </Picker>\r\n\r\n        <Picker selectedValue={this.state.month} style={[{minWidth: 110, marginRight:5}]}\r\n          onValueChange={(_month) => {\r\n            month = _month\r\n            this.props.onValueChange(new Date(this.state.year, month, this.state.day))\r\n          }}>\r\n          {MonthItems}\r\n        </Picker>\r\n\r\n        <Picker selectedValue={this.state.day} style={[{minWidth: 83}]}\r\n          onValueChange={(_day) => {\r\n            days = parseInt(_day)\r\n            this.props.onValueChange(new Date(this.state.year, this.state.month, days))\r\n          }}>\r\n          {DayItems}\r\n        </Picker>\r\n      </View>\r\n    )\r\n  }\r\n}\r\nexport default DateTime_Picker;","import React, { useState } from 'react';\r\nimport { Platform, View, Text, TextInput, Image, StyleSheet, RecyclerViewBackedScrollViewComponent} from 'react-native';\r\nimport Button from './Button'\r\nimport { Icon, Input } from 'react-native-elements'\r\nimport { Operations } from '../Stores/Firebase/Selectors'\r\n\r\nimport { ApplicationStyles, Helpers, Metrics, Fonts, Colors } from '../Theme'\r\n\r\nconst Comment_Module = props => {\r\n  const Title = props.Title;\r\n  const Quantity = props.Quantity?props.Quantity:false\r\n  const Weight = props.Weight?props.Weight:false\r\n  \r\n  const onDone = props.onDone;\r\n  var Button1 = \"Done\";\r\n  var Button2 = \"Cancel\";\r\n  const [InputText, setInputText] = useState(\"\");\r\n  const [QuantityText, setQuantityText] = useState(\"1\");\r\n  const [WeightText, setWeightText] = useState(\"\");\r\n\r\n  var App = Platform.OS === \"android\" || Platform.OS === \"ios\" ? true: false\r\n  return(\r\n    <View style={[Helpers.buttonContainer, props.style] }>\r\n      <View style={styles.textAreaContainer} >\r\n        <View style={[App?{}:Helpers.row]}>\r\n          {Title?(<Text style={[Fonts.normal, {height: 24, color:Colors.input}]}>{Title}</Text>):(<></>)}\r\n          {Quantity?(\r\n            <View style={[Helpers.row, App?{}:{marginLeft:50, marginBottom:4}]}>\r\n              <Text style={[Fonts.normal, {height: 24, color:Colors.input}]}>Quantity:</Text>\r\n              <TextInput style={[styles.textArea, {marginLeft: 10, height:22, width:80, paddingBottom:-10}]} \r\n                multiline={false}\r\n                onChangeText={(text) => {\r\n                  if (text === \"\" || !isNaN(text)) setQuantityText(text)\r\n                }}\r\n                value={QuantityText}\r\n              />\r\n            </View>\r\n          ):(<></>)}\r\n        </View>\r\n        {Weight?(\r\n          <View style={[Helpers.row, App?{}:{marginBottom:4}]}>\r\n            <Text style={[Fonts.normal, {height: 24, color:Colors.input}]}>Average Weight:</Text>\r\n            <TextInput style={[styles.textArea, {marginLeft: 10, height:22, width:80, paddingBottom:-10}]} \r\n              multiline={false}\r\n              onChangeText={(text) => {\r\n                if (text === \"\" || !isNaN(text)) setWeightText(text)\r\n              }}\r\n              value={WeightText}\r\n            />\r\n          </View>\r\n        ):(<></>)}\r\n        <TextInput\r\n          style={styles.textArea}\r\n          underlineColorAndroid=\"transparent\"\r\n          placeholder=\"Type something\"\r\n          placeholderTextColor=\"grey\"\r\n          numberOfLines={10}\r\n          multiline={true}\r\n          onChangeText={(text) => setInputText(text)}\r\n          value={InputText}\r\n        />\r\n      </View>\r\n      <Button key={\"_Done\"} Text={Button1}\r\n        onPress={() => {\r\n          if (onDone) {\r\n            onDone({res: true, data: InputText, quantity: QuantityText, weight: WeightText})\r\n          }\r\n        }}/>\r\n      <Button key={\"_Cancel\"} Text={Button2}\r\n        onPress={() => {\r\n          if (onDone) {\r\n            onDone({res: false, data: InputText})\r\n          }\r\n        }}/>\r\n    </View>\r\n  )\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  textAreaContainer: {\r\n    borderColor: Colors.gray,\r\n    borderWidth: 1,\r\n    padding: 5\r\n  },\r\n  textArea: {\r\n    height: 150,\r\n    justifyContent: \"flex-start\",\r\n    borderColor: \"black\",\r\n    borderWidth: 0.5,\r\n    padding: 5,\r\n  }\r\n})\r\n\r\nexport default Comment_Module;","import { StyleSheet } from 'react-native'\r\nimport { Helpers, Metrics, Fonts, Colors } from '../../Theme'\r\n\r\nexport default StyleSheet.create({\r\n  logoContainer: {\r\n    ...Helpers.fullWidth,\r\n    height: 190,\r\n    marginTop: Metrics.medium * 2, \r\n    marginBottom: Metrics.medium,\r\n  },\r\n})\r\n","import React, { useEffect, useState, Component } from 'react'\r\nimport { Platform, Text, View, ActivityIndicator, Image } from 'react-native'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../Services/NavigationService'\r\n\r\n//import DeviceActions from '../../Stores/Device/Actions'\r\nimport FirebaseActions from '../../Stores/Firebase/Actions'\r\n\r\nimport { Button_Panel } from '../../Components'\r\nimport Style from './FrontScreenStyle'\r\nimport { ApplicationStyles, Helpers, Images } from '../../Theme'\r\n\r\nclass FrontScreen extends Component {\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n      ShowMainError: false,\r\n      FocusSubscription: null,\r\n    }\r\n  }\r\n\r\n  setData(Props) {\r\n  }\r\n\r\n  getData() {\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps) {\r\n      this.checkData(this.props);\r\n      if (this.props.firebase.viewError != prevProps.firebase.viewError) {\r\n        this.forceUpdate()\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setFirebaseError(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n\r\n    const FocusSubscription = this.props.navigation.addListener(\r\n      'willFocus',\r\n      payload => {\r\n        this.props.setViewLoading(false)\r\n        this.props.setViewError(null)\r\n      }\r\n    );\r\n    this.setState({\r\n      FocusSubscription: FocusSubscription\r\n    })\r\n  }\r\n  componentWillUnmount() {\r\n    if (this.state.FocusSubscription) {\r\n      this.state.FocusSubscription.remove()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const ErrorMessage = this.props.firebase.viewError\r\n    const firebaseErrorMessage = this.props.firebase.firebaseErrorMessage\r\n\r\n    return(\r\n      <View\r\n        style={[\r\n          Helpers.mainContainer,\r\n        ]}\r\n      >\r\n        <View style={[Style.logoContainer]}>\r\n          <Image style={[Helpers.fullSize]} source={Images.Logo} resizeMode={'contain'} />\r\n        </View>\r\n\r\n        <View style={[Helpers.contentContainer, Helpers.fullSize]}>\r\n          <View style={[Helpers.textContainer, Helpers.fullWidth]}>\r\n            {this.state.ShowMainError && firebaseErrorMessage ? (\r\n              <Text style={ApplicationStyles.error}>{firebaseErrorMessage}</Text>\r\n            ):(<></>)}\r\n            {ErrorMessage ? (\r\n              <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\r\n            ):(<></>)}\r\n            <Text style={ApplicationStyles.text}>Welcome to Agrisys App</Text>\r\n            <Text style={ApplicationStyles.text}>Please choose your action</Text>\r\n          </View>\r\n\r\n          <Button_Panel \r\n            Texts={[\"Connect to Agrisys Cloud\", \"Connect to Device\"]}\r\n            Images={[Images.Haxa_globe, null]}\r\n            onPress={(ele) => {\r\n              switch(ele.index){\r\n                case 0:\r\n                  NavigationService.navigate('AuthStack')\r\n                  break;\r\n                case 1:\r\n                  if (Platform.OS === 'ios' || Platform.OS === 'android') {\r\n                    NavigationService.navigate(\"DeviceScreen\")\r\n                  }\r\n                  break;\r\n              }\r\n              /*<Button Text=\"Example\"\r\n              onPress={() => NavigationService.navigate(\"ExampleScreen\")}/>*/\r\n            }}\r\n          />\r\n        </View>\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FrontScreen);\r\n//export default FrontScreen;\r\n","/**\r\n * Selectors let us factorize logic that queries the state.\r\n *\r\n * Selectors can be used in sagas or components to avoid duplicating that logic.\r\n *\r\n * Writing selectors is optional as it is not always necessary, we provide a simple example below.\r\n */\r\n\r\nexport const liveInEurope = (state) => {\r\n  if (Object.entries(state.example.user).length <= 0) return null\r\n\r\n  // For this example, we imagine this cities are european cities\r\n  const europeanCities = [\r\n    'Gwenborough',\r\n    'Wisokyburgh',\r\n    'McKenziehaven',\r\n    'South Elvis',\r\n    'Roscoeview',\r\n  ]\r\n\r\n  return europeanCities.includes(state.example.user.address.city)\r\n}\r\n","import { StyleSheet } from 'react-native'\r\nimport { Helpers, Metrics, Fonts, Colors } from '../../Theme'\r\n\r\nexport default StyleSheet.create({\r\n  error: {\r\n    ...Fonts.normal,\r\n    color: Colors.error,\r\n    marginBottom: Metrics.tiny,\r\n    textAlign: 'center',\r\n  },\r\n  instructions: {\r\n    ...Fonts.normal,\r\n    fontStyle: 'italic',\r\n    marginBottom: Metrics.tiny,\r\n    textAlign: 'center',\r\n  },\r\n  logoContainer: {\r\n    ...Helpers.fullWidth,\r\n    height: 300,\r\n    marginBottom: 25,\r\n  },\r\n  result: {\r\n    ...Fonts.normal,\r\n    marginBottom: Metrics.tiny,\r\n    textAlign: 'center',\r\n  },\r\n  text: {\r\n    ...Fonts.normal,\r\n    marginBottom: Metrics.tiny,\r\n    textAlign: 'center',\r\n  },\r\n})\r\n","import React, { useEffect } from 'react'\r\nimport { Platform, Text, View, Button, ActivityIndicator, Image } from 'react-native'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nimport NavigationService from '../../Services/NavigationService'\r\n\r\nimport ExampleActions from '../../Stores/Example/Actions'\r\nimport { liveInEurope } from '../../Stores/Example/Selectors'\r\n\r\nimport Style from './ExampleScreenStyle'\r\nimport { ApplicationStyles, Helpers, Images, Metrics } from '../../Theme'\r\n\r\n/**\r\n * This is an example of a container component.\r\n *\r\n * This screen displays a little help message and informations about a fake user.\r\n * Feel free to remove it.\r\n */\r\nconst instructions = Platform.select({\r\n  ios: 'Press Cmd+R to reload,\\nCmd+D or shake for dev menu.',\r\n  android: 'Double tap R on your keyboard to reload,\\nShake or press menu button for dev menu.',\r\n})\r\n\r\nconst ExampleScreen = () => {\r\n  const dispatch = useDispatch()\r\n\r\n  const user = useSelector((state) => state.example.user)\r\n  const userIsLoading = useSelector((state) => state.example.userIsLoading)\r\n  const userErrorMessage = useSelector((state) => state.example.userErrorMessage)\r\n\r\n  useEffect(() => {\r\n    dispatch(ExampleActions.fetchUser())\r\n  }, [])\r\n\r\n  return (\r\n    <View\r\n      style={[\r\n        Helpers.fillCenter,\r\n        Helpers.rowMain,\r\n        Metrics.mediumHorizontalMargin,\r\n        Metrics.mediumVerticalMargin,\r\n      ]}\r\n    >\r\n      {userIsLoading ? (\r\n        <ActivityIndicator size=\"large\" color=\"#0000ff\" />\r\n      ) : (\r\n        <View>\r\n          <View style={Style.logoContainer}>\r\n            <Image style={Helpers.fullSize} source={Images.logo} resizeMode={'contain'} />\r\n          </View>\r\n          <Text style={Style.text}>To get started, edit App.js</Text>\r\n          <Text style={Style.instructions}>{instructions}</Text>\r\n          {userErrorMessage ? (\r\n            <Text style={Style.error}>{userErrorMessage}</Text>\r\n          ) : (\r\n            <View>\r\n              <Text style={Style.result}>\r\n                {\"I'm a fake user, my name is \"}\r\n                {user.name}\r\n              </Text>\r\n              <Text style={Style.result}>\r\n                {liveInEurope ? 'I live in Europe !' : \"I don't live in Europe.\"}\r\n              </Text>\r\n            </View>\r\n          )}\r\n          <Button\r\n            style={ApplicationStyles.button}\r\n            onPress={() => dispatch(ExampleActions.fetchUser())}\r\n            title=\"Refresh\"\r\n          />\r\n          <Button\r\n            style={ApplicationStyles.button}\r\n            onPress={() => NavigationService.navigate(\"TestScreen\") }\r\n            title=\"Test\"\r\n          />\r\n        </View>\r\n      )}\r\n    </View>\r\n  )\r\n}\r\n\r\nexport default ExampleScreen\r\n","import { StyleSheet } from 'react-native'\r\nimport { Helpers, Metrics, Fonts, Colors } from '../../Theme'\r\n\r\nexport default StyleSheet.create({\r\n  logoContainer: {\r\n    ...Helpers.fullWidth,\r\n    height: 220,\r\n    marginBottom: Metrics.small,\r\n  },\r\n\r\n  textContainer: {\r\n    ...Fonts.normal,\r\n    marginBottom: Metrics.small,\r\n  },\r\n  buttonContainer: {\r\n    marginBottom: Metrics.normal,\r\n  },\r\n  deviceContainer: {\r\n    flex: 1,\r\n    marginBottom: Metrics.tiny,\r\n  },\r\n  deviceDataContainer: {\r\n    borderWidth: 1,\r\n    borderColor: \"#000\",\r\n    marginTop: Metrics.normal,\r\n    paddingTop: Metrics.small,\r\n    paddingHorizontal: Metrics.normal,\r\n  },\r\n\r\n  error: {\r\n    ...Fonts.normal,\r\n    color: Colors.error,\r\n    marginBottom: Metrics.tiny,\r\n    textAlign: 'center',\r\n  },\r\n  result: {\r\n    ...Fonts.normal,\r\n    marginBottom: Metrics.tiny,\r\n    textAlign: 'center',\r\n  },\r\n  text: {\r\n    ...Fonts.normal,\r\n    marginBottom: Metrics.tiny,\r\n    textAlign: 'center',\r\n  },\r\n  text2: {\r\n    ...Fonts.normal,\r\n    marginRight: Metrics.small,\r\n    marginBottom: Metrics.tiny,\r\n  },\r\n})\r\n","import React, { useEffect } from 'react'\r\nimport { Platform, Text, View, ActivityIndicator, Image, FlatList, SafeAreaView, ScrollView } from 'react-native'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport NavigationService from '../../Services/NavigationService'\r\n\r\nimport DeviceActions from '../../Stores/Device/Actions'\r\nimport { ScannerState, ConnectionMethode } from '../../Stores/Device/Selectors'\r\n\r\nimport { Button, CustomListItem } from '../../Components'\r\nimport Style from './DeviceScreenStyle'\r\nimport { ApplicationStyles, Helpers, Metrics } from '../../Theme'\r\n\r\nimport { Service, } from 'react-native-ble-plx'\r\n\r\nconst BLEButton = (dispatch, Active = false) => {\r\n  if (!Active) {\r\n    return (\r\n      <Button buttonStyle={ApplicationStyles.button} Text=\"Search BLE devices\"\r\n              onPress={() => dispatch(DeviceActions.startBleScan())}/>\r\n    )\r\n  } else {\r\n    return (\r\n      <Button buttonStyle={ApplicationStyles.button} Text=\"Stop BLE Search\" \r\n              onPress={() => dispatch(DeviceActions.stopBleScan())}/>\r\n    )\r\n  }\r\n} \r\n\r\nconst ConnectedDevice_View = (connectedDevice, DeviceData) => {\r\n  const dispatch = useDispatch()\r\n  return (\r\n    <View>\r\n      <CustomListItem Title={connectedDevice.localName} Subtitle={connectedDevice.id} itemStyle={{marginBottom: 10}} onPress={() => dispatch(DeviceActions.disconnectDevice())}/>\r\n      { DeviceData && Object.keys(DeviceData).length > 1 ? (\r\n        <View style={Style.deviceDataContainer}>\r\n          {/* if battery is presented */}\r\n          {DeviceData && DeviceData.Battery ? (\r\n            <View style={Style.textContainer}>\r\n              <Text>Device battery level</Text>\r\n              <Text>{DeviceData.Battery + \"%\"}</Text>\r\n            </View>\r\n          ):(<></>)}\r\n\r\n          {/* App scanners data */}\r\n          {DeviceData.tagid ? (\r\n          <View style={Style.textContainer}>\r\n            <Text>TAG Id:</Text>\r\n            <Text>{DeviceData.tagid}</Text>\r\n          </View>\r\n          ):(<></>)}\r\n          {DeviceData.FatLayers && DeviceData.FatLayers > 0 ? (\r\n            <View style={Style.textContainer}>\r\n              <Text>Layers received: {DeviceData.FatLayers}</Text>\r\n              <Text>Layer 1: {DeviceData.FatL1}</Text>\r\n              <Text>Layer 2: {DeviceData.FatL2}</Text>\r\n              <Text>Layer 3: {DeviceData.FatL3}</Text>\r\n            </View>\r\n          ):(<></>)}\r\n          {DeviceData.Unknown ? (\r\n            <View style={Style.textContainer}>\r\n              <Text>unknon Id:</Text>\r\n              <Text>{DeviceData.Unknown}</Text>\r\n            </View>\r\n          ):(<></>)}\r\n        </View>\r\n      ):(<></>)\r\n      }\r\n    </View>\r\n  )\r\n}\r\n\r\nconst DeviceScreen = () => {\r\n  const dispatch = useDispatch()\r\n\r\n  const deviceErrorMessage = useSelector((state) => state.device.deviceErrorMessage)\r\n\r\n  const connectedDevice = useSelector((state) => state.device.connectedDevice)\r\n  const DeviceData = useSelector((state) => state.device.deviceData)\r\n\r\n  const scannerState = useSelector((state) => state.device.scannerState)\r\n  const connectionMethode = useSelector((state) => state.device.connectionMethode)\r\n  const Devices = useSelector((state) => state.device.DeviceList)\r\n\r\n  useEffect(() => {\r\n    //dispatch(DeviceActions.fetchDevice())\r\n  }, [])\r\n\r\n  return (\r\n    <View\r\n      style={[\r\n        Helpers.fill,\r\n        Helpers.rowMain,\r\n        Metrics.mediumHorizontalMargin,\r\n        Metrics.mediumVerticalMargin,\r\n      ]}\r\n    >\r\n      <View>\r\n        <View style={Style.textContainer}>\r\n          {deviceErrorMessage ? (\r\n            <View>\r\n              <Text>There was a error while retrieving conected device</Text>\r\n              \r\n            </View>\r\n          ) : (\r\n            <View>\r\n              <Text style={Style.text}>Corrently connected:</Text>\r\n              <Text style={Style.text}>{connectedDevice && connectedDevice.name ? (connectedDevice.name):(\"None\") /*mabye use localname*/}</Text>\r\n            </View>\r\n          )}\r\n        </View>\r\n        <View style={Style.buttonContainer}>\r\n          {connectedDevice ? (\r\n            <View>\r\n              <Button buttonStyle={ApplicationStyles.button} Text=\"Disconnect Device\" \r\n                onPress={() => dispatch(DeviceActions.disconnectDevice(connectionMethode))}/>\r\n              {/*<Button buttonStyle={ApplicationStyles.button} Text=\"Activate device reading\"\r\n                onPress={() => {\r\n                  dispatch(DeviceActions.readDeviceData())\r\n                }}\r\n              />*/}\r\n            </View>\r\n            ): (\r\n            <View>\r\n              {connectionMethode == ConnectionMethode.BLE && scannerState != ScannerState.IDLE ? (\r\n                <Button buttonStyle={ApplicationStyles.button} Text=\"Stop BLE Search\" \r\n                  onPress={() => dispatch(DeviceActions.stopBleScan())}/>\r\n                  ) : (\r\n                <Button buttonStyle={ApplicationStyles.button} Text=\"Search BLE devices\"\r\n                  onPress={() => dispatch(DeviceActions.startBleScan())}/>\r\n                )\r\n              }\r\n              \r\n              {Platform.OS === 'ios' ? (<></>):(\r\n                <View>\r\n                  {connectionMethode == ConnectionMethode.BLUETOOTH && scannerState != ScannerState.IDLE ? (\r\n                    <Button buttonStyle={ApplicationStyles.button} Text=\"Stop Bluetooth Search\" \r\n                      onPress={() => dispatch(DeviceActions.stopBluetoothScan())}/>\r\n                      ) : (\r\n                    <Button buttonStyle={ApplicationStyles.button} Text=\"Search Bluetooth devices\" \r\n                      onPress={() => dispatch(DeviceActions.startBluetoothScan())}/>\r\n                    )\r\n                  }\r\n                  <Button buttonStyle={ApplicationStyles.button} Text=\"Make Discoverable (Blu 30sec)\" \r\n                      onPress={() => dispatch(DeviceActions.bluetoothScanAble())}/>\r\n\r\n                  <Button buttonStyle={ApplicationStyles.button} Text=\"OnDevice-serial\" \r\n                      onPress={() => {}}/>\r\n                </View>\r\n              )}\r\n            </View>\r\n          )}\r\n        </View>\r\n        <View style={Style.deviceContainer}>\r\n          <Text style={Style.text2}>Device List:</Text>\r\n            { connectedDevice ? \r\n              ConnectedDevice_View(connectedDevice, DeviceData)\r\n              : (\r\n                <ScrollView style={{paddingRight: 5}}>\r\n                  {Devices.map((Dev, i) => (\r\n                    <CustomListItem key={i} Title={Dev.localName} Subtitle={Dev.id} onPress={() => dispatch(DeviceActions.connectDevice(Dev))}/>\r\n                  ))}\r\n                </ScrollView> \r\n              )\r\n            }\r\n        </View>\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n\r\nexport default DeviceScreen;\r\n","import React from 'react'\r\nimport { createAppContainer } from 'react-navigation'\r\nimport { createStackNavigator } from 'react-navigation-stack'\r\nimport { TouchableOpacity, Icon, View, Text } from 'react-native'\r\n\r\nimport Front from '../Containers/Agrisys/FrontScreen'\r\nimport Example from '../Containers/Example/ExampleScreen'\r\nimport Device from '../Containers/Device/DeviceScreen'\r\n\r\nimport { ApplicationStyles } from '../Theme'\r\n/**\r\n * The root screen contains the application's navigation.\r\n *\r\n * @see https://reactnavigation.org/docs/en/hello-react-navigation.html#creating-a-stack-navigator\r\n */\r\nconst StackNavigator = createStackNavigator(\r\n  {\r\n    // The main application screen is our \"ExampleScreen\". Feel free to replace it with your\r\n    // own screen and remove the example.\r\n    FrontScreen: {\r\n      screen: Front,\r\n      navigationOptions: () => ({\r\n        headerMode: 'none',\r\n        headerShown: false,\r\n      }),\r\n      path: 'main',\r\n    },\r\n    \r\n    DeviceScreen: {\r\n      screen: Device,\r\n      navigationOptions: () => ({\r\n        title: 'Device',\r\n        headerTitleStyle:{\r\n          ...ApplicationStyles.navigationHeader\r\n        },\r\n      }),\r\n    },\r\n\r\n    ExampleScreen: {\r\n      screen: Example,\r\n      navigationOptions: () => ({\r\n        headerMode: 'none',\r\n      }),\r\n      path: 'example',\r\n    }\r\n  },\r\n  {\r\n    initialRouteName: 'FrontScreen',\r\n    // See https://reactnavigation.org/docs/en/stack-navigator.html#stacknavigatorconfig\r\n    headerMode: 'float',\r\n    defaultNavigationOptions:{\r\n      headerTitleAlign: 'center',\r\n      headerRight: () => (<View style={{padding:6}}></View>),\r\n    },\r\n  }\r\n)\r\n\r\nexport default StackNavigator\r\n","import React, { Component } from 'react'\r\nimport { Platform, Text, Image, View, ActivityIndicator } from 'react-native'\r\nimport { Input } from 'react-native-elements'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport {Actions, DataRefs, UserStates} from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Loading } from '../../../Components'\r\nimport Style from './AuthStyle'\r\nimport { ApplicationStyles, Helpers, Metrics, Images } from '../../../Theme'\r\n\r\nlet auth;\r\nif (Platform.OS === 'ios' || Platform.OS === 'android') {\r\n  //#region App version imports\r\n  auth = require('@react-native-firebase/auth').default;\r\n  //#endregion\r\n} else {\r\n  //#region Web Version imports\r\n  var firebase = require('firebase/app').default;\r\n  require('firebase/auth').default;\r\n\r\n  auth = firebase.auth;\r\n  //#endregion\r\n}\r\n\r\nconst PanelsSorter = (userType) => {\r\n  switch(userType) {\r\n    case UserStates.ADMIN:\r\n      return \"AdminPanel\"\r\n    case UserStates.OWNER:\r\n      return \"ConsysPanel\"\r\n    case UserStates.FREE:\r\n      return \"UserPanel\"\r\n    case UserStates.STARTER:\r\n      return \"CreateUserData\"\r\n    default:\r\n      return \"LoginUser\"\r\n  }\r\n};\r\n\r\nclass UserLoadingScreen extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      ISLOADPAGE: true,\r\n      FocusSubscription: null,\r\n    }\r\n  }\r\n\r\n  getData() {\r\n  }\r\n\r\n  checkData(props) {\r\n    const firebaseData = this.props.firebase;\r\n    if (!firebaseData) {\r\n      this.props.setFirebaseError(\"Internal rootdata Error\")\r\n      NavigationService.navigate('MainStack')\r\n      return;\r\n    }\r\n    \r\n    var page = \"LoginUser\";\r\n    const firebaseUser = firebaseData.firebaseUser\r\n    if (firebaseUser && Object.keys(firebaseUser).length > 1) {\r\n      if (firebaseUser.state === UserStates.STARTER && !firebaseUser.emailVerified) {\r\n        var User = auth().currentUser;\r\n        if(!User.emailVerified) {\r\n          page = \"VerifyScreen\";\r\n        }else {\r\n          page = PanelsSorter(firebaseUser.state)\r\n        }\r\n      } else {\r\n        page = PanelsSorter(firebaseUser.state)\r\n      }\r\n    }\r\n\r\n    NavigationService.navigate(page)\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps){\r\n      if (this.props.firebase.firebaseUser != prevProps.firebase.firebaseUser) { //Only checking user changes\r\n        var now = this.props.firebase.firebaseUser\r\n        var prev = prevProps.firebase.firebaseUser\r\n        if (!now || now.uid !== prev.uid || (now.state !== prev.state && prev.state !== UserStates.STARTER) || now.emailVerified != prev.emailVerified) {\r\n          console.log(\"UserLoading\")\r\n          this.checkData(this.props);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setFirebaseError(null)\r\n    this.props.getUser(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n\r\n    const FocusSubscription = this.props.navigation.addListener(\r\n      'willFocus',\r\n      payload => {\r\n        this.props.setViewLoading(false)\r\n        this.props.setViewError(null)\r\n      }\r\n    );\r\n    this.setState({\r\n      FocusSubscription: FocusSubscription\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.state.FocusSubscription) {\r\n      this.state.FocusSubscription.remove()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n    const ISLOADPAGE = this.state.ISLOADPAGE;\r\n    \r\n    return(\r\n      <View\r\n        style={[\r\n          Helpers.mainContainer,\r\n        ]}\r\n      >\r\n        {!ISLOADPAGE ?(\r\n          <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\r\n            <Text style={ApplicationStyles.text}>This page contains an error.</Text>\r\n            <Text style={ApplicationStyles.text}>If you are going back, please press back again.</Text>\r\n          </View>\r\n        ):(\r\n          <View style={[Helpers.fillRowCenter, Helpers.center, Helpers.logoContainer]}>\r\n            <Image style={Helpers.fullSize} source={Images.Hexa_icon} resizeMode={'contain'} />\r\n          </View>\r\n        )}\r\n        {(IsLoading || ISLOADPAGE) &&\r\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n        }\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    clearDataMem: () => dispatch(FirebaseActions.actionStarting(Actions.CLEAR, DataRefs.USERSDATA)),\r\n    getUser: (UserId) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.USERSDATA, {UserId: UserId})), //TODO: mabye not get user \r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserLoadingScreen);\r\n//export default UserLoadingScreen;\r\n","import { StyleSheet } from 'react-native'\r\nimport { Helpers, Metrics, Fonts, Colors } from '../../../Theme'\r\n\r\nexport default StyleSheet.create({\r\n  \r\n})\r\n","import React, { Component } from 'react'\r\nimport { Text, View, ActivityIndicator, Platform } from 'react-native'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button } from '../../../Components'\r\nimport Style from './AuthStyle'\r\nimport { ApplicationStyles, Helpers, Metrics } from '../../../Theme'\r\n\r\nlet auth;\r\nif (Platform.OS === 'ios' || Platform.OS === 'android') {\r\n  //#region App version imports\r\n  auth = require('@react-native-firebase/auth').default;\r\n  //#endregion\r\n} else {\r\n  //#region Web Version imports\r\n  var firebase = require('firebase/app').default;\r\n  require('firebase/auth').default;\r\n\r\n  auth = firebase.auth;\r\n  //#endregion\r\n}\r\n\r\nclass VerifyScreen extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    \r\n    this.state = {\r\n    }\r\n  }\r\n\r\n  setData(Props) {\r\n  }\r\n\r\n  getData() {\r\n  }\r\n\r\n  checkData(props) {\r\n    if (props.firebase && props.firebase.firebaseUser) {\r\n      var User = auth().currentUser;\r\n\r\n      if (User && !props.firebase.firebaseUser.emailVerified && !props.firebase.viewIsLoading){\r\n        User.reload().then((data)=>{\r\n          if(User.emailVerified) {\r\n            this.props.setViewLoading(true)\r\n            this.props.setUser(User.emailVerified)\r\n            console.log(\"Verified\")\r\n            NavigationService.navigate(\"AuthStack\")\r\n          }\r\n        })\r\n      }\r\n      \r\n      if (props.firebase.firebaseUser.emailVerified) NavigationService.navigate(\"AuthStack\")\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps) {\r\n      this.checkData(this.props);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n  }\r\n\r\n  componentWillUnmount(){\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n    const firebaseUser = this.props.firebase.firebaseUser\r\n    const ErrorMessage = this.props.firebase.viewError\r\n\r\n    return(\r\n      <View\r\n        style={[\r\n          Helpers.mainContainer,\r\n        ]}\r\n      >\r\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\r\n          {ErrorMessage ? (\r\n            <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\r\n          ):(<></>)}\r\n\r\n          <View>\r\n            <Text>Please verify your account by accepting the email, sent to your current account</Text>\r\n            <Text>This page will not refresh itself...</Text>\r\n            <Button Text=\"Resend verification\"\r\n              onPress={() => {\r\n                console.log(\"send\", firebaseUser, this.state.User)\r\n                if (firebaseUser && this.state.User) {\r\n                  this.state.User.sendEmailVerification()\r\n                }\r\n              }}/>\r\n            <Button Text=\"Refresh\"\r\n              onPress={() => {\r\n                this.checkData(this.props, this.state)\r\n              }}/>\r\n          </View>\r\n          \r\n        </View>\r\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n        }\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\r\n\r\n    setUser: (Verified) => dispatch(FirebaseActions.actionStarting(Actions.UPDATE, DataRefs.USERS, {emailVerified:Verified, })),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(VerifyScreen);\r\n//export default VerifyScreen;","import React, { Component } from 'react'\r\nimport { Text, View, ActivityIndicator, Image } from 'react-native'\r\nimport { Input } from 'react-native-elements'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button } from '../../../Components'\r\nimport Style from './AuthStyle'\r\nimport { ApplicationStyles, Helpers, Metrics, Images } from '../../../Theme'\r\n\r\nclass UserLoginScreen extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      Email: \"\",\r\n      Pass: \"\",\r\n      CreateUser: false,\r\n    }\r\n  }\r\n\r\n  getData() {\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps) {\r\n      this.checkData(this.props);\r\n      if (this.props.firebase.viewError != prevProps.firebase.viewError) {\r\n        this.forceUpdate()\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n    const ErrorMessage = this.props.firebase.viewError\r\n    \r\n    return(\r\n      <View\r\n        style={[\r\n          Helpers.mainContainer,\r\n        ]}\r\n      >\r\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\r\n          {ErrorMessage ? (\r\n            <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\r\n          ):(<></>)}\r\n\r\n          {!this.state.CreateUser?(\r\n            <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\r\n              <View style={[Helpers.borderContainer, Helpers.midWidth, {marginBottom:20}] }>\r\n                <Input\r\n                  label=\"Username\"\r\n                  style={ApplicationStyles.input}\r\n                  onChangeText={text => {\r\n                    this.setState({Email: text})\r\n                  }}\r\n                  value={this.state.Email}\r\n                />\r\n                <Input\r\n                  label=\"Password\"\r\n                  style={ApplicationStyles.input}\r\n                  onChangeText={text => {\r\n                    this.setState({Pass:text})\r\n                  }}\r\n                  value={this.state.Pass}\r\n                  secureTextEntry={true}\r\n                />\r\n                <Button Text=\"Login\" icon={Images.User}\r\n                  onPress={() => {\r\n                    if (!this.state.Email || this.state.Email === \"\") this.props.setViewError(\"Email is needed\")\r\n                    else if (this.state.Email === \"CLEAR\") this.props.clearDataMem()\r\n                    else if (!this.state.Pass || this.state.Pass === \"\") this.props.setViewError(\"Password is needed\")\r\n                    else {\r\n                      this.props.setViewLoading(true)\r\n                      this.props.signIN(this.state.Email, this.state.Pass)\r\n                    }\r\n                  }}/>\r\n              </View>\r\n\r\n              <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\r\n                <Button Text=\"Send reset password\"\r\n                  onPress={() => {\r\n                    this.props.setViewError(null)\r\n                    if (this.state.Email) {\r\n                      this.props.setViewLoading(true)\r\n                      this.props.resetPass(this.state.Email)\r\n                    } else {\r\n                      this.props.setViewError(\"Please provide an Email\")\r\n                    }\r\n                  }}/>\r\n                <Button Text=\"Create New User\"\r\n                  onPress={() => {\r\n                    this.props.setViewError(null)\r\n                    this.setState({\r\n                      Email: \"\",\r\n                      Pass: \"\",\r\n                      CreateUser: true,\r\n                    })\r\n                  }}/>\r\n              </View>\r\n            </View>\r\n          ):(\r\n            <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\r\n              <View style={ [Helpers.borderContainer, Helpers.midWidth, {marginBottom:20}] }>\r\n                <Input\r\n                  label=\"Email\"\r\n                  style={ApplicationStyles.input}\r\n                  onChangeText={text => {this.setState({Email:text})}}\r\n                  value={this.state.Email}\r\n                />\r\n                <Input\r\n                  label=\"Password\"\r\n                  style={ApplicationStyles.input}\r\n                  onChangeText={text => {this.setState({Pass:text})}}\r\n                  value={this.state.Pass}\r\n                  secureTextEntry={true}\r\n                />\r\n              </View>\r\n              <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\r\n                <Button Text=\"Create User\" \r\n                  onPress={() => { \r\n                    if (!this.state.Email || this.state.Email === \"\") this.props.setFirebaseError(\"Email is needed\")\r\n                    else if (!this.state.Pass || this.state.Pass === \"\") this.props.setFirebaseError(\"Password is needed\")\r\n                    else {\r\n                      this.props.setViewLoading(true)\r\n                      this.props.createUser(this.state.Email,this.state.Pass)\r\n                    }\r\n                  }}\r\n                />\r\n              </View>\r\n            </View>\r\n          )}\r\n\r\n          {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n            <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n          }\r\n        </View>\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n    clearDataMem: () => dispatch(FirebaseActions.actionStarting(Actions.CLEAR, DataRefs.USERSDATA)),\r\n\r\n    signIN: (Email, Pass) => dispatch(FirebaseActions.actionStarting(Actions.SIGN, DataRefs.USERSDATA, {Email: Email, Pass: Pass})),\r\n    resetPass: (Email) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.USERS, {Email: Email})),\r\n    createUser: (Email, Pass) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.USERS, {Email: Email, Pass: Pass})),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserLoginScreen);\r\n//export default UserLoginScreen;","import { StyleSheet } from 'react-native'\r\nimport { Helpers, Metrics, Fonts, Colors } from '../../../Theme'\r\n\r\nexport default StyleSheet.create({\r\n\r\n})\r\n","import React, { Component } from 'react'\r\nimport { Platform, Text, View, ScrollView, ActivityIndicator } from 'react-native'\r\nimport { Input } from 'react-native-elements'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, UserStates, DataRefs, ErrorTypes, DataStringCheck } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button, TitleElement } from '../../../Components'\r\nimport Style from './UserPanelStyle'\r\nimport { ApplicationStyles, Helpers, Metrics } from '../../../Theme'\r\n\r\nclass UserInformation extends Component{\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const {FirstN, LastN, Contact, ContactP, Address} = this.setData(props)\r\n    this.state = {\r\n      FirstN: FirstN,\r\n      LastN: LastN,\r\n      Contact: Contact,\r\n      ContactP: ContactP,\r\n      Address: Address,\r\n      Country: \"\",\r\n    }\r\n  }\r\n\r\n  setData(Props) {\r\n    var FirstN = \"\"\r\n    var LastN = \"\"\r\n    var Contact = \"\"\r\n    var ContactP = \"\"\r\n    var Address = \"\"\r\n\r\n    const firebaseData = this.props.firebase;\r\n    if (firebaseData){\r\n      const firebaseUser = firebaseData.firebaseUser\r\n      if (firebaseUser) {\r\n        if (firebaseUser.name && DataStringCheck(firebaseUser.name)){\r\n          FirstN = firebaseUser.name\r\n        }\r\n        if (firebaseUser.lastN){\r\n          LastN = firebaseUser.lastN\r\n        }\r\n        if (firebaseUser.contact){\r\n          Contact = firebaseUser.contact\r\n        }\r\n        if (firebaseUser.phoneNumber) {\r\n          ContactP = firebaseUser.phoneNumber\r\n        }\r\n        if (firebaseUser.address){\r\n          Address = firebaseUser.address\r\n        }\r\n      }\r\n    }\r\n    return {FirstN, LastN, Contact, ContactP, Address}\r\n  }\r\n\r\n  getData() {\r\n    \r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n\r\n    this.props.getUser(null)\r\n\r\n    this.checkData(this.props)\r\n    this.getData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps) {\r\n      this.checkData(this.props);\r\n\r\n      if (this.props.firebase.firebaseUser) {\r\n        if ((this.props.firebase.firebaseUser.name != this.state.FirstN && this.state.FirstN === \"\") ||\r\n            (this.props.firebase.firebaseUser.lastN != this.state.lastN && this.state.lastN === \"\") ||\r\n            (this.props.firebase.firebaseUser.contact != this.state.Contact && this.state.Contact === \"\") ||\r\n            (this.props.firebase.firebaseUser.address != this.state.Address && this.state.Address === \"\")\r\n          ) {\r\n          const {FirstN, LastN, Contact, ContactP, Address} = this.setData(this.props)\r\n          this.setState({\r\n            FirstN: FirstN,\r\n            LastN: LastN,\r\n            Contact: Contact,\r\n            ContactP: ContactP,\r\n            Address: Address,\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n    const ErrorMessage = this.props.firebase.viewError\r\n\r\n    //TODO: Test more with input error display ??\r\n    const F_FirstN = React.createRef();\r\n    const F_LastN = React.createRef();\r\n    const F_Contact = React.createRef();\r\n    const F_ContactP = React.createRef();\r\n    const F_Address = React.createRef();\r\n\r\n    return(\r\n      <ScrollView style={[Metrics.verticalMargin, {paddingRight: 5}]}>\r\n        <View\r\n          style={[\r\n            Helpers.mainContainer,\r\n          ]}\r\n        >\r\n          <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\r\n            {ErrorMessage && (!ErrorMessage.type || ErrorMessage.type === ErrorTypes.SYSTEM) ? (\r\n              <Text style={ApplicationStyles.error}>{ErrorMessage.message?ErrorMessage.message:ErrorMessage}</Text>\r\n            ):(<></>)}\r\n            <TitleElement Text=\"User Informations\"/>\r\n            <View style={ [Helpers.borderContainer, Helpers.midWidth, {marginBottom:20}] }>\r\n              <Input ref={F_FirstN}\r\n                label=\"First Name\"\r\n                style={ApplicationStyles.input}\r\n                onChangeText={text => {\r\n                  if (text){\r\n                    if (DataStringCheck(text)){\r\n                      this.setState({FirstN:text})\r\n                    }\r\n                  }else {\r\n                    this.setState({FirstN:text})\r\n                  }\r\n                }}\r\n                value={this.state.FirstN}\r\n\r\n              />\r\n              <Input ref={F_LastN}\r\n                label=\"Last Name\"\r\n                style={ApplicationStyles.input}\r\n                onChangeText={text => {\r\n                  if (text){\r\n                    if (DataStringCheck(text)){\r\n                      this.setState({LastN:text})\r\n                    }\r\n                  }else {\r\n                    this.setState({LastN:text})\r\n                  }\r\n                }}\r\n                value={this.state.LastN}\r\n              />\r\n              <Input ref={F_Contact}\r\n                label=\"Contact Email\"\r\n                style={ApplicationStyles.input}\r\n                onChangeText={text => {\r\n                  if (text){\r\n                    var test = text\r\n                    test = test.replace('@','a')\r\n                    test = test.replace('.','d')\r\n                    if (DataStringCheck(test)) {\r\n                      this.setState({Contact:text})\r\n                    }\r\n                  }else {\r\n                    this.setState({Contact:text})\r\n                  }\r\n                }}\r\n                value={this.state.Contact}\r\n              />\r\n              <Input ref={F_ContactP}\r\n                label=\"Contact Phone\"\r\n                style={ApplicationStyles.input}\r\n                onChangeText={text => {\r\n                  if (text){\r\n                    if (DataStringCheck(text, false)){\r\n                      this.setState({ContactP:text})\r\n                    }\r\n                  }else {\r\n                    this.setState({ContactP:text})\r\n                  }\r\n                }}\r\n                value={this.state.ContactP}\r\n              />\r\n              <Input ref={F_Address}\r\n                label=\"Address\"\r\n                style={ApplicationStyles.input}\r\n                onChangeText={text => {\r\n                  if (text){\r\n                    if (DataStringCheck(text)){\r\n                      this.setState({Address:text})\r\n                    }\r\n                  }else {\r\n                    this.setState({Address:text})\r\n                  }\r\n                }}\r\n                value={this.state.Address}\r\n              />\r\n              <Input\r\n                label=\"Country\"\r\n                style={ApplicationStyles.input}\r\n                onChangeText={text => {\r\n                  if (text){\r\n                    if (DataStringCheck(text)){\r\n                      this.setState({Country:text})\r\n                    }\r\n                  }else {\r\n                    this.setState({Country:text})\r\n                  }\r\n                }}\r\n                value={this.state.Country}\r\n              />\r\n            </View>\r\n            <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\r\n              <Button Text=\"Save User information\" \r\n                onPress={() => {\r\n                  var _UserData = {}\r\n\r\n                  if (!this.state.FirstN || this.state.FirstN === \"\"){\r\n                    this.props.setViewError(\"First name is needed\")\r\n                    /*F_FirstN.current.setNativeProps({ errorProps:\"First name is needed\" })\r\n                    F_FirstN.current.shake();*/\r\n                  } else if (!DataStringCheck(this.state.FirstN)) {\r\n                    this.props.setViewError(\"First name contains invalid characters\")\r\n                    /*F_FirstN.current.setNativeProps({ errorProps: \"First name contains invalid characters\" })\r\n                    F_FirstN.current.shake();*/\r\n                  }\r\n                  \r\n                  else if (!this.state.LastN || this.state.LastN === \"\"){\r\n                    this.props.setViewError(\"Last name is needed\")\r\n                  } else if (!DataStringCheck(this.state.LastN)) {\r\n                    this.props.setViewError(\"Last name contains invalid characters\")\r\n                  }\r\n                  \r\n                  else {\r\n                    _UserData = {name: this.state.FirstN, lastN: this.state.LastN}\r\n                    if (this.state.Contact !== \"\") _UserData.contact = this.state.Contact\r\n                    if (this.state.ContactP !== \"\") _UserData.phone = this.state.ContactP\r\n                    if (this.state.Address !== \"\") _UserData.address = this.state.Address\r\n                    if (this.state.Country !== \"\") _UserData.country = this.state.Country\r\n\r\n                    this.props.setViewLoading(true)\r\n                    this.props.updateUser(_UserData)\r\n                    if (this.props.OnDone) {\r\n                      this.props.OnDone(true)\r\n                    }\r\n                  }\r\n                }}/>\r\n              </View>\r\n          </View>\r\n          {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n            <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n          }\r\n        </View>\r\n      </ScrollView>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    //setViewError: (error, type) => dispatch(FirebaseActions.setViewError(error, type)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    getUser: (UserId) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.USERSDATA, {UserId: UserId})),\r\n    updateUser: (Data) => dispatch(FirebaseActions.actionStarting(Actions.UPDATE, DataRefs.USERSDATA, {Data: Data}))\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserInformation);\r\n//export default UserInformation;","import React, { Component } from 'react'\r\nimport { Platform, Dimensions, Text, CheckBox, View, ScrollView, ActivityIndicator, TouchableOpacity } from 'react-native'\r\nimport { Input } from 'react-native-elements'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, UserStates, DataRefs, ErrorTypes, DataStringCheck } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button, TitleElement } from '../../../Components'\r\nimport Style from './UserPanelStyle'\r\nimport { ApplicationStyles, Helpers, Metrics, Colors } from '../../../Theme'\r\n\r\nconst window = Dimensions.get(\"window\");\r\nconst screen = Dimensions.get(\"screen\");\r\n\r\nclass Subscription extends Component{\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const {CurrentSub} = this.setData(props)\r\n    this.state = {\r\n      dimensions: {window, screen},\r\n      CurrentSub: CurrentSub,\r\n\r\n      Billing: 0,\r\n    }\r\n  }\r\n\r\n  setData(Props) {\r\n    var CurrentSub = \"\"\r\n\r\n    const firebaseData = this.props.firebase;\r\n    if (firebaseData){\r\n      const firebaseUser = firebaseData.firebaseUser\r\n      if (firebaseUser) {\r\n        if (firebaseUser.state && firebaseUser.state != UserStates.STARTER){\r\n          CurrentSub = firebaseUser.state\r\n        }\r\n      }\r\n    }\r\n    return { CurrentSub }\r\n  }\r\n\r\n  getData() {\r\n    \r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  onChange = ({ window, screen }) => {\r\n    this.setState({\r\n      dimensions: {window, screen},\r\n    })\r\n  };\r\n\r\n  componentDidMount() {\r\n    Dimensions.addEventListener(\"change\", this.onChange);\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n\r\n    this.props.getUser(null)\r\n\r\n    this.checkData(this.props)\r\n    this.getData();\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    Dimensions.removeEventListener(\"change\", this.onChange);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps) {\r\n      this.checkData(this.props);\r\n\r\n      if (this.props.firebase.firebaseUser) {\r\n        if ((this.props.firebase.firebaseUser.state != this.state.CurrentSub && this.state.CurrentSub === \"\")\r\n          ) {\r\n          const {CurrentSub} = this.setData(this.props)\r\n          this.setState({\r\n            CurrentSub: CurrentSub,\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n    const ErrorMessage = this.props.firebase.viewError\r\n\r\n    var wide = this.state.dimensions.window.width>900?true:false\r\n    var App = (Platform.OS === 'ios' || Platform.OS === 'android')||!wide\r\n    \r\n    return(\r\n      <ScrollView style={[Metrics.verticalMargin, {paddingRight: 5}]}>\r\n        <View\r\n          style={[\r\n            Helpers.mainContainer,\r\n          ]}\r\n        >\r\n          <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\r\n            {ErrorMessage && (!ErrorMessage.type || ErrorMessage.type === ErrorTypes.SYSTEM) ? (\r\n              <Text style={ApplicationStyles.error}>{ErrorMessage.message?ErrorMessage.message:ErrorMessage}</Text>\r\n            ):(<></>)}\r\n            \r\n            <TitleElement Text=\"Subscription plan\"/>\r\n            <View style={[!App?Helpers.fillRowCenter:{}, {marginBottom:20}]}>\r\n              <TouchableOpacity style={[Helpers.borderContainer, {width:200, height:300}, this.state.CurrentSub===UserStates.WORKER?{backgroundColor: Colors.AgriGreen}:{}]} \r\n                onPress={() => {\r\n                  this.setState({\r\n                    CurrentSub: UserStates.WORKER\r\n                  }, this.forceUpdate())\r\n              }}>\r\n                <View style={[Helpers.row, Helpers.fullWidth, {alignContent:'center', alignItems:'center', justifyContent:'center', height:35}]}>\r\n                  <Text style={{fontWeight:\"bold\", fontSize:20}}>Farm Staff</Text>\r\n                  {this.state.CurrentSub===UserStates.WORKER?(\r\n                    <CheckBox \r\n                      value={this.state.CurrentSub===UserStates.WORKER?true:false}\r\n                    />\r\n                  ):(<></>)}\r\n                </View>\r\n                <View style={[Helpers.fill, Helpers.borderContainer]}>\r\n                  \r\n                </View>\r\n                <View style={[Helpers.borderContainer, {height:75}]}>\r\n                  <Text style={{fontWeight:\"bold\"}}>Free</Text>\r\n                  <Text>Access to assign as staff of an existing farm</Text>\r\n                </View>\r\n              </TouchableOpacity>\r\n\r\n              <TouchableOpacity style={[Helpers.borderContainer, {width:200, height:300}, this.state.CurrentSub===UserStates.FREE?{backgroundColor: Colors.AgriGreen}:{}]}\r\n                onPress={() => {\r\n                  this.setState({\r\n                    CurrentSub: UserStates.FREE\r\n                  }, this.forceUpdate())\r\n              }}>\r\n                <View style={[Helpers.row, Helpers.fullWidth, {alignContent:'center', alignItems:'center', justifyContent:'center', height:35}]}>\r\n                  <Text style={{fontWeight:\"bold\", fontSize:20}}>Farm Owner</Text>\r\n                  {this.state.CurrentSub===UserStates.FREE?(\r\n                    <CheckBox \r\n                      value={this.state.CurrentSub===UserStates.FREE?true:false}\r\n                    />\r\n                  ):(<></>)}\r\n                </View>\r\n                <View style={[Helpers.fill, Helpers.borderContainer]}>\r\n                  \r\n                </View>\r\n                <View style={[Helpers.borderContainer, {height:75}]}>\r\n                  <Text style={{fontWeight:\"bold\"}}>Free</Text>\r\n                  <Text>Access to create and manage own farm</Text>\r\n                </View>\r\n              </TouchableOpacity>\r\n\r\n              <TouchableOpacity style={[Helpers.borderContainer, {width:200, height:300}, this.state.CurrentSub===UserStates.OWNER?{backgroundColor: Colors.AgriGreen}:{}]}\r\n                onPress={() => {\r\n                  this.setState({\r\n                    CurrentSub: UserStates.OWNER\r\n                  }, this.forceUpdate())\r\n              }}>\r\n                <View style={[Helpers.row, Helpers.fullWidth, {alignContent:'center', alignItems:'center', justifyContent:'center', height:35}]}>\r\n                  <Text style={{fontWeight:\"bold\", fontSize:20}}>Farm Manager</Text>\r\n                  {this.state.CurrentSub===UserStates.OWNER?(\r\n                    <CheckBox \r\n                      value={this.state.CurrentSub===UserStates.OWNER?true:false}\r\n                    />\r\n                  ):(<></>)}\r\n                </View>\r\n                <View style={[Helpers.fill, Helpers.borderContainer]}>\r\n                  \r\n                </View>\r\n                <View style={[Helpers.borderContainer, {height:75}]}>\r\n                  <Text style={{fontWeight:\"bold\"}}>9999.99€</Text>\r\n                  <Text>Access to manage own farm, and assing staff</Text>\r\n                </View>\r\n              </TouchableOpacity>\r\n\r\n              <TouchableOpacity style={[Helpers.borderContainer, {width:200, height:300}, this.state.CurrentSub===\"Contact\"?{backgroundColor: Colors.AgriGreen}:{}]}\r\n                onPress={() => {\r\n                  this.setState({\r\n                    CurrentSub: \"Contact\"\r\n                  }, this.forceUpdate())\r\n              }}>\r\n                <View style={[Helpers.row, Helpers.fullWidth, {alignContent:'center', alignItems:'center', justifyContent:'center', height:35}]}>\r\n                  <Text style={{fontWeight:\"bold\", fontSize:20}}>Get contacted</Text>\r\n                  {this.state.CurrentSub===\"Contact\"?(\r\n                    <CheckBox \r\n                      value={this.state.CurrentSub===\"Contact\"?true:false}\r\n                    />\r\n                  ):(<></>)}\r\n                </View>\r\n                <View style={[Helpers.fill, Helpers.borderContainer]}>\r\n                  \r\n                </View>\r\n                <View style={[Helpers.borderContainer, {height:75}]}>\r\n                <Text style={{fontWeight:\"bold\", height:20}}></Text>\r\n                  <Text>We will contact you, and tell more about our offers</Text>\r\n                </View>\r\n              </TouchableOpacity>\r\n            </View>\r\n\r\n            <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\r\n              <Button Text=\"Submit\" \r\n                onPress={() => {\r\n                  if (!this.state.CurrentSub || this.state.CurrentSub === \"\"){\r\n                    this.props.setViewError(\"Please choose a subscription type.\")\r\n                  }\r\n\r\n                  else if (this.props.OnDone) {\r\n                    this.props.OnDone(this.state.CurrentSub)\r\n                  } else {\r\n                    //TODO: something.. validate buy and update user state\r\n                  }\r\n                }}/>\r\n              </View>\r\n          </View>\r\n          {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n            <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n          }\r\n        </View>\r\n      </ScrollView>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    //setViewError: (error, type) => dispatch(FirebaseActions.setViewError(error, type)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    getUser: (UserId) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.USERSDATA, {UserId: UserId})),\r\n\r\n    //updateUser: (Data) => dispatch(FirebaseActions.actionStarting(Actions.UPDATE, DataRefs.USERSDATA, {Data: Data}))\r\n    //createUserData: (Userdata, Farm, Sections, Pens) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.USERSDATA, {UserData: Userdata, Farms:{name:Farm}, Sections:Sections, Pens:Pens})),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Subscription);\r\n//export default Subscription;","import React, { Component } from 'react'\r\nimport { Platform, Text, View, ScrollView, ActivityIndicator } from 'react-native'\r\nimport { Input } from 'react-native-elements'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, UserStates, DataRefs, ErrorTypes, DataStringCheck } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button, TitleElement } from '../../../Components'\r\nimport Style from './UserPanelStyle'\r\nimport { ApplicationStyles, Helpers, Metrics } from '../../../Theme'\r\n\r\nclass FarmInformation extends Component{\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const {FarmName, Address, Country, Cvr, Manager} = this.setData(props)\r\n    this.state = {\r\n      FarmName: FarmName,\r\n      Address: Address,\r\n      Country: Country,\r\n      Cvr: Cvr,\r\n      Manager: Manager,\r\n\r\n      Sections: \"0\",\r\n      Pens: \"0\",\r\n    }\r\n  }\r\n\r\n  setData(Props) {\r\n    var FarmName = \"\"\r\n    var Address = \"\"\r\n    var Country = \"\"\r\n    var Cvr = \"\"\r\n    var Manager = \"\"\r\n\r\n    const localDataStore = Props.firebase.localDataStore;\r\n    const firebaseUser = this.props.firebase.firebaseUser\r\n\r\n    if (firebaseUser) {\r\n      if (firebaseUser.lastN !== \"\") {\r\n        FarmName = firebaseUser.lastN\r\n      }\r\n      if (firebaseUser.address !== \"\") {\r\n        Address = firebaseUser.address\r\n      }\r\n      if (firebaseUser.country) {\r\n        Country = firebaseUser.country\r\n      }\r\n      if (firebaseUser.email != \"\") {\r\n        Manager = firebaseUser.email\r\n      }\r\n    }\r\n\r\n    if (localDataStore && firebaseUser && localDataStore.farms && firebaseUser.farms && localDataStore.farms[Object.keys(firebaseUser.farms)[0]]) {\r\n      var FarmData = localDataStore.farms[Object.keys(firebaseUser.farms)[0]]\r\n\r\n      if (FarmData.name) FarmName = FarmData.name\r\n      if (FarmData.address) Address = FarmData.address\r\n      if (FarmData.country) Country = FarmData.country\r\n      if (FarmData.cvr) Cvr = FarmData.cvr\r\n      if (FarmData.manager) Manager = FarmData.manager\r\n    }\r\n\r\n    return {FarmName, Address, Country, Cvr, Manager}\r\n  }\r\n\r\n  getData() {\r\n    \r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n\r\n    this.props.getUser(null)\r\n    this.props.getFarm()\r\n\r\n    this.checkData(this.props)\r\n    this.getData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps) {\r\n      this.checkData(this.props);\r\n\r\n      if (this.props.firebase.firebaseUser) {\r\n        /*if ((this.props.firebase.firebaseUser.name != this.state.FirstN && this.state.FirstN === \"\") ||\r\n            (this.props.firebase.firebaseUser.lastN != this.state.lastN && this.state.lastN === \"\") ||\r\n            (this.props.firebase.firebaseUser.contact != this.state.Contact && this.state.Contact === \"\") ||\r\n            (this.props.firebase.firebaseUser.address != this.state.Address && this.state.Address === \"\")\r\n          ) {\r\n          const {FarmName, Address, Cvr, Manager} = this.setData(this.props)\r\n          this.state = {\r\n            FarmName: FarmName,\r\n            Address: Address,\r\n            Cvr: Cvr,\r\n            Manager: Manager,\r\n          }\r\n        }*/\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n    const ErrorMessage = this.props.firebase.viewError\r\n\r\n    return(\r\n      <ScrollView style={[Metrics.verticalMargin, {paddingRight: 5}]}>\r\n        <View\r\n          style={[\r\n            Helpers.mainContainer,\r\n          ]}\r\n        >\r\n          <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\r\n            {ErrorMessage && (!ErrorMessage.type || ErrorMessage.type === ErrorTypes.SYSTEM) ? (\r\n              <Text style={ApplicationStyles.error}>{ErrorMessage.message?ErrorMessage.message:ErrorMessage}</Text>\r\n            ):(<></>)}\r\n            <TitleElement Text=\"Farm Informations\"/>\r\n            <View style={ [Helpers.borderContainer, Helpers.midWidth, {marginBottom:20}] }>\r\n              <Input\r\n                label=\"Farm Name\"\r\n                style={ApplicationStyles.input}\r\n                onChangeText={text => {\r\n                  if (text){\r\n                    if (DataStringCheck(text)){\r\n                      this.setState({FarmName:text})\r\n                    }\r\n                  }else {\r\n                    this.setState({FarmName:text})\r\n                  }\r\n                }}\r\n                value={this.state.FarmName}\r\n              />\r\n              <Input\r\n                label=\"Address\"\r\n                style={ApplicationStyles.input}\r\n                onChangeText={text => {\r\n                  if (text){\r\n                    //if (DataStringCheck(text)){\r\n                      this.setState({Address:text})\r\n                    //}\r\n                  }else {\r\n                    this.setState({Address:text})\r\n                  }\r\n                }}\r\n                value={this.state.Address}\r\n              />\r\n              <Input\r\n                label=\"Country\"\r\n                style={ApplicationStyles.input}\r\n                onChangeText={text => {\r\n                  if (text){\r\n                    //if (DataStringCheck(text)){\r\n                      this.setState({Country:text})\r\n                    //}\r\n                  }else {\r\n                    this.setState({Country:text})\r\n                  }\r\n                }}\r\n                value={this.state.Country}\r\n              />\r\n              <Input\r\n                label=\"Cvr\"\r\n                style={ApplicationStyles.input}\r\n                onChangeText={text => {\r\n                  if (!isNaN(text)){\r\n                    this.setState({\r\n                      Cvr:text\r\n                    })\r\n                  }\r\n                }}\r\n                value={this.state.Cvr}\r\n              />\r\n              <Input\r\n                label=\"Manager contact\"\r\n                style={ApplicationStyles.input}\r\n                onChangeText={text => {\r\n                  if (text) {\r\n                    var test = text\r\n                    test = test.replace('@','a')\r\n                    test = test.replace('.','d')\r\n                    if (DataStringCheck(test)) {\r\n                      this.setState({Manager:text})\r\n                    }\r\n                  }else {\r\n                    this.setState({Manager:text})\r\n                  }\r\n                }}\r\n                value={this.state.Manager}\r\n              />\r\n              <Input\r\n                label=\"Number of Sections\"\r\n                style={ApplicationStyles.input}\r\n                onChangeText={text => {\r\n                  if (!isNaN(text)){\r\n                    this.setState({\r\n                      Sections:text\r\n                    })\r\n                  }\r\n                }}\r\n                value={this.state.Sections}\r\n              />\r\n              <Input\r\n                label=\"Number of Pens in each Sections\"\r\n                style={ApplicationStyles.input}\r\n                onChangeText={text => {\r\n                  if (!isNaN(text)){\r\n                    this.setState({\r\n                      Pens:text\r\n                    })\r\n                  }\r\n                }}\r\n                value={this.state.Pens}\r\n              />\r\n            </View>\r\n\r\n            <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\r\n              <Button Text=\"Save Farm information\" \r\n                onPress={() => {\r\n                  var _FarmData = {}\r\n                  var _sections = {};\r\n                  var _pens = {};\r\n\r\n                  if (!this.state.FarmName || this.state.FarmName === \"\"){\r\n                    this.props.setViewError(\"Farm name is needed\")\r\n                  } else if (!DataStringCheck(this.state.FarmName)) {\r\n                    this.props.setViewError(\"First name contains invalid characters\")\r\n                  }\r\n                  \r\n                  else {\r\n                    _FarmData = {name: this.state.FarmName}\r\n\r\n                    if (this.state.Address !== \"\") _FarmData.address = this.state.Address\r\n                    if (this.state.Country !== \"\") _FarmData.country = this.state.Country\r\n                    if (this.state.Cvr !== \"\") _FarmData.cvr = this.state.Cvr\r\n                    if (this.state.Manager !== \"\") _FarmData.manager = this.state.Manager\r\n\r\n                    this.props.setViewLoading(true)\r\n                    this.props.updateFarm(_FarmData)\r\n\r\n                    if (this.state.Sections && this.state.Pens) {\r\n                      this.props.setViewLoading(true)\r\n                      var Pen = 1;\r\n                      var i, i2;\r\n                      for (i = 1; i <= this.state.Sections; i++) {\r\n                        var sectionPens = {};\r\n                        for (i2 = 1; i2 <= this.state.Pens; i2++) {\r\n                          _pens['Pen_' + Pen] = {section: 'Section_' + i}\r\n                          sectionPens['Pen_' + Pen] = true\r\n                          Pen++;\r\n                        }\r\n                        \r\n                        _sections['Section_' + i] = {pens: sectionPens}\r\n                      }\r\n                      console.log(\"Set\", _sections, _pens)\r\n                      this.props.updateFarmData(_sections, _pens)\r\n                    }\r\n\r\n                    if (this.props.OnDone) {\r\n                      this.props.OnDone(true)\r\n                    }\r\n                  }\r\n                }}/>\r\n              </View>\r\n          </View>\r\n          {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n            <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n          }\r\n        </View>\r\n      </ScrollView>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    //setViewError: (error, type) => dispatch(FirebaseActions.setViewError(error, type)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    getUser: (UserId) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.USERSDATA, {UserId: UserId})),\r\n    getFarm: () => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.FARMS, {})),\r\n\r\n    updateFarm: (FarmData) => dispatch(FirebaseActions.actionStarting(Actions.UPDATE, DataRefs.FARMS, {Data: FarmData})),\r\n    updateFarmData: (sections, pens) => dispatch(FirebaseActions.actionStarting(Actions.UPDATE, DataRefs.FARMDATAS, {Data:{sections:sections, pens:pens}})),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FarmInformation);\r\n//export default FarmInformation;","import React, { Component } from 'react'\r\nimport { Platform, Text, View, ScrollView, ActivityIndicator } from 'react-native'\r\nimport { Input } from 'react-native-elements'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, UserStates, DataRefs, DataStringCheck } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button } from '../../../Components'\r\nimport Style from './AuthStyle'\r\nimport { ApplicationStyles, Helpers, Metrics } from '../../../Theme'\r\n\r\nimport UserInformation from '../UserPanel/UserInformation'\r\nimport Subscription from '../UserPanel/Subscription'\r\nimport FarmInformation from '../UserPanel/FarmInformation'\r\n\r\nclass CreateNewUserData extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      ViewState: 1,\r\n    }\r\n  }\r\n\r\n  getData() {\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    //this.props.setViewError(null)\r\n\r\n    this.checkData(this.props);\r\n    this.getData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps) {\r\n      this.checkData(this.props);\r\n      /*if (this.props.firebase.viewError != prevProps.firebase.viewError) {\r\n        this.forceUpdate()\r\n      }*/\r\n      if (this.props.firebase.firebaseUser !== prevProps.firebase.firebaseUser) {\r\n        if (prevProps.firebase.firebaseUser.state !== UserStates.STARTER && this.state.ViewState !== 3) {\r\n          NavigationService.nacigationPop()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n\r\n    var Display = [];\r\n    if (this.state.ViewState === 1) {\r\n      Display = [(<UserInformation key={\"View1\"} OnDone={res => {\r\n        if (res) {\r\n          this.setState({\r\n            ViewState:2\r\n          }, this.forceUpdate())\r\n        }else {\r\n          NavigationService.nacigationPop()\r\n        }\r\n      }}/>)]\r\n    } else if (this.state.ViewState === 2) {\r\n      Display = [(<Subscription key={\"View2\"} OnDone={res => {\r\n        if (res && res != \"\") {\r\n          var FarmName = \"Not set\"\r\n          if (this.props.firebase.firebaseUser.lastN) FarmName = this.props.firebase.firebaseUser.lastN;\r\n          this.props.precreateUserData(res, FarmName)\r\n\r\n          this.setState({\r\n            ViewState:3\r\n          }, this.forceUpdate())\r\n        }else {\r\n          NavigationService.nacigationPop()\r\n        }\r\n      }}/>)]\r\n    } else if (this.state.ViewState === 3) {\r\n      Display = [(<FarmInformation key={\"View3\"} OnDone={res => {\r\n        if (res && res != \"\") {\r\n          this.props.clearDataMem()\r\n          NavigationService.navigateAndReset('AuthStack')\r\n        }\r\n      }}/>)]\r\n    } else {\r\n      this.props.clearDataMem()\r\n      NavigationService.navigateAndReset('AuthStack')\r\n    }\r\n\r\n    return(\r\n      <View>\r\n        {Display}\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n\r\n    clearDataMem: () => dispatch(FirebaseActions.actionStarting(Actions.CLEAR, DataRefs.USERSDATA)),\r\n    updateUser: (Data) => dispatch(FirebaseActions.actionStarting(Actions.UPDATE, DataRefs.USERSDATA, {Data: Data})),\r\n    precreateUserData: (Subsc, FarmName) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.USERSDATA, {UserData: {state:Subsc}, Farms:{name:FarmName}, Sections:{}, Pens:{}})),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateNewUserData);\r\n//export default CreateNewUserData;","import React from 'react'\r\nimport { createStackNavigator } from 'react-navigation-stack'\r\nimport { TouchableOpacity, View, Text } from 'react-native'\r\nimport { Icon } from 'react-native-elements'\r\n\r\nimport NavigationService from '../Services/NavigationService'\r\n\r\nimport LoadingUserScreen from '../Containers/Cloud/AuthScreens/UserLoadingScreen'\r\nimport LoginUserScreen from '../Containers/Cloud/AuthScreens/UserLoginScreen'\r\nimport VerifyScreen from '../Containers/Cloud/AuthScreens/VerifyScreen'\r\nimport CreateUserDataScreen from '../Containers/Cloud/AuthScreens/CreateUserDataScreen'\r\n\r\nimport { ApplicationStyles } from '../Theme'\r\n\r\n/**\r\n * The root screen contains the application's navigation.\r\n *\r\n * @see https://reactnavigation.org/docs/en/hello-react-navigation.html#creating-a-stack-navigator\r\n */\r\nconst StackNavigator = createStackNavigator(\r\n  {\r\n    UserLoadingScreen: {\r\n      screen: LoadingUserScreen,\r\n      navigationOptions: () => ({\r\n        title: 'User loading',\r\n      }),\r\n    },\r\n    LoginUser: {\r\n      screen: LoginUserScreen,\r\n      navigationOptions: () => ({\r\n        title: 'User Login',\r\n        headerLeft: () => (\r\n          <View style={{padding:6, paddingLeft: 15}}>\r\n            <Icon name=\"md-arrow-back\" type='ionicon' size={25} color=\"black\" onPress={() => NavigationService.navigate('MainStack')}/>\r\n          </View>\r\n        ),\r\n      }),\r\n    },\r\n    VerifyScreen: {\r\n      screen: VerifyScreen,\r\n      navigationOptions: () => ({\r\n        title: 'User Verification',\r\n      }),\r\n    },\r\n    CreateUserData: {\r\n      screen: CreateUserDataScreen,\r\n      navigationOptions: () => ({\r\n        title: 'Create Data',\r\n      }),\r\n    },\r\n  },\r\n  {\r\n    initialRouteName: 'UserLoadingScreen',\r\n    // See https://reactnavigation.org/docs/en/stack-navigator.html#stacknavigatorconfig\r\n    headerMode: 'float',\r\n    defaultNavigationOptions:{\r\n      headerTitleAlign: 'center',\r\n      headerTitleStyle:{...ApplicationStyles.navigationHeader},\r\n      headerLeft: () => (\r\n        <View style={{padding:6, paddingLeft: 15}}>\r\n          <Icon type='ionicon' name=\"md-arrow-back\" size={25} color=\"black\" onPress={() => NavigationService.navigate('MainStack')}/>\r\n        </View>\r\n      ),\r\n      headerRight: () => (<View style={{padding:6}}></View>),\r\n    },\r\n  }\r\n)\r\n\r\nexport default StackNavigator\r\n","import React, { useEffect, Component } from 'react'\r\nimport { Text, View, ActivityIndicator, ScrollView } from 'react-native'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button, Button_Panel } from '../../../Components'\r\nimport Style from './UserPanelStyle'\r\nimport { ApplicationStyles, Helpers, Metrics, Images } from '../../../Theme'\r\n\r\nclass FrontScreen extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      ISLOADPAGE: true,\r\n    }\r\n  }\r\n\r\n  getData() {\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps) {\r\n      this.checkData(this.props);\r\n      if (this.props.firebase.viewError != prevProps.firebase.viewError) {\r\n        this.forceUpdate()\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const firebase = this.props.firebase;\r\n\r\n    const IsLoading = firebase.firebaseIsLoading\r\n    const firebaseErrorMessage = firebase.firebaseErrorMessage\r\n    const ErrorMessage = this.props.firebase.viewError\r\n    const firebaseUser = firebase.firebaseUser\r\n\r\n    return(\r\n      <ScrollView style={[Helpers.fullSize, Helpers.fill]}>\r\n        <View\r\n          style={[\r\n            Helpers.mainContainer,\r\n          ]}\r\n        >\r\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\r\n          {firebaseErrorMessage ? (\r\n            <Text style={ApplicationStyles.error}>{firebaseErrorMessage}</Text>\r\n          ):(<></>)}\r\n          {firebaseUser?(\r\n          <View style={ Helpers.textContainer }>\r\n            <Text style={ApplicationStyles.text}>Welcome: {firebaseUser.displayName ? firebaseUser.displayName : firebaseUser.email}</Text>\r\n          </View>):(<></>)}\r\n\r\n          <Button_Panel \r\n            Texts={[\"Dashboard\", \"Pens\", \"Batchs\", \"Growth curves\", \"Operations\", \"AutoPigs\", \"Feeding\", \"Pigs\"]}\r\n            Images={[Images.DashBoard, Images.Pens, Images.Section, Images.GCurves, Images.System, Images.AutoPig, Images.Feed, Images.Sow ]}\r\n            onPress={(ele) => {\r\n              switch(ele.text){\r\n                case \"Dashboard\":\r\n                  NavigationService.navigate(\"UserDashBoard\")\r\n                  break;\r\n                case \"Pens\":\r\n                  NavigationService.navigate(\"UserPens\")\r\n                  break;\r\n                case \"Batchs\":\r\n                  NavigationService.navigate(\"UserBatchs\")\r\n                  break;\r\n                case \"Growth curves\":\r\n                  NavigationService.navigate(\"UserCurves\")\r\n                  break;\r\n                case \"Operations\":\r\n                  NavigationService.navigate(\"UserOperations\")\r\n                  break;\r\n                case \"AutoPigs\":\r\n                  this.props.getAutoPig()\r\n                  break;\r\n                case \"Feeding\":\r\n                  break;\r\n                case \"Pigs\":\r\n                  NavigationService.navigate(\"UserPigs\")\r\n                  break;\r\n              }\r\n            }}\r\n          />\r\n          \r\n          {firebaseUser && firebaseUser.state === \"admin\"?(<></>):(\r\n          <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\r\n            <Button Text=\"LogOut\"\r\n              onPress={() => {\r\n                this.props.logOut()\r\n              }}/>\r\n          </View>\r\n          )}\r\n        </View>\r\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n        }\r\n      </View>\r\n      </ScrollView>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    logOut: () => dispatch(FirebaseActions.actionStarting(Actions.SIGN, DataRefs.USERSDATA)),\r\n\r\n    getAutoPig: () => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.CONSYS, {sysId:2}))\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FrontScreen);\r\n//export default FrontScreen;\r\n","import React, { useEffect, Component } from 'react'\r\nimport { Text, View, ActivityIndicator, ScrollView, FlatList } from 'react-native'\r\nimport { Input, Icon } from 'react-native-elements'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { DataRefs, Actions, GetBatchEnd, CurvePredict, GetCurve_FromBatch, GetStats_FromBatch  } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button, TitleElement, ContentProp, ProgressBar } from '../../../Components'\r\nimport Style from './UserPanelStyle'\r\nimport { ApplicationStyles, Helpers, Metrics, Colors } from '../../../Theme'\r\n\r\nclass Dashboard extends Component {\r\n  constructor(props){\r\n    super(props);\r\n\r\n    const {Name, Manager, Mail, SectionsList, BatchList, MaxCap, CurCap} = this.setData(props)\r\n    this.state = {\r\n      farmName: Name,\r\n      farmManager: Manager,\r\n      farmMail: Mail, \r\n\r\n      BatchList: BatchList,\r\n\r\n      MaxCap:MaxCap, \r\n      CurCap:CurCap,\r\n    }\r\n  }\r\n\r\n  setData(Props) {\r\n    const localDataStore = Props.firebase.localDataStore;\r\n    const firebaseUser = this.props.firebase.firebaseUser\r\n\r\n    var Name = \"Not set\"\r\n    var Manager = \"Not set\"\r\n    var Mail = \"Not set\"\r\n\r\n    if (localDataStore && localDataStore.farms && firebaseUser.farms && localDataStore.farms[Object.keys(firebaseUser.farms)[0]]) {\r\n      var Farm = localDataStore.farms[Object.keys(firebaseUser.farms)[0]]\r\n      Name = Farm.name?Farm.name: Name\r\n      Manager = Farm.name?Farm.manager: Manager\r\n      Mail = Farm.name?Farm.email: Mail\r\n    }\r\n\r\n    var BatchList = {}//localDataStore.batchs\r\n    var MaxCap = 0;\r\n    var CurCap = 0;\r\n\r\n    if (localDataStore.batchs) {\r\n      Object.keys(localDataStore.batchs).filter(e => e !== '__jsogObjectId' && e !== 'update_time').map((BatchID) => {\r\n        var Batch = localDataStore.batchs[BatchID]\r\n        var Data = GetStats_FromBatch(Batch, localDataStore)\r\n        if (Data) {\r\n          var {StartDate, EndDate, TargetWeight, PenCount, Animals, AverageWeight, AverageGrowth, isClosed, isVirtual} = Data\r\n          \r\n          if (Batch.pens) {\r\n            MaxCap += Object.keys(Batch.pens).reverse().filter(e => (e !== '__jsogObjectId')).length * 1;\r\n          }\r\n          CurCap += Animals;\r\n\r\n          Batch.count = Animals\r\n          Batch.weight = AverageWeight\r\n          Batch.target = TargetWeight\r\n          Batch.End = EndDate\r\n\r\n          BatchList[BatchID] = Batch\r\n        }\r\n      })\r\n    }\r\n\r\n    if (MaxCap === 0) MaxCap++;\r\n    return { Name, Manager, Mail, BatchList, MaxCap, CurCap }\r\n  }\r\n\r\n  getData() {\r\n    const localDataStore = this.props.firebase.localDataStore;\r\n\r\n    if (!localDataStore.sections) localDataStore.sections = {}\r\n    if (!localDataStore.pens) localDataStore.pens = {}\r\n\r\n    this.props.getFarm()\r\n    this.props.getSections(localDataStore.sections?localDataStore.sections.update_time:null)\r\n    this.props.getPens(localDataStore.pens?localDataStore.pens.update_time:null)\r\n    this.props.getBatch()\r\n    this.props.getWeights(localDataStore.weighings?localDataStore.weighings.update_time:null, localDataStore.sections)\r\n    this.props.getCurve()\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps) {\r\n      this.checkData(this.props);\r\n\r\n      if (this.props.firebase.localDataStore && prevProps.firebase.localDataStore) {\r\n        const firebaseUser = this.props.firebase.firebaseUser\r\n        const localDataStore = this.props.firebase.localDataStore;\r\n\r\n        if (localDataStore.farms && firebaseUser.farms && localDataStore.farms[Object.keys(firebaseUser.farms)[0]]) {\r\n          var Farm = localDataStore.farms[Object.keys(firebaseUser.farms)[0]]\r\n\r\n          if ((this.state.farmName !== Farm.name || this.state.farmManager !== Farm.manager || this.state.farmMail !== Farm.email) ||\r\n              localDataStore.batchs && JSON.stringify(this.state.BatchList) !== JSON.stringify(localDataStore.batchs) ||\r\n              localDataStore.graphs && localDataStore.graphs !== prevProps.firebase.localDataStore.graphs) {\r\n            const {Name, Manager, Mail, BatchList, MaxCap, CurCap} = this.setData(this.props)\r\n            this.setState({\r\n              farmName: Name,\r\n              farmManager: Manager,\r\n              farmMail: Mail,\r\n        \r\n              BatchList: BatchList,\r\n\r\n              MaxCap:MaxCap, \r\n              CurCap:CurCap,\r\n            }, () => {\r\n              this.forceUpdate()\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n    const localDataStore = this.props.firebase.localDataStore\r\n\r\n    var FarmProgress = 0\r\n    if (this.state.BatchList) {\r\n      var BatchList = Object.keys(this.state.BatchList).filter(e => e !== '__jsogObjectId' && e !== 'update_time' && (!this.state.BatchList[e].state || this.state.BatchList[e].state !== \"Closed\"))\r\n      BatchList.forEach(element => {\r\n        var Batch = this.state.BatchList[element]\r\n        FarmProgress += (Batch.weight/Batch.target)*100;\r\n      });\r\n      FarmProgress = (FarmProgress/(100*BatchList.length))*100\r\n    }\r\n\r\n    return(\r\n      <ScrollView style={[Metrics.verticalMargin, {paddingRight: 5}]}>\r\n        <View\r\n          style={[\r\n            Helpers.mainContainer,\r\n          ]}\r\n        >\r\n          <View style={[Helpers.contentContainer, Helpers.fullWidth, Helpers.fill]}>\r\n            <TitleElement Text=\"Farm description\"/>\r\n\r\n            <View style={[Helpers.buttonContainer, Helpers.fullWidth, {height:110,}]}>\r\n              <ContentProp texts={[\"Farm name\", \"Manager\", \"E-mail\"]} datas={[this.state.farmName, this.state.farmManager, this.state.farmMail ]} />\r\n            </View>\r\n            <View style={{height:20}}/>\r\n            <ProgressBar text={\"Farm capacity: \" + this.state.CurCap + \" of \" + this.state.MaxCap} progress={(this.state.CurCap/this.state.MaxCap) * 100 }/>\r\n            <ProgressBar text={\"Farm performance:\"} progress={FarmProgress}/>\r\n\r\n            {this.state.BatchList?(\r\n              <View style={[Helpers.borderContainer, Helpers.fullWidth, {borderWidth:0, marginTop:10}]}>\r\n                <Text>Batches:</Text>\r\n                <FlatList\r\n                  data={Object.keys(this.state.BatchList).filter(e => e !== '__jsogObjectId' && e !== 'update_time' && \r\n                                                                (!this.state.BatchList[e].state || this.state.BatchList[e].state !== \"Closed\"))}\r\n                  renderItem={({item, i}) => {\r\n                    var Batch = this.state.BatchList[item]\r\n                    var TempCurve = GetCurve_FromBatch(Batch, localDataStore.graphs)\r\n                    var End = GetBatchEnd(Batch, TempCurve)\r\n                    var EndDate = Batch.End;\r\n                    var Color = Colors.AgriGreen\r\n                    if (EndDate > End) Color = Colors.error\r\n                    var count = Batch.count\r\n                    if (!count) count = 0\r\n                    var progress = (Batch.weight/Batch.target)*100;\r\n\r\n                    EndDate = new Date(EndDate).getDate() + \"/\" + (new Date(EndDate).getMonth() +1) + \"/\" + new Date(EndDate).getFullYear()\r\n                    var StartDate = new Date(Batch.time).getDate() + \"/\" + (new Date(Batch.time).getMonth() +1) + \"/\" + new Date(Batch.time).getFullYear()\r\n                    return(\r\n                      <ProgressBar text={item + \" Startdate: \" + StartDate + \" EndForcast: \" + EndDate + \", \" + count + \" pigs\"} progress={progress} color={Color}/>\r\n                    )\r\n                  }}\r\n                  keyExtractor={(item, index) => index.toString()}\r\n                />\r\n              </View>\r\n            ):(<></>)}\r\n            <Button Text=\"Clear local datastore\"\r\n              onPress={() => {\r\n                this.props.clearDataMem()\r\n                this.getData()\r\n              }}/>\r\n          </View>\r\n          {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n            <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n          }\r\n        </View>\r\n      </ScrollView>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    clearDataMem: () => dispatch(FirebaseActions.actionStarting(Actions.CLEAR, DataRefs.USERSDATA)),\r\n\r\n    getFarm: () => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.FARMS, {})),\r\n    getSections: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.SECTIONS, {DataTime: DataTime})),\r\n    getPens: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PENS, {DataTime: DataTime})),\r\n    getBatch: () => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.BATCHS, {})),\r\n    getCurve: () => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.GRAPH, {})),\r\n    getWeights: (DataTime, MemSections) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.WEIGHING, {DataTime: DataTime, MemSections: MemSections})),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);\r\n//export default Dashboard;\r\n","import { StyleSheet } from 'react-native'\r\nimport { Helpers, Metrics, Fonts, Colors } from '../../Theme'\r\n\r\nexport default StyleSheet.create({\r\n  loading: {\r\n    position: 'absolute',\r\n    left: 0,\r\n    right: 0,\r\n    top: 0,\r\n    bottom: 0,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    backgroundColor: '#F5FCFF88',\r\n  },\r\n\r\n  textContainer: {\r\n    ...Fonts.normal,\r\n    marginBottom: Metrics.normal,\r\n  },\r\n  inputContainer: {\r\n    marginBottom: Metrics.small,\r\n  },\r\n\r\n  input: {\r\n    ...Fonts.normal,\r\n    height: 24, \r\n  },\r\n  \r\n})\r\n","import React, { useEffect, useState, Component } from 'react'\r\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, SafeAreaView, FlatList } from 'react-native'\r\nimport { ListItem, Input } from 'react-native-elements'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport { ConnectionState } from '../../../Stores/Device/Selectors'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs, sortObject } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button, OperationsPanel, CustomListItem, ContentProp } from '../../../Components'\r\nimport Style from '../../../Containers/Cloud/CloudScreenStyle'\r\nimport { ApplicationStyles, Helpers, Metrics } from '../../../Theme'\r\n\r\nimport { FlatGrid, SectionGrid } from 'react-native-super-grid';\r\n\r\nclass Pigs extends Component {\r\n  constructor(props){\r\n    super(props);\r\n\r\n    const {PigsList} = this.setData(props)\r\n    this.state = {\r\n      PigsList: PigsList,\r\n      PigTag: \"\"\r\n    }\r\n  }\r\n\r\n  getData() {\r\n    const localDataStore = this.props.firebase.localDataStore\r\n    if (!localDataStore.pens) localDataStore.pens = {}\r\n    this.props.getPigs()\r\n    this.props.getPens(localDataStore.pens.update_time)\r\n  }\r\n\r\n  setData(Props) {\r\n    const localDataStore = Props.firebase.localDataStore\r\n\r\n    var PigsList = null\r\n    if (localDataStore && localDataStore.pigs) {\r\n      PigsList = sortObject(localDataStore.pigs)\r\n    }\r\n    \r\n    return {PigsList}\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps){\r\n      this.checkData(this.props);\r\n\r\n      if (this.props.firebase) {\r\n        if (this.props.firebase.localDataStore) {\r\n          if (this.props.firebase.localDataStore.pigs && JSON.stringify(this.state.PigsList)!==JSON.stringify(sortObject(this.props.firebase.localDataStore.pigs))) {\r\n            const {PigsList} = this.setData(this.props)\r\n            this.setState({\r\n              PigsList: PigsList,\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n\r\n    const localDataStore = this.props.firebase.localDataStore\r\n\r\n    const connectedDevice = null\r\n    const connectedState = null\r\n    const DeviceData = null\r\n\r\n    return(\r\n      <View\r\n        style={[\r\n          Helpers.mainContainer,\r\n        ]}\r\n      >\r\n        <View style={[Helpers.contentContainer, Helpers.fullWidth, Helpers.fill]}>\r\n          <View style={[Helpers.fill, Helpers.buttonContainer, Helpers.fullWidth, Metrics.bottomMargin, Helpers.column]}>\r\n            <Device_Display connectedState={connectedState}/>\r\n            <Scanner_Display DeviceData={DeviceData}/>\r\n            {this.state.PigsList ? (\r\n              <View style={[Helpers.fill, Helpers.borderContainer, Metrics.smallHorizontalPadding, Metrics.smallVerticalPadding, {maxWidth:800, marginTop:10}]}>\r\n                <SafeAreaView style={styles.container}>\r\n                  <FlatList\r\n                    data={Object.keys(this.state.PigsList)}\r\n                    renderItem={({item})=>{\r\n                      var Pen = \"-\"\r\n                      var Section = \"-\"\r\n                      if (this.state.PigsList[item].pen && this.state.PigsList[item].pen != 0) {\r\n                        Pen = this.state.PigsList[item].pen\r\n                        if (localDataStore.pens && localDataStore.pens[Pen]){\r\n                          var PenData = localDataStore.pens[Pen];\r\n                          Section = PenData.section;\r\n                        }\r\n                      }\r\n                      return(\r\n                        <View style={[Helpers.fill, Helpers.rowCenter, Helpers.fullWidth, {height:35}]}>\r\n                          <CustomListItem Title={item} itemStyle={[{height:35,}]} onPress={() => {\r\n                              this.props.setData(item, Section, Pen)\r\n                              NavigationService.navigate(\"DataDisplay\")\r\n                            }}/>\r\n\r\n                          <CustomListItem itemStyle={[{width:70, height:35, justifyContent:\"center\"}]} Title={Pen} onPress={() => {\r\n                              this.setState({\r\n                                PigTag: item\r\n                              })\r\n                            }}/>\r\n\r\n                          <CustomListItem itemStyle={[{width:90, height:35}]} Title={Section} onPress={() => {\r\n                              this.setState({\r\n                                PigTag: item\r\n                              })\r\n                            }}/>\r\n                        </View>\r\n                      )\r\n                    }}\r\n                    keyExtractor={item => \"PigTag_\" + item}\r\n                  />\r\n                </SafeAreaView>\r\n              </View>\r\n            ):(<></>)} \r\n            <Input\r\n              label={\"Pig-tag:\"}\r\n              containerStyle={[{borderWidth:1, marginTop:10}]}\r\n              style={[ApplicationStyles.input, ]}\r\n              onChangeText={text => {\r\n                this.setState({\r\n                  PigTag: text\r\n                })\r\n              }}\r\n              value={\r\n                this.state.PigTag\r\n              }\r\n            />\r\n            <OperationsPanel pig={true} pigTag={this.state.PigTag} PigsList={this.state.PigsList} />\r\n          </View>\r\n        </View>\r\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n        }\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    getPens: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PENS, {DataTime: DataTime})),\r\n    getPigs: (tagId = null) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PIGS, {TagId: tagId})),\r\n    setData: (pigId, Section, Pen) => dispatch(FirebaseActions.setCurrentData({pigId:pigId, type:DataRefs.PIGS, section:Section, dataId:Pen})),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pigs);\r\n//export default Pigs;\r\n\r\n//TODO extract to own component also used in DataDisplay\r\nconst Device_Display = (props) => {\r\n  if (Platform.OS === 'ios' || Platform.OS === 'android') {\r\n    return(\r\n      <View style={[Helpers.buttonContainer, Helpers.fullWidth, Metrics.bottomMargin, Helpers.rowCenter, ]}>\r\n        <View style={[Helpers.fill, Helpers.fullWidth, Helpers.rowMain]}>\r\n          <View style={[Helpers.fill, Helpers.column, {backgroundColor:\"red\"}]}>\r\n            <View style={[Helpers.fill, Helpers.row, Helpers.fullWidth, {backgroundColor: \"blue\"}]}>\r\n              <View style={{justifyContent:'center', alignItems: 'center'}}/>\r\n            </View>\r\n            <View style={[ Helpers.fill, Helpers.row, Helpers.fullWidth,]}>\r\n              <Text>Messages</Text>\r\n              <Text>Errors</Text>\r\n            </View>\r\n          </View>\r\n          <View style={[Helpers.fill, Helpers.fullWidth, Helpers.rowCenter, {maxWidth:150}]}>\r\n            {props && props.connectedState === ConnectionState.CONNECTED ? (\r\n              <View style={{...styles.circle, backgroundColor:\"green\", justifyContent:'center', alignItems: 'center'}}>\r\n                <Text>Device is</Text>\r\n                <Text>connected</Text>\r\n              </View>\r\n            ):(\r\n              <View style={{...styles.circle, backgroundColor:\"red\", justifyContent:'center', alignItems: 'center'}}>\r\n                <Text>No Device</Text>\r\n                <Text>connected</Text>\r\n              </View>\r\n            )}\r\n          </View>\r\n        </View>\r\n      </View>\r\n    )\r\n  }else {\r\n    return(<></>)\r\n  }\r\n}\r\n\r\nconst Scanner_Display = (props) => {\r\n  if (Platform.OS === 'ios' || Platform.OS === 'android') {\r\n    const dispatch = useDispatch()\r\n    const DeviceData = (props && props.DeviceData)?props.DeviceData:null\r\n    return(\r\n      <View style={{flexDirection: 'row',justifyContent: 'space-between', borderWidth:1, borderColor:'#000', borderRadius: 25, paddingHorizontal:15, paddingVertical:10, marginBottom:10}}>\r\n        <View style={Style.textContainer, {paddingTop: 10}}>\r\n          {\r\n            // App scanners data\r\n          }\r\n          {DeviceData&&DeviceData.tagid? (\r\n          <View style={{marginBottom:5}}>\r\n            <Text>TAG Id:</Text>\r\n            <Text>{DeviceData.tagid}</Text>\r\n          </View>\r\n          ):(<></>)}\r\n          {DeviceData&& DeviceData.FatLayers && DeviceData.FatLayers > 0 ? (\r\n            <View style={{marginBottom:5}}>\r\n              <Text>Layers received: {DeviceData.FatLayers}</Text>\r\n              <Text>Layer 1: {DeviceData.FatL1}</Text>\r\n              <Text>Layer 2: {DeviceData.FatL2}</Text>\r\n              <Text>Layer 3: {DeviceData.FatL3}</Text>\r\n            </View>\r\n          ):(<></>)}\r\n        </View>\r\n        {DeviceData&& DeviceData.tagid ? (\r\n          <View style={{flexDirection: 'row',justifyContent: 'space-between'}}>\r\n            {known ?(\r\n            <Button buttonStyle={ApplicationStyles.button, {minWidth: 0}} Text=\"Open data\" onPress={() => {\r\n              dispatch(FirebaseActions.setCurrentData({pigId:known, type:DataRefs.PIGS}))\r\n              NavigationService.navigate(\"DataDisplay\")\r\n            }}/>\r\n            ):(<></>)}\r\n            <Button buttonStyle={ApplicationStyles.button, {minWidth: 0}} Text=\"Save Tag\" onPress={() => {\r\n              //dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.PIGS, {FarmId: Object.keys(localDataStore.userData.farms)[0]}))\r\n            }}/>\r\n          </View>\r\n        ):(<></>)}\r\n      </View>\r\n    )\r\n  }else {\r\n    return(<></>)\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  circle: {\r\n    width: 125,\r\n    height: 125,\r\n    borderRadius: 125/2,\r\n    marginTop: Metrics.tiny,\r\n    marginLeft: Metrics.tiny,\r\n  },\r\n});","import React, { useEffect, Component } from 'react'\r\nimport { Text, View, ActivityIndicator, ScrollView, FlatList, TouchableOpacity, Image } from 'react-native'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs, sortObject, CurvePredict } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button } from '../../../Components'\r\nimport Style from '../../../Containers/Cloud/CloudScreenStyle'\r\nimport { ApplicationStyles, Helpers, Metrics, Images, Colors } from '../../../Theme'\r\n\r\nimport { SectionGrid } from 'react-native-super-grid';\r\n\r\nclass Pens extends Component {\r\n  constructor(props){\r\n    super(props);\r\n\r\n    const {Sections, Weighings, Mid} = this.setData(props)\r\n    this.state = {\r\n      Mid: Mid,\r\n      Sections: Sections,\r\n      Weighings: Weighings\r\n    }\r\n  }\r\n\r\n  setData(Props) {\r\n    const localDataStore = Props.firebase.localDataStore;\r\n\r\n    var Sections = {}\r\n    if (localDataStore && localDataStore.sections) {\r\n      Sections = sortObject(Props.firebase.localDataStore.sections)\r\n    }\r\n\r\n    var Mid = 0;\r\n    var Weighings = {}\r\n    if (localDataStore && localDataStore.weighings) {\r\n      Weighings = localDataStore.weighings\r\n      for (const property in localDataStore.weighings) {\r\n        if (localDataStore.weighings[property] && Object.keys(localDataStore.weighings[property]).length > 0){\r\n          var weight = localDataStore.weighings[property][Object.keys(localDataStore.weighings[property])[0]].weight\r\n          if (weight){\r\n            if (Mid > 0){\r\n              Mid = ((Mid + weight)/2)\r\n            } else {\r\n              Mid = (Mid + weight)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return {Sections, Weighings, Mid}\r\n  }\r\n\r\n  getData() {\r\n    const localDataStore = this.props.firebase.localDataStore;\r\n\r\n    if (!localDataStore.sections) localDataStore.sections = {}\r\n    if (!localDataStore.pens) localDataStore.pens = {}\r\n    if (!localDataStore.weighings) localDataStore.weighings = {}\r\n    if (!localDataStore.batchs) localDataStore.batchs = {}\r\n    if (!localDataStore.graphs) localDataStore.graphs = {}\r\n\r\n    this.props.getSections(localDataStore.sections.update_time)\r\n    this.props.getPens(localDataStore.pens.update_time)\r\n    this.props.getWeights(localDataStore.weighings.update_time, localDataStore.sections)\r\n\r\n    this.props.getBatch(localDataStore.batchs.update_time)\r\n    this.props.getCurve(localDataStore.graphs.update_time)\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps){\r\n      this.checkData(this.props);\r\n\r\n      if (this.props.firebase.localDataStore) {\r\n        if ((this.props.firebase.localDataStore.sections && JSON.stringify(this.state.Sections)!==JSON.stringify(sortObject(this.props.firebase.localDataStore.sections))) ||\r\n            (this.props.firebase.localDataStore.weighings && JSON.stringify(this.state.Weighings)!==JSON.stringify(sortObject(this.props.firebase.localDataStore.weighings)))\r\n        ) {\r\n          const {Sections, Mid} = this.setData(this.props)\r\n          this.setState({\r\n            Mid: Mid,\r\n            Sections: Sections\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n    const localDataStore = this.props.firebase.localDataStore\r\n\r\n    return(\r\n      <View\r\n      style={[\r\n        Helpers.mainContainer,\r\n      ]}\r\n      >\r\n        <View style={[Helpers.fullSize, Helpers.fill]}>\r\n          {this.state.Sections? (\r\n            <ScrollView style={[Metrics.verticalMargin, {paddingRight: 5}]}>\r\n              <SectionGrid\r\n                itemDimension={70}\r\n                spacing={10}\r\n                sections={\r\n                  Object.keys(this.state.Sections).filter(e => e !== 'update_time').map((Section) => {\r\n                    var Pens = sortObject(this.state.Sections[Section].pens)\r\n                    return(\r\n                      {\r\n                        title: Section,\r\n                        data: Object.keys(Pens)\r\n                      }\r\n                    )\r\n                  })\r\n                }\r\n\r\n                renderSectionHeader={({ section }) => (\r\n                  <View style={[Helpers.buttonContainer, Helpers.midWidth, {marginBottom:0}]}>\r\n                    <Button Text={section.title} buttonStyle={{backgroundColor: Colors.AgriDarkblue}}\r\n                      onPress={() => {} }/>\r\n                  </View>\r\n                )}\r\n\r\n                renderItem={({ item }) => {\r\n                  var color = Colors.gray\r\n                  var displayWeight = null\r\n\r\n                  var Predict = CurvePredict(localDataStore, item)\r\n                  if (Predict != null) color = Colors.pigpink\r\n                  if (Predict && Predict.Now) {\r\n                    var Batch = Predict.Batch  //Mabye optain batch self ??\r\n\r\n                    var devianceMin = 2\r\n                    var devianceMax = 5\r\n                    if (Batch.datas.devianceMin) {\r\n                      devianceMin = Batch.datas.devianceMin\r\n                    }\r\n                    if (Batch.datas.devianceMax) {\r\n                      devianceMax = Batch.datas.devianceMax\r\n                    }\r\n                    var ExValue = Predict.TempEx\r\n                    var Weight = Predict.Now;\r\n                    \r\n                    var TargetWeight = (Batch.datas.target)?Batch.datas.target:Predict.Batch.datas.target\r\n                    if (Weight >= TargetWeight) {\r\n                      color = Colors.pigpink\r\n                    } else {\r\n                      var devianceValMin = (ExValue/100)* devianceMin\r\n                      var devianceValMax = (ExValue/100)* devianceMax\r\n                      if (ExValue && Weight < ExValue && Weight < ExValue - devianceValMin) {\r\n                        color = Colors.error\r\n                      } else if (ExValue && Weight > ExValue && Weight > ExValue + devianceValMax) {\r\n                        color = Colors.overest\r\n                      } else {\r\n                        color = Colors.success\r\n                      }\r\n                    }\r\n                    displayWeight = Math.round(Weight * 100) / 100\r\n                  }\r\n\r\n                  return(\r\n                    <TouchableOpacity style={[Helpers.borderContainer, {width:70, height:70, alignItems:\"center\", justifyContent:\"center\", backgroundColor:color}]}\r\n                      onPress={() => {\r\n                        this.props.setCurrentData(item)\r\n                        NavigationService.navigate(\"DataDisplay\")\r\n                      }}>\r\n                      <Text>{item}</Text>\r\n                      {displayWeight?(<Text>{displayWeight + \" kg\"}</Text>):(<></>)}\r\n                    </TouchableOpacity>\r\n                  )\r\n                }}\r\n              />\r\n            </ScrollView>\r\n          ):(\r\n            <View style={[Helpers.fillRowCenter, Helpers.center, Helpers.logoContainer]}>\r\n              <Image style={Helpers.fullSize} source={Images.Hexa_icon} resizeMode={'contain'} />\r\n            </View>\r\n          )}\r\n        </View>\r\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n        }\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    getSections: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.SECTIONS, {DataTime: DataTime})),\r\n    getPens: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PENS, {DataTime: DataTime})),\r\n    getWeights: (DataTime, MemSections) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.WEIGHING, {DataTime: DataTime, MemSections: MemSections})),\r\n    \r\n    getBatch: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.BATCHS, {DataTime: DataTime})),\r\n    getCurve: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.GRAPH, {GraphId: \"\", DataTime: DataTime})),\r\n\r\n    setCurrentData: penId => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PENS, penId: penId})),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Pens);\r\n//export default Pens;\r\n","import React, { useEffect, useState, Component } from 'react'\r\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, Dimensions, SafeAreaView, FlatList, Picker } from 'react-native'\r\nimport { Input } from 'react-native-elements'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs, sortObject, GetStats_FromBatch, DataStringCheck } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button, CustomListItem, Datetime_Picker } from '../../../Components'\r\nimport Style from './UserPanelStyle'\r\nimport { ApplicationStyles, Helpers, Metrics, Colors } from '../../../Theme'\r\n\r\nimport Icon from 'react-native-vector-icons/MaterialIcons'\r\nimport SectionedMultiSelect from 'react-native-sectioned-multi-select'\r\n\r\n//import moment from 'moment';\r\n//import SimplerDatePicker from '@cawfree/react-native-simpler-date-picker';\r\n//import DatePicker from 'react-native-simple-date-picker';\r\n\r\n//import DateTimePicker from '@react-native-community/datetimepicker';\r\n\r\n//Genneral test for submodule merge (please delete this line)\r\n\r\nimport SelectBox from 'react-native-multi-selectbox'\r\nimport { xorBy } from 'lodash'\r\n\r\nconst window = Dimensions.get(\"window\");\r\nconst screen = Dimensions.get(\"screen\");\r\n\r\nclass Batchs extends Component {\r\n  constructor(props){\r\n    super(props);\r\n\r\n    const {BatchList, freePens} = this.setData(props)\r\n    this.state = {\r\n      dimensions: {window, screen},\r\n      BatchList: BatchList,\r\n\r\n      Display: 0,\r\n\r\n      BatchName: \"\",\r\n      ShowPicker: false,\r\n      StartD: new Date().getTime(),\r\n      Curve: \"\",\r\n      TargetWeight: \"\",\r\n      DevianceMin: \"\",\r\n      DevianceMax: \"\",\r\n\r\n      freePens: freePens,\r\n      avaiblePens: freePens,\r\n      selectedPens: [],\r\n    }\r\n  }\r\n\r\n  setData(Props) {\r\n    const localDataStore = Props.firebase.localDataStore;\r\n\r\n    var BatchList = localDataStore.batchs\r\n    \r\n    var freePens = []\r\n    if (BatchList && localDataStore.sections) {\r\n      Object.keys(localDataStore.sections).forEach(section => {\r\n        if (localDataStore.sections[section].pens) {\r\n          var pens = []\r\n          Object.keys(localDataStore.sections[section].pens).filter(e => e !== '__jsogObjectId'  && e !== 'update_time').forEach(pen => {\r\n            var add = true\r\n            Object.keys(BatchList).forEach(batch => {\r\n              if (!BatchList[batch].state || BatchList[batch].state !== \"Closed\") {\r\n                if (BatchList[batch].pens && BatchList[batch].pens[pen] && !BatchList[batch].pens[pen].enddate) {\r\n                  add = false;\r\n                }\r\n              }\r\n            });\r\n            if (add) {\r\n              var item = {\r\n                item: pen,\r\n                id: section + \"_\" + pen\r\n              }\r\n              freePens.push(item)\r\n            }\r\n          })\r\n        }\r\n      });\r\n    }\r\n    return { BatchList, freePens }\r\n  }\r\n\r\n  getData() {\r\n    const localDataStore = this.props.firebase.localDataStore;\r\n    if (!localDataStore.sections) localDataStore.sections = {}\r\n    if (!localDataStore.pens) localDataStore.pens = {}\r\n\r\n    this.props.getBatch(localDataStore.batchs?localDataStore.batchs.update_time:null)\r\n    this.props.getSections(localDataStore.sections?localDataStore.sections.update_time:null)\r\n    this.props.getPens(localDataStore.pens?localDataStore.pens.update_time:null)\r\n    this.props.getCurve()\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  onChange = ({ window, screen }) => {\r\n    this.setState({\r\n      dimensions: {window, screen},\r\n    })\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps) {\r\n      this.checkData(this.props);\r\n\r\n      if (this.props.firebase.localDataStore) {\r\n        if ((this.props.firebase.localDataStore.batchs && JSON.stringify(this.state.BatchList)!==JSON.stringify(this.props.firebase.localDataStore.batchs)) ||\r\n            (this.props.firebase.localDataStore.pens && JSON.stringify(this.state.pens)!==JSON.stringify(this.props.firebase.localDataStore.pens))) {\r\n          const {BatchList, freePens} = this.setData(this.props)\r\n          this.setState({\r\n            freePens: freePens,\r\n            BatchList: BatchList,\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    Dimensions.addEventListener(\"change\", this.onChange);\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    Dimensions.removeEventListener(\"change\", this.onChange);\r\n  }\r\n\r\n  onMultiChange = (item) => {\r\n    var items = xorBy(this.state.selectedPens, [item], 'id')\r\n    this.setState({\r\n      selectedPens: items\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n    const ErrorMessage = this.props.firebase.viewError\r\n\r\n    const localDataStore = this.props.firebase.localDataStore\r\n\r\n    var wide = this.state.dimensions.window.width>900?true:false\r\n    var App = (Platform.OS === 'ios' || Platform.OS === 'android')||!wide\r\n\r\n    return(\r\n      <ScrollView style={[Metrics.verticalMargin, {paddingRight: 5}]}>\r\n        <View\r\n          style={[\r\n            Helpers.mainContainer,\r\n          ]}\r\n        >\r\n          <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\r\n            {ErrorMessage ? (\r\n              <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\r\n            ):(<></>)}\r\n            {this.state.Display === 0?(\r\n              //#region Normal Front View to display all batches.\r\n              <View style={[Helpers.contentContainer, Helpers.fullSize, {marginHorizontal:0, paddingHorizontal:-20}]}>\r\n                {this.state.BatchList ? (\r\n                  <View style={[Helpers.fill, Helpers.fullWidth, Metrics.smallHorizontalPadding, Metrics.smallVerticalPadding, {maxWidth:800, marginTop:10}]}>\r\n                    <FlatList scrollEnabled={true} style={[Helpers.fill]}\r\n                      data={Object.keys(this.state.BatchList).filter(e => e !== '__jsogObjectId' && e !== 'update_time')}\r\n                      renderItem={({item, i})=>{\r\n                        var name = item;\r\n                        if (this.state.BatchList[item] && this.state.BatchList[item].state && this.state.BatchList[item].state === \"Closed\") {\r\n                          name += \"  Closed\"\r\n                        }\r\n                        return(\r\n                          <Button Text={name} onPress={() => {\r\n                            var curveId = \"default\"\r\n                            if (this.state.BatchList[item] && this.state.BatchList[item].gcurve) {\r\n                              curveId = this.state.BatchList[item].gcurve\r\n                              if (typeof curveId !== 'string') curveId = null\r\n                            }\r\n                            this.props.setCurrentData(item, curveId)\r\n                            \r\n                            NavigationService.navigate('DataPlotter')\r\n                          }}/>\r\n                        )\r\n                      }}\r\n                      keyExtractor={(item, index) => index.toString()}\r\n                    />\r\n                  </View>\r\n                ):(<></>)}\r\n                <View style={[Helpers.buttonContainer, Helpers.borderContainer, Helpers.midWidth]}>\r\n                  <Button Text={\"New Batch\"} onPress={() => {\r\n                    var graph = 0\r\n                    if (localDataStore && localDataStore.graphs) {\r\n                      graph = Object.keys(localDataStore.graphs).filter(e => e !== '__jsogObjectId'  && e !== 'update_time')[0]\r\n                    }\r\n                    this.setState({\r\n                      Display: 1,\r\n\r\n                      DevianceMin: String(2),\r\n                      DevianceMax: String(2),\r\n                      Curve: graph,\r\n\r\n                      freePens: this.state.freePens,\r\n                      avaiblePens: this.state.freePens,\r\n                      selectedPens: [],\r\n                    })\r\n                  }}/>\r\n                  {this.state.BatchList?(\r\n                  <Button Text={\"Edit or Close Batch\"} onPress={() => {\r\n                    var batchName = Object.keys(this.state.BatchList)\r\n                                      .filter(e => e !== '__jsogObjectId'  && e !== 'update_time' && \r\n                                              (!this.state.BatchList[e].state || this.state.BatchList[e].state !== \"Closed\")\r\n                                      )[0]\r\n                    var batch = this.state.BatchList[batchName]\r\n                    if (batch) {\r\n                      var Pens = []\r\n                      var pens = sortObject(batch.pens)\r\n                      Object.keys(pens).forEach(element => {\r\n                        if (!batch.pens[element].enddate) {\r\n                          if (localDataStore.pens && localDataStore.pens[element]){\r\n                            var _pen = localDataStore.pens[element]\r\n                            var item = {}\r\n                            item.item = element;\r\n                            item.id = _pen.section + \"_\" + element;\r\n                            Pens.push(item)\r\n                          }\r\n                        }\r\n                      });\r\n\r\n                      this.setState({\r\n                        Display: 2,\r\n                        BatchName: batchName,\r\n                        StartD: batch.time,\r\n                        Curve: batch.gcurve,\r\n                        TargetWeight: String(batch.datas.target),\r\n                        DevianceMin: String(batch.datas.devianceMin),\r\n                        DevianceMax: String(batch.datas.devianceMax),\r\n                        avaiblePens: this.state.freePens.concat(Pens),\r\n                        selectedPens: Pens\r\n                      })\r\n                    }\r\n                  }}/>):(<></>)}\r\n                </View>\r\n              </View>\r\n              //#endregion\r\n            ):(\r\n              //#region Edit or create\r\n              <View style={[Helpers.contentContainer, Helpers.fullSize, {marginHorizontal:0, paddingHorizontal:-20}]}>\r\n                {this.state.Display === 1?( // Create\r\n                  <Input label={\"BatchName\"}\r\n                    containerStyle={[{borderWidth:1, marginTop:10}]}\r\n                    style={[ApplicationStyles.input, ]}\r\n                    onChangeText={text => {\r\n                      if (text){\r\n                        if (DataStringCheck(text)){\r\n                          this.setState({BatchName: text})\r\n                        }\r\n                      }else {\r\n                        this.setState({BatchName: text})\r\n                      }\r\n                    }}\r\n                    value={\r\n                      this.state.BatchName\r\n                    }\r\n                  />\r\n                ):( // Edit\r\n                  <View style={[Helpers.borderContainer, Helpers.fullWidth, {height:60, borderRadius:0, alignItems:\"center\"}]}>\r\n                    <Picker\r\n                      mode=\"dropdown\"\r\n                      selectedValue={this.state.BatchName}\r\n                      style={[Helpers.fullWidth, { height: 50, justifyContent:\"flex-end\"}]}\r\n                      onValueChange={(itemValue, itemIndex) => {\r\n                        if (this.state.BatchList && this.state.BatchList[itemValue]) {\r\n                          var batch = this.state.BatchList[itemValue]\r\n\r\n                          var Pens = []\r\n                          var pens = sortObject(batch.pens)\r\n                          Object.keys(pens).forEach(element => {\r\n                            if (!batch.pens[element].enddate) {\r\n                              if (localDataStore.pens && localDataStore.pens[element]){\r\n                                var _pen = localDataStore.pens[element]\r\n                                var item = {}\r\n                                item.item = element;\r\n                                item.id = _pen.section + \"_\" + element;\r\n                                Pens.push(item)\r\n                              }\r\n                            }\r\n                          });\r\n\r\n                          this.setState({\r\n                            BatchName: itemValue,\r\n                            StartD: batch.time,\r\n                            Curve: batch.gcurve,\r\n                            DevianceMin: String(batch.datas.devianceMin),\r\n                            DevianceMax: String(batch.datas.devianceMax),\r\n                            avaiblePens: this.state.freePens.concat(Pens),\r\n                            selectedPens: Pens,\r\n                          })\r\n                        }\r\n                      }}\r\n                    >\r\n                      {Object.keys(this.state.BatchList)\r\n                                      .filter(e => e !== '__jsogObjectId'  && e !== 'update_time' && \r\n                                              (!this.state.BatchList[e].state || this.state.BatchList[e].state !== \"Closed\")\r\n                                      ).map((graph, i) => {\r\n                        return (<Picker.Item label={graph} value={graph} key={i}/>)\r\n                      })}\r\n                    </Picker>\r\n                  </View>\r\n                )}\r\n                <View style={[Helpers.fullWidth, App?{}:Helpers.row, {zIndex:999}]}>\r\n                  <View style={[App?{}:Helpers.halvWidth, {borderWidth:1 , marginTop:10, paddingHorizontal:5, paddingTop:0, borderRadius:0, alignItems:\"center\", zIndex:1}]}>\r\n                    <View style={[Helpers.fullWidth, {alignItems:\"flex-start\", marginBottom: -5}]}>\r\n                      <Text style={[ApplicationStyles.text, {marginHorizontal:5, marginTop:2, color:Colors.input, fontSize: 15, fontWeight: \"bold\"}]}>Start date:</Text>\r\n                    </View>\r\n                    <View style={[Helpers.fullWidth, App?{marginBottom:10}:{},{alignItems:'flex-start',}]}>\r\n                      <Datetime_Picker Selected={this.state.StartD}\r\n                        onValueChange={(date)=>{\r\n                          this.setState({\r\n                            StartD: date.getTime()\r\n                          })\r\n                      }}/>\r\n                    </View>\r\n                  </View>\r\n                  \r\n                  <View style={[App?{}:Helpers.halvWidth, {borderWidth:1, marginTop:10, paddingHorizontal:5, paddingTop:0, borderRadius:0, alignItems:\"center\", zIndex:1}]}>\r\n                    <View style={[Helpers.fullWidth, {alignItems:\"flex-start\", marginBottom: -5}]}>\r\n                      <Text style={[ApplicationStyles.text, {marginHorizontal:5, marginTop:2, color:Colors.input, fontSize: 15, fontWeight: \"bold\"}]}>Growth curve:</Text>\r\n                    </View>\r\n                    <View style={[Helpers.fullWidth, {alignItems:\"center\"}]}>\r\n                      <Picker\r\n                        mode=\"dropdown\"\r\n                        selectedValue={this.state.Curve}\r\n                        style={[Helpers.fullWidth, {height: 30}]}\r\n                        onValueChange={(itemValue, itemIndex) => {\r\n                          this.setState({\r\n                            Curve: itemValue\r\n                          })\r\n                        }}\r\n                      >\r\n                        {Object.keys(localDataStore.graphs).filter(e => e !== '__jsogObjectId'  && e !== 'update_time').map((graph, i) => {\r\n                          return (<Picker.Item label={graph} value={graph} key={i}/>)\r\n                        })}\r\n                      </Picker>\r\n                    </View>\r\n                  </View>\r\n                </View>\r\n                <View style={[Helpers.fullWidth, Helpers.row]}>\r\n                <Input label={\"Target weight\"}\r\n                    type='number'\r\n                    step=\"0.1\"\r\n\r\n                    containerStyle={[Helpers.halvWidth,{borderWidth:1, marginTop:10}]}\r\n                    style={[ApplicationStyles.input, {marginBottom:-10}]}\r\n                    onChangeText={text => {\r\n                      if (!isNaN(text) || text.endsWith('.') && text.split('.').length <= 2) {\r\n                        this.setState({\r\n                          TargetWeight: text\r\n                        })\r\n                      }\r\n                    }}\r\n                    value={\r\n                      this.state.TargetWeight\r\n                    }\r\n                  />\r\n                </View>\r\n                <View style={[Helpers.fullWidth, Helpers.row]}>\r\n                  <Input label={\"Deviance Min alert procentage\"}\r\n                    type='number'\r\n                    step=\"0.1\"\r\n\r\n                    containerStyle={[Helpers.halvWidth,{borderWidth:1, marginTop:10}]}\r\n                    style={[ApplicationStyles.input, {marginBottom:-10}]}\r\n                    onChangeText={text => {\r\n                      if (!isNaN(text) || text.endsWith('.') && text.split('.').length <= 2) {\r\n                        this.setState({\r\n                          DevianceMin: text\r\n                        })\r\n                      }\r\n                    }}\r\n                    value={\r\n                      this.state.DevianceMin\r\n                    }\r\n                  />\r\n                  <Input label={\"Deviance Max alert procentage\"}\r\n                    type='number'\r\n                    step=\"0.1\"\r\n\r\n                    containerStyle={[Helpers.halvWidth,{borderWidth:1, marginTop:10}]}\r\n                    style={[ApplicationStyles.input, {marginBottom:-10}]}\r\n                    onChangeText={text => {\r\n                      if (!isNaN(text) || text.endsWith('.') && text.split('.').length <= 2) {\r\n                        this.setState({\r\n                          DevianceMax: text\r\n                        })\r\n                      }\r\n                    }}\r\n                    value={\r\n                      this.state.DevianceMax\r\n                    }\r\n                  />\r\n                </View>\r\n                <View style={[Helpers.fullWidth, {borderWidth:1, marginTop:10, paddingHorizontal:10, paddingTop:5}]}>\r\n                  <SelectBox\r\n                    label=\"Pens in Batch..\"\r\n                    labelStyle={{color:Colors.input, fontSize: 15, fontWeight: \"bold\"}}\r\n                    optionsLabelStyle={{minWidth:100, color:\"black\", fontSize: 12, fontWeight: \"bold\"}}\r\n\r\n                    options={this.state.avaiblePens}\r\n                    selectedValues={this.state.selectedPens}\r\n                    onMultiSelect={this.onMultiChange}\r\n                    onTapClose={this.onMultiChange}\r\n                    isMulti\r\n                  />\r\n                </View>\r\n                <View style={[Helpers.buttonContainer, Helpers.borderContainer, Helpers.midWidth, {marginTop:10}]}>\r\n                  {this.state.Display === 2?(\r\n                    <Button Text={\"Close Batch\"} onPress={() => {\r\n                      var Batch = localDataStore.batchs[this.state.BatchName];\r\n                      if (Batch) {\r\n                        var {StartDate, EndDate, TargetWeight, PenCount, Animals, AverageWeight, AverageGrowth, isClosed, isVirtual} = GetStats_FromBatch(Batch, localDataStore)\r\n                        if (Animals){\r\n                          this.props.setViewError(\"The batch still contains active pens, please clear pens before closing the batch\")\r\n                        }else {\r\n                          var newBatch = {name:this.state.BatchName, state:\"Closed\"}\r\n                          this.props.updateBatch(newBatch)\r\n                          this.setState({\r\n                            Display: 0\r\n                          })\r\n                          this.props.getPens(localDataStore.pens.update_time)\r\n                        }\r\n                      }\r\n                    }}/>\r\n                  ):(\r\n                    <></>\r\n                  )}\r\n                  <Button Text={\"Save\"} onPress={() => {\r\n                    var update = true;\r\n\r\n                    if (this.state.BatchName !== \"\") {\r\n                      var Name = this.state.BatchName;\r\n                      if (!Object.keys(this.state.BatchList).includes(Name)){\r\n                        if (this.state.Display === 2) { // update on non existing\r\n                          update = false \r\n                          this.props.setViewError(\"BatchName error, batch does not exists\")\r\n                        }\r\n                      } \r\n                      else {\r\n                        if (this.state.Display === 1) { // create on allready existing\r\n                          update = false \r\n                          this.props.setViewError(\"BatchName error, batch allready exists\")\r\n                        }\r\n                      }\r\n                    } else {\r\n                      update = false \r\n                      this.props.setViewError(\"BatchName error\")\r\n                    }\r\n\r\n                    if (this.state.StartD !== \"\") {\r\n                      /*var StartD = this.state.StartD.split(\".\")\r\n                      if (StartD.length !== 3 || StartD[0].length !== 4 || isNaN(StartD[0]) || \r\n                                                (StartD[1].length <= 0 && StartD[1].length >= 3) || isNaN(StartD[1]) ||\r\n                                                (StartD[2].length <= 0 && StartD[2].length >= 3)|| isNaN(StartD[2])) {\r\n                        update = false \r\n                        this.props.setViewError(\"Startdate error\")\r\n                      }*/\r\n                    }else {\r\n                      update = false \r\n                      this.props.setViewError(\"Startdate error\")\r\n                    }\r\n\r\n                    if (this.state.TargetWeight !== \"\") {\r\n                      var Dev = this.state.TargetWeight\r\n                      if (Dev.length > 3 || isNaN(Dev)) {\r\n                        update = false \r\n                      }\r\n                    }else {\r\n                      update = false \r\n                      this.props.setViewError(\"Tartget weight setting error\")\r\n                    }\r\n\r\n                    if (this.state.DevianceMin !== \"\") {\r\n                      var Dev = this.state.DevianceMin\r\n                      if (Dev.length > 3 || isNaN(Dev) || Dev > 100){\r\n                        update = false \r\n                      }\r\n                    }else {\r\n                      update = false \r\n                      this.props.setViewError(\"DevianceMin setting error\")\r\n                    }\r\n\r\n                    if (this.state.DevianceMax !== \"\") {\r\n                      var Dev = this.state.DevianceMax\r\n                      if (Dev.length > 3 || isNaN(Dev) || Dev > 100){\r\n                        update = false \r\n                      }\r\n                    }else {\r\n                      update = false \r\n                      this.props.setViewError(\"DevianceMax setting error\")\r\n                    }\r\n\r\n                    if (this.state.Curve === \"\"){\r\n                      update = false \r\n                      this.props.setViewError(\"Growth curve setting error, please reselect a curve\")\r\n                    }\r\n\r\n                    var Pens = {}\r\n                    if (this.state.selectedPens && this.state.selectedPens.length > 0) {\r\n                      this.state.selectedPens.forEach(element => {\r\n                        Pens[element.item] = true\r\n                      });\r\n                    }\r\n                    if (Object.keys(Pens).length !== this.state.selectedPens.length) {\r\n                      update = false\r\n                      this.props.setViewError(\"An error occurred during Pen assigning (please update the page)\")\r\n                    }\r\n\r\n                    if (update) {\r\n                      this.props.setViewLoading(true)\r\n                      var _Date = new Date(this.state.StartD)\r\n                      var StartD = new Date(_Date.getFullYear(), _Date.getMonth(), _Date.getDate()).getTime()\r\n                      var newBatch = {name:this.state.BatchName, gcurve:this.state.Curve, pens:Pens, time: StartD, datas:{target: this.state.TargetWeight, devianceMin: this.state.DevianceMin, devianceMax: this.state.DevianceMax}}\r\n                      if (this.state.Display === 1) {\r\n                        this.props.setBatch(newBatch)\r\n                      }\r\n                      else if (this.state.Display === 2) {\r\n                        this.props.updateBatch(newBatch)\r\n                      }\r\n                      this.setState({\r\n                        Display: 0\r\n                      })\r\n                      this.props.getPens(localDataStore.pens.update_time)\r\n                      this.props.setViewError(null)\r\n                      this.props.setViewLoading(false)\r\n                    }\r\n                  }}/>\r\n                </View>\r\n              </View>\r\n              //#endregion\r\n            )}\r\n          </View>\r\n          {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n            <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n          }\r\n        </View>\r\n      </ScrollView>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    getCurve: () => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.GRAPH, {})),\r\n\r\n    getSections: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.SECTIONS, { DataTime: DataTime})),\r\n    getPens: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PENS, {DataTime: DataTime})),\r\n    getBatch: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.BATCHS, {DataTime: DataTime})),\r\n\r\n    setBatch: (batch) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.BATCHS, {Batch: batch})),\r\n    updateBatch: (batch) => dispatch(FirebaseActions.actionStarting(Actions.UPDATE, DataRefs.BATCHS, {BatchId: batch.name, Batch: batch})),\r\n    \r\n    setCurrentData: (batchId, curveId) => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PENS, batchId:batchId, curveId: curveId})),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Batchs);\r\n//export default Batchs;\r\n","import React, { useEffect, Component } from 'react'\r\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, Dimensions } from 'react-native'\r\nimport { Input, Icon } from 'react-native-elements'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs, GetCurve_FromBatch, AccumulateTime, get_DataSpot, CurvePredict } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { LineChart } from 'react-native-chart-kit'\r\nimport { Button, TitleElement, CustomListItem, ContentProp } from '../../../Components'\r\nimport Style from './UserPanelStyle'\r\nimport { ApplicationStyles, Helpers, Metrics, Colors } from '../../../Theme'\r\n\r\nimport { FlatGrid } from 'react-native-super-grid';\r\n\r\nfunction getRandomNumber(low, high) {\r\n  var r = Math.floor(Math.random() * (high - low + 1)) + low;\r\n  return r;\r\n}\r\n\r\nfunction getRandomColor() {\r\n  var red_range = [10, 250];\r\n  var green_range = [10, 250];\r\n  var blue_range = [10, 250];\r\n  var a_range = [0.2, 1];\r\n\r\n  var red = getRandomNumber(red_range[0], red_range[1]);\r\n  var green = getRandomNumber(green_range[0], green_range[1]);\r\n  var blue = getRandomNumber(blue_range[0], blue_range[1]);\r\n\r\n  var alpha = getRandomNumber(a_range[0] * 100, a_range[1] * 100) / 100;\r\n\r\n  return {\r\n    r: red,\r\n    g: green,\r\n    b: blue,\r\n    a: alpha,\r\n    rgbaValue: 'rgba(' + red + ',' + green + ',' + blue + ',' + alpha + ')'\r\n  }\r\n}\r\n\r\nconst window = Dimensions.get(\"window\");\r\nconst screen = Dimensions.get(\"screen\");\r\n\r\nfunction WeightsToGraphData(localDataStore, Batch, TempGraph = null, StartDate = undefined, _EndDate = undefined, Prediction = false) {\r\n  var DataSets = []\r\n  var EndDate = 0;\r\n\r\n  var DoPredict = (Batch && (!Batch.state || Batch.state !== \"Closed\"))?true:false\r\n  var Legends = []\r\n  if (Batch.pens) Legends = Object.keys(Batch.pens).filter(e => (e !== '__jsogObjectId')).reverse()\r\n  Legends.forEach(Pen => {\r\n    var BatchPen = Batch.pens[Pen]\r\n    var color = getRandomColor();\r\n\r\n    var DataSet = []\r\n    var DataSetX = []\r\n\r\n    if (localDataStore.weighings[Pen] || (Batch.state && Batch.state === \"Closed\")) {\r\n      var PenWeighings = localDataStore.weighings[Pen];\r\n      if (Batch.state && Batch.state === \"Closed\") {\r\n        PenWeighings = Batch.closed.weighings[Pen]\r\n      }\r\n\r\n      if (PenWeighings && Object.keys(PenWeighings).length >= 1) {\r\n        Object.keys(PenWeighings).sort(function(a, b) {\r\n          return PenWeighings[a].time - PenWeighings[b].time;\r\n        }).forEach(key => {\r\n          var data = PenWeighings[key]\r\n          if (data.weight) {\r\n            if ((!StartDate || data.time >= StartDate) && (!_EndDate || data.time <= _EndDate)) {\r\n              if ((!BatchPen.startdate || data.time >= BatchPen.startdate) && (!BatchPen.enddate || data.time <= BatchPen.enddate)) {\r\n                var weight = data.weight\r\n                if (data.count) {\r\n                  weight = weight / data.count\r\n                }\r\n                DataSet.push(weight)\r\n                var Time = new Date(data.time)\r\n                //Time = new Date(Time.getFullYear(),Time.getMonth(),Time.getDate()).getTime() // allows midday placement\r\n                DataSetX.push(Time)\r\n                if (!_EndDate && data.time > EndDate) {\r\n                  EndDate = data.time\r\n                }\r\n              }\r\n            }\r\n          }\r\n        });\r\n\r\n        if (DoPredict && Prediction) {\r\n          var Predict = CurvePredict(localDataStore, Pen)\r\n          if (Predict && Predict.lastWeighing) {\r\n            var Time = Predict.FirstSpot?new Date(Predict.FirstSpot):new Date(Predict.lastWeighing.time)\r\n            //var DatePredict = []\r\n            //var DataPredicttX = []\r\n            Predict.data.forEach((element,index) => {\r\n              DataSet.push(element)\r\n              Time = (index===0&&Predict.FirstSpot)?Time:AccumulateTime(Time, TempGraph.periode)\r\n              DataSetX.push(Time)\r\n              //DataSetX.push(new Date(Time.getFullYear(),Time.getMonth(),Time.getDate()).getTime())\r\n            });\r\n            //if (Predict.length > 0){\r\n            //  DataSets.push({Pen: Pen + \"_Predict\", data: DatePredict, dataX: DataPredictX, color:(opacity = 0) => color.rgbaValue})\r\n            //}\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    while(DataSet.length < TempGraph.data.length) {\r\n      DataSet.push(null)\r\n      DataSetX.push(null)\r\n    }\r\n    DataSets.push({Pen: Pen, data: DataSet, dataX: DataSetX, color:(opacity = 1) => color.rgbaValue})\r\n  });\r\n  return {DataSets, EndDate};\r\n}\r\n\r\nclass CurveElement extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    if (!this.props.Display) {\r\n      const {TempGraph, Legends, DataSets, StartDate, EndDate } = this.setData(props)\r\n      this.state = {\r\n        dimensions: {window, screen},\r\n\r\n        TempGraph: TempGraph,\r\n        Legends: Legends,\r\n        DataSets: DataSets,\r\n        StartDate: StartDate,\r\n        EndDate: EndDate,\r\n\r\n        Labels: [],\r\n        ActiveIndex: 0,\r\n        ActiveLength: \"Batch\",\r\n        ActiveDataSets: DataSets,\r\n        ActiveStartDate: StartDate,\r\n        ActiveEndDate: EndDate,\r\n\r\n        ViewPoint: null,\r\n      }\r\n    } else {\r\n      this.state = {\r\n        dimensions: {window, screen},\r\n      }\r\n    }\r\n  }\r\n\r\n  setData(Props) {\r\n    const localDataStore = Props.firebase.localDataStore;\r\n    const CurrentData = Props.firebase.currentData;\r\n\r\n    var TempGraph = {periode:\"Days\", data: []} //Template Graph\r\n    var Legends = []     //Name lables\r\n    var DataSets = []    //Data Points\r\n\r\n    var D = new Date()\r\n    var StartDate = D.getTime()\r\n    var EndDate = new Date(D.setDate(D.getDate()+(7*8))) //Default timespand is 2 months or 8 weeks (will be changed acording to batch)\r\n\r\n    if (localDataStore && localDataStore.batchs && CurrentData && CurrentData.batchId) {\r\n      var Batch = localDataStore.batchs[CurrentData.batchId];\r\n      TempGraph = GetCurve_FromBatch(Batch, localDataStore.graphs, CurrentData.curveId)\r\n\r\n      if (TempGraph) {\r\n        if (CurrentData.curveId) TempGraph.name = CurrentData.curveId\r\n        else TempGraph.name = \"Template\"\r\n        //Find Startdate\r\n        StartDate = Batch.time\r\n        //Find Batch Pens (Legends)\r\n        if (Batch.pens) Legends = Legends.concat(Object.keys(Batch.pens).reverse().filter(e => (e !== '__jsogObjectId')))\r\n\r\n        var DataX = []\r\n        //#region Find Template X values and EndDate\r\n        var currentTime = new Date(StartDate)\r\n        for (var i = 0; i < TempGraph.data.length; i++) {\r\n          DataX.push(currentTime.getTime())\r\n          if (i < TempGraph.data.length -1) {\r\n            currentTime = new Date(AccumulateTime(currentTime, TempGraph.periode))\r\n          }\r\n        }\r\n        EndDate = currentTime.getTime();\r\n        DataX.push(EndDate)\r\n        //#endregion\r\n        \r\n        //Set TempGraph data\r\n        DataSets.push({\r\n          data: TempGraph.data,\r\n          dataX: DataX,\r\n          color: (opacity = 0.1) => `rgba(0, 0, 0, ${opacity})`, // optional\r\n        })\r\n\r\n        //Find DataSets from Legends\r\n        if (localDataStore.weighings) {\r\n          var TempData = DataSets\r\n          var TempEndDate = EndDate\r\n          var NextEnd = new Date(AccumulateTime(new Date(TempEndDate), TempGraph.periode)).getTime()\r\n          var {DataSets, EndDate} = WeightsToGraphData(localDataStore, Batch, TempGraph, StartDate, NextEnd, this.props.Predict)\r\n          DataSets = TempData.concat(DataSets)\r\n\r\n          if (TempEndDate > EndDate) {\r\n            EndDate = TempEndDate\r\n          }\r\n\r\n          Legends = Legends.filter(e => (e !== '__jsogObjectId' && (e === TempGraph.name || DataSets.some(i => i.Pen === e))));\r\n          Legends.unshift(TempGraph.name)\r\n        }\r\n      }\r\n    }\r\n    return {TempGraph, Legends, DataSets, StartDate, EndDate }\r\n  }\r\n\r\n  setGraphPeriode(ActiveLength = this.state.ActiveLength) {\r\n    var Labels = []\r\n\r\n    var StartDate = this.state.StartDate\r\n    var EndDate = this.state.EndDate\r\n    var ActiveIndex = this.state.ActiveIndex\r\n\r\n    var TemplatePeriode = \"Weeks\"\r\n    if (this.state.TempGraph && this.state.TempGraph.periode) TemplatePeriode = this.state.TempGraph.periode\r\n    var CurrentDate = new Date(StartDate)\r\n    var TempActiveDataSet = this.state.ActiveDataSets;\r\n\r\n    var Today = new Date().getTime()\r\n    switch(this.state.ActiveLength) {\r\n      case \"Days\":\r\n        for (var i = 0; (i < ActiveIndex || ActiveIndex === -1); i++){\r\n          var getNewDate = new Date(AccumulateTime(CurrentDate, this.state.ActiveLength))\r\n          if (ActiveIndex === -1 && getNewDate > Today) {\r\n            ActiveIndex = i-1;\r\n            break;\r\n          }\r\n          CurrentDate = getNewDate;\r\n        }\r\n        StartDate = CurrentDate.getTime();\r\n        Labels.push(CurrentDate.getDate() + \"/\" + (CurrentDate.getMonth() + 1))\r\n        \r\n        CurrentDate = new Date(AccumulateTime(CurrentDate, this.state.ActiveLength))\r\n        Labels.push(CurrentDate.getDate() + \"/\" + (CurrentDate.getMonth() + 1))\r\n\r\n        EndDate = CurrentDate.getTime();\r\n        CurrentDate = new Date(AccumulateTime(CurrentDate, this.state.ActiveLength))\r\n        break;\r\n      case \"Weeks\":\r\n        for (var i = 0; (i < ActiveIndex || ActiveIndex === -1); i++){\r\n          var getNewDate = new Date(AccumulateTime(CurrentDate, this.state.ActiveLength))\r\n          if (ActiveIndex === -1 && getNewDate > Today) {\r\n            ActiveIndex = i;\r\n            break;\r\n          }\r\n          CurrentDate = getNewDate;\r\n        }\r\n        StartDate = CurrentDate.getTime();\r\n\r\n        for (var i = 0; i <= 7; i++) {\r\n          Labels.push(CurrentDate.getDate() + \"/\" + (CurrentDate.getMonth() + 1))\r\n          EndDate = CurrentDate.getTime();\r\n          CurrentDate = new Date(AccumulateTime(CurrentDate, \"Days\"))\r\n        }\r\n        break;\r\n      case \"Batch\":\r\n      default:\r\n        while (CurrentDate.getTime() <= EndDate) {\r\n          switch (TemplatePeriode){\r\n            case \"Days\":\r\n              Labels.push(CurrentDate.getDate() + \"/\" + (CurrentDate.getMonth() + 1))\r\n              break;\r\n            case \"Month\":\r\n              Labels.push(CurrentDate.getDate() + \"/\" + (CurrentDate.getMonth() + 1))\r\n              break;\r\n            case \"Weeks\":\r\n            default:\r\n              Labels.push(CurrentDate.getDate() + \"/\" + (CurrentDate.getMonth() + 1))\r\n              break;\r\n          }\r\n          CurrentDate = new Date(AccumulateTime(CurrentDate, TemplatePeriode))\r\n        }\r\n        break;\r\n    }\r\n\r\n    var ActiveDataSets = []\r\n    if (!ActiveLength || ActiveLength === \"Batch\") {\r\n      ActiveDataSets = this.state.DataSets;\r\n    }\r\n    else {\r\n      var End = AccumulateTime(new Date(EndDate), this.state.ActiveLength).getTime()\r\n      this.state.DataSets.forEach(element => {\r\n        var NewData = {...element, data:[], dataX: []}\r\n\r\n        var first = null\r\n        var last = null\r\n        if (new Date(element.dataX[0]).getTime() <= EndDate) {\r\n          for(var i = 0; i < element.data.length; i++) {\r\n            if (new Date(element.dataX[i]).getTime() >= StartDate) {\r\n              NewData.data.push(element.data[i])\r\n              NewData.dataX.push(element.dataX[i])\r\n\r\n              var time = AccumulateTime(new Date(element.dataX[i]), this.state.ActiveLength)\r\n              if (time.getTime() > End){\r\n                if (element.dataX.length -1 >= i) last = i\r\n                break;\r\n              }\r\n            } else if (element.dataX[i] !== null) {\r\n              first = i\r\n            }\r\n          }\r\n          if (first !== null && NewData.dataX[0] > StartDate && element.data.length >= first+1) {\r\n            var DataSpot = get_DataSpot([element.dataX[first], element.dataX[first+1]], [element.data[first], element.data[first +1]], StartDate, element.data[first], element.dataX[first])\r\n            console.log(DataSpot)\r\n            NewData.data.unshift(DataSpot.ExValue)\r\n            NewData.dataX.unshift(StartDate)\r\n          }\r\n          if (last != null) {\r\n            //NewData.data.push(ExValue)\r\n            //NewData.dataX.push(StartDate)\r\n          }\r\n        }\r\n\r\n        ActiveDataSets.push(NewData)\r\n      });\r\n    }\r\n\r\n    //var lastDataPoint = this.state.DataSets[0].dataX[this.state.DataSets[0].dataX.length-1]\r\n    if (this.state.ActiveIndex > 0 && ActiveDataSets[0].data.length === 0){\r\n      var i = this.state.ActiveIndex\r\n      i = i-1;\r\n      this.setState({\r\n        ActiveIndex: i\r\n      })\r\n    } else {\r\n      this.setState({\r\n        ActiveLength: ActiveLength,\r\n        \r\n        Labels: Labels,\r\n        ActiveDataSets: ActiveDataSets,\r\n        ActiveStartDate: StartDate,\r\n        ActiveEndDate: EndDate,\r\n        ActiveIndex: ActiveIndex,\r\n      }, () => {\r\n        this.forceUpdate()\r\n      })\r\n    }\r\n  }\r\n\r\n  getData() {\r\n    const localDataStore = this.props.firebase.localDataStore;\r\n    const CurrentData = this.props.firebase.currentData;\r\n\r\n    /*if (CurrentData && CurrentData.batchId && localDataStore.batchs[CurrentData.batchId]){\r\n      const batchData = localDataStore.batchs[CurrentData.batchId]\r\n      \r\n      var PenMemTime = null\r\n      if (localDataStore.pens) PenMemTime = localDataStore.pens.update_time\r\n      var WeightsMemTime = null\r\n      if (localDataStore.weighings) WeightsMemTime = localDataStore.weighings.update_time\r\n      Object.keys(batchData.pens).filter(e => e !== '__jsogObjectId').forEach(Pen => {\r\n        this.props.getPen(Pen, PenMemTime)\r\n        this.props.getWeights(Pen, WeightsMemTime, localDataStore.sections)\r\n      })\r\n\r\n      var TempGraph = \"\"\r\n      if (CurrentData.curveId) {\r\n        TempGraph = CurrentData.curveId;\r\n        this.props.getCurve(TempGraph)\r\n      }\r\n    }*/\r\n  }\r\n\r\n  onChange = ({ window, screen }) => {\r\n    this.setState({\r\n      dimensions: {window, screen},\r\n    })\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (!this.props.Display && this.props !== prevProps) {\r\n      if (this.props.firebase.localDataStore) {\r\n        if (JSON.stringify(prevProps.firebase.localDataStore.weighings) !== JSON.stringify(this.props.firebase.localDataStore.weighings) ||\r\n            JSON.stringify(prevProps.firebase.localDataStore.pens) !== JSON.stringify(this.props.firebase.localDataStore.pens) ||\r\n            JSON.stringify(prevProps.firebase.localDataStore.graphs) !== JSON.stringify(this.props.firebase.localDataStore.graphs) || \r\n            prevProps.Predict !== this.props.Predict || \r\n            prevProps.weighings !== this.props.weighings) {\r\n          const {TempGraph, Legends, DataSets, StartDate, EndDate } = this.setData(this.props)\r\n          if (JSON.stringify(this.state.TempGraph)!==JSON.stringify(TempGraph) ||\r\n              JSON.stringify(this.state.Legends)!==JSON.stringify(Legends) ||\r\n              JSON.stringify(this.state.DataSets)!==JSON.stringify(DataSets) ||\r\n\r\n              JSON.stringify(this.state.StartDate)!==JSON.stringify(StartDate) ||\r\n              JSON.stringify(this.state.EndDate)!==JSON.stringify(EndDate)\r\n          ) {\r\n            this.setState({\r\n              TempGraph: TempGraph,\r\n              Legends: Legends,\r\n              DataSets: DataSets,\r\n        \r\n              StartDate: StartDate,\r\n              EndDate: EndDate,\r\n            }, () => {\r\n              this.setGraphPeriode(this.state.ActiveLength)\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (!this.props.Display && this.state !== prevState) {\r\n      if (this.state.ActiveLength != prevState.ActiveLength || this.state.ActiveIndex != prevState.ActiveIndex) {\r\n        this.setGraphPeriode(this.state.ActiveLength)\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n    if (!this.props.height) Dimensions.addEventListener(\"change\", this.onChange);\r\n    if (!this.props.Display) this.setGraphPeriode(this.state.ActiveLength)\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    if (!this.props.height) Dimensions.removeEventListener(\"change\", this.onChange);\r\n  }\r\n\r\n  render() {\r\n    const localDataStore = this.props.firebase.localDataStore\r\n    var BatchIsOpen = false;\r\n    if (localDataStore.batchs && this.props.firebase.currentData && this.props.firebase.currentData.batchId) {\r\n      BatchIsOpen= ((localDataStore.batchs && localDataStore.batchs[this.props.firebase.currentData.batchId]) && (!localDataStore.batchs[this.props.firebase.currentData.batchId].state || localDataStore.batchs[this.props.firebase.currentData.batchId].state !== \"Closed\"))?true:false\r\n    }\r\n    var wide = this.state.dimensions.window.width>1000?true:false\r\n    if (this.props.Display) wide = false\r\n    var App = (Platform.OS === 'ios' || Platform.OS === 'android')||!wide\r\n\r\n    var height = this.state.dimensions.window.height //Full Screen\r\n    if (this.props.Height) {\r\n      height = this.props.Height;\r\n      //height = height - 100 // ?? beautify'er\r\n    } else {\r\n      height = 500 \r\n      /*if (Platform.OS !== 'ios' && Platform.OS !== 'android') height = height - 64 //Navigation title\r\n      height = height - 49 //TitleElement\r\n      height = height - 145 //Data Props\r\n      height = height - 71 //View Selector\r\n      if (BatchIsOpen) height = height - 74 //Editor\r\n\r\n      height = height - 100 // ?? beautify'er*/\r\n    }\r\n    //height = height - parseInt(10 + 15) //Margins \r\n\r\n    var width = this.state.dimensions.window.width * 2; //Full Screen\r\n    if (this.props.Width) {\r\n      width = this.props.Width;\r\n    } else {\r\n      width = width - (Metrics.normal * 4) // Margins\r\n      width = width / (wide?2.05:1) //If not WideScreen - Split diagram in 2\r\n    }\r\n    \r\n    var DataSets = this.props.Display?[{color: (opacity = 0.1) => `rgba(0, 0, 0, ${opacity})`,data:[],dataX:[]}]:this.state.ActiveDataSets\r\n    var Legends = this.props.Display?[]:this.state.Legends.slice(0, DataSets.length)\r\n    var StartDate = this.props.Display?1:this.state.ActiveStartDate\r\n    var EndDate = this.props.Display?this.props.DataPoints.length:this.state.ActiveEndDate\r\n    var Labels = [];\r\n    if (this.props.Display) {\r\n      this.props.DataPoints.forEach((point,index)=>{\r\n        DataSets[0].data.push(point.value)\r\n        DataSets[0].dataX.push(index+1)\r\n        Labels.push(index)\r\n      })\r\n    }else Labels = this.state.Labels\r\n\r\n    return(\r\n      <View style={[Helpers.fullWidth, Helpers.fill]}>\r\n        <View style={[Helpers.fullWidth, Helpers.fill]}>\r\n          <ScrollView horizontal={true} showsHorizontalScrollIndicator={wide||this.props.Display?false:true} style={[Helpers.fullSize, App&&!this.props.Display?{maxWidth:width/2, maxHeight:540}:{}]}>\r\n            {this.state.TempGraph||this.props.Display && (Labels && Labels.length > 0) && (DataSets && DataSets.length > 0)?(\r\n            <LineChart\r\n              //bezier\r\n              style={[{marginLeft: -15, minHeight: height, minWidth: width}]}\r\n              width={width}\r\n              height={height}\r\n\r\n              data={{\r\n                labels: Labels,\r\n                xMinMax: [StartDate, EndDate, Labels.length -1],\r\n                legend: Legends,\r\n                datasets: DataSets,\r\n              }}\r\n\r\n              onDataPointClick={(data) => {\r\n                this.setState({\r\n                  ViewPoint: data\r\n                })\r\n              }}\r\n\r\n              withShadow={false}\r\n              withVerticalLines={true}\r\n              fromZero={false}\r\n              segments={15} //Horizontal-Lines\r\n              \r\n              verticalLabelRotation={0} //Not Working in browser\r\n              xLabelsOffset={0}\r\n\r\n              chartConfig={{\r\n                backgroundColor: Colors.white,\r\n                backgroundGradientFrom: Colors.white,  //#FFFFFF\r\n                backgroundGradientTo: Colors.white,     \r\n                decimalPlaces: 1, // optional, defaults to 2dp\r\n                color: (opacity = 1) => `rgba(0, 0, 0, ${opacity})`,  //Lines / Grid\r\n                labelColor: (opacity = 1) => `rgba(0, 0, 0, ${opacity})`, //Lables\r\n                style: {\r\n                  borderRadius: 16,\r\n                  height: height,\r\n                },\r\n                propsForDots: {\r\n                  r: \"5\",\r\n                  strokeWidth: \"0.5\",\r\n                  stroke: Colors.white\r\n                }\r\n              }}\r\n            />):(<></>)}\r\n          </ScrollView>\r\n        </View>\r\n        {!this.props.Display?(\r\n          <View style={[Helpers.fullWidth, Helpers.mainCenter]}>\r\n            <View style={[Helpers.fill, Helpers.fullWidth, Helpers.rowCenter, ]}>\r\n              <View style={{paddingRight: 2.5}}>\r\n                <Icon name=\"md-arrow-back\" type='ionicon' size={25} color=\"black\" onPress={() => {\r\n                  if (this.state.ActiveIndex != 0){\r\n                    var i = this.state.ActiveIndex;\r\n                    i = i-1;\r\n                    this.setState({\r\n                      ActiveIndex: i\r\n                    })\r\n                  }\r\n                }}/>\r\n              </View>\r\n              <Button Text=\"Day view\" buttonStyle={{width:wide?100:80}}\r\n                onPress={() => {\r\n                  this.setState({\r\n                    ActiveIndex: -1,\r\n                    ActiveLength: \"Days\"\r\n                  })\r\n                } }/>\r\n              <Button Text=\"Week view\" buttonStyle={{width:wide?100:80, marginLeft:2.5}}\r\n                onPress={() => {\r\n                  this.setState({\r\n                    ActiveIndex: -1,\r\n                    ActiveLength: \"Weeks\"\r\n                  })\r\n                } }/>\r\n              <Button Text=\"Full Batch\" buttonStyle={{width:wide?100:80, marginLeft:2.5}}\r\n                onPress={() => {\r\n                  this.setState({\r\n                    ActiveIndex: 0,\r\n                    ActiveLength: \"Batch\"\r\n                  })\r\n                } }/>\r\n              <View style={{paddingLeft: 2.5}}>\r\n                <Icon name=\"md-arrow-forward\" type='ionicon' size={25} color=\"black\" onPress={() => {\r\n                  var i = this.state.ActiveIndex;\r\n                  i = i+1;\r\n                  this.setState({\r\n                    ActiveIndex: i\r\n                  })\r\n                }}/>\r\n              </View>\r\n            </View>\r\n            {BatchIsOpen&&!App?(\r\n              <View style={[Helpers.fullWidth, Helpers.rowCenter]}>\r\n                  <CurveEditor control={this} props={this.props} state={this.state} />\r\n              </View>\r\n            ):(<></>)}\r\n          </View>\r\n        ):(<></>)}\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nconst CurveEditor = (props) => {\r\n  if (Platform.OS === 'ios' || Platform.OS === 'android') {\r\n    if (props.state.ViewPoint){\r\n      var TimeText = props.state.Labels[props.state.ViewPoint.index]\r\n      if (props.state.ViewPoint.dataset.dataX) {\r\n        var Time = new Date(props.state.ViewPoint.dataset.dataX[props.state.ViewPoint.index])\r\n        TimeText = Time.getFullYear() + \".\" + (Time.getMonth() +1) + \".\" + Time.getDate()\r\n      }\r\n\r\n      var Data = props.state.ViewPoint.value\r\n      return (\r\n        <View style={[Helpers.buttonContainer, Helpers.fullWidth, Helpers.rowCenter, {maxHeight:100}] }>\r\n          <View style={[Helpers.colCenter, Helpers.borderContainer, {borderRadius:0}]}>\r\n            <Text>{TimeText}</Text>\r\n          </View>\r\n          <View style={[Helpers.colCenter, Helpers.borderContainer, {borderRadius:0}]}>\r\n            <Text>{Data} Kg.</Text>\r\n          </View>\r\n        </View>\r\n      )\r\n    }\r\n    else return(<></>)\r\n  } else {\r\n    const [Point, setPoint] = React.useState(0)\r\n    if (!props.state.TempGraph) {\r\n      return(<></>)\r\n    }\r\n    else {\r\n      return (\r\n        <View style={[Helpers.buttonContainer, Helpers.fullWidth, Helpers.rowCenter, {maxHeight:100,marginTop:10}] }>\r\n          <View style={{padding:6, paddingRight: 15}}>\r\n            <Icon name=\"md-arrow-back\" type='ionicon' size={25} color=\"black\" onPress={() => {\r\n              var index = Point;\r\n              index = index -1\r\n              if (index < 0) {\r\n                index = props.state.TempGraph.data.length -1\r\n              }\r\n              setPoint(index)\r\n            }}/>\r\n          </View>\r\n          <Input\r\n              type='number'\r\n              step=\"0.1\"\r\n\r\n              label={props.state.Labels[Point]}\r\n              containerStyle={[{width:\"auto\", borderWidth:1}]}\r\n              style={[ApplicationStyles.input, Helpers.borderContainer, {borderRadius:0}]}\r\n\r\n              onChange= {(evt) => {\r\n                var text = evt.target.value\r\n                if (!isNaN(text) || text.endsWith('.') && text.split('.').length <= 2) {\r\n                  var NewData = props.state.TempGraph.data;\r\n                  NewData[Point] = text\r\n                  \r\n                  props.control.setState({\r\n                    state: props.state,\r\n                    TempGraph: {...props.state.TempGraph, data: NewData}\r\n                  })\r\n                  props.control.setGraphPeriode(props.state.ActiveLength)\r\n                }\r\n              }}\r\n              /*onChangeText={text => {\r\n                if (!isNaN(text) || text.endsWith('.') && text.split('.').length <= 2) {\r\n                  var NewData = props.state.TempGraph.data;\r\n                  if (text === \"\" || text === null) text = 0\r\n                  if (text.endsWith('.')) text = text + \"0\"\r\n                  NewData[Point] = parseFloat(text)\r\n                  console.log(NewData[Point], text)\r\n                  props.control.setState({\r\n                    TempGraph: {...props.state.TempGraph, data: NewData}\r\n                  })\r\n\r\n                  props.control.forceUpdate()\r\n                }\r\n              }}*/\r\n              value={\r\n                props.state.TempGraph.data[Point]\r\n              }\r\n            />\r\n          <View style={{padding:6, paddingRight: 15}}>\r\n            <Icon name=\"md-arrow-forward\" type='ionicon' size={25} color=\"black\" onPress={() => {\r\n              var index = Point;\r\n              index = index +1\r\n              if (index > props.state.TempGraph.data.length -1){\r\n                index = 0\r\n              }\r\n              setPoint(index)\r\n            }}/>\r\n          </View>\r\n          <Input\r\n              label=\"Curve Name\"\r\n              containerStyle={[{width:\"auto\", borderWidth:1}]}\r\n              style={[ApplicationStyles.input, Helpers.borderContainer, {borderRadius:0}]}\r\n              \r\n              onChangeText={text => {\r\n                /*var name = text;\r\n                name = name.replace(' ', '_')\r\n                if (isNaN(name[0])){\r\n                  var NewLegends = props.state.Legends;\r\n                  NewLegends[0] = name\r\n                  props.control.setState({\r\n                    TempGraph: {...props.state.TempGraph, name: name},\r\n                    Legends: NewLegends\r\n                  })\r\n                }*/\r\n              }}\r\n              value={\r\n                props.state.TempGraph.name\r\n              }\r\n            />\r\n        </View>\r\n      )\r\n    }\r\n  }\r\n} \r\n\r\n/*\r\n<Button Text=\"Save\" buttonStyle={{width:100, marginLeft:20}}\r\n            onPress={() => {\r\n              props.props.setCurve(props.state.TempGraph)\r\n            } }/>\r\n*/\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    getPen: (penId, DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PENS, {PenId: penId, DataTime:DataTime})),\r\n    getWeights: (penId, DataTime, MemSections) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.WEIGHING, {PenId: penId, DataTime: DataTime, MemSections: MemSections})),\r\n    getCurve: (curveid) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.GRAPH, {GraphId: curveid})),\r\n    setCurve: (curve) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.GRAPH, {Graph: curve}))\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CurveElement);\r\nexport {\r\n  WeightsToGraphData,\r\n}","import React, { useEffect, useState, Component } from 'react'\r\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, Dimensions, SafeAreaView, FlatList, Picker } from 'react-native'\r\nimport { Input, Icon } from 'react-native-elements'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs, DataStringCheck } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button, TitleElement, CustomListItem, ContentProp } from '../../../Components'\r\nimport Style from './UserPanelStyle'\r\nimport { ApplicationStyles, Helpers, Metrics, Images } from '../../../Theme'\r\nimport CurveElement from './CurveElement'\r\n\r\nclass GrowthCurve extends Component {\r\n  constructor(props){\r\n    super(props);\r\n\r\n    const {CurveList} = this.setData(props)\r\n    var D = new Date()\r\n    this.state = {\r\n      CurveList: CurveList,\r\n\r\n      Display: 0,\r\n\r\n      CurveName: \"\",\r\n      DataPoints: [],\r\n      Periode: \"Days\",\r\n\r\n      Selected: {dataindex:null, index:null, error:false}\r\n    }\r\n  }\r\n\r\n  setData(Props) {\r\n    const localDataStore = Props.firebase.localDataStore;\r\n\r\n    var CurveList = localDataStore.graphs\r\n    return { CurveList }\r\n  }\r\n\r\n  getData(){\r\n    this.props.getCurve()\r\n  }\r\n\r\n  checkData(props){\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps) {\r\n      this.checkData(this.props);\r\n\r\n      if (this.props.firebase.localDataStore) {\r\n        if (this.props.firebase.localDataStore.graphs && JSON.stringify(this.state.CurveList)!==JSON.stringify(this.props.firebase.localDataStore.graphs)) {\r\n          const {CurveList} = this.setData(this.props)\r\n          this.setState({\r\n            CurveList: CurveList,\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n    const ErrorMessage = this.props.firebase.viewError\r\n\r\n    var AverageGrowth = 0\r\n    for(var i = 0; i < this.state.DataPoints.length; i++) {\r\n      if (!this.state.DataPoints[i] || !this.state.DataPoints[i].hasOwnProperty(\"value\")) continue;\r\n      var value = this.state.DataPoints[i].value\r\n      if (value === \"\" || value === null) value = 0\r\n      value = parseFloat(value)\r\n\r\n      for(var i2 = i-1; i2 >= 0; i2--) {\r\n        if (this.state.DataPoints[i2] && this.state.DataPoints[i2].hasOwnProperty(\"value\")){\r\n          var Growth = value - this.state.DataPoints[i2].value\r\n          AverageGrowth = (AverageGrowth + Growth) / 2\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    AverageGrowth = AverageGrowth.toFixed(3)\r\n\r\n    var App = Platform.OS === \"android\" || Platform.OS === \"ios\" ? true: false\r\n    return(\r\n      <ScrollView style={[Helpers.fullSize, Helpers.fill]} nestedScrollEnabled={true}>\r\n        <View\r\n          style={[\r\n            Helpers.mainContainer,\r\n          ]}\r\n        >\r\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\r\n          {ErrorMessage ? (\r\n            <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\r\n          ):(<></>)}\r\n          {this.state.Display === 0?(\r\n            <View style={[Helpers.contentContainer, Helpers.fullSize, {marginHorizontal:0, paddingHorizontal:-20}]}>\r\n            {this.state.CurveList ? (\r\n              <View style={[Helpers.fill, Helpers.fullWidth, Metrics.smallHorizontalPadding, Metrics.smallVerticalPadding, {maxWidth:800, marginTop:10}]}>\r\n                <FlatList nestedScrollEnabled={true}\r\n                  data={Object.keys(this.state.CurveList).filter(e => e !== '__jsogObjectId' && e !== 'update_time')}\r\n                  renderItem={({item})=>{\r\n                    return(\r\n                      <Button Text={item} onPress={() => {\r\n                        var CurveData = this.state.CurveList[item]\r\n\r\n                        var DataPoints = []\r\n                        if (!CurveData || !CurveData.hasOwnProperty(\"data\")){\r\n                          this.props.viewError(\"DataFetch error, please try to refresh\")\r\n                        }else {\r\n                          var _index = 0;\r\n                          Object.keys(CurveData.data).filter(e => e !== '__jsogObjectId').map((index) => {\r\n                            DataPoints[index] = { value: CurveData.data[index]}\r\n                            for(var i = index-1; i > _index;i--){\r\n                              DataPoints[i] = { value:null}\r\n                            }\r\n                            _index = index\r\n                          })\r\n                        }\r\n                        this.setState({\r\n                          Display: 2,\r\n                          CurveName: item,\r\n                          DataPoints: DataPoints,\r\n                          Periode: CurveData.periode\r\n                        })\r\n                      }}/>\r\n                    )\r\n                  }}\r\n                  keyExtractor={(item, index) => index.toString()}\r\n                />\r\n              </View>\r\n            ):(<></>)}\r\n            <View style={[Helpers.buttonContainer, Helpers.borderContainer, Helpers.midWidth]}>\r\n              <Button Text={\"New Curve\"} onPress={() => {\r\n                this.setState({\r\n                  Display: 1,\r\n                  DataPoints: [{value:\"0\"},{value:\"0\"}]\r\n                })\r\n              }}/>\r\n            </View>\r\n          </View>\r\n          ):(\r\n            //#region Edit or create\r\n            <View style={[Helpers.contentContainer, Helpers.fullSize, {marginHorizontal:0, paddingHorizontal:-20}]}>\r\n              {this.state.Display === 1?( // Create\r\n                <Input label={\"CurveName\"}\r\n                  containerStyle={[{borderWidth:1, marginTop:10}]}\r\n                  style={[ApplicationStyles.input, ]}\r\n                  onChangeText={text => {\r\n                    if (text){\r\n                      if (DataStringCheck(text)){\r\n                        this.setState({CurveName: text})\r\n                      }\r\n                    }else {\r\n                      this.setState({CurveName: text})\r\n                    }\r\n                  }}\r\n                  value={\r\n                    this.state.CurveName\r\n                  }\r\n                />\r\n              ):( //Edit\r\n                <TitleElement Text={this.state.CurveName}/>\r\n              )}\r\n              <View style={[Helpers.fill, Helpers.fullWidth]}>\r\n                <ContentProp texts={[\"Periode: \" + this.state.Periode]} datas={[\"Average Growth: \" + AverageGrowth]} />\r\n                <View style={[Helpers.borderContainer, Helpers.fillCenter, Helpers.fullWidth, {alignSelf:'center'}]}>\r\n                  <CurveElement Display={true} DataPoints={this.state.DataPoints} Height={200} Width={455}/>\r\n                </View>\r\n                <View>\r\n                  <FlatList nestedScrollEnabled={true}\r\n                    data={this.state.DataPoints}\r\n                    style={[App?styles.AppStyle:styles.WebStyle]}\r\n                    renderItem={({item, index}) => {\r\n                      if (!item || item.value === null || item.value === undefined) return null;\r\n                      var Selected = index===this.state.Selected.dataindex\r\n                      return(\r\n                        <View style={[Helpers.fullWidth, Helpers.row]} \r\n                          onFocus={() => {\r\n                            this.setState({\r\n                              Selected: {dataindex:index, index:index, error:false}\r\n                            })\r\n                          }}\r\n                          onBlur={() => {\r\n                            this.setState({\r\n                              Selected: {dataindex:null, index:null, error:false}\r\n                            })\r\n                          }}\r\n                        >\r\n                          <Input label={\"Day:\"}\r\n                            type='number'\r\n                            step=\"0.1\"\r\n\r\n                            containerStyle={[{width:120, borderWidth:1, marginTop:10, marginRight:10}]}\r\n                            style={[ApplicationStyles.input, {width:100}]}\r\n                            \r\n                            errorMessage={Selected&&this.state.Selected.error?\"Value error\":\"\"}\r\n                            editable={index===0?false:true}\r\n                            onChangeText={text => {\r\n                              if (!isNaN(text)) {\r\n                                var _Selected = this.state.Selected\r\n                                _Selected.index = text\r\n                                _Selected.error = false\r\n                                if (this.state.DataPoints[text] && this.state.DataPoints[text].hasOwnProperty(\"value\") && this.state.DataPoints[text].value) {\r\n                                  _Selected.error = true\r\n                                }\r\n                                this.setState({\r\n                                  Selected: _Selected\r\n                                });\r\n                              }\r\n                            }}\r\n\r\n                            onBlur={() => {\r\n                              if (!this.state.Selected.error && this.state.Selected.dataindex !== this.state.Selected.index) {\r\n                                var DataPoints = [ ...this.state.DataPoints ];\r\n                                DataPoints[this.state.Selected.index] = {value: item.value.toString()};\r\n                                DataPoints[this.state.Selected.dataindex].value = null\r\n\r\n                                var FirstData = false\r\n                                for(var i = DataPoints.length-1; i>1;i--) {\r\n                                  if (!DataPoints[i] || !DataPoints[i].hasOwnProperty(\"value\") || !DataPoints[i].value) {\r\n                                    if (FirstData) {\r\n                                      DataPoints[i] = {value: null}\r\n                                    }\r\n                                    else DataPoints.pop()\r\n                                  } else {\r\n                                    FirstData = true;\r\n                                  }\r\n                                }\r\n                                this.setState({DataPoints});\r\n                              }\r\n                            }}\r\n\r\n                            value={\r\n                              \"\" + (Selected?this.state.Selected.index:index)\r\n                            }\r\n                          />\r\n                          <Input label={\"Weight:\"}\r\n                            type='number'\r\n                            step=\"0.1\"\r\n\r\n                            containerStyle={[Helpers.fill,{borderWidth:1, marginTop:10}]}\r\n                            style={[ApplicationStyles.input]}\r\n                            \r\n                            onChangeText={text => {\r\n                              if (!isNaN(text) || text.endsWith('.') && text.split('.').length <= 2) {\r\n                                var DataPoints = [ ...this.state.DataPoints ];\r\n                                DataPoints[index].value = text;\r\n                                this.setState({DataPoints});\r\n                              }\r\n                            }}\r\n\r\n                            onBlur={(e:any) => {\r\n                              var text = e.nativeEvent.text\r\n                              if (text === undefined || text === null || text === \"\") {\r\n\r\n                                var DataPoints = [ ...this.state.DataPoints ];\r\n                                DataPoints[index].value = \"0\";\r\n                                this.setState({DataPoints});\r\n                              }\r\n                            }}\r\n\r\n                            value={\r\n                              \"\" + item.value\r\n                            }\r\n                          />\r\n                        </View>\r\n                      )\r\n                    }}\r\n                    keyExtractor={(item, index) => index.toString()}\r\n                    //Setting the number of column\r\n                    numColumns={1}\r\n                  />\r\n                </View>\r\n                <View style={{height:20}} />\r\n                <Button Text={\"New Point\"} onPress={() => {\r\n                  var DataPoints = [ ...this.state.DataPoints ];\r\n                  var value = this.state.DataPoints&&this.state.DataPoints.length >= 1?this.state.DataPoints[this.state.DataPoints.length-1].value:\"0\"\r\n                  DataPoints.push({value:value})\r\n                  this.setState({\r\n                    DataPoints\r\n                  })\r\n                }}/>\r\n              </View>\r\n\r\n              <View style={[Helpers.buttonContainer, Helpers.borderContainer, Helpers.midWidth, {marginTop:10}]}>\r\n                <Button Text={\"Save\"} onPress={() => {\r\n                  var update = true;\r\n\r\n                  if (this.state.CurveName !== \"\"){\r\n                    var Name = this.state.CurveName;\r\n                    if (!Object.keys(this.state.CurveList).includes(Name)) {\r\n                      if (this.state.Display === 2) { // update on non existing\r\n                        this.props.setViewError(\"Cannot update non-existing Curve. (Please refresh)\")\r\n                        update = false \r\n                      }\r\n                    } \r\n                    else {\r\n                      if (this.state.Display === 1) { // create on allready existing\r\n                        this.props.setViewError(\"Cannot create allready existing Curve.\")\r\n                        update = false \r\n                      }\r\n                    }\r\n                  }else {\r\n                    this.props.setViewError(\"Curve template need a name.\")\r\n                    update = false\r\n                  }\r\n\r\n                  var lastDataIndex = 0\r\n                  this.state.DataPoints.forEach((element,index) => {\r\n                    if (update && element.value !== null && element.value !== undefined){\r\n                      if (index > 0 && parseInt(element.value) <= parseInt(this.state.DataPoints[lastDataIndex].value)) {\r\n                        var Eindex = lastDataIndex\r\n                        if (element.value === this.state.DataPoints[lastDataIndex].value) Eindex = index\r\n                        this.props.setViewError(\"Curve template needs to be incremental: error at day: \" + Eindex)\r\n                        update = false;\r\n                      } else {\r\n                        lastDataIndex = index\r\n                      }\r\n                    }\r\n                  })\r\n\r\n                  if (update) {\r\n                    this.props.setViewError(null)\r\n                    this.props.setViewLoading(true)\r\n                    var newCurve = {name:this.state.CurveName, periode:this.state.Periode}\r\n                    var Data = []\r\n                    var index = 0;\r\n                    this.state.DataPoints.forEach(element => {\r\n                      if (element.value) Data[index] = parseFloat(element.value)\r\n                      index++;\r\n                    });\r\n                    newCurve.data = Data;\r\n                    this.props.updateCurve(newCurve)\r\n                    \r\n                    this.setState({\r\n                      Display: 0\r\n                    })\r\n                  }\r\n                }}/>\r\n              </View>\r\n            </View>\r\n            //#endregion\r\n          )}\r\n        </View>\r\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n        }\r\n      </View>\r\n      </ScrollView>\r\n    )\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  AppStyle: {\r\n    \r\n  },\r\n  WebStyle: {\r\n    height:400\r\n  },\r\n});\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    getCurve: () => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.GRAPH, {GraphId: \"\"})),\r\n    updateCurve: (curve) => dispatch(FirebaseActions.actionStarting(Actions.UPDATE, DataRefs.GRAPH, {Graph: curve})),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GrowthCurve);\r\n//export default GrowthCurve;\r\n","import React, { useEffect, Component } from 'react'\r\nimport { Text, View, ActivityIndicator, ScrollView } from 'react-native'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs, sortObject } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button, OperationsPanel } from '../../../Components'\r\nimport Style from './UserPanelStyle'\r\nimport { ApplicationStyles, Helpers, Metrics } from '../../../Theme'\r\n\r\nclass Operations extends Component {\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n    }\r\n  }\r\n\r\n  getData() {\r\n    this.props.setCurrentData({})\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n    const ErrorMessage = this.props.firebase.viewError\r\n\r\n    return(\r\n      <View\r\n        style={[\r\n          Helpers.mainContainer,\r\n        ]}\r\n      >\r\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\r\n          {ErrorMessage ? (\r\n            <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\r\n          ):(<></>)}\r\n          <View style={[Helpers.buttonContainer, Helpers.midWidth, Metrics.bottomMargin, {marginBottom:60}] }>\r\n          </View>\r\n\r\n          <View style={[Helpers.buttonContainer, Helpers.halvWidth, Helpers.fillColMain]}>\r\n            <OperationsPanel section={true}/>\r\n          </View>\r\n        </View>\r\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n        }\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    setCurrentData: actionType => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PENS, action: actionType})),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Operations);\r\n//export default Operations;\r\n","import React, { useEffect, Component } from 'react'\r\nimport { Text, View, ActivityIndicator, Picker } from 'react-native'\r\nimport { Input } from 'react-native-elements'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs, sortObject } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button, Datetime_Picker } from '../../../Components'\r\nimport Style from '../CloudScreenStyle'\r\nimport { ApplicationStyles, Helpers, Metrics, Colors } from '../../../Theme'\r\n\r\nclass Weighing extends Component {\r\n  constructor(props){\r\n    super(props);\r\n\r\n    const {Sections, Section, Pens, Pen, quantity} = this.setData(this.props)\r\n    this.state = {\r\n      Sections: Sections,\r\n      Section: Section,\r\n\r\n      Pens: Pens,\r\n      Pen: Pen,\r\n      weight: \"\",\r\n      quantity: quantity,\r\n      date: new Date().getTime()\r\n    }\r\n  }\r\n\r\n  getData() {\r\n    const localDataStore = this.props.firebase.localDataStore;\r\n    if (!localDataStore.sections) localDataStore.sections = {}\r\n    this.props.getSections(localDataStore.sections.update_time)\r\n  }\r\n\r\n  setData(Props) {\r\n    //Set Sections\r\n    const localDataStore = Props.firebase.localDataStore;\r\n    var Sections = false;\r\n    if (localDataStore && localDataStore.sections && localDataStore.sections !== Sections) {\r\n      Sections = sortObject(localDataStore.sections)\r\n    }\r\n\r\n    //Set Section\r\n    const CurrentData = Props.firebase.currentData;\r\n    var Section = Sections? Object.keys(Sections)[0] : \"\"\r\n    if (CurrentData && CurrentData.data && CurrentData.data.section && Sections[CurrentData.data.section]) {\r\n      if (CurrentData.data.section != Section) {\r\n        Section = CurrentData.data.section\r\n      }\r\n    }\r\n\r\n    //Pens & Pen\r\n    var Pens = Sections? sortObject(Sections[Section].pens): {}\r\n    var Pen = Sections? Object.keys(Pens)[0]: \"\"\r\n    if (CurrentData && CurrentData.penId && Pens[CurrentData.penId] && CurrentData.penId != Pen){\r\n      Pen = CurrentData.penId\r\n    }\r\n    var quantity = 1\r\n    if (localDataStore && localDataStore.pens) {\r\n      var _Pen = localDataStore.pens[Pen]\r\n      if (_Pen && _Pen.datas && _Pen.datas.count) quantity = _Pen.datas.count\r\n    }\r\n\r\n    if (!Sections) Sections = {}\r\n    return {Sections, Section, Pens, Pen, quantity}\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps){\r\n      this.checkData(this.props);\r\n\r\n      if (this.props.firebase.localDataStore) {\r\n        if (this.props.firebase.localDataStore.sections && JSON.stringify(this.state.Sections)!==JSON.stringify(sortObject(this.props.firebase.localDataStore.sections))) {\r\n\r\n          const {Sections, Section, Pens, Pen, quantity} = this.setData(this.props)\r\n\r\n          this.setState({\r\n            Sections: Sections,\r\n            Section: Section,\r\n            Pens: Pens,\r\n            Pen: Pen,\r\n\r\n            quantity: quantity,\r\n            weight: \"\",\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n    const ErrorMessage = this.props.firebase.viewError\r\n\r\n    const localDataStore = this.props.firebase.localDataStore\r\n\r\n    return(\r\n      <View\r\n      style={[\r\n        Helpers.mainContainer,\r\n      ]}\r\n      >\r\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\r\n          {ErrorMessage ? (\r\n            <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\r\n          ):(<></>)}\r\n          <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\r\n            <View style={[Helpers.buttonContainer, Helpers.midWidth, Metrics.bottomMargin] }>\r\n              <Button Text=\"Weighing\" buttonStyle={{backgroundColor: Colors.AgriDarkblue}}\r\n                onPress={() => {} }/>\r\n            </View>\r\n            \r\n            <View style={[Helpers.borderContainer, Helpers.fullWidth, {marginBottom:20}] }>\r\n              <Picker\r\n                mode=\"dropdown\"\r\n                selectedValue={this.state.Section}\r\n                style={{ height: 50, width: 150 }}\r\n                onValueChange={(itemValue, itemIndex) => {\r\n                  if (this.state.Sections[itemValue]){\r\n                    const Pens = sortObject(this.state.Sections[itemValue].pens)\r\n                    var quantity = 1\r\n                    if (localDataStore && localDataStore.pens) {\r\n                      var Pen = localDataStore.pens[Object.keys(Pens)[0]]\r\n                      if (Pen && Pen.datas && Pen.datas.count) quantity = Pen.datas.count\r\n                    }\r\n                    this.setState({\r\n                      Section: itemValue,\r\n                      Pens: Pens,\r\n                      Pen: Object.keys(Pens)[0],\r\n                      quantity: quantity,\r\n                    })\r\n                  }\r\n                }}\r\n              >\r\n                {Object.keys(this.state.Sections).map((Section, i) => {\r\n                    return (<Picker.Item label={Section} value={Section} key={i}/>)\r\n                })}\r\n              </Picker>\r\n\r\n              <Picker\r\n                mode=\"dropdown\"\r\n                selectedValue={this.state.Pen}\r\n                style={{ height: 50, width: 150 }}\r\n                onValueChange={(itemValue, itemIndex) => {\r\n                  var quantity = 1\r\n                  if (localDataStore && localDataStore.pens) {\r\n                    var Pen = localDataStore.pens[itemValue]\r\n                    if (Pen && Pen.datas && Pen.datas.count) quantity = Pen.datas.count\r\n                  }\r\n                  this.setState({\r\n                    quantity: quantity,\r\n                    Pen: itemValue\r\n                  })\r\n                }}\r\n              >\r\n                {Object.keys(this.state.Pens).map((Pen, i) => {\r\n                    return (<Picker.Item label={Pen} value={Pen} key={i}/>)\r\n                })}\r\n              </Picker>\r\n\r\n              <View style={[Helpers.fullWidth, {borderWidth:0 ,height: 65, marginTop:10, paddingHorizontal:5, paddingTop:0, borderRadius:0, alignItems:\"center\"}]}>\r\n                <View style={[Helpers.fullWidth, {alignItems:\"flex-start\"}]}>\r\n                  <Text style={[ApplicationStyles.text, {marginHorizontal:5, marginTop:2, color:Colors.input, fontSize: 15, fontWeight: \"bold\"}]}>Weight date:</Text>\r\n                </View>\r\n                <View style={[Helpers.fullWidth, {alignItems:'flex-start'}]}>\r\n                  <Datetime_Picker Selected={this.state.date}\r\n                      onValueChange={(date)=>{\r\n                        this.setState({\r\n                          date: date.getTime()\r\n                        })\r\n                    }}/>\r\n                </View>\r\n              </View>\r\n              \r\n              <Input\r\n                label=\"Animal quantity\"\r\n                style={{ ...Style.input}}\r\n                onChangeText={text => {\r\n                  if (!isNaN(text)){\r\n                    this.setState({\r\n                      quantity: text\r\n                    })\r\n                  }\r\n                }}\r\n                value={this.state.quantity}\r\n              />\r\n              <Input\r\n                label=\"Total Weight\"\r\n                style={{ ...Style.input}}\r\n                onChangeText={text => {\r\n                  this.setState({\r\n                    weight: text\r\n                  })\r\n                }}\r\n                value={this.state.weight}\r\n              />\r\n            </View>\r\n\r\n            <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\r\n              <Button Text=\"Submit\"\r\n                onPress={() => {\r\n                  if (!this.state.Section){\r\n                    this.props.setViewError(\"A section is needed\")\r\n                  } else if (!this.state.Pen){\r\n                    this.props.setViewError(\"A pen is needed\")\r\n                  } else if (isNaN(this.state.quantity) || this.state.quantity === \"\" || this.state.quantity <= 0){\r\n                    this.props.setViewError(\"Quantity have to be a number bigger than 0\")\r\n                  } else if (isNaN(this.state.weight) || this.state.weight === \"\") {\r\n                    this.props.setViewError(\"Weight have to be a number\")\r\n                  }\r\n                  else {\r\n                    this.props.setViewLoading(true)\r\n                    this.props.setViewError(null)\r\n                    this.props.newWeight(this.state.Pen, parseFloat(this.state.weight), this.state.date, parseFloat(this.state.quantity))\r\n                    this.setState({\r\n                      weight: \"\",\r\n                      date: new Date().getTime()\r\n                    })\r\n                  }\r\n                } }/>\r\n            </View>\r\n          </View>\r\n        </View>\r\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n        }\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    getSections: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.SECTIONS, {DataTime: DataTime})),\r\n    newWeight: (penId, weight, date, quantity) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.WEIGHING, {PenId: penId, Weight:weight, Quantity:quantity, Date:date})),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Weighing);\r\n//export default Weighing;","import React, { useEffect, Component } from 'react'\r\nimport { Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, Picker } from 'react-native'\r\nimport { Input } from 'react-native-elements'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs, sortObject, DataStringCheck } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button, TitleElement } from '../../../Components'\r\nimport Style from '../../../Containers/Cloud/CloudScreenStyle'\r\nimport { ApplicationStyles, Helpers, Metrics, Colors } from '../../../Theme'\r\n\r\nclass DataEditor extends Component {\r\n  constructor(props){\r\n    super(props);\r\n\r\n    const {Sections, Section, Pens, Pen} = this.setData(props)\r\n    this.state = {\r\n      Sections: Sections,\r\n      Section: Section,\r\n\r\n      Pens: Pens,\r\n      Pen: Pen,\r\n      NewSection: (Sections&&Object.keys(Sections).length > 0)?false:true,\r\n    }\r\n  }\r\n\r\n  getData() {\r\n    const localDataStore = this.props.firebase.localDataStore;\r\n    if (!localDataStore.sections) localDataStore.sections = {}\r\n    this.props.getSections(localDataStore.sections.update_time)\r\n  }\r\n\r\n  setData(Props) {\r\n    //Set Sections\r\n    const localDataStore = Props.firebase.localDataStore;\r\n    var Sections = false;\r\n    \r\n    if (localDataStore && localDataStore.sections && localDataStore.sections !== Sections) {\r\n      Sections = sortObject(localDataStore.sections)\r\n    }\r\n\r\n    //Set Section\r\n    const CurrentData = Props.firebase.currentData;\r\n    var Section = Sections? Object.keys(Sections)[0] : \"\"\r\n    if (CurrentData && CurrentData.data && CurrentData.data.section && Sections[CurrentData.data.section]) {\r\n      if (CurrentData.data.section != Section) {\r\n        Section = CurrentData.data.section\r\n      }\r\n    }\r\n\r\n    //Pens & Pen\r\n    var Pens = (Sections&&Sections[Section])? sortObject(Sections[Section].pens): {}\r\n    var Pen = Sections? Object.keys(Pens)[0]: \"\"\r\n    if (CurrentData && CurrentData.dataId && Pens[CurrentData.dataId] && CurrentData.dataId != Pen){\r\n      Pen = CurrentData.dataId\r\n    }\r\n\r\n    if (!Sections) Sections = {}\r\n    return {Sections, Section, Pens, Pen}\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps){\r\n      this.checkData(this.props);\r\n\r\n      if (this.props.firebase)  {\r\n        if (this.props.firebase.localDataStore) {\r\n          if (this.props.firebase.localDataStore.sections && JSON.stringify(this.state.Sections)!==JSON.stringify(sortObject(this.props.firebase.localDataStore.sections))) {\r\n            \r\n            const {Sections, Section, Pens, Pen} = this.setData(this.props)\r\n\r\n            this.setState({\r\n              Sections: Sections,\r\n              Section: Section,\r\n              Pens: Pens,\r\n              Pen: Pen,\r\n              NewSection: (Sections&&Object.keys(Sections).length > 0)?false:true,\r\n            })\r\n          }\r\n        }\r\n        if (this.props.firebase.currentData) {\r\n          if (this.props.firebase.currentData != prevProps.firebase.currentData){\r\n            this.forceUpdate()\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n    const ErrorMessage = this.props.firebase.viewError\r\n\r\n    const localDataStore = this.props.firebase.localDataStore\r\n    const CurrentData = this.props.firebase.currentData\r\n\r\n    var DataView = (<View></View>);\r\n\r\n    switch(CurrentData.type){\r\n      case DataRefs.PENS:\r\n        DataView = PenEditor_View_Creator(this, CurrentData, localDataStore)\r\n        break;\r\n      case DataRefs.PIGS:\r\n        DataView = PigEditor_View_Creator(this, CurrentData, localDataStore)\r\n        break;\r\n    }\r\n\r\n    return(\r\n      <View\r\n      style={[\r\n        Helpers.mainContainer,\r\n      ]}\r\n      >\r\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\r\n          {ErrorMessage ? (\r\n            <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\r\n          ):(<></>)}\r\n          {DataView}\r\n        </View>\r\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n        }\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nconst PenEditor_View_Creator = (Control, CurrentData, localDataStore) => {\r\n  var Sections = Control.state.Sections;\r\n  if (CurrentData.action === Actions.CREATE) {\r\n    Sections[\"New Section\"] = {}\r\n  }\r\n\r\n  return(\r\n    <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\r\n      <PenEditor_Titles CurrentAction={CurrentData.action}/>\r\n      \r\n      <View style={ [Helpers.borderContainer, Helpers.midWidth, {marginBottom:20}] }>\r\n        <Section_Picker Control={Control} CurrentData={CurrentData} localDataStore={localDataStore}/>\r\n        {CurrentData.action === Actions.CREATE ?(\r\n          <Input\r\n            label=\"Pen name\"\r\n            style={{ ...Style.input}}\r\n            onChangeText={text => {\r\n              if (text){\r\n                if (DataStringCheck(text)){\r\n                  Control.setState({Pen: text})\r\n                }\r\n              }else {\r\n                Control.setState({Pen: text})\r\n              }\r\n            }}\r\n            value={Control.state.Pen}\r\n          />\r\n        ):(<></>)}\r\n        {CurrentData.action === Actions.DELETE ?(\r\n          <Picker\r\n            mode=\"dropdown\"\r\n            selectedValue={Control.state.Pen}\r\n            style={{ height: 50, width: 150 }}\r\n            onValueChange={(itemValue, itemIndex) => {\r\n              Control.setState({\r\n                Pen: itemValue\r\n              })\r\n            }}\r\n          >\r\n            {Object.keys(Control.state.Pens).map((Pen, i) => {\r\n                return (<Picker.Item label={Pen} value={Pen} key={i}/>)\r\n            })}\r\n          </Picker>\r\n        ):(<></>)}\r\n      </View>\r\n\r\n      {CurrentData.action === Actions.CREATE || CurrentData.action === Actions.DELETE ?(\r\n        <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\r\n          <Button Text=\"Submit\"\r\n            onPress={() => {\r\n              if (!Control.state.Section || Control.state.Section === \"\"){\r\n                Control.props.setViewError(\"A section is needed\")\r\n              } else if (!Control.state.Pen || Control.state.Pen === \"\"){\r\n                Control.props.setViewError(\"A pen name is needed\")\r\n              } else if (!isNaN(Control.state.Section) || !isNaN(Control.state.Section[0])){\r\n                Control.props.setViewError(\"Section name cannot be or start with a number\")\r\n              } else if (!isNaN(Control.state.Pen) || !isNaN(Control.state.Pen[0])){\r\n                Control.props.setViewError(\"Pen name cannot be or start with a number\")\r\n              }\r\n              else {\r\n                var exists = false;\r\n\r\n                Object.keys(Control.state.Sections).map((section, i) => {\r\n                  if (Control.state.Sections[section].pens){\r\n                    var test = Object.keys(Control.state.Sections[section].pens).filter(e => e === Control.state.Pen).length\r\n                    if (test) exists = true\r\n                  }\r\n                })\r\n\r\n                if (exists && CurrentData.action === Actions.CREATE) {\r\n                  Control.props.setViewError(\"Given pen name already exists\")\r\n                } else if (!exists && CurrentData.action === Actions.DELETE){\r\n                  Control.props.setViewError(\"Cannot remove non-existing pen\")\r\n                }\r\n                else {\r\n                  Control.props.setViewError(null)\r\n                  Control.props.setViewLoading(true)\r\n                  Control.props.penAction(CurrentData.action, Control.state.Section, Control.state.Pen)\r\n                  NavigationService.navigate(\"UserOperations\")\r\n                }\r\n              }\r\n            } }/>\r\n        </View>\r\n      ):(<></>)}\r\n    </View>\r\n  )\r\n}\r\n\r\nconst PenEditor_Titles = (props) => {\r\n  switch(props.CurrentAction) {\r\n    case Actions.CREATE:\r\n      return(\r\n        <TitleElement Text={\"Add Pen\"}/>\r\n      )\r\n    case Actions.DELETE:\r\n      return(\r\n        <TitleElement Text={\"Remove Pen\"}/>\r\n      )\r\n    default:\r\n      return(<></>)\r\n  }\r\n}\r\n\r\nconst PigEditor_View_Creator = (Control, CurrentData, localDataStore) => {\r\n  var Sections = Control.state.Sections;\r\n  if (CurrentData.action === Actions.CREATE) {\r\n    //Sections[\"New Section\"] = {}\r\n  }\r\n\r\n  return(\r\n    <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\r\n      <TitleElement Text={\"Add Pig: \" + CurrentData.pigtag}/>\r\n      \r\n      <View style={ [Helpers.borderContainer, Helpers.midWidth, {marginBottom:20}] }>\r\n        <Section_Picker Control={Control} CurrentData={CurrentData} localDataStore={localDataStore}/>\r\n        {Control.state.NewSection?(\r\n        <Input\r\n          label=\"Pen name\"\r\n          style={{ ...Style.input}}\r\n          onChangeText={text => {\r\n            if (text){\r\n              if (DataStringCheck(text)){\r\n                Control.setState({Pen: text})\r\n              }\r\n            }else {\r\n              Control.setState({Pen: text})\r\n            }\r\n          }}\r\n          value={Control.state.Pen}\r\n        />\r\n        ):(\r\n          <Picker\r\n            mode=\"dropdown\"\r\n            selectedValue={Control.state.Pen}\r\n            style={{ height: 50, width: 150 }}\r\n            onValueChange={(itemValue, itemIndex) => {\r\n              Control.setState({\r\n                Pen: itemValue\r\n              })\r\n            }}\r\n          >\r\n            {Object.keys(Control.state.Pens).map((Pen, i) => {\r\n                return (<Picker.Item label={Pen} value={Pen} key={i}/>)\r\n            })}\r\n          </Picker>\r\n        )}\r\n        {CurrentData.action === Actions.CREATE?(\r\n        <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\r\n          <Button Text=\"Submit\"\r\n            onPress={() => {\r\n              if (!Control.state.Section || Control.state.Section === \"\"){\r\n                Control.props.setViewError(\"A section is needed\")\r\n              } else if (!Control.state.Pen || Control.state.Pen === \"\"){\r\n                Control.props.setViewError(\"A pen name is needed\")\r\n              } else if (!isNaN(Control.state.Section) || !isNaN(Control.state.Section[0])){\r\n                Control.props.setViewError(\"Section name cannot be or start with a number\")\r\n              } else if (!isNaN(Control.state.Pen) || !isNaN(Control.state.Pen[0])){\r\n                Control.props.setViewError(\"Pen name cannot be or start with a number\")\r\n              }\r\n              else {\r\n                var exists = false;\r\n\r\n                Object.keys(Control.state.Sections).map((section, i) => {\r\n                  if (Control.state.Sections[section].pens){\r\n                    var test = Object.keys(Control.state.Sections[section].pens).filter(e => e === Control.state.Pen).length\r\n                    if (test) exists = true\r\n                  }\r\n                })\r\n\r\n                if (exists && CurrentData.action === Actions.CREATE && Control.state.NewSection) {\r\n                  Control.props.setViewError(\"Given pen name already exists\")\r\n                } else {\r\n                  Control.props.setViewLoading(true)\r\n                  Control.props.setViewError(null)\r\n                  Control.props.pigAction(CurrentData.action, CurrentData.pigtag, Control.state.Pen)\r\n                  NavigationService.navigate(\"UserPigs\")\r\n                }\r\n              }\r\n            } }/>\r\n        </View>\r\n      ):(<></>)}\r\n      </View>\r\n    </View>\r\n  )\r\n}\r\n\r\nconst Section_Picker = ({Control, CurrentData, localDataStore}) => {\r\n  if (Control.state.NewSection && CurrentData.action === Actions.CREATE){\r\n    return(\r\n      <Input\r\n        label=\"Section Name\"\r\n        style={{ ...Style.input}}\r\n        onChangeText={text => {\r\n          if (text){\r\n            if (DataStringCheck(text)){\r\n              Control.setState({Section: text})\r\n            }\r\n          }else {\r\n            Control.setState({Section: text})\r\n          }\r\n        }}\r\n        value={Control.state.Section}\r\n      />\r\n    )\r\n  } else {\r\n    return(\r\n      <Picker\r\n        mode=\"dropdown\"\r\n        selectedValue={Control.state.Section}\r\n        style={{ height: 50, width: 150 }}\r\n        onValueChange={(itemValue, itemIndex) => {\r\n          var Section = itemValue\r\n          var NewSection = Control.state.NewSection\r\n          var Pens = Control.state.Pens\r\n          var Pen = Control.state.Pen\r\n\r\n          if (itemValue === \"New Section\"){\r\n            NewSection = true;\r\n            Section = \"Section_\" + Object.keys(Control.state.Sections).length\r\n          } else {\r\n            Pens = sortObject(Control.state.Sections[itemValue].pens)\r\n            \r\n            if (CurrentData.action === Actions.DELETE){\r\n              Pen = Object.keys(Pens)[Object.keys(Pens).length-1]\r\n            }\r\n            else {\r\n              if (CurrentData.type == DataRefs.PIGS){\r\n                Pen = Object.keys(Pens)[0]\r\n              }else {\r\n                Pen = \"Pen_\" + (Object.keys(Pens).length +1)\r\n              }\r\n            }\r\n          }\r\n          \r\n          Control.setState({\r\n            Section: Section,\r\n            NewSection: NewSection,\r\n            Pens: Pens,\r\n            Pen: Pen,\r\n          })\r\n        }}>\r\n        {Object.keys(Control.state.Sections).map((Section, i) => {\r\n            return (<Picker.Item label={Section} value={Section} key={i}/>)\r\n        })}\r\n      </Picker>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    getSections: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.SECTIONS, {DataTime: DataTime})),\r\n    penAction: (action, senctionId, penId) => dispatch(FirebaseActions.actionStarting(action, DataRefs.PENS, {SectionId:senctionId, PenId:penId})),\r\n    pigAction: (action, tagId, penId,) => dispatch(FirebaseActions.actionStarting(action, DataRefs.PIGS, {TagId:tagId, PenId:penId})),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DataEditor);\r\n//export default DataEditor;\r\n","import React, { Component } from 'react'\r\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, FlatList } from 'react-native'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\nimport { Icon, Input } from 'react-native-elements'\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport DeviceActions from '../../../Stores/Device/Actions'\r\nimport { ConnectionState } from '../../../Stores/Device/Selectors'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs, sortObject, format_Time, CurvePredict } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button, Button_Panel, ContentProp, OperationsPanel } from '../../../Components'\r\n\r\nimport { ApplicationStyles, Helpers, Metrics, Images, Colors } from '../../../Theme'\r\n\r\nclass DataDisplay_Pens extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      currentData: props.currentData,\r\n    }\r\n\r\n    const {CurrentData, WeighingsList, Weighings, CommentsList, Comments} = this.setData(props)\r\n    this.state = {\r\n      currentData: CurrentData,\r\n\r\n      WeighingsList: WeighingsList,\r\n      Weighings: Weighings,\r\n\r\n      CommentsList: CommentsList,\r\n      Comments: Comments,\r\n\r\n      action: \"\"\r\n    }\r\n  }\r\n\r\n  setData(Props) {\r\n    const localDataStore = Props.firebase.localDataStore;\r\n\r\n    var CurrentData = this.state.currentData;\r\n    var Pens = sortObject(localDataStore.pens)\r\n    if (Pens[CurrentData.penId]){\r\n      CurrentData.data = Pens[CurrentData.penId]\r\n    }\r\n\r\n    var WeighingsList = [];\r\n    var Weighings = [];\r\n    var App = Platform.OS === \"android\" || Platform.OS === \"ios\" ? true: false\r\n    if (localDataStore && localDataStore.weighings) {\r\n      if (localDataStore.weighings[CurrentData.penId]) {\r\n        WeighingsList = localDataStore.weighings[CurrentData.penId];\r\n        for(var i = 0; i < Object.keys(WeighingsList).length; i++) {\r\n          var name = Object.keys(WeighingsList)[i]\r\n          if (!name) continue;\r\n          var object = WeighingsList[name];\r\n          if (!object || !object.time) continue;\r\n          Weighings.push({[name]:object})\r\n        }\r\n        Weighings = Weighings.sort((a, b) => (a.time > b.time) ? 1 : -1)\r\n        if (App) {\r\n          Weighings = Weighings.slice(0,5)\r\n        }\r\n      }\r\n    }\r\n\r\n    var CommentsList = [];\r\n    var Comments = [];\r\n    if (localDataStore && localDataStore.comments) {\r\n      if (localDataStore.comments[CurrentData.penId]) {\r\n        CommentsList = localDataStore.comments[CurrentData.penId];\r\n        for(var i = 0; i < Object.keys(CommentsList).length; i++) {\r\n          var name = Object.keys(CommentsList)[i]\r\n          if (!name) continue;\r\n          var object = CommentsList[name];\r\n          if (!object || !object.time) continue;\r\n          Comments.push({[name]:object})\r\n        }\r\n        Comments = Comments.sort((a, b) => (a.time > b.time) ? 1 : -1)\r\n        if (App) {\r\n          Comments = Comments.slice(0,5)\r\n        }\r\n      }\r\n    }\r\n\r\n    if (CurrentData.data && !CurrentData.data.datas) CurrentData.data.datas = {}\r\n\r\n    return {CurrentData, WeighingsList, Weighings, CommentsList, Comments}\r\n  }\r\n\r\n  getData() {\r\n    if (this.props.firebase && this.props.firebase.localDataStore && this.state.currentData.penId) {\r\n      const localDataStore = this.props.firebase.localDataStore\r\n      if (!localDataStore.pens) localDataStore.pens = {}\r\n      this.props.getPens(localDataStore.pens.update_time)\r\n\r\n      var MemTime = null\r\n      if (localDataStore.weighings && localDataStore.weighings[this.state.currentData.penId]) MemTime = localDataStore.weighings.update_time\r\n      this.props.getWeights(this.state.currentData.penId, MemTime, localDataStore.sections)\r\n\r\n      this.props.getComments(this.state.currentData.penId)\r\n      this.props.getBatch(localDataStore.batchs.update_time)\r\n    }\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps){\r\n      this.checkData(this.props);\r\n\r\n      if (this.props.firebase.localDataStore) {\r\n        const localDataStore = this.props.firebase.localDataStore\r\n        if ((JSON.stringify(prevProps.currentData)!==JSON.stringify(this.state.currentData)) ||\r\n            (localDataStore.sections && JSON.stringify(this.state.Sections)!==JSON.stringify(sortObject(localDataStore.sections))) ||\r\n            (localDataStore.weighings && JSON.stringify(this.state.Weighings)!==JSON.stringify(sortObject(localDataStoree.weighings))) ||\r\n            (localDataStore.comments && JSON.stringify(this.state.Comments)!==JSON.stringify(sortObject(localDataStoree.comments)))\r\n        ) {\r\n          const {CurrentData, WeighingsList, Weighings, CommentsList, Comments} = this.setData(this.props)\r\n          this.setState({\r\n            currentData: CurrentData,\r\n\r\n            WeighingsList: WeighingsList,\r\n            Weighings: Weighings,\r\n\r\n            CommentsList: CommentsList, \r\n            Comments: Comments,\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n\r\n    const localDataStore = this.props.firebase.localDataStore\r\n    const CurrentData = this.state.currentData\r\n\r\n    if (!CurrentData.data) {\r\n      return(\r\n        <View style={[Helpers.fillRowCenter, Helpers.center, Helpers.logoContainer]}>\r\n          <Image style={Helpers.fullSize} source={Images.Hexa_icon} resizeMode={'contain'} />\r\n        </View>\r\n      )\r\n    } else {\r\n      var pigcount = CurrentData.data.datas.count?CurrentData.data.datas.count:0\r\n      var penWeight = []\r\n      if (this.state.Weighings.length > 0) {\r\n        penWeight = this.state.Weighings[0][Object.keys(this.state.Weighings[0])].weight / this.state.Weighings[0][Object.keys(this.state.Weighings[0])].count\r\n      }\r\n\r\n      var batch_name = CurrentData.data.datas.batch?CurrentData.data.datas.batch:\"No Batch\"\r\n      var batch = {}\r\n\r\n      //TODO: Cleanup load mem throws..\r\n      var age = \"\";\r\n      var displayWeight = penWeight;\r\n      \r\n      if (CurrentData.data.datas.batch && localDataStore.batchs && localDataStore.batchs[CurrentData.data.datas.batch]) {\r\n        batch = localDataStore.batchs[CurrentData.data.datas.batch];\r\n        var StartTime = batch.time;\r\n        age = Math.floor(((Date.now()-StartTime)/(1000*60*60*24)));\r\n        CurrentData.data.datas.gcurve = batch.gcurve;\r\n\r\n        var Predict = CurvePredict(localDataStore, CurrentData.penId)\r\n        if (Predict && Predict.Now) displayWeight = Predict.Now\r\n      }\r\n\r\n      if (!batch.datas) batch.datas = {};\r\n      if (!batch.datas.devianceMin) batch.datas.devianceMin = 0;\r\n      if (!batch.datas.devianceMax) batch.datas.devianceMax = 0;\r\n      displayWeight = Math.round(displayWeight * 1000) / 1000\r\n\r\n      var App = Platform.OS === \"android\" || Platform.OS === \"ios\" ? true: false\r\n      return(\r\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\r\n          <View style={[Helpers.buttonContainer, Helpers.midWidth, Metrics.bottomMargin, Helpers.rowCenter] }>\r\n            <View style={{padding:6, paddingRight: 15}}>\r\n              <Icon name=\"md-arrow-back\" type='ionicon' size={25} color=\"black\" onPress={() => onPageSwipe(this, localDataStore, CurrentData, false)}/>\r\n            </View>\r\n            <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\r\n              <Button Text={CurrentData.penId} buttonStyle={{backgroundColor: Colors.AgriDarkblue}}\r\n                onPress={() => {} }/>\r\n            </View>\r\n            <View style={{padding:6, paddingLeft: 15}}>\r\n              <Icon name=\"md-arrow-forward\" type='ionicon' size={25} color=\"black\" onPress={() => onPageSwipe(this, localDataStore, CurrentData, true)}/>\r\n            </View>\r\n          </View>\r\n          \r\n          <View style={[Helpers.fullWidth]}>\r\n            <ContentProp texts={[\"Pig count\", \"Batch\", \"Age Days\", \"Weight\", \"Growth Cruve\", \"Alarm Max\", \"Alarm Min\", \"Mixtur\", \"Correction\", \"Portion in kg\"]} onPress={(element) => onDataPress(1, element)} \r\n              datas={[pigcount, batch_name, age, /*penWeight*/ displayWeight, CurrentData.data.datas.gcurve?CurrentData.data.datas.gcurve:\"default\", batch.datas.devianceMin + \" %\", batch.datas.devianceMax + \" %\", \"-\", \"-\", \"-\"]} />\r\n          </View>\r\n\r\n          <View style={{height:20}} />\r\n          <View style={[Helpers.fill, App?Helpers.fullWidth:Helpers.midWidth, App?{}:{height:215}]}>\r\n            <ContentProp texts={[\"Control weighings\"]} datas={[]} />\r\n            <View style={{height:10}} />\r\n              <FlatList\r\n                data={this.state.Weighings}\r\n                renderItem={({item, index}) => {\r\n                  if (item === \"__jsogObjectId\") return (<></>);\r\n                  var Weight = this.state.WeighingsList[Object.keys(item)[0]]\r\n                  return(\r\n                    <ContentProp texts={[format_Time(Weight.time)]}\r\n                                datas={[Weight.weight + \"   : \" + Weight.count + \" pigs\"]}\r\n                    />\r\n                  )}\r\n                }\r\n                  //Setting the number of column\r\n                  numColumns={1}\r\n                  keyExtractor={(item, index) => String(index)}\r\n                />\r\n          </View>\r\n\r\n          <View style={{height:20}} />\r\n          <View style={[Helpers.fill, App?Helpers.fullWidth:Helpers.midWidth, App?{}:{height:215}]}>\r\n            <ContentProp texts={[\"Action log\"]} datas={[]} />\r\n            <View style={{height:10}} />\r\n            <FlatList\r\n              data={this.state.Comments}\r\n              renderItem={({item, index}) => {\r\n                if (item === \"__jsogObjectId\") return (<></>);\r\n                var Comment = this.state.CommentsList[Object.keys(item)[0]]\r\n                return(\r\n                  <ContentProp texts={[format_Time(Comment.time) + \":\\n\" + Comment.user]}\r\n                              datas={[(Comment.quantity?(Comment.quantity + \" * \"):(\"\")) + Comment.action + \":\\n\" + Comment.data]}\r\n                  />\r\n                )}\r\n              }\r\n                //Setting the number of column\r\n                numColumns={1}\r\n                keyExtractor={(item, index) => String(index)}\r\n              />\r\n          </View>\r\n\r\n          <View style={{height:30}} />\r\n\r\n          <View style={[Helpers.borderContainer, Helpers.midWidth]}>\r\n            <OperationsPanel />\r\n          </View>\r\n        </View>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nfunction onPageSwipe(Control, localDataStore, CurrentData, dir) {\r\n  const section = localDataStore.pens[CurrentData.penId].section\r\n  const Pens = sortObject(localDataStore.sections[section].pens)\r\n\r\n  if (CurrentData.type === DataRefs.PENS && CurrentData.data && Pens[CurrentData.penId]) {\r\n    var index = Object.keys(Pens).indexOf(CurrentData.penId)\r\n\r\n    switch (dir) {\r\n      case true: //forward\r\n        index = index +1\r\n        break;\r\n      case false: //backward\r\n        index = index -1\r\n        break;\r\n    }\r\n\r\n    if (index < 0) index = Object.keys(Pens).length - 1\r\n    else if (index >= Object.keys(Pens).length) index = 0\r\n\r\n    Control.props.setCurrentData(Object.keys(Pens)[index])\r\n    NavigationService.replace(\"DataDisplay\")\r\n  }\r\n}\r\n\r\nfunction onDataPress(sender, element){\r\n  switch(sender){\r\n    case 1:\r\n      switch(element.index){\r\n        case 0:\r\n          console.log(\"test\")\r\n          break;\r\n      }\r\n      break;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    getPens: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PENS, {DataTime: DataTime})),\r\n    getWeights: (penId, DataTime, MemSections) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.WEIGHING, {PenId: penId, DataTime: DataTime,  MemSections: MemSections})),\r\n    getComments: (penId) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.COMMENTS, {PenId: penId})),\r\n    getBatch: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.BATCHS, {DataTime: DataTime})),\r\n\r\n    setCurrentData: penId => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PENS, penId: penId})),\r\n    setCurrentDataElement: element => dispatch(FirebaseActions.setCurrentData(element)),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DataDisplay_Pens);\r\n//export default DataDisplay_Pens;","import React, { useEffect, Component } from 'react'\r\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, FlatList } from 'react-native'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\nimport { Icon, Input } from 'react-native-elements'\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\n//import DeviceActions from '../../../Stores/Device/Actions'\r\n//import { ConnectionState } from '../../../Stores/Device/Selectors'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs, sortObject, format_Time } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button, Button_Panel, ContentProp, OperationsPanel } from '../../../Components'\r\n\r\nimport { ApplicationStyles, Helpers, Metrics, Images, Colors } from '../../../Theme'\r\n\r\nclass DataDisplay_Pigs extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      currentData: props.currentData,\r\n    }\r\n\r\n    const {CurrentData, WeighingsList, Weighings} = this.setData(props)\r\n    this.state = {\r\n      currentData: CurrentData,\r\n\r\n      WeighingsList: WeighingsList,\r\n      Weighings: Weighings,\r\n    }\r\n  }\r\n\r\n  setData(Props) {\r\n    const localDataStore = Props.firebase.localDataStore;\r\n\r\n    var CurrentData = this.state.currentData;\r\n    var Pigs = sortObject(localDataStore.pigs)\r\n    if (Pigs[CurrentData.TagId]){\r\n      CurrentData.data = Pigs[CurrentData.TagId]\r\n    }\r\n\r\n    var WeighingsList = [];\r\n    var Weighings = [];\r\n    var App = Platform.OS === \"android\" || Platform.OS === \"ios\" ? true: false\r\n    if (localDataStore && localDataStore.weighings) {\r\n      if (localDataStore.weighings[CurrentData.penId]) {\r\n        WeighingsList = localDataStore.weighings[CurrentData.penId];\r\n        for(var i = 0; i < Object.keys(WeighingsList).length; i++) {\r\n          var name = Object.keys(WeighingsList)[i]\r\n          if (!name) continue;\r\n          var object = WeighingsList[name];\r\n          if (!object || !object.time) continue;\r\n          Weighings.push({[name]:object})\r\n        }\r\n        Weighings = Weighings.sort((a, b) => (a.time > b.time) ? 1 : -1)\r\n        if (App) {\r\n          Weighings = Weighings.slice(0,5)\r\n        }\r\n      }\r\n    }\r\n    if (CurrentData.data && !CurrentData.data.datas) CurrentData.data.datas = {}\r\n\r\n    return {CurrentData, WeighingsList, Weighings}\r\n  }\r\n\r\n  getData() {\r\n    if (this.props.firebase && this.props.firebase.localDataStore && this.state.currentData.penId) {\r\n      const localDataStore = this.props.firebase.localDataStore\r\n      if (!localDataStore.pens) localDataStore.pens = {}\r\n      this.props.getPens(localDataStore.pens.update_time)\r\n      this.props.getWeights(this.state.currentData.penId)\r\n      this.props.getBatch(null)\r\n    }\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps){\r\n      this.checkData(this.props);\r\n\r\n      if (this.props.firebase.localDataStore) {\r\n        const localDataStore = this.props.firebase.localDataStore\r\n        if ((JSON.stringify(prevProps.currentData)!==JSON.stringify(this.state.currentData)) ||\r\n            (localDataStore.sections && JSON.stringify(this.state.Sections)!==JSON.stringify(sortObject(localDataStore.sections))) ||\r\n            (localDataStore.weighings && JSON.stringify(this.state.Weighings)!==JSON.stringify(sortObject(localDataStoree.weighings)))\r\n        ) {\r\n          const {CurrentData, WeighingsList, Weighings} = this.setData(this.props)\r\n          this.setState({\r\n            currentData: CurrentData,\r\n\r\n            WeighingsList: WeighingsList,\r\n            Weighings: Weighings,\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n\r\n    const localDataStore = this.props.firebase.localDataStore\r\n    const CurrentData = this.state.currentData\r\n\r\n    if (!CurrentData.data) {\r\n      return(\r\n        <View style={[Helpers.fillRowCenter, Helpers.center, Helpers.logoContainer]}>\r\n          <Image style={Helpers.fullSize} source={Images.Hexa_icon} resizeMode={'contain'} />\r\n        </View>\r\n      )\r\n    } else {\r\n      var pigcount = CurrentData.data.datas.count?CurrentData.data.datas.count:0\r\n      var penWeight = []\r\n      if (this.state.Weighings.length > 0) {\r\n        var count = pigcount?pigcount:1\r\n        penWeight = this.state.Weighings[0][Object.keys(this.state.Weighings[0])].weight / this.state.Weighings[0][Object.keys(this.state.Weighings[0])].count\r\n      }\r\n\r\n      var batch_name = CurrentData.data.datas.batch?CurrentData.data.datas.batch:\"No Batch\"\r\n      var batch = {}\r\n\r\n      //TODO: Cleanup load mem throws..\r\n      var age = \"\";\r\n      var displayWeight = penWeight;\r\n      if (CurrentData.data.datas.batch && localDataStore.batchs && localDataStore.batchs[CurrentData.data.datas.batch]) {\r\n        batch = localDataStore.batchs[CurrentData.data.datas.batch];\r\n        var StartTime = batch.time;\r\n        age = Math.floor(((Date.now()-StartTime)/(1000*60*60*24)));\r\n        CurrentData.data.datas.gcurve = batch.gcurve;\r\n\r\n        var Predict = CurvePredict(localDataStore, CurrentData.penId)\r\n        displayWeight = Predict.Now\r\n      }\r\n\r\n      if (!batch.datas) batch.datas = {};\r\n      if (!batch.datas.devianceMin) batch.datas.devianceMin = 0;\r\n      if (!batch.datas.devianceMax) batch.datas.devianceMax = 0;\r\n\r\n      return(\r\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\r\n          <View style={[Helpers.buttonContainer, Helpers.midWidth, Metrics.bottomMargin, Helpers.rowCenter] }>\r\n            <View style={{padding:6, paddingRight: 15}}>\r\n              <Icon name=\"md-arrow-back\" type='ionicon' size={25} color=\"black\" onPress={() => onPageSwipe(this, localDataStore, CurrentData, false)}/>\r\n            </View>\r\n            <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\r\n              <Button Text={CurrentData.penId} buttonStyle={{backgroundColor: Colors.AgriDarkblue}}\r\n                onPress={() => {} }/>\r\n            </View>\r\n            <View style={{padding:6, paddingLeft: 15}}>\r\n              <Icon name=\"md-arrow-forward\" type='ionicon' size={25} color=\"black\" onPress={() => onPageSwipe(this, localDataStore, CurrentData, true)}/>\r\n            </View>\r\n          </View>\r\n          \r\n          <View style={[Helpers.fullWidth]}>\r\n            <ContentProp texts={[\"Pig count\", \"Batch\", \"Age Days\", \"Weight\", \"Growth Cruve\", \"Alarm Max\", \"Alarm Min\", \"Mixtur\", \"Correction\", \"Portion in kg\"]} onPress={(element) => onDataPress(1, element)} \r\n              datas={[pigcount, batch_name, age, /*penWeight*/ displayWeight, CurrentData.data.datas.gcurve?CurrentData.data.datas.gcurve:\"default\", batch.datas.devianceMin + \" %\", batch.datas.devianceMax + \" %\", \"-\", \"-\", \"-\"]} />\r\n          </View>\r\n\r\n          <View style={{height:20}} />\r\n          <View style={[Helpers.fill, App?Helpers.fullWidth:Helpers.midWidth, App?{}:{height:215}]}>\r\n            <ContentProp texts={[\"Last weighings\"]} datas={[]} />\r\n            <View style={{height:10}} />\r\n            <FlatList\r\n              data={this.state.Weighings}\r\n              renderItem={({item, index}) => {\r\n                if (item === \"__jsogObjectId\") return (<></>);\r\n                var Weight = this.state.WeighingsList[Object.keys(item)[0]]\r\n                return(\r\n                  <ContentProp texts={[format_Time(Weight.time)]}\r\n                              datas={[Weight.weight]} \r\n                  />\r\n                )}\r\n              }\r\n                //Setting the number of column\r\n                numColumns={1}\r\n                keyExtractor={(item, index) => String(index)}\r\n              />\r\n          </View>\r\n\r\n          <View style={{height:30}} />\r\n\r\n          <View style={[Helpers.borderContainer, Helpers.midWidth]}>\r\n            <OperationsPanel />\r\n          </View>\r\n        </View>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nfunction onPageSwipe(Control, localDataStore, CurrentData, dir) {\r\n  const section = localDataStore.pens[CurrentData.penId].section\r\n  const Pens = sortObject(localDataStore.sections[section].pens)\r\n\r\n  if (CurrentData.type === DataRefs.PENS && CurrentData.data && Pens[CurrentData.penId]) {\r\n    var index = Object.keys(Pens).indexOf(CurrentData.penId)\r\n\r\n    switch (dir) {\r\n      case true: //forward\r\n        index = index +1\r\n        break;\r\n      case false: //backward\r\n        index = index -1\r\n        break;\r\n    }\r\n\r\n    if (index < 0) index = Object.keys(Pens).length - 1\r\n    else if (index >= Object.keys(Pens).length) index = 0\r\n\r\n    Control.props.setCurrentData(Object.keys(Pens)[index])\r\n    NavigationService.replace(\"DataDisplay\")\r\n  }\r\n}\r\n\r\nfunction onDataPress(sender, element){\r\n  switch(sender){\r\n    case 1:\r\n      switch(element.index){\r\n        case 0:\r\n          console.log(\"test\")\r\n          break;\r\n      }\r\n      break;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    getPens: (DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PENS, {DataTime: DataTime})),\r\n    getWeights: (penId) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.WEIGHING, {PenId: penId})),\r\n    getBatch: (batchId) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.BATCHS, {BatchId: batchId})),\r\n\r\n    setCurrentData: penId => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PENS, penId: penId})),\r\n    setCurrentDataElement: element => dispatch(FirebaseActions.setCurrentData(element)),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DataDisplay_Pigs);\r\n//export default DataDisplay_Pigs;","import React, { useEffect, Component } from 'react'\r\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, FlatList } from 'react-native'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\nimport { Icon, Input } from 'react-native-elements'\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport DeviceActions from '../../../Stores/Device/Actions'\r\nimport { ConnectionState } from '../../../Stores/Device/Selectors'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs, sortObject, format_Time } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button, Button_Panel, ContentProp, OperationsPanel } from '../../../Components'\r\nimport DataDisplay_Pens from './DataDisplay_Pens'\r\nimport DataDisplay_Pigs from './DataDisplay_Pigs'\r\n\r\nimport { ApplicationStyles, Helpers, Metrics, Images, Colors } from '../../../Theme'\r\n\r\nclass DataDisplay extends Component {\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n      currentData:{}\r\n    }\r\n  }\r\n\r\n  getData() {\r\n    if (this.props.firebase && this.props.firebase.localDataStore) {\r\n      const localDataStore = this.props.firebase.localDataStore\r\n      if (this.props.firebase.currentData && this.props.firebase.currentData.type){\r\n        const CurrentData = this.props.firebase.currentData;\r\n        switch(CurrentData.type){\r\n          case DataRefs.PIGS:\r\n            //this.props.getWeights()\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps){\r\n      this.checkData(this.props);\r\n\r\n      if (this.props.firebase.localDataStore) {\r\n        const localDataStore = this.props.firebase.localDataStore\r\n        if (this.props.firebase.currentData && this.props.firebase.currentData.type &&\r\n            JSON.stringify(this.state.currentData)!==JSON.stringify(this.props.firebase.currentData)) {\r\n          \r\n          const CurrentData = this.props.firebase.currentData;\r\n\r\n          switch(CurrentData.type){\r\n            case DataRefs.PENS:\r\n              if (localDataStore.pens) {\r\n                var Pens = sortObject(localDataStore.pens)\r\n                if (Pens[CurrentData.penId]){\r\n                  if (JSON.stringify(CurrentData.data)!==JSON.stringify(Pens[CurrentData.penId])){\r\n                    CurrentData.data = Pens[CurrentData.penId]\r\n                  }\r\n                  \r\n                  this.props.setCurrentDataElement(CurrentData)\r\n                }\r\n              }\r\n              this.setState({\r\n                currentData:CurrentData\r\n              })\r\n              break;\r\n            case DataRefs.PIGS:\r\n              this.setState({\r\n                currentData:CurrentData\r\n              })\r\n              break;\r\n            default:\r\n              this.setState({\r\n                currentData:CurrentData\r\n              })\r\n              break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n\r\n    const localDataStore = this.props.firebase.localDataStore\r\n    const ErrorMessage = this.props.firebase.viewError\r\n    const CurrentData = this.state.currentData\r\n\r\n    var DataView = (<View></View>);\r\n    switch(CurrentData.type){\r\n      case DataRefs.PENS:\r\n        DataView = (<DataDisplay_Pens currentData={this.state.currentData}/>)\r\n        break;\r\n      case DataRefs.PIGS:\r\n        DataView = PigData_View(this, CurrentData, localDataStore) //(<DataDisplay_Pigs currentData={this.state.currentData}/>)\r\n        break;\r\n    }\r\n\r\n    return(\r\n      <ScrollView style={[Helpers.fullSize, Helpers.fill]}>\r\n        <View\r\n          style={[\r\n            Helpers.mainContainer,\r\n          ]}\r\n        >\r\n          <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\r\n            {ErrorMessage ? (\r\n              <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\r\n            ):(<></>)}\r\n              {DataView}\r\n          </View>\r\n          \r\n          {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n            <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n          }\r\n        </View>\r\n      </ScrollView>\r\n    )\r\n  }\r\n}\r\n\r\nfunction onPageSwipe(Control, localDataStore, CurrentData, dir) {\r\n  const section = localDataStore.pens[CurrentData.penId].section\r\n  const Pens = sortObject(localDataStore.sections[section].pens)\r\n\r\n  if (CurrentData.type === DataRefs.PENS && CurrentData.data && Pens[CurrentData.penId]) {\r\n    var index = Object.keys(Pens).indexOf(CurrentData.penId)\r\n\r\n    switch (dir) {\r\n      case true: //forward\r\n        index = index +1\r\n        break;\r\n      case false: //backward\r\n        index = index -1\r\n        break;\r\n    }\r\n\r\n    if (index < 0) index = Object.keys(Pens).length - 1\r\n    else if (index >= Object.keys(Pens).length) index = 0\r\n\r\n    Control.props.setCurrentData(Object.keys(Pens)[index])\r\n    NavigationService.replace(\"DataDisplay\")\r\n  }\r\n}\r\n\r\nfunction onDataPress(sender, element){\r\n  switch(sender){\r\n    case 1:\r\n      switch(element.index){\r\n        case 0:\r\n          console.log(\"test\")\r\n          break;\r\n      }\r\n      break;\r\n  }\r\n}\r\n\r\nconst PigData_View = (Control, CurrentData, localDataStore) => {\r\n  /*const connectedDevice = useSelector((state) => state.device.connectedDevice)\r\n  const DeviceData = useSelector((state) => state.device.deviceData)\r\n  const connectedState = useSelector((state) => state.device.connectionState)*/\r\n\r\n  var Pigs;\r\n  if (localDataStore && localDataStore.pigs) {\r\n    Pigs = sortObject(localDataStore.pigs)\r\n    if (Pigs[CurrentData.TagId]){\r\n      CurrentData.data = Pigs[CurrentData.TagId]\r\n    }\r\n  }\r\n  \r\n  if (CurrentData.data && !CurrentData.data.datas) CurrentData.data.datas = {}\r\n\r\n  if (!CurrentData.data) {\r\n    return(\r\n      <View style={[Helpers.fillRowCenter, Helpers.center, Helpers.logoContainer]}>\r\n        <Image style={Helpers.fullSize} source={Images.Hexa_icon} resizeMode={'contain'} />\r\n      </View>\r\n    )\r\n  }\r\n  \r\n  /*\r\n    <Row size={1.3}>\r\n          <Col size={1.5} style={{backgroundColor:\"red\"}}>\r\n            <Row size={2.25} style={{backgroundColor:\"blue\"}}>\r\n              <View style={{justifyContent:'center', alignItems: 'center'}}/>\r\n            </Row>\r\n            <Row size={1.50}>\r\n              <Col><Text>Messages</Text></Col>\r\n              <Col><Text>Errors</Text></Col>\r\n            </Row>\r\n          </Col>\r\n          <Col>\r\n            {connectedState === ConnectionState.CONNECTED ? (\r\n              <View style={{...styles.circle, backgroundColor:\"green\", justifyContent:'center', alignItems: 'center'}}>\r\n                <Text>Device is</Text>\r\n                <Text>connected</Text>\r\n              </View>\r\n            ):(\r\n              <View style={{...styles.circle, backgroundColor:\"red\", justifyContent:'center', alignItems: 'center'}}>\r\n                <Text>No Device</Text>\r\n                <Text>connected</Text>\r\n              </View>\r\n            )}\r\n          </Col>\r\n        </Row>\r\n  */\r\n  var App = Platform.OS === \"android\" || Platform.OS === \"ios\" ? true: false\r\n  return(\r\n    <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\r\n      {App ? (\r\n        <View style={[ Helpers.fill, Helpers.row, Helpers.fullWidth]}>\r\n          <View style={[ Helpers.fill, Helpers.column, {backgroundColor:\"red\"}]}>\r\n            <View style={[ Helpers.fill, Helpers.row, Helpers.fullWidth, {backgroundColor: \"blue\"}]}>\r\n              <View style={{justifyContent:'center', alignItems: 'center'}}/>\r\n            </View>\r\n            <View style={[ Helpers.fill, Helpers.row, Helpers.fullWidth,]}>\r\n              <Text>Messages</Text>\r\n              <Text>Errors</Text>\r\n            </View>\r\n          </View>\r\n          <View style={[ Helpers.fill, Helpers.column]}>\r\n            {connectedState === ConnectionState.CONNECTED ? (\r\n              <View style={{...styles.circle, backgroundColor:\"green\", justifyContent:'center', alignItems: 'center'}}>\r\n                <Text>Device is</Text>\r\n                <Text>connected</Text>\r\n              </View>\r\n            ):(\r\n              <View style={{...styles.circle, backgroundColor:\"red\", justifyContent:'center', alignItems: 'center'}}>\r\n                <Text>No Device</Text>\r\n                <Text>connected</Text>\r\n              </View>\r\n            )}\r\n          </View>\r\n        </View>\r\n      ):(<></>)}\r\n      <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\r\n        <Button Text={CurrentData.TagId} buttonStyle={{backgroundColor: Colors.AgriDarkblue}}\r\n          onPress={() => {} }/>\r\n      </View>\r\n      <View style={[Helpers.fullWidth]}>\r\n        <ContentProp ingrid={true} texts={[\"Section\", \"Pen\"]} datas={[CurrentData.data.section, CurrentData.data.pen]} />\r\n        <View style={{height:20}}/>\r\n        <View style={Helpers.midWidth, Helpers.colCenter}>\r\n          <Input\r\n            label={\"Comment:\"}\r\n            multiline={true}\r\n            containerStyle={[{borderWidth:1}]}\r\n            style={[ApplicationStyles.input]}\r\n            onChangeText={text => {\r\n              \r\n            }}\r\n            value={\r\n              \"NONE\"\r\n            }\r\n          />\r\n        </View>\r\n      </View>\r\n    </View>\r\n  )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  circle: {\r\n    width: 125,\r\n    height: 125,\r\n    borderRadius: 125/2,\r\n    marginTop: Metrics.tiny,\r\n    marginLeft: Metrics.tiny,\r\n  },\r\n});\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n    \r\n    getWeights: (penId) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.WEIGHING, {PenId: penId})),\r\n\r\n    setCurrentData: penId => dispatch(FirebaseActions.setCurrentData({type:DataRefs.PENS, penId: penId})),\r\n    setCurrentDataElement: element => dispatch(FirebaseActions.setCurrentData(element)),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DataDisplay);\r\n//export default DataDisplay;","import React, { useEffect, Component } from 'react'\r\nimport { Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, FlatList } from 'react-native'\r\nimport { Input, Icon } from 'react-native-elements'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs, GetCurve_FromBatch, CurvePredict, GetBatchEnd, AccumulateTime, format_Time, GetStats_FromBatch, GetStats_FromPen } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { LineChart } from 'react-native-chart-kit'\r\nimport { Button, TitleElement, CustomListItem, ContentProp } from '../../../Components'\r\nimport Style from './UserPanelStyle'\r\nimport { ApplicationStyles, Helpers, Metrics, Colors } from '../../../Theme'\r\nimport CurveElement, { WeightsToGraphData } from './CurveElement'\r\n\r\nimport { FlatGrid } from 'react-native-super-grid';\r\n\r\nclass DataDisplay extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    var {isClosed, isVirtual, StartDate, EndDate, Animals, TargetWeight, AverageWeight, AverageGrowth, Comments_List, Comments} = this.setData(props)\r\n    this.state = {\r\n      Prediction: false,\r\n\r\n      isClosed: isClosed,\r\n      isVirtual: isVirtual,\r\n\r\n      StartDate: StartDate,\r\n      EndDate: EndDate,\r\n      Animals: Animals,\r\n      TargetWeight: TargetWeight,\r\n      AverageWeight: AverageWeight, \r\n      AverageGrowth:AverageGrowth,\r\n      Comments_List: Comments_List,\r\n      Comments: Comments,\r\n    }\r\n  }\r\n\r\n  setData(Props) {\r\n    const localDataStore = Props.firebase.localDataStore;\r\n    const CurrentData = Props.firebase.currentData;\r\n\r\n    var Batch = localDataStore.batchs[this.props.firebase.currentData.batchId];\r\n    var StartDate, EndDate, TargetWeight, PenCount, Animals, AverageWeight, AverageGrowth, isClosed, isVirtual\r\n    var Data = GetStats_FromBatch(Batch, localDataStore)\r\n    if (Data) {\r\n      StartDate = Data.StartDate\r\n      EndDate = Data.EndDate\r\n      TargetWeight = Data.TargetWeight\r\n      PenCount = Data.PenCount\r\n      Animals = Data.Animals\r\n      AverageWeight = Data.AverageWeight\r\n      AverageGrowth = Data.AverageGrowth\r\n      isClosed = Data.isClosed \r\n      isVirtual = Data.isVirtual\r\n    }\r\n\r\n    var Comments_List = null\r\n    var Comments = [];\r\n    if (Batch && Batch.state && Batch.state === \"Closed\" && Batch.closed && Batch.closed.comments) {\r\n      Comments_List = []\r\n      Object.keys(Batch.pens).reverse().filter(e => (e !== '__jsogObjectId')).forEach(element => {\r\n        var CommentsList = [];\r\n        if (Batch.closed.comments[element]) {\r\n          CommentsList = Batch.closed.comments[element];\r\n          for(var i = 0; i < Object.keys(CommentsList).length; i++) {\r\n            var name = Object.keys(CommentsList)[i]\r\n            if (!name) continue;\r\n            var object = CommentsList[name];\r\n            if (!object || !object.time) continue;\r\n            object.pen = element\r\n            Comments.push({[name]:object})\r\n          }\r\n        }\r\n        Comments_List = Comments_List.concat(CommentsList);\r\n      });\r\n    }\r\n    Comments = Comments.sort((a, b) => (a.time > b.time) ? 1 : -1)\r\n    return { isClosed, isVirtual, StartDate, EndDate, Animals, TargetWeight, AverageWeight, AverageGrowth, Comments_List, Comments }\r\n  }\r\n\r\n  getData() {\r\n    const localDataStore = this.props.firebase.localDataStore;\r\n    const CurrentData = this.props.firebase.currentData;\r\n\r\n    if (CurrentData && CurrentData.batchId && localDataStore.batchs[CurrentData.batchId]){\r\n      const batchData = localDataStore.batchs[CurrentData.batchId]\r\n      \r\n      this.props.getWeights(localDataStore.weighings?localDataStore.weighings.update_time:null, localDataStore.sections)\r\n\r\n      var PenMemTime = null\r\n      if (localDataStore.pens) PenMemTime = localDataStore.pens.update_time\r\n      if (batchData.pens) {\r\n        Object.keys(batchData.pens).filter(e => e !== '__jsogObjectId').forEach(Pen => {\r\n          this.props.getPen(Pen, PenMemTime)\r\n        })\r\n      }\r\n\r\n      var TempGraph = \"\"\r\n      if (CurrentData.curveId) {\r\n        TempGraph = CurrentData.curveId;\r\n      }\r\n      this.props.getCurve(TempGraph)\r\n    }\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps) {\r\n      this.checkData(this.props);\r\n      if (this.props.firebase.localDataStore) {\r\n        var { isClosed, isVirtual, StartDate, EndDate, Animals, TargetWeight, AverageWeight, AverageGrowth, Comments_List, Comments } = this.setData(this.props)\r\n        this.setState({\r\n          Prediction: false,\r\n          isClosed: isClosed,\r\n          isVirtual: isVirtual,\r\n\r\n          StartDate: StartDate,\r\n          EndDate: EndDate,\r\n          Animals: Animals,\r\n          TargetWeight: TargetWeight,\r\n          AverageWeight: AverageWeight, \r\n          AverageGrowth:AverageGrowth,\r\n          Comments_List: Comments_List,\r\n          Comments: Comments,\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.checkData(this.props);\r\n    this.getData();\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n    const ErrorMessage = this.props.firebase.viewError\r\n\r\n    const localDataStore = this.props.firebase.localDataStore\r\n    const CurrentData = this.props.firebase.currentData;\r\n\r\n    var StartDate = this.state.StartDate\r\n\r\n    var Dif_Time = new Date().getTime() - StartDate\r\n    var Days = Dif_Time / (1000 * 3600 * 24);\r\n    Days = Days.toFixed(0) //TODO: closed date...\r\n\r\n    StartDate = new Date(StartDate).getDate() + \"/\" + (new Date(StartDate).getMonth() +1) + \"/\" + new Date(StartDate).getFullYear()\r\n\r\n    var EndDate = this.state.EndDate\r\n    EndDate = new Date(EndDate).getDate() + \"/\" + (new Date(EndDate).getMonth() +1) + \"/\" + new Date(EndDate).getFullYear()\r\n\r\n    var Virtual = String(this.state.isVirtual)\r\n    Virtual = Virtual.charAt(0).toUpperCase() + Virtual.slice(1)\r\n    return(\r\n      <ScrollView style={[Helpers.fullSize, Helpers.fill]}>\r\n      <View\r\n        style={[\r\n          Helpers.mainContainer,\r\n        ]}\r\n      >\r\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fill]}>\r\n          {ErrorMessage ? (\r\n            <Text style={ApplicationStyles.error}>{ErrorMessage}</Text>\r\n          ):(<></>)}\r\n          <TitleElement Text={this.props.firebase.currentData.batchId?this.props.firebase.currentData.batchId:\"-NON-\"}/>\r\n          <View>\r\n            <View style={[Helpers.fullWidth, {justifyContent:'center'}]}>\r\n              <FlatGrid\r\n                itemDimension={120}\r\n                spacing={10}\r\n\r\n                data={[\r\n                  {title: 'Start', data: StartDate},\r\n                  {title: 'End Forecast', data: EndDate},\r\n                  {title: 'Target Weight', data: this.state.TargetWeight},\r\n                  //{title: 'Virtual cal', data: Virtual}\r\n                ]}\r\n                renderItem={({ item }) => (\r\n                  <View style={[Helpers.borderContainer, {textAlign:'center'}]}>\r\n                    <Text>{item.title}</Text>\r\n                    <Text>{item.data}</Text>\r\n                  </View>\r\n                )}\r\n                />\r\n            </View>\r\n            <View style={[Helpers.fullWidth, {justifyContent:'center'}]}>\r\n              <FlatGrid\r\n                itemDimension={120}\r\n                spacing={10}\r\n\r\n                data={[\r\n                  {title: 'Animals', data: this.state.Animals},\r\n                  {title: 'Day', data: Days},\r\n                  {title: 'Avarage weight', data: this.state.AverageWeight},\r\n                  {title: 'Average growth', data: this.state.AverageGrowth}\r\n                ]}\r\n                renderItem={({ item }) => (\r\n                  <View style={[Helpers.borderContainer, {textAlign:'center'}]}>\r\n                    <Text>{item.title}</Text>\r\n                    <Text>{item.data}</Text>\r\n                  </View>\r\n                )}\r\n                />\r\n            </View>\r\n            <Button Text=\"Show Predict\"\r\n                onPress={() => {\r\n                  this.setState({\r\n                    Prediction: !this.state.Prediction\r\n                  })\r\n                } }/>\r\n          </View>\r\n          <View style={[Helpers.fill, Helpers.fullWidth, {minHeight:750}]}>\r\n            <CurveElement Predict={this.state.Prediction} weighings={localDataStore.weighings}/>\r\n          </View>\r\n          {this.state.Comments_List?(\r\n            <View style={[Helpers.fill, Helpers.midWidth, {height:415}]}>\r\n              {/* diff for app / web here ^ */}\r\n              <ContentProp texts={[\"Action log\"]} datas={[]} />\r\n              <View style={{height:10}} />\r\n              <FlatList\r\n                data={this.state.Comments.filter(e => (e !== '__jsogObjectId'))}\r\n                renderItem={({item, index}) => {\r\n                  var Comment = this.state.Comments_List[0][Object.keys(item)[0]]\r\n                  if (!Comment) return null\r\n                  return(\r\n                    <ContentProp texts={[format_Time(Comment.time) + \":\\n\" + Comment.user]}\r\n                                datas={[Comment.pen + \": \" + Comment.action + \":\\n\" + Comment.data]}\r\n                    />\r\n                  )}\r\n                }\r\n                  //Setting the number of column\r\n                  numColumns={1}\r\n                  keyExtractor={(item, index) => String(index)}\r\n                />\r\n            </View>\r\n          ):(<></>)}\r\n        </View>\r\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n        }\r\n      </View>\r\n      </ScrollView>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n    \r\n    getPen: (penId, DataTime) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.PENS, {PenId: penId, DataTime:DataTime})),\r\n    getWeights: (DataTime, MemSections) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.WEIGHING, {DataTime: DataTime, MemSections: MemSections})),\r\n    \r\n    getBatch: (batchId) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.BATCHS, {})),\r\n    getCurve: (curveid) => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.GRAPH, {GraphId: curveid})),\r\n    setCurve: (curve) => dispatch(FirebaseActions.actionStarting(Actions.CREATE, DataRefs.GRAPH, {Graph: curve}))\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DataDisplay);\r\n//export default DataDisplay;","import React from 'react'\r\nimport { createAppContainer } from 'react-navigation'\r\nimport { createStackNavigator } from 'react-navigation-stack'\r\nimport { TouchableOpacity, View, Text } from 'react-native'\r\nimport { Icon } from 'react-native-elements'\r\n\r\nimport NavigationService from '../Services/NavigationService'\r\n\r\nimport UserFrontScreen from '../Containers/Cloud/UserPanel/FrontScreen'\r\nimport UserDashBoardScreen from '../Containers/Cloud/UserPanel/Dashboard'\r\nimport UserPigsScreen from '../Containers/Cloud/UserPanel/Pigs'\r\nimport UserPensScreen from '../Containers/Cloud/UserPanel/Pens'\r\nimport UserBatchsScreen from '../Containers/Cloud/UserPanel/Batchs'\r\nimport UserCurvesScreen from '../Containers/Cloud/UserPanel/GrowthCurves'\r\n\r\nimport UserOperationsScreen from '../Containers/Cloud/UserPanel/Operations'\r\nimport Weighing from '../Containers/Cloud/UserPanel/Weighing'\r\n\r\nimport UserDataEditor from '../Containers/Cloud/UserPanel/DataEditor'\r\nimport UserDataDisplay from '../Containers/Cloud/UserPanel/DataDisplay'\r\nimport UserDataPlotter from '../Containers/Cloud/UserPanel/DataPlotter'\r\n\r\nimport { ApplicationStyles } from '../Theme'\r\n\r\n/**\r\n * The root screen contains the application's navigation.\r\n *\r\n * @see https://reactnavigation.org/docs/en/hello-react-navigation.html#creating-a-stack-navigator\r\n */\r\nconst StackNavigator = createStackNavigator(\r\n  {\r\n    // Create the application routes here (the key is the route name, the value is the target screen)\r\n    // See https://reactnavigation.org/docs/en/stack-navigator.html#routeconfigs\r\n    \r\n    UserFront: {\r\n      screen: UserFrontScreen,\r\n      navigationOptions: () => ({\r\n        title: 'User Data',\r\n        headerLeft: (props) => (\r\n          <View style={{padding:6, paddingLeft: 15}}>\r\n            <Icon type='ionicon' name=\"md-arrow-back\" size={25} color=\"black\" onPress={() => {\r\n              if (props.label === \"System Board\") {\r\n                NavigationService.nacigationPop()\r\n              }\r\n              else NavigationService.navigate('MainStack')\r\n            }}/>\r\n          </View>\r\n        ),\r\n      }),\r\n      path: 'user_front',\r\n    },\r\n\r\n    UserDashBoard: {\r\n      screen: UserDashBoardScreen,\r\n      navigationOptions: () => ({\r\n        title: 'Dash Board',\r\n      }),\r\n      path: 'user_dashboard',\r\n    },\r\n\r\n    UserPigs: {\r\n      screen: UserPigsScreen,\r\n      navigationOptions: () => ({\r\n        title: 'Pigs',\r\n      }),\r\n      path: 'user_pigs',\r\n    },\r\n\r\n    UserPens: {\r\n      screen: UserPensScreen,\r\n      navigationOptions: () => ({\r\n        title: 'Pens',\r\n      }),\r\n      path: 'user_pens',\r\n    },\r\n\r\n    UserBatchs: {\r\n      screen: UserBatchsScreen,\r\n      navigationOptions: () => ({\r\n        title: 'Batchs',\r\n      }),\r\n      path: 'user_batchs',\r\n    },\r\n\r\n    UserCurves: {\r\n      screen: UserCurvesScreen,\r\n      navigationOptions: () => ({\r\n        title: 'Curves',\r\n      }),\r\n      path: 'user_curves',\r\n    },\r\n\r\n    /**************** Operations */\r\n    UserOperations: {\r\n      screen: UserOperationsScreen,\r\n      navigationOptions: () => ({\r\n        title: 'Operations',\r\n      }),\r\n      path: 'user_operations',\r\n    },\r\n\r\n    WeighingOperations: {\r\n      screen: Weighing,\r\n      navigationOptions: () => ({\r\n        title: 'Operations',\r\n      }),\r\n      path: 'user_operations',\r\n    },\r\n\r\n    /**************** Data Displays */\r\n    DataEditor: {\r\n      screen: UserDataEditor,\r\n      navigationOptions: () => ({\r\n        title: 'User Data',\r\n      }),\r\n      path: 'user_dataedtior',\r\n    },\r\n\r\n    DataDisplay: {\r\n      screen: UserDataDisplay,\r\n      navigationOptions: () => ({\r\n        title: 'User Data',\r\n      }),\r\n      path: 'user_datadisplay',\r\n    },\r\n\r\n    DataPlotter: {\r\n      screen: UserDataPlotter,\r\n      navigationOptions: () => ({\r\n        title: 'Batch Data',\r\n      }),\r\n      path: 'user_dataplotter',\r\n    },\r\n  },\r\n  {\r\n    initialRouteName: 'UserFront', \r\n\r\n    // See https://reactnavigation.org/docs/en/stack-navigator.html#stacknavigatorconfig\r\n    headerMode: 'float',\r\n    defaultNavigationOptions:{\r\n      headerTitleAlign: 'center',\r\n      headerTitleStyle:{...ApplicationStyles.navigationHeader},\r\n      headerRight: () => (<View style={{padding:6}}></View>),\r\n    },\r\n  }\r\n)\r\n\r\nexport default StackNavigator\r\n","import { StyleSheet } from 'react-native'\r\nimport { Helpers, Metrics, Fonts, Colors } from '../../../Theme'\r\n\r\nexport default StyleSheet.create({\r\n\r\n})\r\n","import React, { useEffect, Component } from 'react'\r\nimport { Platform, Text, View, ActivityIndicator } from 'react-native'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button, Button_Panel } from '../../../Components'\r\nimport Style from './AdminPanelStyle'\r\nimport { ApplicationStyles, Helpers, Metrics, Images } from '../../../Theme'\r\n\r\nclass FrontScreen extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      ISLOADPAGE: true,\r\n    }\r\n  }\r\n\r\n  getData(){\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.props.clearDataMem()\r\n    this.checkData(this.props)\r\n    this.getData()\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps){\r\n      this.checkData(this.props);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n    const firebaseUser = this.props.firebase.firebaseUser\r\n    \r\n    return(\r\n      <View\r\n      style={[\r\n        Helpers.mainContainer,\r\n      ]}\r\n      >\r\n        <View style={[Helpers.contentContainer, Helpers.fullSize, Helpers.fillColMain]}>\r\n          {firebaseUser?(\r\n          <View style={ Helpers.textContainer }>\r\n            <Text style={ApplicationStyles.text}>Welcome: {firebaseUser.displayName ? firebaseUser.displayName : firebaseUser.email}</Text>\r\n          </View>):(<></>)}\r\n\r\n          <Button_Panel \r\n            Texts={[\"User Board\", \"Systems\"]}\r\n            Images={[Images.DashBoard, Images.System,]}\r\n            onPress={(ele) => {\r\n              switch(ele.text){\r\n                case \"User Board\":\r\n                  NavigationService.navigate(\"UserBoard\")\r\n                  break;\r\n                case \"Systems\":\r\n                  NavigationService.navigate(\"SystemBoard\")\r\n                  break;\r\n              }\r\n              ele.text\r\n            }}\r\n          />\r\n          \r\n          <View style={[Helpers.buttonContainer, Helpers.midWidth] }>\r\n            <Button Text=\"LogOut\"\r\n              onPress={() => {\r\n                this.props.logOut()\r\n              }}/>\r\n          </View>\r\n        </View>\r\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n        }\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    clearDataMem: () => dispatch(FirebaseActions.actionStarting(Actions.CLEAR, DataRefs.USERSDATA)),\r\n    logOut: () => dispatch(FirebaseActions.actionStarting(Actions.SIGN, DataRefs.USERSDATA)),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FrontScreen);\r\n//export default FrontScreen;\r\n","import React, { useEffect, useState, Component } from 'react'\r\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, SafeAreaView, FlatList } from 'react-native'\r\nimport { ListItem, Input } from 'react-native-elements'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs, sortObject } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button, OperationsPanel, CustomListItem, ContentProp } from '../../../Components'\r\nimport Style from '../../../Containers/Cloud/CloudScreenStyle'\r\nimport { ApplicationStyles, Helpers, Metrics } from '../../../Theme'\r\n\r\nimport { FlatGrid, SectionGrid } from 'react-native-super-grid';\r\n\r\nclass UserListBoard extends Component {\r\n  constructor(props){\r\n    super(props);\r\n\r\n    const {UserList} = this.setData(props)\r\n    this.state = {\r\n      UserList: UserList,\r\n      User: \"\"\r\n    }\r\n  }\r\n\r\n  getData() {\r\n    this.props.getUsers()\r\n  }\r\n\r\n  setData(Props) {\r\n    const localDataStore = Props.firebase.localDataStore\r\n\r\n    var UserList = null\r\n    if (localDataStore && localDataStore.users) {\r\n      UserList = sortObject(localDataStore.users)\r\n    }\r\n    \r\n    return {UserList}\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.checkData(this.props)\r\n    this.getData()\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps){\r\n      this.checkData(this.props);\r\n\r\n      if (this.props.firebase) {\r\n        if (this.props.firebase.localDataStore) {\r\n          if (this.props.firebase.localDataStore.users && JSON.stringify(this.state.UserList)!==JSON.stringify(sortObject(this.props.firebase.localDataStore.users))) {\r\n            const {UserList} = this.setData(this.props)\r\n            this.setState({\r\n              UserList: UserList,\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n\r\n    return(\r\n      <View\r\n        style={[\r\n          Helpers.mainContainer,\r\n        ]}\r\n      >\r\n        <View style={[Helpers.contentContainer, Helpers.fullWidth, Helpers.fill]}>\r\n          <View style={[Helpers.fill, Helpers.buttonContainer, Helpers.fullWidth, Metrics.bottomMargin, Helpers.column]}>\r\n            {this.state.UserList ? (\r\n              <View style={[Helpers.fill, Helpers.borderContainer, Metrics.smallHorizontalPadding, Metrics.smallVerticalPadding, {maxWidth:800, marginTop:10}]}>\r\n                <SafeAreaView style={styles.container}>\r\n                  <FlatList\r\n                    data={Object.keys(this.state.UserList).filter(e => e !== '__jsogObjectId')}\r\n                    renderItem={({item, index})=>{\r\n                      var User = this.state.UserList[item];\r\n                      return(\r\n                        <View style={[Helpers.fill, Helpers.rowCenter, Helpers.fullWidth, {height:35}]}>\r\n                          <CustomListItem Title={User.name} itemStyle={[{minWidth: 190, height:35,}]} onPress={() => {\r\n                              //this.props.setData(item, Section, Pen)\r\n                              //NavigationService.navigate(\"DataDisplay\")\r\n                            }}/>\r\n\r\n                          <CustomListItem itemStyle={[{width:70, height:35, justifyContent:\"center\"}]} Title={\"\"} onPress={() => {\r\n                              this.setState({\r\n                                User: User.name\r\n                              })\r\n                            }}/>\r\n\r\n                          <CustomListItem itemStyle={[{width:90, height:35}]} Title={User.state} onPress={() => {\r\n                              this.setState({\r\n                                User: User.name\r\n                              })\r\n                            }}/>\r\n                        </View>\r\n                      )\r\n                    }}\r\n                    keyExtractor={(item, index) => index.toString()}\r\n                  />\r\n                </SafeAreaView>\r\n              </View>\r\n            ):(<></>)} \r\n            <Input\r\n              label={\"User-tag:\"}\r\n              containerStyle={[{borderWidth:1, marginTop:10}]}\r\n              style={[ApplicationStyles.input, ]}\r\n              onChangeText={text => {\r\n                this.setState({\r\n                  User: text\r\n                })\r\n              }}\r\n              value={\r\n                this.state.User\r\n              }\r\n            />\r\n          </View>\r\n        </View>\r\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n        }\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  circle: {\r\n    width: 125,\r\n    height: 125,\r\n    borderRadius: 125/2,\r\n    marginTop: Metrics.tiny,\r\n    marginLeft: Metrics.tiny,\r\n  },\r\n});\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    getUsers: () => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.USERS, {UserId:\"\"})),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserListBoard);","import React, { useEffect, useState, Component } from 'react'\r\nimport { Platform, Text, View, ActivityIndicator, Image, StyleSheet, ScrollView, SafeAreaView, FlatList } from 'react-native'\r\nimport { ListItem, Input } from 'react-native-elements'\r\nimport { useDispatch, useSelector, connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport NavigationService from '../../../Services/NavigationService'\r\n\r\nimport FirebaseActions from '../../../Stores/Firebase/Actions'\r\nimport { Actions, DataRefs, sortObject } from '../../../Stores/Firebase/Selectors'\r\n\r\nimport { Button, OperationsPanel, CustomListItem, ContentProp } from '../../../Components'\r\nimport Style from '../../../Containers/Cloud/CloudScreenStyle'\r\nimport { ApplicationStyles, Helpers, Metrics } from '../../../Theme'\r\n\r\nimport { FlatGrid, SectionGrid } from 'react-native-super-grid';\r\n\r\nclass SystemListBoard extends Component {\r\n  constructor(props){\r\n    super(props);\r\n\r\n    const {FarmList} = this.setData(props)\r\n    this.state = {\r\n      FarmList: FarmList,\r\n      Farm: {name: \"\"}\r\n    }\r\n  }\r\n\r\n  getData() {\r\n    this.props.getFarms()\r\n  }\r\n\r\n  setData(Props) {\r\n    const localDataStore = Props.firebase.localDataStore\r\n\r\n    var FarmList = null\r\n    if (localDataStore && localDataStore.farms) {\r\n      FarmList = sortObject(localDataStore.farms)\r\n    }\r\n    return {FarmList}\r\n  }\r\n\r\n  checkData(props) {\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setViewLoading(false)\r\n    this.props.setViewError(null)\r\n    this.checkData(this.props)\r\n    this.getData()\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props !== prevProps){\r\n      this.checkData(this.props);\r\n\r\n      if (this.props.firebase) {\r\n        if (this.props.firebase.localDataStore) {\r\n          if (this.props.firebase.localDataStore.farms && JSON.stringify(this.state.FarmList)!==JSON.stringify(sortObject(this.props.firebase.localDataStore.farms))) {\r\n            const {FarmList} = this.setData(this.props)\r\n            this.setState({\r\n              FarmList: FarmList,\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const IsLoading = this.props.firebase.firebaseIsLoading\r\n\r\n    return(\r\n      <View\r\n        style={[\r\n          Helpers.mainContainer,\r\n        ]}\r\n      >\r\n        <View style={[Helpers.contentContainer, Helpers.fullWidth, Helpers.fill]}>\r\n          <View style={[Helpers.fill, Helpers.buttonContainer, Helpers.fullWidth, Metrics.bottomMargin, Helpers.column]}>\r\n            {this.state.FarmList ? (\r\n              <View style={[Helpers.fill, Helpers.borderContainer, Metrics.smallHorizontalPadding, Metrics.smallVerticalPadding, {maxWidth:800, marginTop:10}]}>\r\n                <SafeAreaView style={styles.container}>\r\n                  <FlatList\r\n                    data={Object.keys(this.state.FarmList).filter(e => e !== '__jsogObjectId')}\r\n                    renderItem={({item, index})=>{\r\n                      var Farm = this.state.FarmList[item];\r\n                      Farm.id = item\r\n                      return(\r\n                        <View style={[Helpers.fill, Helpers.rowCenter, Helpers.fullWidth, {height:35}]}>\r\n                          <CustomListItem Title={Farm.name} itemStyle={[{minWidth: 100, height:35,}]} onPress={() => {\r\n                              //this.props.setData(item, Section, Pen)\r\n                              //NavigationService.navigate(\"DataDisplay\")\r\n                            }}/>\r\n\r\n                          <CustomListItem itemStyle={[{minWidth:150, height:35, justifyContent:\"center\"}]} Title={Farm.manager} onPress={() => {\r\n                              this.setState({\r\n                                Farm: Farm\r\n                              })\r\n                            }}/>\r\n\r\n                          <CustomListItem itemStyle={[{minWidth:150, height:35}]} Title={Farm.email} onPress={() => {\r\n                              this.setState({\r\n                                Farm: Farm\r\n                              })\r\n                            }}/>\r\n                        </View>\r\n                      )\r\n                    }}\r\n                    keyExtractor={(item, index) => index.toString()}\r\n                  />\r\n                </SafeAreaView>\r\n              </View>\r\n            ):(<></>)} \r\n            <View style={[Helpers.rowCenter, Helpers.fullWidth, {height:120}]}>\r\n              <Input\r\n                label={\"Farm-tag:\"}\r\n                containerStyle={[Helpers.halvWidth,{borderWidth:1, marginTop:10}]}\r\n                style={[ApplicationStyles.input, ]}\r\n                editable={false}\r\n                onChangeText={text => {\r\n                  var Farm = this.state.Farm;\r\n                  Farm.name = text;\r\n                  this.setState({\r\n                    Farm: Farm\r\n                  })\r\n                }}\r\n                value={\r\n                  this.state.Farm.name\r\n                }\r\n              />\r\n              <Button Text=\"Consys\"\r\n                boxStyle={[{marginLeft:10}]}\r\n                onPress={() => {\r\n                  //this.props.logOut()\r\n                }}/>\r\n              <Button Text=\"Farm Panel\"\r\n                boxStyle={[{marginLeft:10}]}\r\n                onPress={() => {\r\n                  if (this.state.Farm.id !== \"\") {\r\n                    this.props.clearDataMem()\r\n                    this.props.setUserFarm(this.state.Farm.id)\r\n                    NavigationService.navigate(\"UserPanel\")\r\n                  }\r\n                }}/>\r\n            </View>\r\n          </View>\r\n        </View>\r\n        {(IsLoading || this.props.firebase.viewIsLoading) &&\r\n          <ActivityIndicator style={Helpers.loadingContainer} size='large' />\r\n        }\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  circle: {\r\n    width: 125,\r\n    height: 125,\r\n    borderRadius: 125/2,\r\n    marginTop: Metrics.tiny,\r\n    marginLeft: Metrics.tiny,\r\n  },\r\n});\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state\r\n  return { firebase }\r\n};\r\n\r\nconst mapDispatchToProps  = (dispatch) => {\r\n  return {\r\n    setFirebaseError: error => dispatch(FirebaseActions.setFirebaseError(error)),\r\n    setViewLoading: state => dispatch(FirebaseActions.viewIsLoading(state)),\r\n    setViewError: error => dispatch(FirebaseActions.setViewError(error)),\r\n\r\n    clearDataMem: () => dispatch(FirebaseActions.actionStarting(Actions.CLEAR, DataRefs.USERSDATA)),\r\n    getFarms: () => dispatch(FirebaseActions.actionStarting(Actions.FETCH, DataRefs.FARMS, {FarmId: \"\"})),\r\n    setUserFarm: (FarmId) => dispatch(FirebaseActions.actionStarting(Actions.UPDATE, DataRefs.USERS, {farms:{[FarmId]: true}})),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SystemListBoard);","import React from 'react'\r\nimport { createAppContainer } from 'react-navigation'\r\nimport { createStackNavigator } from 'react-navigation-stack'\r\nimport { TouchableOpacity, View, Text } from 'react-native'\r\nimport { Icon } from 'react-native-elements'\r\n\r\nimport NavigationService from '../Services/NavigationService'\r\n\r\nimport AdminFrontScreen from '../Containers/Cloud/AdminPanel/FrontScreen'\r\n\r\nimport AdminUserBoard from '../Containers/Cloud/AdminPanel/UserBoard'\r\nimport AdminSystemBoard from '../Containers/Cloud/AdminPanel/SystemBoard'\r\n\r\nimport UserPanelNavigation from '../Navigators/UserPanelNavigator'\r\n\r\nimport { ApplicationStyles } from '../Theme'\r\n\r\n/**\r\n * The root screen contains the application's navigation.\r\n *\r\n * @see https://reactnavigation.org/docs/en/hello-react-navigation.html#creating-a-stack-navigator\r\n */\r\nconst StackNavigator = createStackNavigator(\r\n  {\r\n    // Create the application routes here (the key is the route name, the value is the target screen)\r\n    // See https://reactnavigation.org/docs/en/stack-navigator.html#routeconfigs\r\n    \r\n    AdminFront: {\r\n      screen: AdminFrontScreen,\r\n      navigationOptions: () => ({\r\n        title: 'Admin Panel',\r\n        headerLeft: () => (\r\n          <View style={{padding:6, paddingLeft: 15}}>\r\n            <Icon type='ionicon' name=\"md-arrow-back\" size={25} color=\"black\" onPress={() => NavigationService.navigate('MainStack')}/>\r\n          </View>\r\n        ),\r\n      }),\r\n      path: 'admin_front',\r\n    },\r\n\r\n    UserBoard: {\r\n      screen: AdminUserBoard,\r\n      navigationOptions: () => ({\r\n        title: 'User Board',\r\n      }),\r\n      path: 'admin_user_board',\r\n    },\r\n    SystemBoard: {\r\n      screen: AdminSystemBoard,\r\n      navigationOptions: () => ({\r\n        title: 'System Board',\r\n      }),\r\n      path: 'admin_system_board',\r\n    },\r\n\r\n    UserPanel: {\r\n      screen: UserPanelNavigation,\r\n      navigationOptions: () => ({\r\n        title: 'Admin Panel',\r\n        headerLeft: () => (\r\n          <View style={{padding:6, paddingLeft: 15}}>\r\n            <Icon type='ionicon' name=\"md-arrow-back\" size={25} color=\"black\" onPress={() => NavigationService.navigate('SystemBoard')}/>\r\n          </View>\r\n        ),\r\n      }),\r\n      path: 'admin_front',\r\n    },\r\n  },\r\n  {\r\n    initialRouteName: 'AdminFront', \r\n\r\n    // See https://reactnavigation.org/docs/en/stack-navigator.html#stacknavigatorconfig\r\n    headerMode: 'float',\r\n    defaultNavigationOptions:{\r\n      headerTitleAlign: 'center',\r\n      headerTitleStyle:{...ApplicationStyles.navigationHeader},\r\n      headerRight: () => (<View style={{padding:6}}></View>),\r\n    },\r\n  }\r\n)\r\n\r\nexport default StackNavigator\r\n","import React from 'react'\r\nimport { createAppContainer } from 'react-navigation'\r\nimport { createStackNavigator } from 'react-navigation-stack'\r\nimport { TouchableOpacity, Icon, View, Text } from 'react-native'\r\n\r\nimport SplashScreen from '../Containers/SplashScreen/SplashScreen'\r\nimport DeepLinkingScreen from '../Containers/DeepLinking/DeepLinkingScreen'\r\n\r\nimport FrontNavigation from '../Navigators/FrontNavigator'\r\nimport AuthNavigation from '../Navigators/AuthNavigator'\r\n\r\nimport UserPanelNavigation from '../Navigators/UserPanelNavigator'\r\nimport AdminPanelNavigator from '../Navigators/AdminPanelNavigator'\r\nimport { ApplicationStyles } from '../Theme'\r\n\r\n/**\r\n * The root screen contains the application's navigation.\r\n *\r\n * @see https://reactnavigation.org/docs/en/hello-react-navigation.html#creating-a-stack-navigator\r\n */\r\nconst StackNavigator = createStackNavigator(\r\n  {\r\n    // Create the application routes here (the key is the route name, the value is the target screen)\r\n    // See https://reactnavigation.org/docs/en/stack-navigator.html#routeconfigs\r\n    SplashScreen: {\r\n      screen: SplashScreen,\r\n      navigationOptions: () => ({\r\n        headerShown: false,\r\n      }),\r\n    },\r\n\r\n    MainStack: {\r\n      screen: FrontNavigation, // Called By StartupSaga.js\r\n      path: 'Front',\r\n    },\r\n    \r\n    AuthStack: AuthNavigation, // All user pages\r\n\r\n    UserPanel: UserPanelNavigation, // 'Free' Users Pages... \r\n\r\n    AdminPanel: AdminPanelNavigator, // Admin Pages\r\n\r\n    DeepLinkingScreen: {\r\n      screen: DeepLinkingScreen,\r\n      path: 'deeplink',\r\n    },\r\n  },\r\n  {\r\n    // By default the application will show the splash screen\r\n    initialRouteName: 'SplashScreen',\r\n    // See https://reactnavigation.org/docs/en/stack-navigator.html#stacknavigatorconfig\r\n    headerMode: 'none',\r\n    defaultNavigationOptions:{\r\n      headerTitleAlign: 'center',\r\n      headerRight: () => (<View style={{padding:6}}></View>),\r\n    },\r\n  }\r\n)\r\n\r\nexport default createAppContainer(StackNavigator)\r\n","import React, { useEffect } from 'react'\r\nimport { View } from 'react-native'\r\nimport { useDispatch } from 'react-redux'\r\n\r\nimport NavigationService from '../../Services/NavigationService'\r\nimport AppNavigator from '../../Navigators/AppNavigator'\r\n\r\nimport StartupActions from '../../Stores/Startup/Actions'\r\nimport { Helpers } from '../../Theme'\r\n\r\nconst RootScreen = () => {\r\n  // Deep linking prefix\r\n  const prefix = 'agrisysapp://';\r\n  \r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    dispatch(StartupActions.startup())\r\n  }, [])\r\n\r\n  return (\r\n    <View style={Helpers.fill}>\r\n      <AppNavigator\r\n        // Initialize the NavigationService (see https://reactnavigation.org/docs/en/navigating-without-navigation-prop.html)\r\n        ref={(navigatorRef) => {\r\n          NavigationService.setTopLevelNavigator(navigatorRef)\r\n        }}\r\n        uriPrefix={prefix}\r\n      />\r\n    </View>\r\n  )\r\n}\r\n\r\nexport default RootScreen\r\n","import { combineReducers } from 'redux'\r\nimport configureStore from './CreateStore'\r\nimport rootSaga from '../Sagas'\r\n\r\nimport { reducer as ExampleReducer } from './Example/Reducers'\r\nimport { reducer as DeviceReducer } from './Device/Reducers'\r\nimport { reducer as FirebaseReducer } from './Firebase/Reducers'\r\n\r\nexport default () => {\r\n  const rootReducer = combineReducers({\r\n    /**\r\n     * Register your reducers here.\r\n     * @see https://redux.js.org/api-reference/combinereducers\r\n     */\r\n    example: ExampleReducer,\r\n    device: DeviceReducer,\r\n    firebase: FirebaseReducer,\r\n  })\r\n\r\n  return configureStore(rootReducer, rootSaga)\r\n}\r\n","import React from 'react'\nimport { Provider } from 'react-redux'\nimport { PersistGate } from 'redux-persist/lib/integration/react'\n\nimport createStore from './Src/Stores'\nimport RootScreen from './Src/Containers/Root/RootScreen'\n\nconst { store, persistor } = createStore()\n\nconst App = () => (\n  <Provider store={store}>\n    {/**\n     * PersistGate delays the rendering of the app's UI until the persisted state has been retrieved\n     * and saved to redux.\n     * The `loading` prop can be `null` or any react instance to show during loading (e.g. a splash screen),\n     * for example `loading={<SplashScreen />}`.\n     * @see https://github.com/rt2zz/redux-persist/blob/master/docs/PersistGate.md\n     */}\n    <PersistGate loading={null} persistor={persistor}>\n      <RootScreen />\n    </PersistGate>\n  </Provider>\n);\n\nexport default App\n","module.exports = __webpack_public_path__ + \"static/media/Home.1fff8434.png\";","module.exports = __webpack_public_path__ + \"static/media/Dashboard.26766c7a.png\";","module.exports = __webpack_public_path__ + \"static/media/System.7e4af00c.png\";","module.exports = __webpack_public_path__ + \"static/media/Feed-Curves.da739887.png\";","module.exports = __webpack_public_path__ + \"static/media/Growth-curve.7f9a7fea.png\";","module.exports = __webpack_public_path__ + \"static/media/User.d73be9fd.png\";","module.exports = __webpack_public_path__ + \"static/media/Sow.beff0aff.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABRCAYAAACuepoLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAq9JREFUeNrsnT1Lw1AUhk9FRFEhDhV0qgouLlrcjYOLi3XpasEfYjo62X/Quorg5iS0P0D8GBzVOAkWP6CVigg1197E0Naa3ER7b/K+cLig3tP4eJJz8g5XIig0JRS8Zr3Pn1+JUgE0JYgjK1JRqEz2y9DE1IJwgrdalRr1BxoZm6Th8aTvfVwvVqxacaE8zLXtQ+EEN+cHdH12QHPpLM0uZX3tbdSrdHmyS7VH0wY6w1caQNvwp5GxJC2v57+q2pJmRc7+HmAKaHBolGbTTkVvAGYIFdoBucfPp7p1rH8efwr280iJiu3ytUUr9iSY5+yZrqIqTAayzB+sIgOqHtJgq7vGD1IRpsaHUY3PTptWmCJjC5+/Ao8/7hlONZgZ/ow0OQylqkIGubv5Cl/3ATI4zFQUX+T7BRMCTMCM5mumqhf+fH8lvLdRqzqraJ7aU++pscznuyBvPk3XjEh/lKcpWZSVr8x+mMNufby/2p6m+rc58xRFZZvD0/O6b3PY/Zg5Pd5BA0I3B0yMRlsU3Ms0ALOlXAh5dwCzpZIVdwEh5uP4x+gGk1lwlYAQjDjCRAMCTMAETAgwARMwoZ5zphJiNpqonri73lrF8thu/U+C0x5Dpz0v2fWYKlcmGhC6OQSYMo1GMjnthkSsfr2WRFsD0lFfnlh5rswSyeO0y5BHyKiO4mgURh7POdCA0M0BEzAhwARMwIQAEzABEzAhwARMwIQ6FRen3fgPmHDaxVh5rswSwWnvlsOX4LQHzIEGhG4OmIAJASZgAiYEmIAJmPGEafJVBxZHi21sPCvH30Fv8W7uqMj3F/1uZCe6PtP3vxvQYg7TcO33dLe6LTh2ACk7Gpe5RxkeFcELKYd0m/UrT4q+zxMtBODgHOLcjHnc8oLyrMQvUDWKr3xX46cAAwCxt3YCfnN46AAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/Area_Colour.f4a4e098.png\";","module.exports = __webpack_public_path__ + \"static/media/AutoPig.ec16c410.png\";","module.exports = __webpack_public_path__ + \"static/media/Feed-Components.224ca1b3.png\";","module.exports = __webpack_public_path__ + \"static/media/Hexagon-globe.fce26805.png\";","module.exports = __webpack_public_path__ + \"static/media/Hexa-icon.5129d536.png\";","module.exports = __webpack_public_path__ + \"static/media/Logo.9b051259.png\";","module.exports = __webpack_public_path__ + \"static/media/TOM.c88886f3.png\";"],"sourceRoot":""}