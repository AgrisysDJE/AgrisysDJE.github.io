(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{359:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(28),s=a(299),o=a(38),c=a(121),l=a(196),u=a(235),f=a.n(u),p=a(300),h=a.n(p),d=Object(l.a)((function(e,t){return f.a.encode(e)}),(function(e,t){return f.a.decode(e)})),g={key:"root",storage:h.a,transforms:[d],blacklist:[]},m=a(22),b=a.n(m),y=a(39),v=a(87),E=Object(v.createActions)({startup:null}),S=E.Types,D=E.Creators,w=S,P=D,O=Object(v.createActions)({fetchUser:null,fetchUserLoading:null,fetchUserSuccess:["user"],fetchUserFailure:["errorMessage"]}),C=O.Types,k=O.Creators,T=C,j=k,I=a(6),A=a.n(I);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R,F,N=Object(v.createActions)({firebaseStartup:null,firebaseIsLoading:["loadingstate"],setFirebaseError:["errorMessage"],setViewError:["errorMessage"],viewIsLoading:["loadingstate"],setCurrentData:["data"],actionStarting:["action","ref","params"],fetchStarting:["action","ref","params"],dataFetchSuccess:["params"],fetchSuccess:["data"],fetchFailure:["errorMessage"]}),M=N.Types,W=N.Creators,U=L({},M),V=L({},W),B=a(50);var _={navigate:function(e,t){if(F===e)return null;F=e,R.dispatch(B.NavigationActions.navigate({routeName:e,params:t}))},replace:function(e,t){if(F===e)return null;F=e,R.dispatch(B.StackActions.replace({routeName:e,params:t}))},navigateAndReset:function(e,t){if(F===e)return null;F=e,R.dispatch(B.StackActions.reset({index:0,key:null,actions:[B.NavigationActions.navigate({routeName:e,params:t})]}))},setTopLevelNavigator:function(e){R=e},nacigationPop:function(){R.dispatch(B.NavigationActions.back())}},H=b.a.mark(G);function G(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.f)(V.firebaseStartup());case 2:_.navigateAndReset("MainStack");case 3:case"end":return e.stop()}}),H)}var z=a(320),J=a.n(z),q=a(643),Y=a(640),X=a(641),Q=Object(q.a)(3,(function(e,t,a){var n=Object(Y.a)(Number);return n(e)&&n(t)&&n(a)&&Object(X.a)(a,e)&&Object(X.a)(t,a)}))(200,299),Z=J.a.create({baseURL:"https://jsonplaceholder.typicode.com/users/",headers:{Accept:"application/json","Content-Type":"application/json"},timeout:3e3});var K=function(){if(console.log("user fetch test"),Math.random()>.5)return new Promise((function(e,t){console.log("error"),e(null)}));var e=Math.floor(Math.random()/.1)+1;return Z.get(e.toString()).then((function(e){return Q(e.status)?e.data:null}))},$=b.a.mark(ee);function ee(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.f)(j.fetchUserLoading());case 2:return t.next=4,Object(y.c)(K);case 4:if(!(e=t.sent)){t.next=10;break}return t.next=8,Object(y.f)(j.fetchUserSuccess(e));case 8:t.next=12;break;case 10:return t.next=12,Object(y.f)(j.fetchUserFailure("There was an error while fetching user informations."));case 12:case"end":return t.stop()}}),$)}var te=a(11),ae=a(149),ne="starter",re="free",ie="owner",se="admin",oe="Closed",ce={FIREBASEUSER:"firebaseuser",USERSDATA:"usersdata",USERS:"users",FARMS:"farms",SECTIONS:"farms_data/$farmid/sections",PENS:"farms_data/$farmid/pens",PIGS:"farms_data/$farmid/pigs",BATCHS:"farms_data/$farmid/batchs",WEIGHING:"farms_data/$farmid/pens/$penid/weighings/",GRAPH:"farms_data/$farmid/Graph/$graphid/",COMMENTS:"farms_data/$farmid/datas/comments/",FARMDATAS:"farms_data/$farmid/datas/",SHARES:"shareData"},le={SIGN:"sign",FETCH:"fetch",CREATE:"create",UPDATE:"update",MOVE:"move",DELETE:"delete",CLEAR:"clear",ADD:"add"},ue="Add pig",fe="Move pig",pe="Lost pig",he="Sold pig",de="Pen Note";function ge(e){return e<10&&(e="0"+e),e}function me(e){var t=new Date(parseInt(e));return ge(t.getDate())+"/"+ge(t.getMonth()+1)+"/"+t.getFullYear()+" "+ge(t.getHours())+":"+ge(t.getMinutes())+":"+ge(t.getSeconds())}var be,ye=/[^a-zA-Z]/g,ve=/[^0-9]/g;function Ee(e,t){var a=e.replace(ye,""),n=t.replace(ye,"");if(a===n){var r=parseInt(e.replace(ve,""),10),i=parseInt(t.replace(ve,""),10);return r===i?0:r>i?1:-1}return a>n?1:-1}function Se(e){var t,a={},n=[];for(t in e)e.hasOwnProperty(t)&&"__jsogObjectId"!==t&&"update_time"!==t&&n.push(t);for(n.sort(Ee),t=0;t<n.length;t++)a[n[t]]=e[n[t]];return a}function De(e){if(!e||""===e)return!1;for(var t=e[0],a=0;a<"0123456789".length;a++)if(t==="0123456789"[a])return!1;var n="/[`!@#$%^&*()+-=[]{};':\"\\|,.<>/?~]/\xa8\xb4";for(a=0;a<n.length;a++)if(e.indexOf(n[a])>-1)return!1;return!0}function we(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=null;if(t)for(var i in t[e]){var s=t[e][i];s&&(!r||r.time<s.time)&&(!a||s.time>=a)&&(!n||s.time<=n)&&(r=s)}return r}function Pe(e,t){if(e.batchs)for(var a in e.batchs){var n=e.batchs[a];if(n.hasOwnProperty("pens")&&null!=n.pens[t])return e.batchs[a]}return null}function Oe(e,t,a,n,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=0,o=0,c=0,l=0;if((t.datas&&t.datas.count||t.count)&&(t.count?s+=t.count:s+=t.datas.count),a.weighings&&a.weighings[e]){var u=0,f=0,p=void 0,h=void 0,d=void 0;i||(i=a.weighings[e]),i&&Object.keys(i).forEach((function(e){var t=i[e];t.time>=n&&t.time<=r&&t.time>f&&(o=t.weight,t.count&&(o=t.weight/t.count),void 0!==p&&(c=o-p,u++),f=t.time,p=o,h=t.time,d||(d=t.time))}));var g=(new Date).getTime(),m=!1;if(n&&r){var b=Pe(a,e),y=ke(b,a.graphs),v=r,E=Ae(a,e,b,y);if(null!=E&&E.Now&&g>new Date(f).getDate()){o=E.Now,void 0!==p&&(c+=o-p,u++);var S=new Date(E.lastWeighing.time+E.Addition);S.setDate(S.getDate()+E.days),h=S.getTime(),m=!0}if(E&&E.lastWeighing&&E.days){var D=new Date(r).getTime(),w=new Date(E.lastWeighing.time);w.setDate(w.getDate()+E.days),D=w.getTime(),E.Addition&&(D+=E.Addition),(r===v||r<D)&&(r=D)}}if(u>0){var P=c/u,O=(h-d)/864e5;l+=P/=O}}return{Animals:s,PenWeight:o,AveragePenGrowth:l,EndDate:r,isVirtual:m}}function Ce(e,t){var a=!1,n=0,r=0,i=0,s=0,o=!(!e.state||"Closed"!==e.state),c=ke(e,t.graphs);if(!c)return null;var l=c.data[c.data.length-1],u=Te(e,c),f=e.time,p=0;e&&e.pens&&t.pens&&Object.keys(e.pens).reverse().filter((function(e){return"__jsogObjectId"!==e})).forEach((function(c){if(t&&t.pens&&t.pens[c]&&t.weighings&&t.weighings[c]||o){var l=o?e.pens[c]:t.pens[c];n++;var h=o?e.closed.weighings[c]:t.weighings[c];if(h){var d=Oe(c,l,t,f,u,h);r+=d.Animals;var g=d.PenWeight;0===g?n--:(i+=g,s+=d.AveragePenGrowth,p<d.EndDate&&(p=d.EndDate),a||(a=d.isVirtual))}}})),p>0&&(u=p);var h=i/n;h=parseFloat(h).toFixed(2);var d=s/n;return d=parseFloat(d).toFixed(2),{StartDate:f,EndDate:u,TargetWeight:l,PenCount:n,Animals:r,AverageWeight:h,AverageGrowth:d,isClosed:o,isVirtual:a}}function ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e){if(e.gcurve&&e.state&&e.state===oe)return e.gcurve;if(t){if(a&&("string"===typeof a||a.curveId)){var n="string"===typeof a?a:a.curveId;return t[n]}if(e.gcurve)return t[e.gcurve]}}return null}function Te(e,t){if(e&&e.time&&t){for(var a=new Date(e.time),n=0;n<t.data.length;n++)n<t.data.length-1&&(a=new Date(je(a,t.periode)));return a.getTime()}return null}function je(e,t){var a=new Date(e.getTime());switch(t){case"Days":a.setDate(a.getDate()+1);break;case"Month":a.setMonth(a.getMonth()+1);break;case"Weeks":default:a.setDate(a.getDate()+7)}return a}function Ie(e,t,a,n,r){var i=null,s=null,o=null;if(a){var c=function(e,t){var a=e[0],n=e[1],r=t[0],i=(t[1]-r)/(n-a);r>a&&(i=-i);return i}(e,t);if(i=(a-e[0])*c+t[0],n&&r)s=i+((r-e[0])*c+t[0]-n),o=(n-t[0])/c,o=e[0]+o,o=Math.floor(o)}return{ExValue:i,VirData:s,ExTime:o}}function Ae(e,t,a,n){if(e&&(!t&&a&&a.pens&&(t=Object.keys(a.pens).filter((function(e){return"__jsogObjectId"!==e}))[0]),a||(a=Pe(e,t)),a&&a.time&&(n||(n=ke(a,e.graphs)),n&&n.data))){var r=Te(a,n),i=we(t,e.weighings,a.time,r);if(i&&i.weight){var s=i.weight;i.count&&(s/=i.count);var o=we(t,e.weighings,a.time,i.time-1),c=o?o.weight:0;o&&o.count&&(c/=o.count);var l="none",u={periode:n.periode,data:[]},f=new Date(Date.now());f=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime();for(var p=new Date(a.time),h=0,d=0;d<n.data.length;d++)p.getTime()<=f&&(p=new Date(je(p,n.periode)),h++),s<=n.data[d]&&("none"===l&&(l=d),u.data.push(n.data[d]));s<c&&(l-=1,u.data.unshift(n.data[l]));for(var g=new Date(a.time),m=0;m<l;m++)g=new Date(je(g,n.periode));if(u.Now=s,u.TempEx=n.data[h],"none"!==l){var b=null;if(o&&(b=Ie([o.time,i.time],[c,s],i.time,n.data[l],g.getTime())),b&&b.ExTime?(u.FirstSpot=b.ExTime,u.Addition=b.ExTime-i.time):(u.FirstSpot=new Date(i.time+864e5),u.Addition=864e5),r){r<=(f=new Date(Date.now()))&&(f=new Date(r)),f=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),p=new Date(i.time);var y=0;for(d=0;d<u.data.length;d++)p.getTime()<f&&(p=new Date(je(p,n.periode)),y++);y--;var v=u.data[y];u.Now=v||s}}var E=0;return"Days"===n.periode?E=u.data.length:"Weeks"===n.periode&&(E=7*u.data.length),u.days=E,u.lastWeighing=i,u.Batch=a,u}}return null}function xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Re(e){var t=e.Email,a=e.Pass;return new Promise((function(e,n){be.auth().createUserWithEmailAndPassword(t,a).then((function(){var t=be.auth().currentUser,a=t.displayName?t.displayName:t.email;Ue(ce.USERSDATA,le.UPDATE,{UserId:t.uid,Data:{name:a,state:ne}}).then((function(n){t.updateProfile({displayName:a}).then((function(a){t.sendEmailVerification().then((function(){e(null)})).catch((function(t){console.log("error in send EmailVerification",t),e({error:t.code,viewError:"Verification could not be send"})}))})).catch((function(t){console.log("update profile"),e({error:t.code,viewError:"Update error, please refresh"})}))}))})).catch((function(t){console.log("UserCreate Error: ",t),"auth/email-already-in-use"===t.code?e({error:t.code,viewError:"The email address is already in use."}):"auth/invalid-email"===t.code?e({error:t.code,viewError:"The email addres is invalid."}):"auth/weak-password"===t.code?e({error:t.code,viewError:t.message}):e({error:t.code,viewError:"Something went wrong"})}))}))}function Fe(e){var t=e.Email,a=e.Pass;if(be.auth().currentUser){if(be.auth().currentUser.email==t)return new Promise((function(e,t){e(!0)}));Me()}return new Promise((function(e,n){be.auth().signInWithEmailAndPassword(t,a).then((function(){e(!0)})).catch((function(t){console.log("User Signin Error: ",t),"auth/invalid-email"===t.code?e({error:t.code,viewError:"The email addres is invalid."}):e({error:"Could not singin",viewError:"Could not singin"})}))}))}function Ne(e){var t=e.Email;return new Promise((function(e,a){be.auth().sendPasswordResetEmail(t).then((function(){e(!0)})).catch((function(t){console.log("User resetPass error:",t),t.code,e(null)}))}))}function Me(){return new Promise((function(e,t){be.auth().signOut().then((function(){e({type:le.UPDATE,path:ce.FIREBASEUSER,data:null})})).catch((function(t){console.log("User logout error:",t),e({type:le.UPDATE,path:ce.FIREBASEUSER,data:null})}))}))}function We(){return new Promise((function(e,t){var a=be.auth().currentUser;a&&be.auth().currentUser.reload().then((function(e){a=be.auth().currentUser,console.log(e,a)})),e(null)}))}function Ue(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=be.auth().currentUser;switch(e){case ce.USERSDATA:switch(t){case le.FETCH:return _e(a);case le.CREATE:if(a.hasOwnProperty("UserData"))return new Promise((function(e,t){a[0];ze({Data:{name:a.Farms.name}}).then((function(t){Je({FarmId:t,Data:{sections:a.Sections,pens:a.Pens}}).then((function(){He({Data:{state:a.UserData.state,farms:A()({},t,!0)}}).then((function(){_e(n.uid).then((function(t){var a=t.data;e({type:le.UPDATE,path:ce.FIREBASEUSER,data:a})}))}))}))}))}));break;case le.UPDATE:return He(a);case le.SIGN:return a?a.hasOwnProperty("refresh")?We():Fe(a):Me();case le.CLEAR:return n?{type:le.CLEAR,path:ce.USERSDATA,data:{}}:{type:le.CLEAR,path:ce.USERS,data:{}}}break;case ce.USERS:switch(t){case le.FETCH:return _e(a,!0);case le.CREATE:if(a.hasOwnProperty("Email")&&a.hasOwnProperty("Pass"))return Re(a);if(a.hasOwnProperty("Email"))return Ne(a);break;case le.UPDATE:return{type:le.UPDATE,path:ce.FIREBASEUSER,data:a};case le.CLEAR:return{type:le.CLEAR,path:ce.USERS,data:{}}}break;case ce.FARMS:switch(t){case le.FETCH:return Ge(a);case le.CREATE:break;case le.UPDATE:console.log("??");break;case le.CLEAR:return{type:le.CLEAR,path:ce.FARMS,data:{}}}break;case ce.FARMDATAS:console.log("FarmsDatas ???");break;case ce.SECTIONS:switch(t){case le.FETCH:return qe(a);case le.CREATE:case le.UPDATE:break;case le.CLEAR:return{type:le.CLEAR,path:ce.SECTIONS,data:{}}}break;case ce.PENS:switch(t){case le.FETCH:return Ye(a);case le.CREATE:return Xe(a);case le.DELETE:return Qe(a);case le.UPDATE:return Ze(a);case le.CLEAR:return{type:le.CLEAR,path:ce.PENS,data:{}}}break;case ce.PIGS:switch(t){case le.FETCH:return Ke(a);case le.CREATE:return et(a);case le.UPDATE:break;case le.CLEAR:return{type:le.CLEAR,path:ce.PIGS,data:{}}}break;case ce.BATCHS:switch(t){case le.FETCH:return tt(a);case le.CREATE:return at(a);case le.UPDATE:return nt(a);case le.DELETE:break;case le.CLEAR:return{type:le.CLEAR,path:ce.BATCHS,data:{}}}break;case ce.WEIGHING:switch(t){case le.FETCH:return rt(a);case le.CREATE:return it(a);case le.UPDATE:break;case le.CLEAR:return{type:le.CLEAR,path:ce.WEIGHING,data:{}}}break;case ce.COMMENTS:switch(t){case le.FETCH:return st(a);case le.CREATE:return ot(a)}break;case ce.GRAPH:switch(t){case le.FETCH:return ct(a);case le.CREATE:case le.UPDATE:return lt(a);case le.CLEAR:return{type:le.CLEAR,path:ce.GRAPH,data:{}}}}return new Promise((function(e,t){e({error:"Unknown Action"})}))}function Ve(e){return new Promise((function(t,a){console.log("Setting Update Time"),be.database().ref(e).update({update_time:be.database.ServerValue.TIMESTAMP}).then((function(){t(!0)})).catch((function(e){console.log(e),t(!0)}))}))}function Be(e,t){return new Promise((function(a,n){t||a(!0),be.database().ref(e+"/update_time").once("value").then((function(n){var r=n.val();r?t?"SET"===t?Ve(e).then((function(e){a(e)})):a(t<r):a(!0):Ve(e).then((function(e){a(!0)}))}))}))}function _e(e){var t=e.UserId,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="";if(t?n=t:!a&&be.auth().currentUser&&(n=be.auth().currentUser.uid),n||a){var r="users/"+n;return new Promise((function(e,t){be.database().ref(r).once("value").then((function(t){var n=t.val();e(a?{type:le.UPDATE,path:ce.USERS,data:{data:n}}:{type:le.UPDATE,path:ce.USERSDATA,data:{data:n}})})).catch((function(t){console.log(t),"database/permission-denied"===t.code?console.log("User update was permission denied. "):t.code&&console.log("User update Error: ",t),e({error:"An error occurred"})}))}))}return new Promise((function(e,t){console.log("User uid in fecth unknown"),e(null)}))}function He(e){var t=e.UserId,a=e.Data,n=t||be.auth().currentUser.uid;if(n){var r="users/"+n;return new Promise((function(e,t){be.database().ref(r).update(a).then((function(t){e(null)})).catch((function(t){"database/permission-denied"===t.code?console.log("User update was permission denied. "):t.code&&console.log("User update Error: ",t),e({error:"An error occurred"})}))}))}return new Promise((function(e,t){console.log("User uid in fecth unknown"),e(null)}))}function Ge(e){var t=e.FarmId,a="farms/"+t;return be.database().ref(a).once("value").then((function(e){var a=e.val();return t&&(a=A()({},t,a)),{type:le.UPDATE,path:ce.FARMS,data:a}}))}function ze(e){var t=e.Data,a=be.auth().currentUser;a.uid;return new Promise((function(e,n){var r=be.database().ref("farms/").push(),i=r.key;r.set({email:a.email,manager:a.displayName?a.displayName:a.email,name:t.name}).then((function(){e(i)})).catch((function(t){console.log("Create Farm Error: ",t),e(!1)}))}))}function Je(e){var t=e.FarmId,a=e.Data;if(t){var n="farms_data/"+t;return new Promise((function(e,t){be.database().ref(n).update(a).then((function(){e(null)})).catch((function(t){"database/permission-denied"===t.code?console.log("Farm data update was permission denied. "):t.code&&console.log("User update Error: ",t),e(!1)}))}))}return new Promise((function(e,t){console.log("Farm uid in fecth unknown"),e(null)}))}function qe(e){var t=e.FarmId,a=e.SectionId,n=e.DataTime;if(t){var r="farms_data/"+t+"/sections";return a&&(r+="/"+a),new Promise((function(e,a){Be("farms_data/"+t+"/sections",n).then((function(t){if(t)return console.log("Sections fetch called"),be.database().ref(r).once("value").then((function(t){e({type:le.UPDATE,path:ce.SECTIONS,data:t.val()})}));e(null)}))}))}return new Promise((function(e,t){console.log("Fecth Sections Error"),e(null)}))}function Ye(e){var t=e.FarmId,a=e.PenId,n=e.DataTime;if(t){var r="farms_data/"+t+"/pens";return a&&(r+="/"+a),new Promise((function(e,i){Be("farms_data/"+t+"/pens",n).then((function(t){t?(console.log("Pens fetch Called"),be.database().ref(r).once("value").then((function(t){if(a){var n=t.val();n||(n={}),n.datas||(n.datas={});var r=A()({},a,n);e({type:le.UPDATE,path:ce.PENS,data:r})}else e({type:le.UPDATE,path:ce.PENS,data:t.val()})}))):e(null)}))}))}return new Promise((function(e,t){console.log("Fecth Pens Error"),e(null)}))}function Xe(e){var t=e.FarmId,a=e.PenId,n=e.SectionId;if(t){var r="farms_data/"+t+"/";return new Promise((function(e,i){if(a){var s=r+"pens/"+a+"/";be.database().ref(s).set({section:n}).then((function(){be.database().ref(r+"sections/"+n+"/pens").update(A()({},a,!0)).then((function(){be.database().ref(r+"sections/").update({update_time:be.database.ServerValue.TIMESTAMP}).then((function(){Ye({FarmId:t,PenId:a,DataTime:"SET"}).then((function(t){e({type:le.UPDATE,path:ce.PENS,data:t.data})}))}))}))}))}}))}}function Qe(e){var t=e.FarmId,a=e.PenId,n=e.SectionId;if(t&&a){var r="farms_data/"+t+"/";return new Promise((function(e,i){be.database().ref(r+"pens/"+a).remove().then((function(){n?be.database().ref(r+"sections/"+n+"/pens/"+a).remove().then((function(){be.database().ref(r+"sections/").update({update_time:be.database.ServerValue.TIMESTAMP}).then((function(){Ye({FarmId:t,PenId:a,DataTime:"SET"}).then((function(t){e({type:le.UPDATE,path:ce.PENS,data:t.data})}))}))})):e(null)}))}))}}function Ze(e){var t=e.FarmId,a=e.PenId,n=e.Pen;if(t){var r="farms_data/"+t+"/";return new Promise((function(e,i){a&&Ye({FarmId:t,PenId:a}).then((function(t){var i=r+"pens/"+a+"/",s=n.datas,o=Le(Le({},t.data[a].datas),s);be.database().ref(i).update(Le(Le({},n),{},{datas:o})).then((function(){n.section&&be.database().ref(r+"sections/"+SectionId+"/pens").update(A()({},a,!0)).then((function(){be.database().ref(r+"sections/").update({update_time:be.database.ServerValue.TIMESTAMP}).then((function(){e(null)}))}))}))}))}))}}function Ke(e){var t=e.FarmId,a=e.TagId;if(t){var n="farms_data/"+t+"/pigs";return a&&(n+="/"+a),be.database().ref(n).once("value").then((function(e){if(a){var t=e.val();if(!t)return null;t.datas||(t.datas={}),t.datas.gcurve||(t.datas.gcurve="default");var n=A()({},a,t);return{type:le.UPDATE,path:ce.PIGS,data:n}}return{type:le.UPDATE,path:ce.PIGS,data:e.val()}}))}return new Promise((function(e,t){console.log("Fecth Pigs Error"),e(null)}))}function $e(e){var t=e.FarmId,a=(e.TagId,e.PenId),n=e.Action;if(a){var r="farms_data/"+t+"/pens/"+a+"/datas";return new Promise((function(e,i){be.database().ref(r+"/count").once("value").then((function(i){var s=i.val();s||(s=0),s=n&&!isNaN(n)?parseInt(s)+parseInt(n):parseInt(s)+1,be.database().ref(r).update({count:s}).then((function(){Ye({FarmId:t,PenId:a}).then((function(t){e({type:le.UPDATE,path:ce.PENS,data:t.data})}))}))})).catch((function(t){console.log("Update pig pen Error: ",t),e(null)}))}))}return new Promise((function(e,t){e(null)}))}function et(e){var t=e.FarmId,a=e.TagId,n=e.PenId,r=e.Action;if(t){var i="farms_data/"+t+"/";return new Promise(a?function(e,r){var s=i+"pigs/"+a+"/";Ke({FarmId:t,TagId:a}).then((function(r){r&&r.data&&(r=r.data[a]?r.data[a]:null),r&&r.hasOwnProperty("pen")?n&&n!=r.pen?$e({FarmId:t,TagId:a,PenId:r.pen,Action:-1}).then((function(r){$e({FarmId:t,TagId:a,PenId:n,Action:1}).then((function(a){be.database().ref(s).update({pen:n}).then((function(){Ke({FarmId:t}).then((function(t){e({type:le.UPDATE,path:ce.PIGS,data:t.data})}))}))}))})):e(null):be.database().ref(s).update({pen:0}).then((function(){Ke({FarmId:t}).then((function(t){console.log("?",t),e(null)}))}))}))}:function(e,i){$e({FarmId:t,TagId:a,PenId:n,Action:r}).then((function(t){e({type:le.UPDATE,path:ce.PENS,data:t.data})}))})}}function tt(e){var t=e.FarmId,a=e.BatchId,n=e.Data,r=e.DataTime;if(t){var i="farms_data/"+t+"/batchs";return a&&(i+="/"+a),new Promise((function(e,s){Be("farms_data/"+t+"/batchs",r).then((function(t){if(t)if(n){if(a)switch(n){case ce.BATCHS:return i+="/datas",be.database().ref(i).once("value").then((function(t){var n=A()({},a,{datas:t.val()});e({type:le.UPDATE,path:ce.BATCHS,data:n})}));case ce.PENS:return i+="/pens",be.database().ref(i).once("value").then((function(t){var n=A()({},a,{pens:t.val()});e({type:le.UPDATE,path:ce.BATCHS,data:n})}));case ce.GRAPH:return i+="/gcurve",be.database().ref(i).once("value").then((function(t){var n=A()({},a,{gcurve:t.val()});e({type:le.UPDATE,path:ce.BATCHS,data:n})}))}}else be.database().ref(i).once("value").then((function(t){if(a){var n=t.val();if(!n)return null;n.datas||(n.datas={}),n.pens||(n.pens=[]),n.datas.gcurve||(n.datas.gcurve="default");var r=A()({},a,n);e({type:le.UPDATE,path:ce.BATCHS,data:r})}else e({type:le.UPDATE,path:ce.BATCHS,data:t.val()})}));else e(null)}))}))}return new Promise((function(e,t){console.log("Fecth Batchs Error"),e(null)}))}function at(e){var t=e.FarmId,a=e.BatchId,n=e.Batch;if(t){var r="farms_data/"+t+"/batchs";return new Promise((function(e,i){n&&n.name?(a=n.name,r+="/"+n.name+"/",delete n.name,be.database().ref(r).set(Le({},n)).then((function(){Object.keys(n.pens).forEach((function(e){Ze({FarmId:t,PenId:e,Pen:{datas:{batch:a}}})})),e(tt({FarmId:t,DataTime:"SET"}))})).catch((function(t){"database/permission-denied"===t.code?console.log("Batch update was permission denied. "):t.code&&console.log("Batch update Error: ",t),e({error:"An error occurred"})}))):a&&(console.log("???"),r+="/"+a+"/",be.database().ref(r).set({time:be.database.ServerValue.TIMESTAMP,pens:[],datas:{devianceMin:1,devianceMax:2}}).then((function(){e(tt({FarmId:t,DataTime:"SET"}))})))}))}}function nt(e){var t=e.FarmId,a=e.BatchId,n=e.Batch;e.Data;if(t){var r="farms_data/"+t+"/batchs";return new Promise((function(e,i){a&&n?(r+="/"+a,tt({FarmId:t,BatchId:a,Data:ce.PENS}).then((function(i){var s=i.data[a].pens;n.name&&delete n.name;var o={};if(n.pens&&JSON.stringify(n.pens)!==JSON.stringify(s)){s||(s=[]);var c=Object.keys(s).filter((function(e){return!Object.keys(n.pens).includes(e)&&!s[e].enddate})),l=Object.keys(n.pens).filter((function(e){return!Object.keys(s).includes(e)||s[e].enddate})),u=Object.keys(s).filter((function(e){return!Object.keys(c).includes(e)&&!Object.keys(l).includes(e)}));c&&c.length>0&&c.forEach((function(e){if(s[e]){var a=s[e];a.enddate=Date.now(),o[e]=a,Ye({FarmId:t,PenId:e}).then((function(t){var a=0;t.data[e]&&t.data[e].datas&&t.data[e].datas.count&&(a=t.data[e].datas.count),o[e].count=a})),Ze({FarmId:t,PenId:e,Pen:{datas:{batch:""}}})}})),l&&l.length>0&&l.forEach((function(e){var n=s[e]?s[e]:{startdate:Date.now()};n.enddate&&delete n.enddate,o[e]=n,Ze({FarmId:t,PenId:e,Pen:{datas:{batch:a}}})})),u&&u.length>0&&u.forEach((function(e){o[e]=s[e]}))}n.pens=o,n.state&&"Closed"===n.state?tt({FarmId:t,BatchId:a,Data:ce.GRAPH}).then((function(i){var o=i.data[a].gcurve;ct({FarmId:t}).then((function(i){n.gcurve=i.data[o],n.closed={comments:[],weighings:[]};for(var c=function(i,o){o=o.then((function(o){return new Promise((function(o){setTimeout((function(){if(i!==Object.keys(s).length){var c=Object.keys(s)[i];n.pens[c]=s[c],Ye({FarmId:t,PenId:c}).then((function(e){var t=0;e.data[c]&&e.data[c].datas&&e.data[c].datas.count&&(t=e.data[c].datas.count),n.pens[c].count=t})),n.pens[c].enddate||(n.pens[c].enddate=Date.now()),Ze({FarmId:t,PenId:c,Pen:{datas:{batch:"",count:0}}}),st({FarmId:t,PenId:c}).then((function(e){n.closed.comments[c]=e.data[c],be.database().ref("farms_data/"+t+"/datas/comments/"+c).remove(),rt({FarmId:t,PenId:c}).then((function(e){n.closed.weighings[c]=e.data[c],be.database().ref("farms_data/"+t+"/weighings/"+c).remove(),o()}))}))}else be.database().ref(r).update(Le({},n)).then((function(){be.database().ref(r+"/closed").set(n.closed).then((function(){tt({FarmId:t,BatchId:a,DataTime:"SET"}).then((function(t){e(t)}))})).catch((function(t){"database/permission-denied"===t.code?console.log("Batch update was permission denied. "):t.code&&console.log("Batch update Error: ",t),console.log(t),e({error:"An error occurred"})}))}))}))}))})),u=o},l=0,u=Promise.resolve();l<=Object.keys(s).length;l++)c(l,u)}))})):be.database().ref(r).update(Le({},n)).then((function(){tt({FarmId:t,BatchId:a,DataTime:"SET"}).then((function(t){e(t)}))})).catch((function(t){"database/permission-denied"===t.code?console.log("Batch update was permission denied. "):t.code&&console.log("Batch update Error: ",t),console.log(t),e({error:"An error occurred"})}))}))):(console.log("Update Batchs Error"),e(null))}))}}function rt(e){var t=e.FarmId,a=e.PenId,n=e.SectionId,r=(e.limitStart,e.limitTo),i=void 0===r?9999:r,s=e.DataTime,o=e.MemSections;if(t){var c="farms_data/"+t+"/weighings";return new Promise((function(e,r){Be("farms_data/"+t+"/weighings",s).then((function(r){r?a?(console.log("Weight fetch called, getting Pen"),c+="/"+a,be.database().ref(c).orderByChild("time").limitToLast(i).once("value",(function(t){var a=A()({},t.key,{});t.forEach((function(e){a[t.key][e.key]=e.val()})),e({type:le.UPDATE,path:ce.WEIGHING,data:a})}))):(console.log("Weight fetch called, getting Sections"),be.database().ref(c+"/update_time").once("value").then((function(a){var r=a.val();qe({FarmId:t,SectionId:n,DataTime:o?o.update_time:null}).then((function(a){var n=0,s=0,c={},l=a?a.data:o;Object.keys(l).forEach((function(a){l[a]&&l[a].pens&&(s+=Object.keys(l[a].pens).filter((function(e){return"__jsogObjectId"!==e})).length,Object.keys(l[a].pens).filter((function(e){return"__jsogObjectId"!==e})).forEach((function(a){rt({FarmId:t,PenId:a,limitStart:0,limitTo:i}).then((function(t){n++,c=Le(Le({},c),t.data),n===s&&(c.update_time=r,e({type:le.UPDATE,path:ce.WEIGHING,data:c}))})).catch((function(t){console.log(t),e({type:le.UPDATE,path:ce.WEIGHING,data:c})}))})))}))})).catch((function(e){console.log(e)}))}))):e(null)}))}))}return new Promise((function(e,t){console.log("Fecth Weights Error"),e(null)}))}function it(e){var t=e.FarmId,a=e.PenId,n=e.Weight,r=e.Quantity,i=e.Date;if(t){var s="farms_data/"+t+"/weighings";if(a)return s+="/"+a+"/",new Promise((function(e,o){var c=be.database().ref(s).push();c.key;c.set({time:i,weight:n,count:r}).then((function(){rt({FarmId:t,PenId:a,DataTime:"SET"}).then((function(t){e(t)}))})).catch((function(t){console.log("Create Weight Error: ",t),e(null)}))}))}}function st(e){var t=e.FarmId,a=e.PenId,n=(e.limitStart,e.limitTo),r=void 0===n?5:n;if(t){var i="farms_data/"+t+"/datas/comments";return new Promise((function(e,t){a&&(i+="/"+a,be.database().ref(i).orderByChild("time").limitToLast(r).once("value",(function(t){var a=A()({},t.key,{});t.forEach((function(e){a[t.key][e.key]=e.val()})),e({type:le.UPDATE,path:ce.COMMENTS,data:a})})))}))}return new Promise((function(e,t){console.log("Fecth Weights Error"),e(null)}))}function ot(e){var t=e.FarmId,a=e.PenId,n=e.Action,r=e.Data,i=e.Quantity,s=e.Weight;if(t){var o="farms_data/"+t+"/datas/comments";if(a)return o+="/"+a+"/",new Promise((function(e,c){var l=be.database().ref(o).push();l.key;l.set({time:be.database.ServerValue.TIMESTAMP,user:be.auth().currentUser.email,action:n,quantity:i,weight:s,data:r}).then((function(){st({FarmId:t,PenId:a}).then((function(t){e(t)}))})).catch((function(t){console.log("Create Comment Error: ",t),e(null)}))}))}return new Promise((function(e,t){console.log("Fecth Graph Error"),e(null)}))}function ct(e){var t=e.FarmId,a=e.GraphId,n=e.DataTime;if(t){var r="farms_data/"+t+"/graph";return r=r+"/"+a,new Promise((function(e,i){Be("farms_data/"+t+"/graph",n).then((function(t){console.log("Doing Graphs fetch",t,"Always.."),be.database().ref(r).once("value").then((function(t){var n=null,r=t.val();if(r)if(a){var i=A()({},t.key,r);n=Le(Le({},n),i)}else n=Le(Le({},n),r);a?e({type:le.UPDATE,path:ce.GRAPH,data:n}):be.database().ref("farms_data/Agrisys/graph").once("value").then((function(t){var a=t.val();a&&(n=Le(Le({},a),n)),e({type:le.UPDATE,path:ce.GRAPH,data:n})})).catch((function(t){console.log("Get Agrisys graph Error: ",t),e({type:le.UPDATE,path:ce.GRAPH,data:n})}))})).catch((function(t){console.log("Get farm graph Error: ",t),e(null)}))}))}))}return new Promise((function(e,t){console.log("Fecth Graph Error"),e(null)}))}function lt(e){var t=e.FarmId,a=e.Graph;if(t){var n="farms_data/"+t+"/graph";if(a.name)return n+="/"+a.name+"/",new Promise((function(e,r){be.database().ref(n).update({data:a.data,periode:a.periode}).then((function(){ct({FarmId:t,GraphId:a.name}).then((function(t){e(t)}))})).catch((function(t){console.log("Create Graph Error: ",t),e(null)}))}))}}"web"!==te.a.OS?(a(225).default,a(617).default):(be=a(78).default,a(172).default,a(226).default,a(267).default);var ut=function(){return new Promise((function(e,t){"ios"!==te.a.OS&&"android"!=te.a.OS||function(){var e;return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.awrap(be.messaging().requestPermission());case 2:if(e=t.sent,e===be.messaging.AuthorizationStatus.AUTHORIZED||e===be.messaging.AuthorizationStatus.PROVISIONAL){t.next=7;break}return console.log("Authorization status:",e),t.abrupt("return",!1);case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),null,null,null,Promise)}()||e("This application needs premissions to be using notifications"),e(null)}))},ft=function(e,t,a,n){return new Promise((function(r){ae.a.alert(e,t,[{text:a,onPress:function(){r()}}],{cancelable:n,onDismiss:function(){r()}})}))},pt=Ue,ht=a(242),dt=a(78),gt=(a(172),a(226),a(267),b.a.mark(St)),mt=b.a.mark((function(e){var t;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t={to:e,messageId:"test1",messageType:"test2",notification:{title:"Foo",body:"Bar"}},dt.default.messaging().sendMessage(t).then((function(e){console.log(e)}));case 2:case"end":return a.stop()}}),mt)})),bt=b.a.mark(Dt),yt=b.a.mark(wt),vt=b.a.mark(Pt),Et=b.a.mark(Ot);function St(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.f)(V.setFirebaseError(null));case 2:return console.log(ht.a.manifest.web.config.firebase),dt.default.initializeApp(ht.a.manifest.web.config.firebase),t.next=6,Object(y.c)(ut);case 6:if(!(e=t.sent)){t.next=12;break}return t.next=10,Object(y.f)(V.fetchFailure(e));case 10:t.next=21;break;case 12:return t.next=14,Object(y.e)(Dt);case 14:return t.next=16,Object(y.e)(wt);case 16:if(!dt.default.messaging.isSupported()){t.next=21;break}return t.next=19,Object(y.e)(Pt);case 19:return t.next=21,Object(y.e)(Ot);case 21:console.log("Firebase Startup : Done");case 22:case"end":return t.stop()}}),gt)}function Dt(){var e,t,a,n;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(c.c)((function(e){var t=dt.default.auth().onAuthStateChanged((function(t){e(null==t?"NONE":t)}));return function(){t()}}),c.a.expanding(1));case 2:e=r.sent,r.prev=3;case 4:return r.next=6,Object(y.h)(e);case 6:if(t=r.sent,!(a="NONE"===t?null:t)){r.next=21;break}return r.next=11,Object(y.c)(pt,ce.USERSDATA,le.FETCH,{UserId:a.uid});case 11:if(!(n=r.sent).data){r.next=19;break}return a.farms=n.data.data.farms,a.state=n.data.data.state,r.next=17,Object(y.f)(V.dataFetchSuccess({type:le.UPDATE,path:ce.FIREBASEUSER,data:a}));case 17:return r.next=19,Object(y.f)(V.dataFetchSuccess({type:le.UPDATE,path:ce.USERSDATA,data:n.data}));case 19:r.next=25;break;case 21:return r.next=23,Object(y.f)(V.dataFetchSuccess({type:le.UPDATE,path:ce.FIREBASEUSER,data:{}}));case 23:return r.next=25,Object(y.f)(V.dataFetchSuccess({type:le.UPDATE,path:ce.USERSDATA,data:{}}));case 25:r.next=4;break;case 27:return r.prev=27,r.next=30,Object(y.d)();case 30:if(!r.sent){r.next=32;break}e.close();case 32:return r.finish(27);case 33:case"end":return r.stop()}}),bt,null,[[3,,27,33]])}function wt(){var e,t,a,n;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(y.a)(["ACTION_STARTING"]);case 2:e=r.sent;case 3:return r.next=5,Object(y.h)(e);case 5:if(t=r.sent,!Object.values(le).includes(t.action)){r.next=29;break}if(!Object.values(ce).includes(t.ref)){r.next=29;break}return r.next=10,Object(y.g)((function(e){return e.firebase.firebaseUser}));case 10:return a=r.sent,t.action!=le.SIGN&&a&&a.farms&&(t.params||(t.params={}),t.params.FarmId||(t.params.FarmId=[Object.keys(a.farms)[0]])),r.next=14,Object(y.c)(pt,t.ref,t.action,t.params);case 14:if(!(n=r.sent)||!n.error&&!n.viewError){r.next=22;break}return r.next=18,Object(y.f)(V.fetchFailure(n.error));case 18:return r.next=20,Object(y.f)(V.setViewError(n.viewError));case 20:r.next=29;break;case 22:if(!(n&&n.hasOwnProperty("type")&&n.hasOwnProperty("path")&&n.hasOwnProperty("data"))){r.next=27;break}return r.next=25,Object(y.f)(V.dataFetchSuccess(n));case 25:r.next=29;break;case 27:return r.next=29,Object(y.f)(V.fetchSuccess({localDataStore:n}));case 29:r.next=3;break;case 31:case"end":return r.stop()}}),yt)}function Pt(){var e,t;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(c.c)((function(e){var t=dt.default.messaging().onMessage((function(t){e(t)}));return function(){t()}}),c.a.expanding(1));case 2:e=a.sent,a.prev=3;case 4:return a.next=6,Object(y.h)(e);case 6:if(t=a.sent,console.log("New Firebase message: ",t),!(t.notification&&t.notification.title&&t.notification.body)){a.next=13;break}return a.next=11,Object(y.c)(ft,t.notification.title,t.notification.body,"Ok",!1);case 11:a.next=14;break;case 13:console.log("New Firebase data message: ",t);case 14:a.next=4;break;case 16:return a.prev=16,a.next=19,Object(y.d)();case 19:if(!a.sent){a.next=21;break}e.close();case 21:return a.finish(16);case 22:case"end":return a.stop()}}),vt,null,[[3,,16,22]])}function Ot(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),Et)}var Ct=b.a.mark(kt);function kt(e){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.b)([Object(y.i)(w.STARTUP,G),Object(y.i)(T.FETCH_USER,ee),Object(y.i)(U.FIREBASE_STARTUP,St)]);case 2:case"end":return e.stop()}}),Ct)}var Tt;function jt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function It(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var At,xt=Object(v.createReducer)({user:{},userIsLoading:!1,userErrorMessage:null},(Tt={},A()(Tt,T.FETCH_USER_LOADING,(function(e){return It(It({},e),{},{userIsLoading:!0,userErrorMessage:null})})),A()(Tt,T.FETCH_USER_SUCCESS,(function(e,t){var a=t.user;return It(It({},e),{},{user:a,userIsLoading:!1,userErrorMessage:null})})),A()(Tt,T.FETCH_USER_FAILURE,(function(e,t){var a=t.errorMessage;return It(It({},e),{},{user:{},userIsLoading:!1,userErrorMessage:a})})),Tt)),Lt=a(15),Rt=a.n(Lt),Ft=a(14),Nt=a.n(Ft),Mt=a(324);function Wt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ut(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Vt=(At={},A()(At,U.FIREBASE_IS_LOADING,(function(e,t){var a=t.loadingstate;return Ut(Ut({},e),{},{firebaseIsLoading:a})})),A()(At,U.SET_FIREBASE_ERROR,(function(e,t){var a=t.errorMessage;return Ut(Ut({},e),{},{firebaseErrorMessage:a})})),A()(At,U.SET_VIEW_ERROR,(function(e,t){var a=t.errorMessage;return Ut(Ut({},e),{},{viewError:a})})),A()(At,U.VIEW_IS_LOADING,(function(e,t){var a=t.loadingstate;return Ut(Ut({},e),{},{viewIsLoading:a})})),A()(At,U.SET_CURRENT_DATA,(function(e,t){var a=t.data;return Ut(Ut({},e),{},{currentData:a})})),A()(At,U.ACTION_STARTING,(function(e){return Ut(Ut({},e),{},{firebaseErrorMessage:null})})),A()(At,U.FETCH_STARTING,(function(e){return Ut(Ut({},e),{},{firebaseErrorMessage:null})})),A()(At,U.DATA_FETCH_SUCCESS,(function(e,t){var a=t.params,n=a.type,r=a.path,i=a.data,s=e.localDataStore,o=Ut({},e.firebaseUser);switch(n){case le.UPDATE:case le.ADD:var c=Ut({},i);if(r===ce.FIREBASEUSER)if(i&&i.data&&(c=Ut({},i.data)),i&&i._user&&(Object.keys(i._user).forEach((function(e){c[e]=i._user[e]})),delete c._user,delete c._auth),c&&Object.keys(c).length>0){var l=["displayName","name","email","emailVerified","farms","isAnonymous","phoneNumber","photoURL","refreshToken","state","uid"];Object.keys(c).forEach((function(e){for(var t=0;t<l.length;t++)if(l[t]===e){o[e]=c[e];break}}))}else o=c;if(!i)break;switch(r){case ce.FIREBASEUSER:break;case ce.USERSDATA:Object.keys(c).forEach((function(e){s.userData||(s.userData={}),s.userData[e]=c[e]}));break;case ce.USERS:s.users||(s.users={}),i.data&&(c=i.data),c.users&&(c=c.users),Object.keys(c).forEach((function(e){s.users[e]=c[e]}));break;case ce.FARMS:s.farms||(s.farms={}),i.farms&&(c=i.farms),Object.keys(c).forEach((function(e){s.farms[e]=c[e]}));break;case ce.BATCHS:s.batchs||(s.batchs={}),i.batchs&&(c=i.batchs),Object.keys(c).forEach((function(e){s.batchs[e]=c[e]}));break;case ce.SECTIONS:s.sections||(s.sections={}),i.sections&&(c=i.sections),Object.keys(c).forEach((function(e){s.sections[e]=c[e]}));break;case ce.PENS:s.pens||(s.pens={}),i.pens&&(c=i.pens),Object.keys(c).forEach((function(e){s.pens[e]=c[e]}));break;case ce.PIGS:s.pigs||(s.pigs={}),i.pigs&&(c=i.pigs),Object.keys(c).forEach((function(e){s.pigs[e]=c[e]}));break;case ce.COMMENTS:s.comments||(s.comments={}),i.comments&&(c=i.comments),Object.keys(c).forEach((function(e){s.comments[e]=c[e]}));break;case ce.GRAPH:s.graphs||(s.graphs={}),i.graphs&&(c=i.graphs),Object.keys(c).forEach((function(e){s.graphs[e]=c[e]}));break;case ce.WEIGHING:s.weighings||(s.weighings={}),i.weighings&&(c=i.weighings),Object.keys(c).forEach((function(e){s.weighings[e]=c[e]}))}break;case le.CLEAR:switch(r){case ce.USERS:s.userData||(s.userData={}),s.userData.action="CLEAR";break;case ce.USERSDATA:console.log("CLEAR"),s.batchs&&(s.batchs={}),s.sections&&(s.sections={}),s.pens&&(s.pens={}),s.pigs&&(s.pigs={}),s.graphs&&(s.graphs={}),s.weighings&&(s.weighings={}),s.userData&&s.userData.action&&(s.userData.action={})}break;default:console.log("DataFetch Not created / default")}return Ut(Ut({},e),{},{firebaseUser:o,localDataStore:s,firebaseIsLoading:!1,firebaseErrorMessage:null,viewIsLoading:!1})})),A()(At,U.FETCH_SUCCESS,(function(e,t){var a=t.data,n=Ut({},e.localDataStore),r=Ut({},e);if(a){var i=a.localDataStore,s=Rt()(a,["localDataStore"]);i&&(n=0!==Object.keys(i).length?function e(t,a){var n=function(e){return e&&"object"===typeof e};return n(t)&&n(a)?(Object.keys(a).forEach((function(r){var i=t[r],s=a[r];Array.isArray(i)&&Array.isArray(s)||(n(i)&&n(s)?t[r]=e(Nt()({},i),s):t[r]=s)})),t):a}(i,n):Ut({},i)),r=Object(Mt.a)(e,s)}return Ut(Ut({},r),{},{localDataStore:n,firebaseIsLoading:!1,firebaseErrorMessage:null,viewIsLoading:!1})})),A()(At,U.FETCH_FAILURE,(function(e,t){var a=t.errorMessage;return Ut(Ut({},e),{},{firebaseIsLoading:!1,firebaseErrorMessage:a,viewIsLoading:!1})})),At),Bt=Object(v.createReducer)({firebaseIsLoading:!1,firebaseErrorMessage:null,firebaseUser:null,localDataStore:{},currentData:null,viewIsLoading:!1,viewError:null},Vt),_t=a(2),Ht=a(642),Gt=a(7),zt=a.n(Gt),Jt=a(8),qt=a.n(Jt),Yt=a(12),Xt=a.n(Yt),Qt=a(13),Zt=a.n(Qt),Kt=a(4),$t=a.n(Kt),ea=a(26),ta=a(3),aa="rgba(0,0,0,0)",na="#ffffff",ra="#a6a6a6",ia="#ffffff",sa="#a3b9cf",oa="#03a489",ca="#dc3545",la="#4cafea",ua="#FFAA95",fa="#86939e",pa="#03a489",ha="#4463ab",da={h1:{fontSize:38},h2:{fontSize:34},h3:{fontSize:30},normal:{fontSize:17}},ga={tiny:5,small:10,normal:15,medium:30,tinyBottomMargin:{marginBottom:5},smallBottomMargin:{marginBottom:10},bottomMargin:{marginBottom:15},mediumBottomMargin:{marginBottom:30},tinyVerticalMargin:{marginVertical:5},smallVerticalMargin:{marginVertical:10},verticalMargin:{marginVertical:15},mediumVerticalMargin:{marginVertical:30},tinyHorizontalMargin:{marginHorizontal:5},smallHorizontalMargin:{marginHorizontal:10},horizontalMargin:{marginHorizontal:15},mediumHorizontalMargin:{marginHorizontal:30},tinyHorizontalPadding:{paddingHorizontal:5},smallHorizontalPadding:{paddingHorizontal:10},horizontalPadding:{paddingHorizontal:15},mediumHorizontalPadding:{paddingHorizontal:30},tinyVerticalPadding:{paddingVertical:5},smallVerticalPadding:{paddingVertical:10},verticalPadding:{paddingVertical:15},mediumVerticalPadding:{paddingVertical:30}},ma={Home:a(486),DashBoard:a(487),System:a(488),Curves:a(489),GCurves:a(490),User:a(491),Sow:a(492),Section:a(493),Pens:a(494),AutoPig:a(495),Feed:a(496),Haxa_globe:a(497),Hexa_icon:a(498),Logo:a(499),logo:a(500)};function ba(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ya(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ba(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ba(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var va={column:{flexDirection:"column"},colMain:{flexDirection:"column",justifyContent:"center"},colCenter:{flexDirection:"column",alignItems:"center",justifyContent:"center"},colCross:{flexDirection:"column",alignItems:"center"},columnReverse:{flexDirection:"column-reverse"},row:{flexDirection:"row"},rowMain:{flexDirection:"row",justifyContent:"center"},rowCenter:{flexDirection:"row",alignItems:"center",justifyContent:"center"},rowCross:{flexDirection:"row",alignItems:"center"},rowReverse:{flexDirection:"row-reverse"},center:{alignItems:"center",justifyContent:"center"},crossCenter:{alignItems:"center"},crossEnd:{alignItems:"flex-end"},crossStart:{alignItems:"flex-start"},crossStretch:{alignItems:"stretch"},fill:{flex:1},fillCenter:{flex:1,alignItems:"center",justifyContent:"center"},fillCol:{flex:1,flexDirection:"column"},fillColCenter:{flex:1,flexDirection:"column",alignItems:"center",justifyContent:"center"},fillColCross:{flex:1,flexDirection:"column",alignItems:"center"},fillColMain:{flex:1,flexDirection:"column",justifyContent:"center"},fillColReverse:{flex:1,flexDirection:"column-reverse"},fillRow:{flex:1,flexDirection:"row"},fillRowCenter:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center"},fillRowCross:{flex:1,flexDirection:"row",alignItems:"center"},fillRowMain:{flex:1,flexDirection:"row",justifyContent:"center"},fillRowReverse:{flex:1,flexDirection:"row-reverse"},fullSize:{height:"100%",width:"100%"},halvWidth:{width:"50%"},midWidth:{width:"75%"},fullWidth:{width:"100%"},mainCenter:{justifyContent:"center"},mainEnd:{justifyContent:"flex-end"},mainSpaceAround:{justifyContent:"space-around"},mainSpaceBetween:{justifyContent:"space-between"},mainStart:{justifyContent:"flex-start"},mainContainer:ya({flex:1,flexDirection:"column",alignItems:"center"},ga.mediumHorizontalMargin),contentContainer:ya(ya({flex:1,flexDirection:"column",alignItems:"center"},ga.mediumHorizontalMargin),{},{marginTop:ga.small},ga.bottomMargin),borderContainer:ya(ya(ya({borderWidth:1,borderColor:"#000",borderRadius:15},ga.tinyHorizontalPadding),ga.tinyVerticalPadding),{},{maxWidth:450,zIndex:1}),textContainer:ya(ya({},da.normal),{},{marginBottom:ga.normal,alignItems:"center"}),buttonContainer:{marginBottom:ga.small,maxWidth:450},loadingContainer:{position:"absolute",left:0,right:0,top:0,bottom:0,alignItems:"center",justifyContent:"center",backgroundColor:"#F5FCFF88"},logoContainer:{width:"100%",height:220},backgroundReset:{backgroundColor:aa},rotate90:{transform:[{rotate:"90deg"}]},rotate90Inverse:{transform:[{rotate:"-90deg"}]},mirror:{transform:[{scaleX:-1}]},scrollSpaceAround:{flexGrow:1,justifyContent:"space-around"},scrollSpaceBetween:{flexGrow:1,justifyContent:"space-between"},selfStretch:{alignSelf:"stretch"},textCenter:{textAlign:"center"},textJustify:{textAlign:"justify"},textLeft:{textAlign:"left"},textRight:{textAlign:"right"}};function Ea(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Sa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ea(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Da={button:{backgroundColor:sa,color:ia},buttonText:{color:ia},error:Sa(Sa({},da.normal),{},{color:ca,marginBottom:ga.tiny,textAlign:"center"}),result:Sa(Sa({},da.normal),{},{marginBottom:ga.tiny,textAlign:"center"}),text:Sa(Sa({},da.normal),{},{marginBottom:ga.tiny,textAlign:"center"}),input:Sa(Sa({},da.normal),{},{height:24}),navigationHeader:{textAlign:"center",alignSelf:"center",flexGrow:1}},wa=ta.a.create({container:{backgroundColor:sa}});function Pa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var Oa=function(e){Xt()(a,e);var t=Pa(a);function a(e){return zt()(this,a),t.call(this,e)}return qt()(a,[{key:"getData",value:function(){"android"!==te.a.OS&&"ios"!==te.a.OS||(dt.default.messaging().onNotificationOpenedApp((function(e){console.log("Notification caused app to open from background state:",e.notification),_.navigate(e.data.type)})),dt.default.messaging().getInitialNotification().then((function(e){e&&(console.log("Notification caused app to open from quit state:",e.notification),_.navigate(e.data.type))})))}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.checkData(this.props)}},{key:"render",value:function(){return r.a.createElement(_t.a,{style:[va.fillRowCenter,wa.container]},r.a.createElement(_t.a,{style:[va.center,va.logoContainer]},r.a.createElement(ea.a,{style:va.fullSize,source:ma.Hexa_icon,resizeMode:"contain"})))}}]),a}(n.Component),Ca=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{}}))(Oa),ka=a(17),Ta=function(){return r.a.createElement(_t.a,{style:[va.fillCenter,va.rowMain,ga.mediumHorizontalMargin]},r.a.createElement(ka.a,null,"This is deep linking example screen which can be accessed using agrissysapp://deeplink scheme!"))},ja=a(24);function Ia(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Aa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ia(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var xa=ta.a.create({boxContainer:Aa(Aa({},va.center),ga.tinyVerticalMargin),button:Aa(Aa(Aa(Aa({borderRadius:15},va.center),va.fullWidth),ga.horizontalPadding),Da.button),text:Aa(Aa(Aa(Aa({},Da.buttonText),ga.verticalPadding),va.center),{},{textAlign:"center"}),icon:Aa(Aa(Aa({},va.colCenter),ga.smallVerticalMargin),{},{width:"25%",height:50})}),La=function(e){var t=[r.a.createElement(ka.a,{style:[xa.text,e.textStyle],key:0},e.Text)],a=[];if(e.icon){var n=r.a.createElement(ea.a,{style:va.fullSize,source:e.icon,resizeMode:"contain"});a=r.a.createElement(_t.a,{style:[xa.icon,e.iconStyle]},n)}return r.a.createElement(ja.a,{style:[xa.boxContainer,e.boxStyle],onPress:e.onPress},e.icon?r.a.createElement(_t.a,{style:[xa.button,e.buttonStyle,va.rowCenter]},r.a.createElement(_t.a,{style:[va.colCenter,va.fill]},t),a):r.a.createElement(_t.a,{style:[xa.button,e.buttonStyle]},t))},Ra=function(e){var t=e.Texts,a=e.Images,n=e.onPress,i=[];return t.forEach((function(t,s){var o=null;a&&a[s]&&(o=a[s]),i.push(r.a.createElement(La,{key:s,Text:t,icon:o,iconStyle:e.iconStyle,itemStyle:e.itemStyle,onPress:function(){n&&n({index:s,text:t})}}))})),r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth,{marginBottom:30},e.style]},i)},Fa=function(e){return r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth,ga.bottomMargin]},r.a.createElement(La,{Text:e.Text,icon:e.icon,buttonStyle:{backgroundColor:ha},onPress:function(){e.onPress&&e.onPress()}}))},Na=a(25);function Ma(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Wa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ma(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ma(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ua=ta.a.create({listitem:Wa(Wa(Wa({flex:1},va.borderContainer),va.center),{},{backgroundColor:"#fff",paddingVertical:5,paddingHorizontal:5})}),Va=function(e){var t=e.key?e.key:0;return r.a.createElement(Na.c,{key:t,containerStyle:[Ua.listitem,{flexDirection:"column",borderRadius:0},e.itemStyle],button:!0,onPress:e.onPress},r.a.createElement(Na.c.Content,null,r.a.createElement(Na.c.Title,null,e.Title),e.hasOwnProperty("Subtitle")?r.a.createElement(Na.c.Subtitle,null,e.Subtitle):r.a.createElement(r.a.Fragment,null)))};function Ba(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _a(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ba(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ba(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ha=ta.a.create({contentBox:_a(_a(_a(_a({},va.fill),va.colCenter),va.borderContainer),{},{borderRadius:0,minHeight:30})}),Ga=function(e){var t=[];e.texts&&e.texts.forEach((function(a,n){t.push(r.a.createElement(_t.a,{style:[Ha.contentBox,e.textsStyle],key:"text_"+n},r.a.createElement(ka.a,null,a)))}));var a=[];e.datas&&e.datas.forEach((function(t,n){a.push(r.a.createElement(ja.a,{style:[Ha.contentBox,e.datasStyle],onLongPress:function(){e.onPress&&e.onPress({data:t,index:n})},key:"data_"+n},r.a.createElement(ka.a,null,t)))}));for(var n=t.length>a.length?t.length:a.length,i=[],s=0;s<n;s++){var o=[];s<t.length?o.push(t[s]):o.push(r.a.createElement(_t.a,{style:[va.fill,va.colCenter],key:"leftSpace_"+s})),a.length>0&&(o.push(r.a.createElement(_t.a,{style:[va.fill,va.colCenter,{maxWidth:20}],key:"seperator_"+i.length})),s<a.length?o.push(a[s]):o.push(r.a.createElement(_t.a,{style:[va.fill,va.colCenter],key:"rightSpace_"+s}))),i.push(r.a.createElement(_t.a,{style:[e.datas?va.rowCenter:va.halvWidth,ga.tinyVerticalMargin],key:"row_"+i.length},o))}return i},za=(ta.a.create({container:{backgroundColor:sa}}),a(34));function Ja(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var qa=function(e){Xt()(a,e);var t=Ja(a);function a(e){var n;return zt()(this,a),(n=t.call(this,e)).state={View:1},n}return qt()(a,[{key:"getPenAndSection",value:function(){var e,t=void 0;if(this.props.pig&&this.props.pigTag&&this.props.PigsList&&this.props.PigsList[this.props.pigTag]&&this.props.PigsList[this.props.pigTag].pen&&0!=this.props.PigsList[this.props.pigTag].pen){t=this.props.PigsList[this.props.pigTag].pen;var a=this.props.firebase.localDataStore;if(a&&a.pens&&a.pens[t])e=a.pens[t].section}return{Section:e,Pen:t}}},{key:"getData",value:function(){}},{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props}},{key:"render",value:function(){var e=this,t=this.props.firebase.currentData;if(this.props.pig)return r.a.createElement(_t.a,{style:[va.buttonContainer]},r.a.createElement(La,{Text:"Add Pig",onPress:function(){""!==e.props.pigTag?Object.keys(e.props.PigsList).filter((function(t){return t===e.props.pigTag})).length>0?e.props.setFirebaseError("Can not add Tag already exist"):(e.props.setFirebaseError(""),e.props.newPig(e.props.pigTag)):e.props.setFirebaseError("A Tag is needed")}}),r.a.createElement(La,{Text:"Move Pig",onPress:function(){var t=e.getPenAndSection(),a=t.Section,n=t.Pen;e.props.setCurrentPig(e.props.pigTag,a,n),_.navigate("DataEditor")}}));if(this.props.section)return r.a.createElement(_t.a,{style:[va.buttonContainer]},r.a.createElement(La,{Text:"Weight",onPress:function(){_.navigate("WeighingOperations")}}),r.a.createElement(_t.a,{style:[{marginTop:40}]},r.a.createElement(La,{Text:"Add Pen",onPress:function(){e.props.editPens(le.CREATE),_.navigate("DataEditor")}}),r.a.createElement(La,{Text:"Remove Pen",onPress:function(){e.props.editPens(le.DELETE),_.navigate("DataEditor")}})));var a=1;switch(this.state.View){case fe:case pe:case he:a=-1;case ue:return r.a.createElement(on,{Title:"Operations comment:",Quantity:!0,Weight:!0,onDone:function(n){if(n.res){var r=e.state.View;r=r.charAt(0).toUpperCase()+r.slice(1);var i=n.quantity;isNaN(i)&&(i=1),a*=i;var s=n.weight;e.props.newComment(t.penId,r,n.data,i,s),e.props.newPigCount(t.penId,a)}e.setState({View:1})}});case de:return r.a.createElement(on,{Title:"Pen Note:",onDone:function(a){if(a.res&&a.data){var n=e.state.View;n=n.charAt(0).toUpperCase()+n.slice(1),e.props.newComment(t.penId,n,a.data)}e.setState({View:1})}});default:return r.a.createElement(za.a,{style:{paddingRight:5}},r.a.createElement(_t.a,{style:[va.buttonContainer]},r.a.createElement(La,{Text:"Weight",onPress:function(){_.navigate("WeighingOperations")}}),r.a.createElement(La,{Text:"Note",onPress:function(){e.setState({View:de})}}),r.a.createElement(_t.a,{style:[{marginTop:10}]},r.a.createElement(La,{Text:"Add Pig",onPress:function(){e.setState({View:ue})}}),r.a.createElement(La,{Text:"Move Pig",onPress:function(){e.setState({View:fe})}}),r.a.createElement(La,{Text:"Lost Pig",onPress:function(){e.setState({View:pe})}}),r.a.createElement(La,{Text:"Sold Pig",onPress:function(){e.setState({View:he})}}))))}}}]),a}(n.Component),Ya=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(V.setFirebaseError(t))},setCurrentData:function(t){return e(V.setCurrentData({type:ce.PENS,penId:t}))},setCurrentDataElement:function(t){return e(V.setCurrentData(t))},editPens:function(t){return e(V.setCurrentData({type:ce.PENS,action:t}))},setCurrentPig:function(t,a,n){return e(V.setCurrentData({type:ce.PIGS,action:le.CREATE,pigtag:t,data:{section:a},dataId:n}))},newPig:function(t){return e(V.actionStarting(le.CREATE,ce.PIGS,{TagId:t}))},newPigCount:function(t,a){return e(V.actionStarting(le.CREATE,ce.PIGS,{PenId:t,Action:a}))},newComment:function(t,a,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return e(V.actionStarting(le.CREATE,ce.COMMENTS,{PenId:t,Action:a,Data:n,Quantity:r,Weight:i}))}}}))(qa),Xa=a(18),Qa=function(e){var t=Object(n.useRef)(new Xa.a.Value(0)),a=e.progress,i=e.color?e.color:"#8BED4F";Object(n.useEffect)((function(){Xa.a.timing(t.current,{toValue:a,duration:100}).start()}),[a]);var s=t.current.interpolate({inputRange:[0,100],outputRange:["0%","100%"],extrapolate:"clamp"});return r.a.createElement(_t.a,{style:[va.borderContainer,va.fullWidth,{borderWidth:0,minHeight:45,paddingBottom:10}]},r.a.createElement(_t.a,{style:[va.fill,va.fullWidth,va.colMain,{alignContent:"center"}]},e.text?r.a.createElement(ka.a,{style:{alignSelf:"flex-start",minHeight:20}},e.text):r.a.createElement(r.a.Fragment,null),r.a.createElement(_t.a,{style:Za.progressBar},r.a.createElement(Xa.a.View,{style:(ta.a.absoluteFill,{backgroundColor:i,width:s})}))))},Za=ta.a.create({container:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",paddingTop:5,padding:8},progressBar:{flexDirection:"row",height:20,width:"100%",borderColor:"#000",borderWidth:2,borderRadius:5}}),Ka=a(49);function $a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var en=["January","February","March","April","May","June","July","August","September","October","November","December"],tn=function(e){Xt()(a,e);var t=$a(a);function a(e){var n;zt()(this,a);var r=(n=t.call(this,e)).getStates(e),i=r.year,s=r.month,o=r.day;return n.state={year:i,month:s,day:o},n}return qt()(a,[{key:"getStates",value:function(e){new Date;var t,a,n,r=new Date;return e.Selected&&(r=new Date(e.Selected)),t=r.getFullYear(),a=r.getMonth(),n=r.getDate(),e.Selected||(e.Year&&(t=this.props.Year),e.Month&&(a=this.props.Month),e.Day&&(n=this.props.Day)),{year:t,month:a,day:n}}},{key:"componentDidUpdate",value:function(e,t){if(e.Selected){if(e.Selected!=this.props.Selected){var a=this.getStates(this.props),n=a.year,r=a.month,i=a.day;this.setState({year:n,month:r,day:i},this.forceUpdate())}}else{var s=!1;e.Year!=this.props.Year&&(s=!0),e.Month!=this.props.Month&&(s=!0),e.Day!=this.props.Day&&(s=!0),s&&this.forceUpdate()}}},{key:"render",value:function(){for(var e=this,t=new Date,a=t.getFullYear(),n=[],i=a+25;i>a-25;i--){var s=String(i);n.push(r.a.createElement(Ka.a.Item,{key:"Year_"+i,value:i,label:s}))}for(var o=[],c=t.getMonth(),l=0;l<en.length;l++){s=String(l);o.push(r.a.createElement(Ka.a.Item,{key:"Month_"+l,value:l,label:en[l]}))}for(var u=[],f=new Date(a,c+1,0).getDate(),p=1;p<=f;p++){s=String(p);u.push(r.a.createElement(Ka.a.Item,{key:"Day_"+p,value:p,label:s}))}return r.a.createElement(_t.a,{style:[va.fullWidth,va.row,{marginBottom:-10},this.props.style]},r.a.createElement(Ka.a,{selectedValue:this.state.year,style:[{minWidth:101,marginRight:5}],onValueChange:function(t){a=t,e.props.onValueChange(new Date(a,e.state.month,e.state.day))}},n),r.a.createElement(Ka.a,{selectedValue:this.state.month,style:[{minWidth:110,marginRight:5}],onValueChange:function(t){c=t,e.props.onValueChange(new Date(e.state.year,c,e.state.day))}},o),r.a.createElement(Ka.a,{selectedValue:this.state.day,style:[{minWidth:83}],onValueChange:function(t){f=parseInt(t),e.props.onValueChange(new Date(e.state.year,e.state.month,f))}},u))}}]),a}(n.Component),an=a(37),nn=a.n(an),rn=a(41),sn=ta.a.create({textAreaContainer:{borderColor:ra,borderWidth:1,padding:5},textArea:{height:150,justifyContent:"flex-start",borderColor:"black",borderWidth:.5,padding:5}}),on=function(e){var t=e.Title,a=!!e.Quantity&&e.Quantity,i=!!e.Weight&&e.Weight,s=e.onDone,o=Object(n.useState)(""),c=nn()(o,2),l=c[0],u=c[1],f=Object(n.useState)("1"),p=nn()(f,2),h=p[0],d=p[1],g=Object(n.useState)("1"),m=nn()(g,2),b=m[0],y=m[1],v="android"===te.a.OS||"ios"===te.a.OS;return r.a.createElement(_t.a,{style:[va.buttonContainer,e.style]},r.a.createElement(_t.a,{style:sn.textAreaContainer},r.a.createElement(_t.a,{style:[v?{}:va.row]},t?r.a.createElement(ka.a,{style:[da.normal,{height:24,color:fa}]},t):r.a.createElement(r.a.Fragment,null),a?r.a.createElement(_t.a,{style:[va.row,v?{}:{marginLeft:50,marginBottom:4}]},r.a.createElement(ka.a,{style:[da.normal,{height:24,color:fa}]},"Quantity:"),r.a.createElement(rn.a,{style:[sn.textArea,{marginLeft:10,height:22,width:80,paddingBottom:-10}],multiline:!1,onChangeText:function(e){""!==e&&isNaN(e)||d(e)},value:h})):r.a.createElement(r.a.Fragment,null)),i?r.a.createElement(_t.a,{style:[va.row,v?{}:{marginBottom:4}]},r.a.createElement(ka.a,{style:[da.normal,{height:24,color:fa}]},"Average Weight:"),r.a.createElement(rn.a,{style:[sn.textArea,{marginLeft:10,height:22,width:80,paddingBottom:-10}],multiline:!1,onChangeText:function(e){""!==e&&isNaN(e)||y(e)},value:b})):r.a.createElement(r.a.Fragment,null),r.a.createElement(rn.a,{style:sn.textArea,underlineColorAndroid:"transparent",placeholder:"Type something",placeholderTextColor:"grey",numberOfLines:10,multiline:!0,onChangeText:function(e){return u(e)},value:l})),r.a.createElement(La,{key:"_Done",Text:"Done",onPress:function(){s&&s({res:!0,data:l,quantity:h,weight:b})}}),r.a.createElement(La,{key:"_Cancel",Text:"Cancel",onPress:function(){s&&s({res:!1,data:l})}}))};function cn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ln(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):cn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var un=ta.a.create({logoContainer:ln(ln({},va.fullWidth),{},{height:190,marginTop:2*ga.medium,marginBottom:ga.medium})});function fn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var pn=function(e){Xt()(a,e);var t=fn(a);function a(e){var n;return zt()(this,a),(n=t.call(this,e)).state={ShowMainError:!1,FocusSubscription:null},n}return qt()(a,[{key:"setData",value:function(e){}},{key:"getData",value:function(){}},{key:"checkData",value:function(e){}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&(this.checkData(this.props),this.props.firebase.viewError!=e.firebase.viewError&&this.forceUpdate())}},{key:"componentDidMount",value:function(){var e=this;this.props.setFirebaseError(null),this.checkData(this.props),this.getData();var t=this.props.navigation.addListener("willFocus",(function(t){e.props.setViewLoading(!1),e.props.setViewError(null)}));this.setState({FocusSubscription:t})}},{key:"componentWillUnmount",value:function(){this.state.FocusSubscription&&this.state.FocusSubscription.remove()}},{key:"render",value:function(){var e=this.props.firebase.viewError,t=this.props.firebase.firebaseErrorMessage;return r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[un.logoContainer]},r.a.createElement(ea.a,{style:[va.fullSize],source:ma.Logo,resizeMode:"contain"})),r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize]},r.a.createElement(_t.a,{style:[va.textContainer,va.fullWidth]},this.state.ShowMainError&&t?r.a.createElement(ka.a,{style:Da.error},t):r.a.createElement(r.a.Fragment,null),e?r.a.createElement(ka.a,{style:Da.error},e):r.a.createElement(r.a.Fragment,null),r.a.createElement(ka.a,{style:Da.text},"Welcome to Agrisys App"),r.a.createElement(ka.a,{style:Da.text},"Please choose your action")),r.a.createElement(Ra,{Texts:["Connect to Agrisys Cloud","Connect to Device"],Images:[ma.Haxa_globe,null],onPress:function(e){switch(e.index){case 0:_.navigate("AuthStack");break;case 1:_.navigate("DeviceScreen")}}})))}}]),a}(n.Component),hn=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(V.setFirebaseError(t))},setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))}}}))(pn),dn=a(182),gn=a(27),mn=function(e){if(Object.entries(e.example.user).length<=0)return null;return["Gwenborough","Wisokyburgh","McKenziehaven","South Elvis","Roscoeview"].includes(e.example.user.address.city)};function bn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function yn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var vn,En=ta.a.create({error:yn(yn({},da.normal),{},{color:ca,marginBottom:ga.tiny,textAlign:"center"}),instructions:yn(yn({},da.normal),{},{fontStyle:"italic",marginBottom:ga.tiny,textAlign:"center"}),logoContainer:yn(yn({},va.fullWidth),{},{height:300,marginBottom:25}),result:yn(yn({},da.normal),{},{marginBottom:ga.tiny,textAlign:"center"}),text:yn(yn({},da.normal),{},{marginBottom:ga.tiny,textAlign:"center"})}),Sn=te.a.select({ios:"Press Cmd+R to reload,\nCmd+D or shake for dev menu.",android:"Double tap R on your keyboard to reload,\nShake or press menu button for dev menu."}),Dn=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){return e.example.user})),a=Object(i.d)((function(e){return e.example.userIsLoading})),s=Object(i.d)((function(e){return e.example.userErrorMessage}));return Object(n.useEffect)((function(){e(j.fetchUser())}),[]),r.a.createElement(_t.a,{style:[va.fillCenter,va.rowMain,ga.mediumHorizontalMargin,ga.mediumVerticalMargin]},a?r.a.createElement(gn.a,{size:"large",color:"#0000ff"}):r.a.createElement(_t.a,null,r.a.createElement(_t.a,{style:En.logoContainer},r.a.createElement(ea.a,{style:va.fullSize,source:ma.logo,resizeMode:"contain"})),r.a.createElement(ka.a,{style:En.text},"To get started, edit App.js"),r.a.createElement(ka.a,{style:En.instructions},Sn),s?r.a.createElement(ka.a,{style:En.error},s):r.a.createElement(_t.a,null,r.a.createElement(ka.a,{style:En.result},"I'm a fake user, my name is ",t.name),r.a.createElement(ka.a,{style:En.result},mn?"I live in Europe !":"I don't live in Europe.")),r.a.createElement(dn.a,{style:Da.button,onPress:function(){return e(j.fetchUser())},title:"Refresh"})))},wn=Object(Ht.a)({FrontScreen:{screen:hn,navigationOptions:function(){return{headerMode:"none",headerShown:!1}},path:"main"},ExampleScreen:{screen:Dn,navigationOptions:function(){return{headerMode:"none"}},path:"example"}},{initialRouteName:"FrontScreen",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerRight:function(){return r.a.createElement(_t.a,{style:{padding:6}})}}});ta.a.create({});function Pn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}"web"!==te.a.OS?a(225).default:(vn=a(78).default,a(172).default);var On=function(e){switch(e){case se:return"AdminPanel";case ie:return"ConsysPanel";case re:return"UserPanel";case ne:return"CreateUserData";default:return"LoginUser"}},Cn=function(e){Xt()(a,e);var t=Pn(a);function a(e){var n;return zt()(this,a),(n=t.call(this,e)).state={ISLOADPAGE:!0,FocusSubscription:null},n}return qt()(a,[{key:"getData",value:function(){}},{key:"checkData",value:function(e){var t=this.props.firebase;if(!t)return this.props.setFirebaseError("Internal rootdata Error"),void _.navigate("MainStack");var a="LoginUser",n=t.firebaseUser;n&&Object.keys(n).length>1&&(a=n.state!==ne||n.emailVerified||vn.auth().currentUser.emailVerified?On(n.state):"VerifyScreen");_.navigate(a)}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.props.firebase.firebaseUser!=e.firebase.firebaseUser&&this.checkData(this.props)}},{key:"componentDidMount",value:function(){var e=this;this.props.setFirebaseError(null),this.props.getUser(null),this.checkData(this.props),this.getData();var t=this.props.navigation.addListener("willFocus",(function(t){e.props.setViewLoading(!1),e.props.setViewError(null)}));this.setState({FocusSubscription:t})}},{key:"componentWillUnmount",value:function(){this.state.FocusSubscription&&this.state.FocusSubscription.remove()}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=this.state.ISLOADPAGE;return r.a.createElement(_t.a,{style:[va.mainContainer]},t?r.a.createElement(_t.a,{style:[va.fillRowCenter,va.center,va.logoContainer]},r.a.createElement(ea.a,{style:va.fullSize,source:ma.Hexa_icon,resizeMode:"contain"})):r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fillColMain]},r.a.createElement(ka.a,{style:Da.text},"This page contains an error."),r.a.createElement(ka.a,{style:Da.text},"If you are going back, please press back again.")),(e||t)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"}))}}]),a}(n.Component),kn=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(V.setFirebaseError(t))},setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},clearDataMem:function(){return e(V.actionStarting(le.CLEAR,ce.USERSDATA))},getUser:function(t){return e(V.actionStarting(le.FETCH,ce.USERSDATA,{UserId:t}))}}}))(Cn);function Tn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var jn,In=function(e){Xt()(a,e);var t=Tn(a);function a(e){var n;return zt()(this,a),(n=t.call(this,e)).state={Email:"",Pass:"",CreateUser:!1},n}return qt()(a,[{key:"getData",value:function(){}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&(this.checkData(this.props),this.props.firebase.viewError!=e.firebase.viewError&&this.forceUpdate())}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.viewError;return r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fillColMain]},a?r.a.createElement(ka.a,{style:Da.error},a):r.a.createElement(r.a.Fragment,null),this.state.CreateUser?r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fillColMain]},r.a.createElement(_t.a,{style:[va.borderContainer,va.midWidth,{marginBottom:20}]},r.a.createElement(Na.b,{label:"Email",style:Da.input,onChangeText:function(t){e.setState({Email:t})},value:this.state.Email}),r.a.createElement(Na.b,{label:"Password",style:Da.input,onChangeText:function(t){e.setState({Pass:t})},value:this.state.Pass})),r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth]},r.a.createElement(La,{Text:"Create User",onPress:function(){e.state.Email&&""!==e.state.Email?e.state.Pass&&""!==e.state.Pass?(e.props.setViewLoading(!0),e.props.createUser(e.state.Email,e.state.Pass)):e.props.setFirebaseError("Password is needed"):e.props.setFirebaseError("Email is needed")}}))):r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fillColMain]},r.a.createElement(_t.a,{style:[va.borderContainer,va.midWidth,{marginBottom:20}]},r.a.createElement(Na.b,{label:"Username",style:Da.input,onChangeText:function(t){e.setState({Email:t})},value:this.state.Email}),r.a.createElement(Na.b,{label:"Password",style:Da.input,onChangeText:function(t){e.setState({Pass:t})},value:this.state.Pass}),r.a.createElement(La,{Text:"Login",icon:ma.User,onPress:function(){e.state.Email&&""!==e.state.Email?"CLEAR"===e.state.Email?e.props.clearDataMem():e.state.Pass&&""!==e.state.Pass?(e.props.setViewLoading(!0),e.props.signIN(e.state.Email,e.state.Pass)):e.props.setViewError("Password is needed"):e.props.setViewError("Email is needed")}})),r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth]},r.a.createElement(La,{Text:"Send reset password",onPress:function(){e.props.setViewError(null),e.state.Email?(e.props.setViewLoading(!0),e.props.resetPass(e.state.Email)):e.props.setViewError("Please provide an Email")}}),r.a.createElement(La,{Text:"Create New User",onPress:function(){e.props.setViewError(null),e.setState({Email:"",Pass:"",CreateUser:!0})}}))),(t||this.props.firebase.viewIsLoading)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"})))}}]),a}(n.Component),An=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},clearDataMem:function(){return e(V.actionStarting(le.CLEAR,ce.USERSDATA))},signIN:function(t,a){return e(V.actionStarting(le.SIGN,ce.USERSDATA,{Email:t,Pass:a}))},resetPass:function(t){return e(V.actionStarting(le.CREATE,ce.USERS,{Email:t}))},createUser:function(t,a){return e(V.actionStarting(le.CREATE,ce.USERS,{Email:t,Pass:a}))}}}))(In);function xn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}"web"!==te.a.OS?a(225).default:(jn=a(78).default,a(172).default);var Ln=function(e){Xt()(a,e);var t=xn(a);function a(e){var n;return zt()(this,a),(n=t.call(this,e)).state={},n}return qt()(a,[{key:"setData",value:function(e){}},{key:"getData",value:function(){}},{key:"checkData",value:function(e){var t=this;if(e.firebase&&e.firebase.firebaseUser){var a=jn.auth().currentUser;!a||e.firebase.firebaseUser.emailVerified||e.firebase.viewIsLoading||a.reload().then((function(e){a.emailVerified&&(t.props.setViewLoading(!0),t.props.setUser(a.emailVerified),console.log("Verified"),_.navigate("AuthStack"))})),e.firebase.firebaseUser.emailVerified&&_.navigate("AuthStack")}}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.checkData(this.props)}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.firebaseUser,n=this.props.firebase.viewError;return r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fillColMain]},n?r.a.createElement(ka.a,{style:Da.error},n):r.a.createElement(r.a.Fragment,null),r.a.createElement(_t.a,null,r.a.createElement(ka.a,null,"Please verify your account by accepting the email, sent to your current account"),r.a.createElement(ka.a,null,"This page will not refresh itself..."),r.a.createElement(La,{Text:"Resend verification",onPress:function(){console.log("send",a,e.state.User),a&&e.state.User&&e.state.User.sendEmailVerification()}}),r.a.createElement(La,{Text:"Refresh",onPress:function(){e.checkData(e.props,e.state)}}))),(t||this.props.firebase.viewIsLoading)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"}))}}]),a}(n.Component),Rn=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},setFirebaseError:function(t){return e(V.setFirebaseError(t))},setUser:function(t){return e(V.actionStarting(le.UPDATE,ce.USERS,{emailVerified:t}))}}}))(Ln);function Fn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var Nn=function(e){Xt()(a,e);var t=Fn(a);function a(e){var n;return zt()(this,a),(n=t.call(this,e)).state={Farm:"Test",Sections:1,Pens:1},n}return qt()(a,[{key:"getData",value:function(){}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&(this.checkData(this.props),this.props.firebase.viewError!=e.firebase.viewError&&this.forceUpdate(),this.props.firebase.firebaseUser!==e.firebase.firebaseUser&&e.firebase.firebaseUser.state!==ne&&_.nacigationPop())}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.viewError;return r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fillColMain]},a?r.a.createElement(ka.a,{style:Da.error},a):r.a.createElement(r.a.Fragment,null),r.a.createElement(_t.a,{style:[va.borderContainer,va.midWidth,{marginBottom:20}]},r.a.createElement(Na.b,{label:"Farm Name",style:Da.input,onChangeText:function(t){t?De(t)&&e.setState({Farm:t}):e.setState({Farm:t})},value:this.state.Farm}),r.a.createElement(Na.b,{label:"Number of Sections",style:Da.input,onChangeText:function(t){isNaN(t)||e.setState({Sections:t})},value:this.state.Sections}),r.a.createElement(Na.b,{label:"Number of Pens in Sections",style:Da.input,onChangeText:function(t){isNaN(t)||e.setState({Pens:t})},value:this.state.Pens})),r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth]},r.a.createElement(La,{Text:"Create User",onPress:function(){var t={},a={},n={};if(e.state.Farm&&""!==e.state.Farm)if(e.state.Sections&&isNaN(e.state.Sections))e.props.setViewError("Number of Sections have to be a number");else if(e.state.Pens&&isNaN(e.state.Pens))e.props.setViewError("Number of Pens in Sections have to be a number");else{t={state:re,farms:{}};var r,i,s=1;for(r=1;r<=e.state.Sections;r++){var o={};for(i=1;i<=e.state.Pens;i++)n["Pen_"+s]={section:"Section_"+r},o["Pen_"+s]=!0,s++;a["Section_"+r]={pens:o}}e.props.setViewLoading(!0),e.props.createUserData(t,e.state.Farm,a,n)}else e.props.setViewError("Farm name is needed")}}))),(t||this.props.firebase.viewIsLoading)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"}))}}]),a}(n.Component),Mn=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},createUserData:function(t,a,n,r){return e(V.actionStarting(le.CREATE,ce.USERSDATA,{UserData:t,Farms:{name:a},Sections:n,Pens:r}))}}}))(Nn);function Wn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Un=Object(Ht.a)({UserLoadingScreen:{screen:kn,navigationOptions:function(){return{title:"User loading"}}},LoginUser:{screen:An,navigationOptions:function(){return{title:"User Login",headerLeft:function(){return r.a.createElement(_t.a,{style:{padding:6,paddingLeft:15}},r.a.createElement(Na.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){return _.navigate("MainStack")}}))}}}},VerifyScreen:{screen:Rn,navigationOptions:function(){return{title:"User Verification"}}},CreateUserData:{screen:Mn,navigationOptions:function(){return{title:"Create Data"}}}},{initialRouteName:"UserLoadingScreen",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerTitleStyle:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Da.navigationHeader),headerLeft:function(){return r.a.createElement(_t.a,{style:{padding:6,paddingLeft:15}},r.a.createElement(Na.a,{type:"ionicon",name:"md-arrow-back",size:25,color:"black",onPress:function(){return _.navigate("MainStack")}}))},headerRight:function(){return r.a.createElement(_t.a,{style:{padding:6}})}}});ta.a.create({});function Vn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var Bn=function(e){Xt()(a,e);var t=Vn(a);function a(e){var n;return zt()(this,a),(n=t.call(this,e)).state={ISLOADPAGE:!0},n}return qt()(a,[{key:"getData",value:function(){}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&(this.checkData(this.props),this.props.firebase.viewError!=e.firebase.viewError&&this.forceUpdate())}},{key:"render",value:function(){var e=this,t=this.props.firebase,a=t.firebaseIsLoading,n=t.firebaseErrorMessage,i=(this.props.firebase.viewError,t.firebaseUser);return r.a.createElement(za.a,{style:[va.fullSize,va.fill]},r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fillColMain]},n?r.a.createElement(ka.a,{style:Da.error},n):r.a.createElement(r.a.Fragment,null),i?r.a.createElement(_t.a,{style:va.textContainer},r.a.createElement(ka.a,{style:Da.text},"Welcome: ",i.displayName?i.displayName:i.email)):r.a.createElement(r.a.Fragment,null),r.a.createElement(Ra,{Texts:["Dashboard","Pens","Batchs","Growth curves","Operations","AutoPigs","Feeding","Pigs"],Images:[ma.DashBoard,ma.Pens,ma.Section,ma.GCurves,ma.System,ma.AutoPig,ma.Feed,ma.Sow],onPress:function(e){switch(e.text){case"Dashboard":_.navigate("UserDashBoard");break;case"Pens":_.navigate("UserPens");break;case"Batchs":_.navigate("UserBatchs");break;case"Growth curves":_.navigate("UserCurves");break;case"Operations":_.navigate("UserOperations");break;case"AutoPigs":case"Feeding":break;case"Pigs":_.navigate("UserPigs")}}}),i&&"admin"===i.state?r.a.createElement(r.a.Fragment,null):r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth]},r.a.createElement(La,{Text:"LogOut",onPress:function(){e.props.logOut()}}))),(a||this.props.firebase.viewIsLoading)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"})))}}]),a}(n.Component),_n=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(V.setFirebaseError(t))},setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},logOut:function(){return e(V.actionStarting(le.SIGN,ce.USERSDATA))}}}))(Bn),Hn=a(36);function Gn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var zn=function(e){Xt()(a,e);var t=Gn(a);function a(e){var n;zt()(this,a);var r=(n=t.call(this,e)).setData(e),i=r.Name,s=r.Manager,o=r.Mail,c=(r.SectionsList,r.BatchList),l=r.MaxCap,u=r.CurCap;return n.state={farmName:i,farmManager:s,farmMail:o,BatchList:c,MaxCap:l,CurCap:u},n}return qt()(a,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=this.props.firebase.firebaseUser,n="Not set",r="Not set",i="Not set";if(t&&t.farms&&a.farms&&t.farms[Object.keys(a.farms)[0]]){var s=t.farms[Object.keys(a.farms)[0]];n=s.name?s.name:n,r=s.name?s.manager:r,i=s.name?s.email:i}var o={},c=0,l=0;return t.batchs&&Object.keys(t.batchs).filter((function(e){return"__jsogObjectId"!==e&&"update_time"!==e})).map((function(e){var a=t.batchs[e],n=Ce(a,t);if(n){n.StartDate;var r=n.EndDate,i=n.TargetWeight,s=(n.PenCount,n.Animals),u=n.AverageWeight;n.AverageGrowth,n.isClosed,n.isVirtual;a.pens&&(c+=1*Object.keys(a.pens).reverse().filter((function(e){return"__jsogObjectId"!==e})).length),l+=s,a.count=s,a.weight=u,a.target=i,a.End=r,o[e]=a}})),0===c&&c++,{Name:n,Manager:r,Mail:i,BatchList:o,MaxCap:c,CurCap:l}}},{key:"getData",value:function(){var e=this.props.firebase.localDataStore;e.sections||(e.sections={}),e.pens||(e.pens={}),this.props.getFarm(),this.props.getSections(e.sections?e.sections.update_time:null),this.props.getPens(e.pens?e.pens.update_time:null),this.props.getBatch(),this.props.getWeights(e.weighings?e.weighings.update_time:null,e.sections),this.props.getCurve()}},{key:"checkData",value:function(e){}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&e.firebase.localDataStore)){var n=this.props.firebase.firebaseUser,r=this.props.firebase.localDataStore;if(r.farms&&n.farms&&r.farms[Object.keys(n.farms)[0]]){var i=r.farms[Object.keys(n.farms)[0]];if(this.state.farmName!==i.name||this.state.farmManager!==i.manager||this.state.farmMail!==i.email||r.batchs&&JSON.stringify(this.state.BatchList)!==JSON.stringify(r.batchs)||r.graphs&&r.graphs!==e.firebase.localDataStore.graphs){var s=this.setData(this.props),o=s.Name,c=s.Manager,l=s.Mail,u=s.BatchList,f=s.MaxCap,p=s.CurCap;this.setState({farmName:o,farmManager:c,farmMail:l,BatchList:u,MaxCap:f,CurCap:p},(function(){a.forceUpdate()}))}}}}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.localDataStore,n=0;if(this.state.BatchList){var i=Object.keys(this.state.BatchList).filter((function(t){return"__jsogObjectId"!==t&&"update_time"!==t&&(!e.state.BatchList[t].state||"Closed"!==e.state.BatchList[t].state)}));i.forEach((function(t){var a=e.state.BatchList[t];n+=a.weight/a.target*100})),n=n/(100*i.length)*100}return r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[va.contentContainer,va.fullWidth,va.fill]},r.a.createElement(Fa,{Text:"Farm description"}),r.a.createElement(_t.a,{style:[va.buttonContainer,va.fullWidth,{height:110}]},r.a.createElement(Ga,{texts:["Farm name","Manager","E-mail"],datas:[this.state.farmName,this.state.farmManager,this.state.farmMail]})),r.a.createElement(_t.a,{style:{height:20}}),r.a.createElement(Qa,{text:"Farm capacity: "+this.state.CurCap+" of "+this.state.MaxCap,progress:this.state.CurCap/this.state.MaxCap*100}),r.a.createElement(Qa,{text:"Farm performance:",progress:n}),this.state.BatchList?r.a.createElement(_t.a,{style:[va.borderContainer,va.fullWidth,{borderWidth:0,marginTop:10}]},r.a.createElement(ka.a,null,"Batches:"),r.a.createElement(Hn.a,{data:Object.keys(this.state.BatchList).filter((function(t){return"__jsogObjectId"!==t&&"update_time"!==t&&(!e.state.BatchList[t].state||"Closed"!==e.state.BatchList[t].state)})),renderItem:function(t){var n=t.item,i=(t.i,e.state.BatchList[n]),s=Te(i,ke(i,a.graphs)),o=i.End,c=pa;o>s&&(c=ca);var l=i.count;l||(l=0);var u=i.weight/i.target*100;o=new Date(o).getDate()+"/"+(new Date(o).getMonth()+1)+"/"+new Date(o).getFullYear();var f=new Date(i.time).getDate()+"/"+(new Date(i.time).getMonth()+1)+"/"+new Date(i.time).getFullYear();return r.a.createElement(Qa,{text:n+" Startdate: "+f+" EndForcast: "+o+", "+l+" pigs",progress:u,color:c})},keyExtractor:function(e,t){return t.toString()}})):r.a.createElement(r.a.Fragment,null),r.a.createElement(La,{Text:"Clear local datastore",onPress:function(){e.props.clearDataMem(),e.getData()}})),(t||this.props.firebase.viewIsLoading)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"}))}}]),a}(n.Component),Jn=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(V.setFirebaseError(t))},setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},clearDataMem:function(){return e(V.actionStarting(le.CLEAR,ce.USERSDATA))},getFarm:function(){return e(V.actionStarting(le.FETCH,ce.FARMS,{}))},getSections:function(t){return e(V.actionStarting(le.FETCH,ce.SECTIONS,{DataTime:t}))},getPens:function(t){return e(V.actionStarting(le.FETCH,ce.PENS,{DataTime:t}))},getBatch:function(){return e(V.actionStarting(le.FETCH,ce.BATCHS,{}))},getCurve:function(){return e(V.actionStarting(le.FETCH,ce.GRAPH,{}))},getWeights:function(t,a){return e(V.actionStarting(le.FETCH,ce.WEIGHING,{DataTime:t,MemSections:a}))}}}))(zn),qn=a(76);function Yn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Xn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Yn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Qn=ta.a.create({loading:{position:"absolute",left:0,right:0,top:0,bottom:0,alignItems:"center",justifyContent:"center",backgroundColor:"#F5FCFF88"},textContainer:Xn(Xn({},da.normal),{},{marginBottom:ga.normal}),inputContainer:{marginBottom:ga.small},input:Xn(Xn({},da.normal),{},{height:24})}),Zn=a(93);function Kn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Kn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function er(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var tr=function(e){Xt()(a,e);var t=er(a);function a(e){var n;zt()(this,a);var r=(n=t.call(this,e)).setData(e).PigsList;return n.state={PigsList:r,PigTag:""},n}return qt()(a,[{key:"getData",value:function(){var e=this.props.firebase.localDataStore;e.pens||(e.pens={}),this.props.getPigs(),this.props.getPens(e.pens.update_time)}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=null;return t&&t.pigs&&(a=Se(t.pigs)),{PigsList:a}}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase&&this.props.firebase.localDataStore&&this.props.firebase.localDataStore.pigs&&JSON.stringify(this.state.PigsList)!==JSON.stringify(Se(this.props.firebase.localDataStore.pigs)))){var a=this.setData(this.props).PigsList;this.setState({PigsList:a})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.localDataStore;return r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[va.contentContainer,va.fullWidth,va.fill]},r.a.createElement(_t.a,{style:[va.fill,va.buttonContainer,va.fullWidth,ga.bottomMargin,va.column]},r.a.createElement(nr,{connectedState:null}),r.a.createElement(rr,{DeviceData:null}),this.state.PigsList?r.a.createElement(_t.a,{style:[va.fill,va.borderContainer,ga.smallHorizontalPadding,ga.smallVerticalPadding,{maxWidth:800,marginTop:10}]},r.a.createElement(qn.a,{style:ir.container},r.a.createElement(Hn.a,{data:Object.keys(this.state.PigsList),renderItem:function(t){var n=t.item,i="-",s="-";if(e.state.PigsList[n].pen&&0!=e.state.PigsList[n].pen&&(i=e.state.PigsList[n].pen,a.pens&&a.pens[i])){var o=a.pens[i];s=o.section}return r.a.createElement(_t.a,{style:[va.fill,va.rowCenter,va.fullWidth,{height:35}]},r.a.createElement(Va,{Title:n,itemStyle:[{height:35}],onPress:function(){e.props.setData(n,s,i),_.navigate("DataDisplay")}}),r.a.createElement(Va,{itemStyle:[{width:70,height:35,justifyContent:"center"}],Title:i,onPress:function(){e.setState({PigTag:n})}}),r.a.createElement(Va,{itemStyle:[{width:90,height:35}],Title:s,onPress:function(){e.setState({PigTag:n})}}))},keyExtractor:function(e){return"PigTag_"+e}}))):r.a.createElement(r.a.Fragment,null),r.a.createElement(Na.b,{label:"Pig-tag:",containerStyle:[{borderWidth:1,marginTop:10}],style:[Da.input],onChangeText:function(t){e.setState({PigTag:t})},value:this.state.PigTag}),r.a.createElement(Ya,{pig:!0,pigTag:this.state.PigTag,PigsList:this.state.PigsList}))),(t||this.props.firebase.viewIsLoading)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"}))}}]),a}(n.Component),ar=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},getPens:function(t){return e(V.actionStarting(le.FETCH,ce.PENS,{DataTime:t}))},getPigs:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e(V.actionStarting(le.FETCH,ce.PIGS,{TagId:t}))},setData:function(t,a,n){return e(V.setCurrentData({pigId:t,type:ce.PIGS,section:a,dataId:n}))}}}))(tr),nr=function(e){return"ios"===te.a.OS||"android"===te.a.OS?r.a.createElement(_t.a,{style:[va.buttonContainer,va.fullWidth,ga.bottomMargin,va.rowCenter]},r.a.createElement(_t.a,{style:[va.fill,va.fullWidth,va.rowMain]},r.a.createElement(_t.a,{style:[va.fill,va.column,{backgroundColor:"red"}]},r.a.createElement(_t.a,{style:[va.fill,va.row,va.fullWidth,{backgroundColor:"blue"}]},r.a.createElement(_t.a,{style:{justifyContent:"center",alignItems:"center"}})),r.a.createElement(_t.a,{style:[va.fill,va.row,va.fullWidth]},r.a.createElement(ka.a,null,"Messages"),r.a.createElement(ka.a,null,"Errors"))),r.a.createElement(_t.a,{style:[va.fill,va.fullWidth,va.rowCenter,{maxWidth:150}]},e.connectedState===ConnectionState.CONNECTED?r.a.createElement(_t.a,{style:$n($n({},ir.circle),{},{backgroundColor:"green",justifyContent:"center",alignItems:"center"})},r.a.createElement(ka.a,null,"Device is"),r.a.createElement(ka.a,null,"connected")):r.a.createElement(_t.a,{style:$n($n({},ir.circle),{},{backgroundColor:"red",justifyContent:"center",alignItems:"center"})},r.a.createElement(ka.a,null,"No Device"),r.a.createElement(ka.a,null,"connected"))))):r.a.createElement(r.a.Fragment,null)},rr=function(e){if("ios"===te.a.OS||"android"===te.a.OS){var t=Object(i.c)(),a=e.DeviceData;return r.a.createElement(_t.a,{style:{flexDirection:"row",justifyContent:"space-between",borderWidth:1,borderColor:"#000",borderRadius:25,paddingHorizontal:15,paddingVertical:10,marginBottom:10}},r.a.createElement(_t.a,{style:(Qn.textContainer,{paddingTop:10})},a&&a.tagid?r.a.createElement(_t.a,{style:{marginBottom:5}},r.a.createElement(ka.a,null,"TAG Id:"),r.a.createElement(ka.a,null,a.tagid)):r.a.createElement(r.a.Fragment,null),a&&a.FatLayers&&a.FatLayers>0?r.a.createElement(_t.a,{style:{marginBottom:5}},r.a.createElement(ka.a,null,"Layers received: ",a.FatLayers),r.a.createElement(ka.a,null,"Layer 1: ",a.FatL1),r.a.createElement(ka.a,null,"Layer 2: ",a.FatL2),r.a.createElement(ka.a,null,"Layer 3: ",a.FatL3)):r.a.createElement(r.a.Fragment,null)),a&&a.tagid?r.a.createElement(_t.a,{style:{flexDirection:"row",justifyContent:"space-between"}},known?r.a.createElement(La,{buttonStyle:{minWidth:0},Text:"Open data",onPress:function(){t(V.setCurrentData({pigId:known,type:ce.PIGS})),_.navigate("DataDisplay")}}):r.a.createElement(r.a.Fragment,null),r.a.createElement(La,{buttonStyle:{minWidth:0},Text:"Save Tag",onPress:function(){}})):r.a.createElement(r.a.Fragment,null))}return r.a.createElement(r.a.Fragment,null)},ir=ta.a.create({circle:{width:125,height:125,borderRadius:62.5,marginTop:ga.tiny,marginLeft:ga.tiny}});function sr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var or=function(e){Xt()(a,e);var t=sr(a);function a(e){var n;zt()(this,a);var r=(n=t.call(this,e)).setData(e),i=r.Sections,s=r.Weighings,o=r.Mid;return n.state={Mid:o,Sections:i,Weighings:s},n}return qt()(a,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,a={};t&&t.sections&&(a=Se(e.firebase.localDataStore.sections));var n=0,r={};if(t&&t.weighings)for(var i in r=t.weighings,t.weighings)if(t.weighings[i]&&Object.keys(t.weighings[i]).length>0){var s=t.weighings[i][Object.keys(t.weighings[i])[0]].weight;s&&(n>0?n=(n+s)/2:n+=s)}return{Sections:a,Weighings:r,Mid:n}}},{key:"getData",value:function(){var e=this.props.firebase.localDataStore;e.sections||(e.sections={}),e.pens||(e.pens={}),e.weighings||(e.weighings={}),e.batchs||(e.batchs={}),e.graphs||(e.graphs={}),this.props.getSections(e.sections.update_time),this.props.getPens(e.pens.update_time),this.props.getWeights(e.weighings.update_time,e.sections),this.props.getBatch(e.batchs.update_time),this.props.getCurve(e.graphs.update_time)}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&(this.props.firebase.localDataStore.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(Se(this.props.firebase.localDataStore.sections))||this.props.firebase.localDataStore.weighings&&JSON.stringify(this.state.Weighings)!==JSON.stringify(Se(this.props.firebase.localDataStore.weighings))))){var a=this.setData(this.props),n=a.Sections,r=a.Mid;this.setState({Mid:r,Sections:n})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.localDataStore;return r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[va.fullSize,va.fill]},this.state.Sections?r.a.createElement(za.a,{style:[ga.verticalMargin,{paddingRight:5}]},r.a.createElement(Zn.b,{itemDimension:70,spacing:10,sections:Object.keys(this.state.Sections).filter((function(e){return"update_time"!==e})).map((function(t){var a=Se(e.state.Sections[t].pens);return{title:t,data:Object.keys(a)}})),renderSectionHeader:function(e){var t=e.section;return r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth,{marginBottom:0}]},r.a.createElement(La,{Text:t.title,buttonStyle:{backgroundColor:ha},onPress:function(){}}))},renderItem:function(t){var n=t.item,i=ra,s=null,o=Ae(a,n);if(null!=o&&(i=ua),console.log(n,o),o&&o.Now){var c=o.Batch,l=2,u=5;c.datas.devianceMin&&(l=c.datas.devianceMin),c.datas.devianceMax&&(u=c.datas.devianceMax);var f=o.TempEx,p=o.Now;i=f&&p<f&&p<f-f/100*l?ca:f&&p>f&&p>f+f/100*u?la:oa,s=Math.round(100*p)/100}return r.a.createElement(ja.a,{style:[va.borderContainer,{width:70,height:70,alignItems:"center",justifyContent:"center",backgroundColor:i}],onPress:function(){e.props.setCurrentData(n),_.navigate("DataDisplay")}},r.a.createElement(ka.a,null,n),s?r.a.createElement(ka.a,null,s+" kg"):r.a.createElement(r.a.Fragment,null))}})):r.a.createElement(_t.a,{style:[va.fillRowCenter,va.center,va.logoContainer]},r.a.createElement(ea.a,{style:va.fullSize,source:ma.Hexa_icon,resizeMode:"contain"}))),(t||this.props.firebase.viewIsLoading)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"}))}}]),a}(n.Component),cr=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},getSections:function(t){return e(V.actionStarting(le.FETCH,ce.SECTIONS,{DataTime:t}))},getPens:function(t){return e(V.actionStarting(le.FETCH,ce.PENS,{DataTime:t}))},getWeights:function(t,a){return e(V.actionStarting(le.FETCH,ce.WEIGHING,{DataTime:t,MemSections:a}))},getBatch:function(t){return e(V.actionStarting(le.FETCH,ce.BATCHS,{DataTime:t}))},getCurve:function(t){return e(V.actionStarting(le.FETCH,ce.GRAPH,{GraphId:"",DataTime:t}))},setCurrentData:function(t){return e(V.setCurrentData({type:ce.PENS,penId:t}))}}}))(or),lr=a(32),ur=(a(618),a(360)),fr=a(70);function pr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var hr=lr.a.get("window"),dr=lr.a.get("screen"),gr=function(e){Xt()(a,e);var t=pr(a);function a(e){var n;zt()(this,a),(n=t.call(this,e)).onChange=function(e){var t=e.window,a=e.screen;n.setState({dimensions:{window:t,screen:a}})},n.onMultiChange=function(e){var t=Object(fr.xorBy)(n.state.selectedPens,[e],"id");n.setState({selectedPens:t})};var r=n.setData(e),i=r.BatchList,s=r.freePens;return n.state={dimensions:{window:hr,screen:dr},BatchList:i,Display:0,BatchName:"",ShowPicker:!1,StartD:(new Date).getTime(),Curve:"",DevianceMin:"",DevianceMax:"",freePens:s,avaiblePens:s,selectedPens:[]},n}return qt()(a,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=t.batchs,n=[];return a&&t.sections&&Object.keys(t.sections).forEach((function(e){if(t.sections[e].pens){Object.keys(t.sections[e].pens).filter((function(e){return"__jsogObjectId"!==e&&"update_time"!==e})).forEach((function(t){var r=!0;if(Object.keys(a).forEach((function(e){a[e].state&&"Closed"===a[e].state||a[e].pens&&a[e].pens[t]&&!a[e].pens[t].enddate&&(r=!1)})),r){var i={item:t,id:e+"_"+t};n.push(i)}}))}})),{BatchList:a,freePens:n}}},{key:"getData",value:function(){var e=this.props.firebase.localDataStore;e.sections||(e.sections={}),e.pens||(e.pens={}),this.props.getBatch(e.batchs?e.batchs.update_time:null),this.props.getSections(e.sections?e.sections.update_time:null),this.props.getPens(e.pens?e.pens.update_time:null),this.props.getCurve()}},{key:"checkData",value:function(e){}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&(this.props.firebase.localDataStore.batchs&&JSON.stringify(this.state.BatchList)!==JSON.stringify(this.props.firebase.localDataStore.batchs)||this.props.firebase.localDataStore.pens&&JSON.stringify(this.state.pens)!==JSON.stringify(this.props.firebase.localDataStore.pens)))){var a=this.setData(this.props),n=a.BatchList,r=a.freePens;this.setState({freePens:r,BatchList:n})}}},{key:"componentDidMount",value:function(){lr.a.addEventListener("change",this.onChange),this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentWillUnmount",value:function(){lr.a.removeEventListener("change",this.onChange)}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.viewError,n=this.props.firebase.localDataStore,i=this.state.dimensions.window.width>900,s="ios"===te.a.OS||"android"===te.a.OS||!i;return r.a.createElement(za.a,{style:[ga.verticalMargin,{paddingRight:5}]},r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fill]},a?r.a.createElement(ka.a,{style:Da.error},a):r.a.createElement(r.a.Fragment,null),0===this.state.Display?r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,{marginHorizontal:0,paddingHorizontal:-20}]},this.state.BatchList?r.a.createElement(_t.a,{style:[va.fill,va.fullWidth,ga.smallHorizontalPadding,ga.smallVerticalPadding,{maxWidth:800,marginTop:10}]},r.a.createElement(Hn.a,{scrollEnabled:!0,style:[va.fill],data:Object.keys(this.state.BatchList).filter((function(e){return"__jsogObjectId"!==e&&"update_time"!==e})),renderItem:function(t){var a=t.item,n=(t.i,a);return e.state.BatchList[a]&&e.state.BatchList[a].state&&"Closed"===e.state.BatchList[a].state&&(n+="  Closed"),r.a.createElement(La,{Text:n,onPress:function(){var t="default";e.state.BatchList[a]&&e.state.BatchList[a].gcurve&&"string"!==typeof(t=e.state.BatchList[a].gcurve)&&(t=null),e.props.setCurrentData(a,t),_.navigate("DataPlotter")}})},keyExtractor:function(e,t){return t.toString()}})):r.a.createElement(r.a.Fragment,null),r.a.createElement(_t.a,{style:[va.buttonContainer,va.borderContainer,va.midWidth]},r.a.createElement(La,{Text:"New Batch",onPress:function(){var t=0;n&&n.graphs&&(t=Object.keys(n.graphs).filter((function(e){return"__jsogObjectId"!==e&&"update_time"!==e}))[0]),e.setState({Display:1,DevianceMin:String(2),DevianceMax:String(2),Curve:t,freePens:e.state.freePens,avaiblePens:e.state.freePens,selectedPens:[]})}}),this.state.BatchList?r.a.createElement(La,{Text:"Edit or Close Batch",onPress:function(){var t=Object.keys(e.state.BatchList).filter((function(t){return"__jsogObjectId"!==t&&"update_time"!==t&&(!e.state.BatchList[t].state||"Closed"!==e.state.BatchList[t].state)}))[0],a=e.state.BatchList[t];if(a){var r=[],i=Se(a.pens);Object.keys(i).forEach((function(e){if(!a.pens[e].enddate&&n.pens&&n.pens[e]){var t=n.pens[e],i={};i.item=e,i.id=t.section+"_"+e,r.push(i)}})),e.setState({Display:2,BatchName:t,StartD:a.time,Curve:a.gcurve,DevianceMin:String(a.datas.devianceMin),DevianceMax:String(a.datas.devianceMax),avaiblePens:e.state.freePens.concat(r),selectedPens:r})}}}):r.a.createElement(r.a.Fragment,null))):r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,{marginHorizontal:0,paddingHorizontal:-20}]},1===this.state.Display?r.a.createElement(Na.b,{label:"BatchName",containerStyle:[{borderWidth:1,marginTop:10}],style:[Da.input],onChangeText:function(t){t?De(t)&&e.setState({BatchName:t}):e.setState({BatchName:t})},value:this.state.BatchName}):r.a.createElement(_t.a,{style:[va.borderContainer,va.fullWidth,{height:60,borderRadius:0,alignItems:"center"}]},r.a.createElement(Ka.a,{mode:"dropdown",selectedValue:this.state.BatchName,style:[va.fullWidth,{height:50,justifyContent:"flex-end"}],onValueChange:function(t,a){if(e.state.BatchList&&e.state.BatchList[t]){var r=e.state.BatchList[t],i=[],s=Se(r.pens);Object.keys(s).forEach((function(e){if(!r.pens[e].enddate&&n.pens&&n.pens[e]){var t=n.pens[e],a={};a.item=e,a.id=t.section+"_"+e,i.push(a)}})),e.setState({BatchName:t,StartD:r.time,Curve:r.gcurve,DevianceMin:String(r.datas.devianceMin),DevianceMax:String(r.datas.devianceMax),avaiblePens:e.state.freePens.concat(i),selectedPens:i})}}},Object.keys(this.state.BatchList).filter((function(t){return"__jsogObjectId"!==t&&"update_time"!==t&&(!e.state.BatchList[t].state||"Closed"!==e.state.BatchList[t].state)})).map((function(e,t){return r.a.createElement(Ka.a.Item,{label:e,value:e,key:t})})))),r.a.createElement(_t.a,{style:[va.fullWidth,s?{}:va.row,{zIndex:999}]},r.a.createElement(_t.a,{style:[s?{}:va.halvWidth,{borderWidth:1,marginTop:10,paddingHorizontal:5,paddingTop:0,borderRadius:0,alignItems:"center",zIndex:1}]},r.a.createElement(_t.a,{style:[va.fullWidth,{alignItems:"flex-start",marginBottom:-5}]},r.a.createElement(ka.a,{style:[Da.text,{marginHorizontal:5,marginTop:2,color:fa,fontSize:15,fontWeight:"bold"}]},"Start date:")),r.a.createElement(_t.a,{style:[va.fullWidth,s?{marginBottom:10}:{},{alignItems:"flex-start"}]},r.a.createElement(tn,{Selected:this.state.StartD,onValueChange:function(t){e.setState({StartD:t.getTime()})}}))),r.a.createElement(_t.a,{style:[s?{}:va.halvWidth,{borderWidth:1,marginTop:10,paddingHorizontal:5,paddingTop:0,borderRadius:0,alignItems:"center",zIndex:1}]},r.a.createElement(_t.a,{style:[va.fullWidth,{alignItems:"flex-start",marginBottom:-5}]},r.a.createElement(ka.a,{style:[Da.text,{marginHorizontal:5,marginTop:2,color:fa,fontSize:15,fontWeight:"bold"}]},"Growth curve:")),r.a.createElement(_t.a,{style:[va.fullWidth,{alignItems:"center"}]},r.a.createElement(Ka.a,{mode:"dropdown",selectedValue:this.state.Curve,style:[va.fullWidth,{height:30}],onValueChange:function(t,a){e.setState({Curve:t})}},Object.keys(n.graphs).filter((function(e){return"__jsogObjectId"!==e&&"update_time"!==e})).map((function(e,t){return r.a.createElement(Ka.a.Item,{label:e,value:e,key:t})})))))),r.a.createElement(_t.a,{style:[va.fullWidth,va.row]},r.a.createElement(Na.b,{label:"Deviance Min alert procentage",containerStyle:[va.halvWidth,{borderWidth:1,marginTop:10}],style:[Da.input,{marginBottom:-10}],onChangeText:function(t){isNaN(t)&&!t.endsWith(".")||e.setState({DevianceMin:t})},value:this.state.DevianceMin}),r.a.createElement(Na.b,{label:"Deviance Max alert procentage",containerStyle:[va.halvWidth,{borderWidth:1,marginTop:10}],style:[Da.input,{marginBottom:-10}],onChangeText:function(t){isNaN(t)&&!t.endsWith(".")||e.setState({DevianceMax:t})},value:this.state.DevianceMax})),r.a.createElement(_t.a,{style:[va.fullWidth,{borderWidth:1,marginTop:10,paddingHorizontal:10,paddingTop:5}]},r.a.createElement(ur.a,{label:"Pens in Batch..",labelStyle:{color:fa,fontSize:15,fontWeight:"bold"},optionsLabelStyle:{minWidth:100,color:"black",fontSize:12,fontWeight:"bold"},options:this.state.avaiblePens,selectedValues:this.state.selectedPens,onMultiSelect:this.onMultiChange,onTapClose:this.onMultiChange,isMulti:!0})),r.a.createElement(_t.a,{style:[va.buttonContainer,va.borderContainer,va.midWidth,{marginTop:10}]},2===this.state.Display?r.a.createElement(La,{Text:"Close Batch",onPress:function(){var t=n.batchs[e.state.BatchName];if(t){var a=Ce(t,n),r=(a.StartDate,a.EndDate,a.TargetWeight,a.PenCount,a.Animals);a.AverageWeight,a.AverageGrowth,a.isClosed,a.isVirtual;if(r)e.props.setViewError("The batch still contains active pens, please clear pens before closing the batch");else{var i={name:e.state.BatchName,state:"Closed"};e.props.updateBatch(i),e.setState({Display:0}),e.props.getPens(n.pens.update_time)}}}}):r.a.createElement(r.a.Fragment,null),r.a.createElement(La,{Text:"Save",onPress:function(){var t,a=!0;if(""!==e.state.BatchName){var r=e.state.BatchName;Object.keys(e.state.BatchList).includes(r)?1===e.state.Display&&(a=!1,e.props.setViewError("BatchName error, batch allready exists")):2===e.state.Display&&(a=!1,e.props.setViewError("BatchName error, batch does not exists"))}else a=!1,e.props.setViewError("BatchName error");(""!==e.state.StartD||(a=!1,e.props.setViewError("Startdate error")),""!==e.state.DevianceMin)?((t=e.state.DevianceMin).length>3||isNaN(t)||t>100)&&(a=!1):(a=!1,e.props.setViewError("DevianceMin setting error"));""!==e.state.DevianceMax?((t=e.state.DevianceMax).length>3||isNaN(t)||t>100)&&(a=!1):(a=!1,e.props.setViewError("DevianceMax setting error"));""===e.state.Curve&&(a=!1,e.props.setViewError("Growth curve setting error, please reselect a curve"));var i={};if(e.state.selectedPens&&e.state.selectedPens.length>0&&e.state.selectedPens.forEach((function(e){i[e.item]=!0})),Object.keys(i).length!==e.state.selectedPens.length&&(a=!1,e.props.setViewError("An error occurred during Pen assigning (please update the page)")),a){e.props.setViewLoading(!0);var s=new Date(e.state.StartD),o=new Date(s.getFullYear(),s.getMonth(),s.getDate()).getTime(),c={name:e.state.BatchName,gcurve:e.state.Curve,pens:i,time:o,datas:{devianceMin:e.state.DevianceMin,devianceMax:e.state.DevianceMax}};1===e.state.Display?e.props.setBatch(c):2===e.state.Display&&e.props.updateBatch(c),e.setState({Display:0}),e.props.getPens(n.pens.update_time),e.props.setViewError(null),e.props.setViewLoading(!1)}}})))),(t||this.props.firebase.viewIsLoading)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"})))}}]),a}(n.Component),mr=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},getCurve:function(){return e(V.actionStarting(le.FETCH,ce.GRAPH,{}))},getSections:function(t){return e(V.actionStarting(le.FETCH,ce.SECTIONS,{DataTime:t}))},getPens:function(t){return e(V.actionStarting(le.FETCH,ce.PENS,{DataTime:t}))},getBatch:function(t){return e(V.actionStarting(le.FETCH,ce.BATCHS,{DataTime:t}))},setBatch:function(t){return e(V.actionStarting(le.CREATE,ce.BATCHS,{Batch:t}))},updateBatch:function(t){return e(V.actionStarting(le.UPDATE,ce.BATCHS,{BatchId:t.name,Batch:t}))},setCurrentData:function(t,a){return e(V.setCurrentData({type:ce.PENS,batchId:t,curveId:a}))}}}))(gr),br=a(23),yr=a.n(br),vr=a(232);function Er(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Sr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Er(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Dr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}function wr(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Pr(){var e=[10,250],t=[10,250],a=[10,250],n=[.2,1],r=wr(e[0],e[1]),i=wr(t[0],t[1]),s=wr(a[0],a[1]),o=wr(100*n[0],100*n[1])/100;return{r:r,g:i,b:s,a:o,rgbaValue:"rgba("+r+","+i+","+s+","+o+")"}}var Or=lr.a.get("window"),Cr=lr.a.get("screen");var kr=function(e){Xt()(a,e);var t=Dr(a);function a(e){var n;if(zt()(this,a),(n=t.call(this,e)).onChange=function(e){var t=e.window,a=e.screen;n.setState({dimensions:{window:t,screen:a}})},n.props.Display)n.state={dimensions:{window:Or,screen:Cr}};else{var r=n.setData(e),i=r.TempGraph,s=r.Legends,o=r.DataSets,c=r.StartDate,l=r.EndDate;n.state={dimensions:{window:Or,screen:Cr},TempGraph:i,Legends:s,DataSets:o,StartDate:c,EndDate:l,Labels:[],ActiveIndex:0,ActiveLength:"Batch",ActiveDataSets:o,ActiveStartDate:c,ActiveEndDate:l,ViewPoint:null}}return n}return qt()(a,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=e.firebase.currentData,n={periode:"Weeks",data:[]},r=[],i=[],s=new Date,o=s.getTime(),c=new Date(s.setDate(s.getDate()+56));if(t&&t.batchs&&a&&a.batchId){var l=t.batchs[a.batchId];if(n=ke(l,t.graphs,a.curveId)){a.curveId?n.name=a.curveId:n.name="Template",o=l.time,l.pens&&(r=r.concat(Object.keys(l.pens).reverse().filter((function(e){return"__jsogObjectId"!==e}))));var u=[];n.periode||(n.periode="Weeks");for(var f=new Date(o),p=0;p<n.data.length;p++)u.push(f.getTime()),p<n.data.length-1&&(f=new Date(je(f,n.periode)));if(c=f.getTime(),u.push(c),i.push({data:n.data,dataX:u,color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;return"rgba(0, 0, 0, "+e+")"}}),t.weighings){var h=i,d=c,g=new Date(je(new Date(d),n.periode)).getTime(),m=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=[],o=0,c=!(!t||t.state&&"Closed"===t.state),l=[];return t.pens&&(l=Object.keys(t.pens).filter((function(e){return"__jsogObjectId"!==e})).reverse()),l.forEach((function(l){var u=t.pens[l],f=Pr(),p=[],h=[];if(e.weighings[l]||t.state&&"Closed"===t.state){var d=e.weighings[l];if(t.state&&"Closed"===t.state&&(d=t.closed.weighings[l]),d&&Object.keys(d).length>=1&&(Object.keys(d).sort((function(e,t){return d[e].time-d[t].time})).forEach((function(e){var t=d[e];if(t.weight&&(!n||t.time>=n)&&(!r||t.time<=r)&&(!u.startdate||t.time>=u.startdate)&&(!u.enddate||t.time<=u.enddate)){var a=t.weight;t.count&&(a/=t.count),p.push(a);var i=new Date(t.time);h.push(i),!r&&t.time>o&&(o=t.time)}})),c&&i)){var g=Ae(e,l);if(g&&g.lastWeighing){var m=g.FirstSpot?new Date(g.FirstSpot):new Date(g.lastWeighing.time);g.data.forEach((function(e,t){p.push(e),m=0===t&&g.FirstSpot?m:je(m,a.periode),h.push(m)}))}}}for(;p.length<a.data.length;)p.push(null),h.push(null);s.push({Pen:l,data:p,dataX:h,color:function(){return f.rgbaValue}})})),{DataSets:s,EndDate:o}}(t,l,n,o,g,this.props.Predict);i=m.DataSets,c=m.EndDate;i=h.concat(i),d>c&&(c=d),(r=r.filter((function(e){return"__jsogObjectId"!==e&&(e===n.name||i.some((function(t){return t.Pen===e})))}))).unshift(n.name)}}}return{TempGraph:n,Legends:r,DataSets:i,StartDate:o,EndDate:c}}},{key:"setGraphPeriode",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.ActiveLength,a=[],n=this.state.StartDate,r=this.state.EndDate,i=this.state.ActiveIndex,s="Weeks";this.state.TempGraph&&this.state.TempGraph.periode&&(s=this.state.TempGraph.periode);var o=new Date(n),c=(this.state.ActiveDataSets,(new Date).getTime());switch(this.state.ActiveLength){case"Days":for(var l=0;l<i||-1===i;l++){var u=new Date(je(o,this.state.ActiveLength));if(-1===i&&u>c){i=l-1;break}o=u}n=o.getTime(),a.push(o.getDate()+"/"+(o.getMonth()+1)),o=new Date(je(o,this.state.ActiveLength)),a.push(o.getDate()+"/"+(o.getMonth()+1)),r=o.getTime(),o=new Date(je(o,this.state.ActiveLength));break;case"Weeks":for(l=0;l<i||-1===i;l++){u=new Date(je(o,this.state.ActiveLength));if(-1===i&&u>c){i=l;break}o=u}n=o.getTime();for(l=0;l<=7;l++)a.push(o.getDate()+"/"+(o.getMonth()+1)),r=o.getTime(),o=new Date(je(o,"Days"));break;case"Batch":default:for(;o.getTime()<=r;){switch(s){case"Days":case"Month":a.push(o.getDate()+"/"+(o.getMonth()+1));break;case"Weeks":default:a.push(o.getDate()+"/"+(o.getMonth()+1))}o=new Date(je(o,s))}}var f=[];if(t&&"Batch"!==t){var p=je(new Date(r),this.state.ActiveLength).getTime();this.state.DataSets.forEach((function(t){var a=Sr(Sr({},t),{},{data:[],dataX:[]}),i=null;if(new Date(t.dataX[0]).getTime()<=r){for(var s=0;s<t.data.length;s++){if(new Date(t.dataX[s]).getTime()>=n){if(a.data.push(t.data[s]),a.dataX.push(t.dataX[s]),je(new Date(t.dataX[s]),e.state.ActiveLength).getTime()>p){t.dataX.length-1>=s&&s;break}}else null!==t.dataX[s]&&(i=s)}if(null!==i&&a.dataX[0]>n&&t.data.length>=i+1){var o=Ie([t.dataX[i],t.dataX[i+1]],[t.data[i],t.data[i+1]],n,t.data[i],t.dataX[i]);console.log(o),a.data.unshift(o.ExValue),a.dataX.unshift(n)}}f.push(a)}))}else f=this.state.DataSets;if(this.state.ActiveIndex>0&&0===f[0].data.length){l=this.state.ActiveIndex;l-=1,this.setState({ActiveIndex:l})}else this.setState({ActiveLength:t,Labels:a,ActiveDataSets:f,ActiveStartDate:n,ActiveEndDate:r,ActiveIndex:i},(function(){e.forceUpdate()}))}},{key:"getData",value:function(){this.props.firebase.localDataStore,this.props.firebase.currentData}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(!this.props.Display&&this.props!==e&&this.props.firebase.localDataStore&&(JSON.stringify(e.firebase.localDataStore.weighings)!==JSON.stringify(this.props.firebase.localDataStore.weighings)||JSON.stringify(e.firebase.localDataStore.pens)!==JSON.stringify(this.props.firebase.localDataStore.pens)||JSON.stringify(e.firebase.localDataStore.graphs)!==JSON.stringify(this.props.firebase.localDataStore.graphs)||e.Predict!==this.props.Predict||e.weighings!==this.props.weighings)){var n=this.setData(this.props),r=n.TempGraph,i=n.Legends,s=n.DataSets,o=n.StartDate,c=n.EndDate;JSON.stringify(this.state.TempGraph)===JSON.stringify(r)&&JSON.stringify(this.state.Legends)===JSON.stringify(i)&&JSON.stringify(this.state.DataSets)===JSON.stringify(s)&&JSON.stringify(this.state.StartDate)===JSON.stringify(o)&&JSON.stringify(this.state.EndDate)===JSON.stringify(c)||this.setState({TempGraph:r,Legends:i,DataSets:s,StartDate:o,EndDate:c},(function(){a.setGraphPeriode(a.state.ActiveLength)}))}this.props.Display||this.state===t||this.state.ActiveLength==t.ActiveLength&&this.state.ActiveIndex==t.ActiveIndex||this.setGraphPeriode(this.state.ActiveLength)}},{key:"componentDidMount",value:function(){this.getData(),this.props.height||lr.a.addEventListener("change",this.onChange),this.props.Display||this.setGraphPeriode(this.state.ActiveLength)}},{key:"componentWillUnmount",value:function(){this.props.height||lr.a.removeEventListener("change",this.onChange)}},{key:"render",value:function(){var e=this,t=this.props.firebase.localDataStore,a=!1;t.batchs&&this.props.firebase.currentData&&this.props.firebase.currentData.batchId&&(a=!(!t.batchs||!t.batchs[this.props.firebase.currentData.batchId]||t.batchs[this.props.firebase.currentData.batchId].state&&"Closed"===t.batchs[this.props.firebase.currentData.batchId].state));var n=this.state.dimensions.window.width>1e3;this.props.Display&&(n=!1);var i="ios"===te.a.OS||"android"===te.a.OS||!n,s=this.state.dimensions.window.height;s=this.props.Height?this.props.Height:500;var o=2*this.state.dimensions.window.width;this.props.Width?o=this.props.Width:(o-=4*ga.normal,o/=n?2.05:1);var c=this.props.Display?[{color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;return"rgba(0, 0, 0, "+e+")"},data:[],dataX:[]}]:this.state.ActiveDataSets,l=this.props.Display?[]:this.state.Legends.slice(0,c.length),u=this.props.Display?1:this.state.ActiveStartDate,f=this.props.Display?this.props.DataPoints.length:this.state.ActiveEndDate,p=[];return this.props.Display?this.props.DataPoints.forEach((function(e,t){c[0].data.push(e.value),c[0].dataX.push(t+1),p.push(t+1)})):p=this.state.Labels,r.a.createElement(_t.a,{style:[va.fullWidth,va.fill]},r.a.createElement(_t.a,{style:[va.fullWidth,va.fill]},r.a.createElement(za.a,{horizontal:!0,showsHorizontalScrollIndicator:!n&&!this.props.Display,style:[va.fullSize,i&&!this.props.Display?{maxWidth:o/2,maxHeight:540}:{}]},this.state.TempGraph||this.props.Display&&p&&p.length>0&&c&&c.length>0?r.a.createElement(vr.a,{style:[{marginLeft:-15,minHeight:s,minWidth:o}],width:o,height:s,data:{labels:p,xMinMax:[u,f,p.length-1],legend:l,datasets:c},onDataPointClick:function(t){e.setState({ViewPoint:t})},withShadow:!1,withVerticalLines:!0,fromZero:!1,segments:15,verticalLabelRotation:0,xLabelsOffset:0,chartConfig:{backgroundColor:na,backgroundGradientFrom:na,backgroundGradientTo:na,decimalPlaces:1,color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba(0, 0, 0, "+e+")"},labelColor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba(0, 0, 0, "+e+")"},style:{borderRadius:16,height:s},propsForDots:{r:"5",strokeWidth:"0.5",stroke:na}}}):r.a.createElement(r.a.Fragment,null))),this.props.Display?r.a.createElement(r.a.Fragment,null):r.a.createElement(_t.a,{style:[va.fullWidth,va.mainCenter]},r.a.createElement(_t.a,{style:[va.fill,va.fullWidth,va.rowCenter]},r.a.createElement(_t.a,{style:{paddingRight:2.5}},r.a.createElement(Na.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){if(0!=e.state.ActiveIndex){var t=e.state.ActiveIndex;t-=1,e.setState({ActiveIndex:t})}}})),r.a.createElement(La,{Text:"Day view",buttonStyle:{width:n?100:80},onPress:function(){e.setState({ActiveIndex:-1,ActiveLength:"Days"})}}),r.a.createElement(La,{Text:"Week view",buttonStyle:{width:n?100:80,marginLeft:2.5},onPress:function(){e.setState({ActiveIndex:-1,ActiveLength:"Weeks"})}}),r.a.createElement(La,{Text:"Full Batch",buttonStyle:{width:n?100:80,marginLeft:2.5},onPress:function(){e.setState({ActiveIndex:0,ActiveLength:"Batch"})}}),r.a.createElement(_t.a,{style:{paddingLeft:2.5}},r.a.createElement(Na.a,{name:"md-arrow-forward",type:"ionicon",size:25,color:"black",onPress:function(){var t=e.state.ActiveIndex;t+=1,e.setState({ActiveIndex:t})}}))),a&&!i?r.a.createElement(_t.a,{style:[va.fullWidth,va.rowCenter]},r.a.createElement(Tr,{control:this,props:this.props,state:this.state})):r.a.createElement(r.a.Fragment,null)))}}]),a}(n.Component),Tr=function(e){if("ios"===te.a.OS||"android"===te.a.OS){if(e.state.ViewPoint){var t=e.state.Labels[e.state.ViewPoint.index];if(e.state.ViewPoint.dataset.dataX){var a=new Date(e.state.ViewPoint.dataset.dataX[e.state.ViewPoint.index]);t=a.getFullYear()+"."+(a.getMonth()+1)+"."+a.getDate()}var n=e.state.ViewPoint.value;return r.a.createElement(_t.a,{style:[va.buttonContainer,va.fullWidth,va.rowCenter,{maxHeight:100}]},r.a.createElement(_t.a,{style:[va.colCenter,va.borderContainer,{borderRadius:0}]},r.a.createElement(ka.a,null,t)),r.a.createElement(_t.a,{style:[va.colCenter,va.borderContainer,{borderRadius:0}]},r.a.createElement(ka.a,null,n," Kg.")))}return r.a.createElement(r.a.Fragment,null)}var i=r.a.useState(0),s=nn()(i,2),o=s[0],c=s[1];return e.state.TempGraph?r.a.createElement(_t.a,{style:[va.buttonContainer,va.fullWidth,va.rowCenter,{maxHeight:100,marginTop:10}]},r.a.createElement(_t.a,{style:{padding:6,paddingRight:15}},r.a.createElement(Na.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){var t=o;(t-=1)<0&&(t=e.state.TempGraph.data.length-1),c(t)}})),r.a.createElement(Na.b,{type:"number",step:"0.1",label:e.state.Labels[o],containerStyle:[{width:"auto",borderWidth:1}],style:[Da.input,va.borderContainer,{borderRadius:0}],onChange:function(t){var a=t.target.value;if(!isNaN(a)||a.endsWith(".")&&a.split(".").length<=2){var n=e.state.TempGraph.data;n[o]=a,e.control.setState({state:e.state,TempGraph:Sr(Sr({},e.state.TempGraph),{},{data:n})}),e.control.setGraphPeriode(e.state.ActiveLength)}},value:e.state.TempGraph.data[o]}),r.a.createElement(_t.a,{style:{padding:6,paddingRight:15}},r.a.createElement(Na.a,{name:"md-arrow-forward",type:"ionicon",size:25,color:"black",onPress:function(){var t=o;(t+=1)>e.state.TempGraph.data.length-1&&(t=0),c(t)}})),r.a.createElement(Na.b,{label:"Curve Name",containerStyle:[{width:"auto",borderWidth:1}],style:[Da.input,va.borderContainer,{borderRadius:0}],onChangeText:function(e){},value:e.state.TempGraph.name})):r.a.createElement(r.a.Fragment,null)},jr=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{getPen:function(t,a){return e(V.actionStarting(le.FETCH,ce.PENS,{PenId:t,DataTime:a}))},getWeights:function(t,a,n){return e(V.actionStarting(le.FETCH,ce.WEIGHING,{PenId:t,DataTime:a,MemSections:n}))},getCurve:function(t){return e(V.actionStarting(le.FETCH,ce.GRAPH,{GraphId:t}))},setCurve:function(t){return e(V.actionStarting(le.CREATE,ce.GRAPH,{Graph:t}))}}}))(kr);function Ir(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var Ar=function(e){Xt()(a,e);var t=Ir(a);function a(e){var n;zt()(this,a);var r=(n=t.call(this,e)).setData(e).CurveList;new Date;return n.state={CurveList:r,Display:0,CurveName:"",DataPoints:[],Periode:"Weeks"},n}return qt()(a,[{key:"setData",value:function(e){return{CurveList:e.firebase.localDataStore.graphs}}},{key:"getData",value:function(){this.props.getCurve()}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&this.props.firebase.localDataStore.graphs&&JSON.stringify(this.state.CurveList)!==JSON.stringify(this.props.firebase.localDataStore.graphs))){var a=this.setData(this.props).CurveList;this.setState({CurveList:a})}}},{key:"render",value:function(){for(var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.viewError,n=0,i=0;i<this.state.DataPoints.length;i++){var s=this.state.DataPoints[i].value;if(""!==s&&null!==s||(s=0),s=parseFloat(s),0!==i)n=(n+(s-this.state.DataPoints[i-1].value))/2}n=n.toFixed(3);var o="android"===te.a.OS||"ios"===te.a.OS;return r.a.createElement(za.a,{style:[va.fullSize,va.fill]},r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fillColMain]},a?r.a.createElement(ka.a,{style:Da.error},a):r.a.createElement(r.a.Fragment,null),0===this.state.Display?r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,{marginHorizontal:0,paddingHorizontal:-20}]},this.state.CurveList?r.a.createElement(_t.a,{style:[va.fill,va.fullWidth,ga.smallHorizontalPadding,ga.smallVerticalPadding,{maxWidth:800,marginTop:10}]},r.a.createElement(Hn.a,{data:Object.keys(this.state.CurveList).filter((function(e){return"__jsogObjectId"!==e&&"update_time"!==e})),renderItem:function(t){var a=t.item;return r.a.createElement(La,{Text:a,onPress:function(){var t=e.state.CurveList[a],n=[];t.data.forEach((function(e){n.push({value:e})})),e.setState({Display:2,CurveName:a,DataPoints:n,Periode:t.periode})}})},keyExtractor:function(e,t){return t.toString()}})):r.a.createElement(r.a.Fragment,null),r.a.createElement(_t.a,{style:[va.buttonContainer,va.borderContainer,va.midWidth]},r.a.createElement(La,{Text:"New Curve",onPress:function(){e.setState({Display:1,DataPoints:[{value:"0"},{value:"0"}]})}}))):r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,{marginHorizontal:0,paddingHorizontal:-20}]},1===this.state.Display?r.a.createElement(Na.b,{label:"CurveName",containerStyle:[{borderWidth:1,marginTop:10}],style:[Da.input],onChangeText:function(t){t?De(t)&&e.setState({CurveName:t}):e.setState({CurveName:t})},value:this.state.CurveName}):r.a.createElement(Fa,{Text:this.state.CurveName}),r.a.createElement(_t.a,{style:[va.fill,va.fullWidth]},r.a.createElement(Ga,{texts:["Data Points"],datas:["Periode: "+this.state.Periode]}),r.a.createElement(Ga,{texts:["Average Growth: "+n],datas:[]}),r.a.createElement(_t.a,{style:[va.borderContainer,va.fillCenter,va.fullWidth,{alignSelf:"center"}]},r.a.createElement(jr,{Display:!0,DataPoints:this.state.DataPoints,Height:200,Width:455})),r.a.createElement(_t.a,null,r.a.createElement(Hn.a,{data:this.state.DataPoints,style:[o?xr.AppStyle:xr.WebStyle],renderItem:function(t){var a=t.item,n=t.index;return r.a.createElement(Na.b,{type:"number",step:"0.1",label:"Day: "+n,containerStyle:[va.fullWidth,{borderWidth:1,marginTop:10}],style:[Da.input],onChangeText:function(t){if(!isNaN(t)||t.endsWith(".")&&t.split(".").length<=2){var a=yr()(e.state.DataPoints);a[n].value=t,e.setState({DataPoints:a})}},value:""+a.value})},numColumns:1})),r.a.createElement(_t.a,{style:{height:20}}),r.a.createElement(La,{Text:"New Point",onPress:function(){var t=yr()(e.state.DataPoints),a=e.state.DataPoints&&e.state.DataPoints.length>=1?e.state.DataPoints[e.state.DataPoints.length-1].value:"0";t.push({value:a}),e.setState({DataPoints:t})}})),r.a.createElement(_t.a,{style:[va.buttonContainer,va.borderContainer,va.midWidth,{marginTop:10}]},r.a.createElement(La,{Text:"Save",onPress:function(){var t=!0;if(""!==e.state.CurveName){var a=e.state.CurveName;Object.keys(e.state.CurveList).includes(a)?1===e.state.Display&&(e.props.setViewError("Cannot create allready existing Curve."),t=!1):2===e.state.Display&&(e.props.setViewError("Cannot update non-existing Curve. (Please refresh)"),t=!1)}else e.props.setViewError("Curve template need a name."),t=!1;if(t){e.props.setViewError(null),e.props.setViewLoading(!0);var n={name:e.state.CurveName,periode:e.state.Periode},r=[],i=0;e.state.DataPoints.forEach((function(e){r[i]=parseFloat(e.value),i++})),n.data=r,e.props.updateCurve(n),e.setState({Display:0})}}})))),(t||this.props.firebase.viewIsLoading)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"})))}}]),a}(n.Component),xr=ta.a.create({AppStyle:{},WebStyle:{height:400}}),Lr=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},getCurve:function(){return e(V.actionStarting(le.FETCH,ce.GRAPH,{GraphId:""}))},updateCurve:function(t){return e(V.actionStarting(le.UPDATE,ce.GRAPH,{Graph:t}))}}}))(Ar);function Rr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var Fr=function(e){Xt()(a,e);var t=Rr(a);function a(e){var n;return zt()(this,a),(n=t.call(this,e)).state={},n}return qt()(a,[{key:"getData",value:function(){this.props.setCurrentData({})}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=this.props.firebase.viewError;return r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fill]},t?r.a.createElement(ka.a,{style:Da.error},t):r.a.createElement(r.a.Fragment,null),r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth,ga.bottomMargin,{marginBottom:60}]}),r.a.createElement(_t.a,{style:[va.buttonContainer,va.halvWidth,va.fillColMain]},r.a.createElement(Ya,{section:!0}))),(e||this.props.firebase.viewIsLoading)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"}))}}]),a}(n.Component),Nr=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},setCurrentData:function(t){return e(V.setCurrentData({type:ce.PENS,action:t}))}}}))(Fr);function Mr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Wr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Mr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ur(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var Vr=function(e){Xt()(a,e);var t=Ur(a);function a(e){var n;zt()(this,a);var r=(n=t.call(this,e)).setData(n.props),i=r.Sections,s=r.Section,o=r.Pens,c=r.Pen,l=r.quantity;return n.state={Sections:i,Section:s,Pens:o,Pen:c,weight:"",quantity:l,date:(new Date).getTime()},n}return qt()(a,[{key:"getData",value:function(){var e=this.props.firebase.localDataStore;e.sections||(e.sections={}),this.props.getSections(e.sections.update_time)}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=!1;t&&t.sections&&t.sections!==a&&(a=Se(t.sections));var n=e.firebase.currentData,r=a?Object.keys(a)[0]:"";n&&n.data&&n.data.section&&a[n.data.section]&&n.data.section!=r&&(r=n.data.section);var i=a?Se(a[r].pens):{},s=a?Object.keys(i)[0]:"";n&&n.penId&&i[n.penId]&&n.penId!=s&&(s=n.penId);var o=1;if(t&&t.pens){var c=t.pens[s];c&&c.datas&&c.datas.count&&(o=c.datas.count)}return a||(a={}),{Sections:a,Section:r,Pens:i,Pen:s,quantity:o}}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&this.props.firebase.localDataStore.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(Se(this.props.firebase.localDataStore.sections)))){var a=this.setData(this.props),n=a.Sections,r=a.Section,i=a.Pens,s=a.Pen,o=a.quantity;this.setState({Sections:n,Section:r,Pens:i,Pen:s,quantity:o,weight:""})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.viewError,n=this.props.firebase.localDataStore;return r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fill]},a?r.a.createElement(ka.a,{style:Da.error},a):r.a.createElement(r.a.Fragment,null),r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fill]},r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth,ga.bottomMargin]},r.a.createElement(La,{Text:"Weighing",buttonStyle:{backgroundColor:ha},onPress:function(){}})),r.a.createElement(_t.a,{style:[va.borderContainer,va.fullWidth,{marginBottom:20}]},r.a.createElement(Ka.a,{mode:"dropdown",selectedValue:this.state.Section,style:{height:50,width:150},onValueChange:function(t,a){if(e.state.Sections[t]){var r=Se(e.state.Sections[t].pens),i=1;if(n&&n.pens){var s=n.pens[Object.keys(r)[0]];s&&s.datas&&s.datas.count&&(i=s.datas.count)}e.setState({Section:t,Pens:r,Pen:Object.keys(r)[0],quantity:i})}}},Object.keys(this.state.Sections).map((function(e,t){return r.a.createElement(Ka.a.Item,{label:e,value:e,key:t})}))),r.a.createElement(Ka.a,{mode:"dropdown",selectedValue:this.state.Pen,style:{height:50,width:150},onValueChange:function(t,a){var r=1;if(n&&n.pens){var i=n.pens[t];i&&i.datas&&i.datas.count&&(r=i.datas.count)}e.setState({quantity:r,Pen:t})}},Object.keys(this.state.Pens).map((function(e,t){return r.a.createElement(Ka.a.Item,{label:e,value:e,key:t})}))),r.a.createElement(_t.a,{style:[va.fullWidth,{borderWidth:0,height:65,marginTop:10,paddingHorizontal:5,paddingTop:0,borderRadius:0,alignItems:"center"}]},r.a.createElement(_t.a,{style:[va.fullWidth,{alignItems:"flex-start"}]},r.a.createElement(ka.a,{style:[Da.text,{marginHorizontal:5,marginTop:2,color:fa,fontSize:15,fontWeight:"bold"}]},"Weight date:")),r.a.createElement(_t.a,{style:[va.fullWidth,{alignItems:"flex-start"}]},r.a.createElement(tn,{Selected:this.state.date,onValueChange:function(t){e.setState({date:t.getTime()})}}))),r.a.createElement(Na.b,{label:"Animal quantity",style:Wr({},Qn.input),onChangeText:function(t){isNaN(t)||e.setState({quantity:t})},value:this.state.quantity}),r.a.createElement(Na.b,{label:"Total Weight",style:Wr({},Qn.input),onChangeText:function(t){e.setState({weight:t})},value:this.state.weight})),r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth]},r.a.createElement(La,{Text:"Submit",onPress:function(){e.state.Section?e.state.Pen?isNaN(e.state.quantity)||""===e.state.quantity||e.state.quantity<=0?e.props.setViewError("Quantity have to be a number bigger than 0"):isNaN(e.state.weight)||""===e.state.weight?e.props.setViewError("Weight have to be a number"):(e.props.setViewLoading(!0),e.props.setViewError(null),e.props.newWeight(e.state.Pen,parseFloat(e.state.weight),e.state.date,parseFloat(e.state.quantity)),e.setState({weight:"",date:(new Date).getTime()})):e.props.setViewError("A pen is needed"):e.props.setViewError("A section is needed")}})))),(t||this.props.firebase.viewIsLoading)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"}))}}]),a}(n.Component),Br=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},getSections:function(t){return e(V.actionStarting(le.FETCH,ce.SECTIONS,{DataTime:t}))},newWeight:function(t,a,n,r){return e(V.actionStarting(le.CREATE,ce.WEIGHING,{PenId:t,Weight:a,Quantity:r,Date:n}))}}}))(Vr);function _r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Hr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Gr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var zr=function(e){Xt()(a,e);var t=Gr(a);function a(e){var n;zt()(this,a);var r=(n=t.call(this,e)).setData(e),i=r.Sections,s=r.Section,o=r.Pens,c=r.Pen;return n.state={Sections:i,Section:s,Pens:o,Pen:c,NewSection:!(i&&Object.keys(i).length>0)},n}return qt()(a,[{key:"getData",value:function(){var e=this.props.firebase.localDataStore;e.sections||(e.sections={}),this.props.getSections(e.sections.update_time)}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=!1;t&&t.sections&&t.sections!==a&&(a=Se(t.sections));var n=e.firebase.currentData,r=a?Object.keys(a)[0]:"";n&&n.data&&n.data.section&&a[n.data.section]&&n.data.section!=r&&(r=n.data.section);var i=a&&a[r]?Se(a[r].pens):{},s=a?Object.keys(i)[0]:"";return n&&n.dataId&&i[n.dataId]&&n.dataId!=s&&(s=n.dataId),a||(a={}),{Sections:a,Section:r,Pens:i,Pen:s}}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase)){if(this.props.firebase.localDataStore&&this.props.firebase.localDataStore.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(Se(this.props.firebase.localDataStore.sections))){var a=this.setData(this.props),n=a.Sections,r=a.Section,i=a.Pens,s=a.Pen;this.setState({Sections:n,Section:r,Pens:i,Pen:s,NewSection:!(n&&Object.keys(n).length>0)})}this.props.firebase.currentData&&this.props.firebase.currentData!=e.firebase.currentData&&this.forceUpdate()}}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=this.props.firebase.viewError,a=this.props.firebase.localDataStore,n=this.props.firebase.currentData,i=r.a.createElement(_t.a,null);switch(n.type){case ce.PENS:i=Jr(this,n,a);break;case ce.PIGS:i=Yr(this,n,a)}return r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fill]},t?r.a.createElement(ka.a,{style:Da.error},t):r.a.createElement(r.a.Fragment,null),i),(e||this.props.firebase.viewIsLoading)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"}))}}]),a}(n.Component),Jr=function(e,t,a){var n=e.state.Sections;return t.action===le.CREATE&&(n["New Section"]={}),r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fill]},r.a.createElement(qr,{CurrentAction:t.action}),r.a.createElement(_t.a,{style:[va.borderContainer,va.midWidth,{marginBottom:20}]},r.a.createElement(Xr,{Control:e,CurrentData:t,localDataStore:a}),t.action===le.CREATE?r.a.createElement(Na.b,{label:"Pen name",style:Hr({},Qn.input),onChangeText:function(t){t?De(t)&&e.setState({Pen:t}):e.setState({Pen:t})},value:e.state.Pen}):r.a.createElement(r.a.Fragment,null),t.action===le.DELETE?r.a.createElement(Ka.a,{mode:"dropdown",selectedValue:e.state.Pen,style:{height:50,width:150},onValueChange:function(t,a){e.setState({Pen:t})}},Object.keys(e.state.Pens).map((function(e,t){return r.a.createElement(Ka.a.Item,{label:e,value:e,key:t})}))):r.a.createElement(r.a.Fragment,null)),t.action===le.CREATE||t.action===le.DELETE?r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth]},r.a.createElement(La,{Text:"Submit",onPress:function(){if(e.state.Section&&""!==e.state.Section)if(e.state.Pen&&""!==e.state.Pen)if(isNaN(e.state.Section)&&isNaN(e.state.Section[0]))if(isNaN(e.state.Pen)&&isNaN(e.state.Pen[0])){var a=!1;Object.keys(e.state.Sections).map((function(t,n){e.state.Sections[t].pens&&(Object.keys(e.state.Sections[t].pens).filter((function(t){return t===e.state.Pen})).length&&(a=!0))})),a&&t.action===le.CREATE?e.props.setViewError("Given pen name already exists"):a||t.action!==le.DELETE?(e.props.setViewLoading(!0),e.props.setViewError(null),e.props.penAction(t.action,e.state.Section,e.state.Pen),_.navigate("UserOperations")):e.props.setViewError("Cannot remove non-existing pen")}else e.props.setViewError("Pen name cannot be or start with a number");else e.props.setViewError("Section name cannot be or start with a number");else e.props.setViewError("A pen name is needed");else e.props.setViewError("A section is needed")}})):r.a.createElement(r.a.Fragment,null))},qr=function(e){switch(e.CurrentAction){case le.CREATE:return r.a.createElement(Fa,{Text:"Add Pen"});case le.DELETE:return r.a.createElement(Fa,{Text:"Remove Pen"});default:return r.a.createElement(r.a.Fragment,null)}},Yr=function(e,t,a){e.state.Sections;return t.action,r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fill]},r.a.createElement(Fa,{Text:"Add Pig: "+t.pigtag}),r.a.createElement(_t.a,{style:[va.borderContainer,va.midWidth,{marginBottom:20}]},r.a.createElement(Xr,{Control:e,CurrentData:t,localDataStore:a}),e.state.NewSection?r.a.createElement(Na.b,{label:"Pen name",style:Hr({},Qn.input),onChangeText:function(t){t?De(t)&&e.setState({Pen:t}):e.setState({Pen:t})},value:e.state.Pen}):r.a.createElement(Ka.a,{mode:"dropdown",selectedValue:e.state.Pen,style:{height:50,width:150},onValueChange:function(t,a){e.setState({Pen:t})}},Object.keys(e.state.Pens).map((function(e,t){return r.a.createElement(Ka.a.Item,{label:e,value:e,key:t})}))),t.action===le.CREATE?r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth]},r.a.createElement(La,{Text:"Submit",onPress:function(){if(e.state.Section&&""!==e.state.Section)if(e.state.Pen&&""!==e.state.Pen)if(isNaN(e.state.Section)&&isNaN(e.state.Section[0]))if(isNaN(e.state.Pen)&&isNaN(e.state.Pen[0])){var a=!1;Object.keys(e.state.Sections).map((function(t,n){e.state.Sections[t].pens&&(Object.keys(e.state.Sections[t].pens).filter((function(t){return t===e.state.Pen})).length&&(a=!0))})),a&&t.action===le.CREATE&&e.state.NewSection?e.props.setViewError("Given pen name already exists"):(e.props.setViewLoading(!0),e.props.setViewError(null),e.props.pigAction(t.action,t.pigtag,e.state.Pen),_.navigate("UserPigs"))}else e.props.setViewError("Pen name cannot be or start with a number");else e.props.setViewError("Section name cannot be or start with a number");else e.props.setViewError("A pen name is needed");else e.props.setViewError("A section is needed")}})):r.a.createElement(r.a.Fragment,null)))},Xr=function(e){var t=e.Control,a=e.CurrentData;e.localDataStore;return t.state.NewSection&&a.action===le.CREATE?r.a.createElement(Na.b,{label:"Section Name",style:Hr({},Qn.input),onChangeText:function(e){e?De(e)&&t.setState({Section:e}):t.setState({Section:e})},value:t.state.Section}):r.a.createElement(Ka.a,{mode:"dropdown",selectedValue:t.state.Section,style:{height:50,width:150},onValueChange:function(e,n){var r=e,i=t.state.NewSection,s=t.state.Pens,o=t.state.Pen;"New Section"===e?(i=!0,r="Section_"+Object.keys(t.state.Sections).length):(s=Se(t.state.Sections[e].pens),o=a.action===le.DELETE?Object.keys(s)[Object.keys(s).length-1]:a.type==ce.PIGS?Object.keys(s)[0]:"Pen_"+(Object.keys(s).length+1)),t.setState({Section:r,NewSection:i,Pens:s,Pen:o})}},Object.keys(t.state.Sections).map((function(e,t){return r.a.createElement(Ka.a.Item,{label:e,value:e,key:t})})))},Qr=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(V.setFirebaseError(t))},setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},getSections:function(t){return e(V.actionStarting(le.FETCH,ce.SECTIONS,{DataTime:t}))},penAction:function(t,a,n){return e(V.actionStarting(t,ce.PENS,{SectionId:a,PenId:n}))},pigAction:function(t,a,n){return e(V.actionStarting(t,ce.PIGS,{TagId:a,PenId:n}))}}}))(zr);function Zr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var Kr=function(e){Xt()(a,e);var t=Zr(a);function a(e){var n;zt()(this,a),(n=t.call(this,e)).state={currentData:e.currentData};var r=n.setData(e),i=r.CurrentData,s=r.WeighingsList,o=r.Weighings,c=r.CommentsList,l=r.Comments;return n.state={currentData:i,WeighingsList:s,Weighings:o,CommentsList:c,Comments:l,action:""},n}return qt()(a,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=this.state.currentData,n=Se(t.pens);n[a.penId]&&(a.data=n[a.penId]);var r=[],i=[],s="android"===te.a.OS||"ios"===te.a.OS;if(t&&t.weighings&&t.weighings[a.penId]){r=t.weighings[a.penId];for(var o=0;o<Object.keys(r).length;o++){if(u=Object.keys(r)[o])(f=r[u])&&f.time&&i.push(A()({},u,f))}i=i.sort((function(e,t){return e.time>t.time?1:-1})),s&&(i=i.slice(0,5))}var c=[],l=[];if(t&&t.comments&&t.comments[a.penId]){c=t.comments[a.penId];for(o=0;o<Object.keys(c).length;o++){var u,f;if(u=Object.keys(c)[o])(f=c[u])&&f.time&&l.push(A()({},u,f))}l=l.sort((function(e,t){return e.time>t.time?1:-1})),s&&(l=l.slice(0,5))}return a.data&&!a.data.datas&&(a.data.datas={}),{CurrentData:a,WeighingsList:r,Weighings:i,CommentsList:c,Comments:l}}},{key:"getData",value:function(){if(this.props.firebase&&this.props.firebase.localDataStore&&this.state.currentData.penId){var e=this.props.firebase.localDataStore;e.pens||(e.pens={}),this.props.getPens(e.pens.update_time);var t=null;e.weighings&&e.weighings[this.state.currentData.penId]&&(t=e.weighings.update_time),this.props.getWeights(this.state.currentData.penId,t,e.sections),this.props.getComments(this.state.currentData.penId),this.props.getBatch(e.batchs.update_time)}}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore)){var a=this.props.firebase.localDataStore;if(JSON.stringify(e.currentData)!==JSON.stringify(this.state.currentData)||a.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(Se(a.sections))||a.weighings&&JSON.stringify(this.state.Weighings)!==JSON.stringify(Se(localDataStoree.weighings))||a.comments&&JSON.stringify(this.state.Comments)!==JSON.stringify(Se(localDataStoree.comments))){var n=this.setData(this.props),r=n.CurrentData,i=n.WeighingsList,s=n.Weighings,o=n.CommentsList,c=n.Comments;this.setState({currentData:r,WeighingsList:i,Weighings:s,CommentsList:o,Comments:c})}}}},{key:"render",value:function(){var e=this,t=(this.props.firebase.firebaseIsLoading,this.props.firebase.localDataStore),a=this.state.currentData;if(a.data){var n=a.data.datas.count?a.data.datas.count:0,i=[];this.state.Weighings.length>0&&(i=this.state.Weighings[0][Object.keys(this.state.Weighings[0])].weight/this.state.Weighings[0][Object.keys(this.state.Weighings[0])].count);var s=a.data.datas.batch?a.data.datas.batch:"No Batch",o={},c="",l=i;if(a.data.datas.batch&&t.batchs&&t.batchs[a.data.datas.batch]){var u=(o=t.batchs[a.data.datas.batch]).time;c=Math.floor((Date.now()-u)/864e5),a.data.datas.gcurve=o.gcurve;var f=Ae(t,a.penId);f&&f.Now&&(l=f.Now)}return o.datas||(o.datas={}),o.datas.devianceMin||(o.datas.devianceMin=0),o.datas.devianceMax||(o.datas.devianceMax=0),r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fill]},r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth,ga.bottomMargin,va.rowCenter]},r.a.createElement(_t.a,{style:{padding:6,paddingRight:15}},r.a.createElement(Na.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){return $r(e,t,a,!1)}})),r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth]},r.a.createElement(La,{Text:a.penId,buttonStyle:{backgroundColor:ha},onPress:function(){}})),r.a.createElement(_t.a,{style:{padding:6,paddingLeft:15}},r.a.createElement(Na.a,{name:"md-arrow-forward",type:"ionicon",size:25,color:"black",onPress:function(){return $r(e,t,a,!0)}}))),r.a.createElement(_t.a,{style:[va.fullWidth]},r.a.createElement(Ga,{texts:["Pig count","Batch","Age Days","Weight","Growth Cruve","Alarm Max","Alarm Min","Mixtur","Correction","Portion in kg"],onPress:function(e){return function(e,t){switch(e){case 1:switch(t.index){case 0:console.log("test")}}}(1,e)},datas:[n,s,c,l,a.data.datas.gcurve?a.data.datas.gcurve:"default",o.datas.devianceMin+" %",o.datas.devianceMax+" %","-","-","-"]})),r.a.createElement(_t.a,{style:{height:20}}),r.a.createElement(_t.a,{style:[va.fill,va.midWidth,{height:215}]},r.a.createElement(Ga,{texts:["Last weighings"],datas:[]}),r.a.createElement(_t.a,{style:{height:10}}),r.a.createElement(Hn.a,{data:this.state.Weighings,renderItem:function(t){var a=t.item;t.index;if("__jsogObjectId"===a)return r.a.createElement(r.a.Fragment,null);var n=e.state.WeighingsList[Object.keys(a)[0]];return r.a.createElement(Ga,{texts:[me(n.time)],datas:[n.weight+"   : "+n.count+" pigs"]})},numColumns:1,keyExtractor:function(e,t){return String(t)}})),r.a.createElement(_t.a,{style:{height:20}}),r.a.createElement(_t.a,{style:[va.fill,va.midWidth,{height:215}]},r.a.createElement(Ga,{texts:["Action log"],datas:[]}),r.a.createElement(_t.a,{style:{height:10}}),r.a.createElement(Hn.a,{data:this.state.Comments,renderItem:function(t){var a=t.item;t.index;if("__jsogObjectId"===a)return r.a.createElement(r.a.Fragment,null);var n=e.state.CommentsList[Object.keys(a)[0]];return r.a.createElement(Ga,{texts:[me(n.time)+":\n"+n.user],datas:[(n.quantity?n.quantity+" * ":"")+n.action+":\n"+n.data]})},numColumns:1,keyExtractor:function(e,t){return String(t)}})),r.a.createElement(_t.a,{style:{height:30}}),r.a.createElement(_t.a,{style:[va.borderContainer,va.midWidth]},r.a.createElement(Ya,null)))}return r.a.createElement(_t.a,{style:[va.fillRowCenter,va.center,va.logoContainer]},r.a.createElement(ea.a,{style:va.fullSize,source:ma.Hexa_icon,resizeMode:"contain"}))}}]),a}(n.Component);function $r(e,t,a,n){var r=t.pens[a.penId].section,i=Se(t.sections[r].pens);if(a.type===ce.PENS&&a.data&&i[a.penId]){var s=Object.keys(i).indexOf(a.penId);switch(n){case!0:s+=1;break;case!1:s-=1}s<0?s=Object.keys(i).length-1:s>=Object.keys(i).length&&(s=0),e.props.setCurrentData(Object.keys(i)[s]),_.replace("DataDisplay")}}var ei=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},getPens:function(t){return e(V.actionStarting(le.FETCH,ce.PENS,{DataTime:t}))},getWeights:function(t,a,n){return e(V.actionStarting(le.FETCH,ce.WEIGHING,{PenId:t,DataTime:a,MemSections:n}))},getComments:function(t){return e(V.actionStarting(le.FETCH,ce.COMMENTS,{PenId:t}))},getBatch:function(t){return e(V.actionStarting(le.FETCH,ce.BATCHS,{DataTime:t}))},setCurrentData:function(t){return e(V.setCurrentData({type:ce.PENS,penId:t}))},setCurrentDataElement:function(t){return e(V.setCurrentData(t))}}}))(Kr);function ti(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var ai=function(e){Xt()(a,e);var t=ti(a);function a(e){var n;zt()(this,a),(n=t.call(this,e)).state={currentData:e.currentData};var r=n.setData(e),i=r.CurrentData,s=r.WeighingsList,o=r.Weighings;return n.state={currentData:i,WeighingsList:s,Weighings:o},n}return qt()(a,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=this.state.currentData,n=Se(t.pigs);n[a.TagId]&&(a.data=n[a.TagId]);var r=[],i=[],s="android"===te.a.OS||"ios"===te.a.OS;if(t&&t.weighings&&t.weighings[a.penId]){r=t.weighings[a.penId];for(var o=0;o<Object.keys(r).length;o++){var c=Object.keys(r)[o];if(c){var l=r[c];l&&l.time&&i.push(A()({},c,l))}}i=i.sort((function(e,t){return e.time>t.time?1:-1})),s&&(i=i.slice(0,5))}return a.data&&!a.data.datas&&(a.data.datas={}),{CurrentData:a,WeighingsList:r,Weighings:i}}},{key:"getData",value:function(){if(this.props.firebase&&this.props.firebase.localDataStore&&this.state.currentData.penId){var e=this.props.firebase.localDataStore;e.pens||(e.pens={}),this.props.getPens(e.pens.update_time),this.props.getWeights(this.state.currentData.penId),this.props.getBatch(null)}}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore)){var a=this.props.firebase.localDataStore;if(JSON.stringify(e.currentData)!==JSON.stringify(this.state.currentData)||a.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(Se(a.sections))||a.weighings&&JSON.stringify(this.state.Weighings)!==JSON.stringify(Se(localDataStoree.weighings))){var n=this.setData(this.props),r=n.CurrentData,i=n.WeighingsList,s=n.Weighings;this.setState({currentData:r,WeighingsList:i,Weighings:s})}}}},{key:"render",value:function(){var e=this,t=(this.props.firebase.firebaseIsLoading,this.props.firebase.localDataStore),a=this.state.currentData;if(a.data){var n=a.data.datas.count?a.data.datas.count:0,i=[];if(this.state.Weighings.length>0){i=this.state.Weighings[0][Object.keys(this.state.Weighings[0])].weight/this.state.Weighings[0][Object.keys(this.state.Weighings[0])].count}var s=a.data.datas.batch?a.data.datas.batch:"No Batch",o={},c="",l=i;if(a.data.datas.batch&&t.batchs&&t.batchs[a.data.datas.batch]){var u=(o=t.batchs[a.data.datas.batch]).time;c=Math.floor((Date.now()-u)/864e5),a.data.datas.gcurve=o.gcurve,l=CurvePredict(t,a.penId).Now}return o.datas||(o.datas={}),o.datas.devianceMin||(o.datas.devianceMin=0),o.datas.devianceMax||(o.datas.devianceMax=0),r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fill]},r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth,ga.bottomMargin,va.rowCenter]},r.a.createElement(_t.a,{style:{padding:6,paddingRight:15}},r.a.createElement(Na.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){return ni(e,t,a,!1)}})),r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth]},r.a.createElement(La,{Text:a.penId,buttonStyle:{backgroundColor:ha},onPress:function(){}})),r.a.createElement(_t.a,{style:{padding:6,paddingLeft:15}},r.a.createElement(Na.a,{name:"md-arrow-forward",type:"ionicon",size:25,color:"black",onPress:function(){return ni(e,t,a,!0)}}))),r.a.createElement(_t.a,{style:[va.fullWidth]},r.a.createElement(Ga,{texts:["Pig count","Batch","Age Days","Weight","Growth Cruve","Alarm Max","Alarm Min","Mixtur","Correction","Portion in kg"],onPress:function(e){return function(e,t){switch(e){case 1:switch(t.index){case 0:console.log("test")}}}(1,e)},datas:[n,s,c,l,a.data.datas.gcurve?a.data.datas.gcurve:"default",o.datas.devianceMin+" %",o.datas.devianceMax+" %","-","-","-"]})),r.a.createElement(_t.a,{style:{height:20}}),r.a.createElement(_t.a,{style:[va.fill,va.midWidth,{height:250}]},r.a.createElement(Ga,{texts:["Last weighings"],datas:[]}),r.a.createElement(_t.a,{style:{height:10}}),r.a.createElement(Hn.a,{data:this.state.Weighings,renderItem:function(t){var a=t.item;t.index;if("__jsogObjectId"===a)return r.a.createElement(r.a.Fragment,null);var n=e.state.WeighingsList[Object.keys(a)[0]];return r.a.createElement(Ga,{texts:[me(n.time)],datas:[n.weight]})},numColumns:1,keyExtractor:function(e,t){return String(t)}})),r.a.createElement(_t.a,{style:{height:30}}),r.a.createElement(_t.a,{style:[va.borderContainer,va.midWidth]},r.a.createElement(Ya,null)))}return r.a.createElement(_t.a,{style:[va.fillRowCenter,va.center,va.logoContainer]},r.a.createElement(ea.a,{style:va.fullSize,source:ma.Hexa_icon,resizeMode:"contain"}))}}]),a}(n.Component);function ni(e,t,a,n){var r=t.pens[a.penId].section,i=Se(t.sections[r].pens);if(a.type===ce.PENS&&a.data&&i[a.penId]){var s=Object.keys(i).indexOf(a.penId);switch(n){case!0:s+=1;break;case!1:s-=1}s<0?s=Object.keys(i).length-1:s>=Object.keys(i).length&&(s=0),e.props.setCurrentData(Object.keys(i)[s]),_.replace("DataDisplay")}}Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},getPens:function(t){return e(V.actionStarting(le.FETCH,ce.PENS,{DataTime:t}))},getWeights:function(t){return e(V.actionStarting(le.FETCH,ce.WEIGHING,{PenId:t}))},getBatch:function(t){return e(V.actionStarting(le.FETCH,ce.BATCHS,{BatchId:t}))},setCurrentData:function(t){return e(V.setCurrentData({type:ce.PENS,penId:t}))},setCurrentDataElement:function(t){return e(V.setCurrentData(t))}}}))(ai);function ri(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ii(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ri(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ri(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function si(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var oi=function(e){Xt()(a,e);var t=si(a);function a(e){var n;return zt()(this,a),(n=t.call(this,e)).state={currentData:{}},n}return qt()(a,[{key:"getData",value:function(){if(this.props.firebase&&this.props.firebase.localDataStore){this.props.firebase.localDataStore;if(this.props.firebase.currentData&&this.props.firebase.currentData.type)this.props.firebase.currentData.type}}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore)){var a=this.props.firebase.localDataStore;if(this.props.firebase.currentData&&this.props.firebase.currentData.type&&JSON.stringify(this.state.currentData)!==JSON.stringify(this.props.firebase.currentData)){var n=this.props.firebase.currentData;switch(n.type){case ce.PENS:if(a.pens){var r=Se(a.pens);r[n.penId]&&(JSON.stringify(n.data)!==JSON.stringify(r[n.penId])&&(n.data=r[n.penId]),this.props.setCurrentDataElement(n))}this.setState({currentData:n});break;case ce.PIGS:default:this.setState({currentData:n})}}}}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=this.props.firebase.localDataStore,a=this.props.firebase.viewError,n=this.state.currentData,i=r.a.createElement(_t.a,null);switch(n.type){case ce.PENS:i=r.a.createElement(ei,{currentData:this.state.currentData});break;case ce.PIGS:i=ci(this,n,t)}return r.a.createElement(za.a,{style:[va.fullSize,va.fill]},r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fill]},a?r.a.createElement(ka.a,{style:Da.error},a):r.a.createElement(r.a.Fragment,null),i),(e||this.props.firebase.viewIsLoading)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"})))}}]),a}(n.Component);var ci=function(e,t,a){var n;if(a&&a.pigs&&(n=Se(a.pigs))[t.TagId]&&(t.data=n[t.TagId]),t.data&&!t.data.datas&&(t.data.datas={}),!t.data)return r.a.createElement(_t.a,{style:[va.fillRowCenter,va.center,va.logoContainer]},r.a.createElement(ea.a,{style:va.fullSize,source:ma.Hexa_icon,resizeMode:"contain"}));var i="android"===te.a.OS||"ios"===te.a.OS;return r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fill]},i?r.a.createElement(_t.a,{style:[va.fill,va.row,va.fullWidth]},r.a.createElement(_t.a,{style:[va.fill,va.column,{backgroundColor:"red"}]},r.a.createElement(_t.a,{style:[va.fill,va.row,va.fullWidth,{backgroundColor:"blue"}]},r.a.createElement(_t.a,{style:{justifyContent:"center",alignItems:"center"}})),r.a.createElement(_t.a,{style:[va.fill,va.row,va.fullWidth]},r.a.createElement(ka.a,null,"Messages"),r.a.createElement(ka.a,null,"Errors"))),r.a.createElement(_t.a,{style:[va.fill,va.column]},connectedState===ConnectionState.CONNECTED?r.a.createElement(_t.a,{style:ii(ii({},li.circle),{},{backgroundColor:"green",justifyContent:"center",alignItems:"center"})},r.a.createElement(ka.a,null,"Device is"),r.a.createElement(ka.a,null,"connected")):r.a.createElement(_t.a,{style:ii(ii({},li.circle),{},{backgroundColor:"red",justifyContent:"center",alignItems:"center"})},r.a.createElement(ka.a,null,"No Device"),r.a.createElement(ka.a,null,"connected")))):r.a.createElement(r.a.Fragment,null),r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth]},r.a.createElement(La,{Text:t.TagId,buttonStyle:{backgroundColor:ha},onPress:function(){}})),r.a.createElement(_t.a,{style:[va.fullWidth]},r.a.createElement(Ga,{ingrid:!0,texts:["Section","Pen"],datas:[t.data.section,t.data.pen]}),r.a.createElement(_t.a,{style:{height:20}}),r.a.createElement(_t.a,{style:va.colCenter},r.a.createElement(Na.b,{label:"Comment:",multiline:!0,containerStyle:[{borderWidth:1}],style:[Da.input],onChangeText:function(e){},value:"NONE"}))))},li=ta.a.create({circle:{width:125,height:125,borderRadius:62.5,marginTop:ga.tiny,marginLeft:ga.tiny}}),ui=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},getWeights:function(t){return e(V.actionStarting(le.FETCH,ce.WEIGHING,{PenId:t}))},setCurrentData:function(t){return e(V.setCurrentData({type:ce.PENS,penId:t}))},setCurrentDataElement:function(t){return e(V.setCurrentData(t))}}}))(oi);function fi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var pi=function(e){Xt()(a,e);var t=fi(a);function a(e){var n;zt()(this,a);var r=(n=t.call(this,e)).setData(e),i=r.isClosed,s=r.isVirtual,o=r.StartDate,c=r.EndDate,l=r.Animals,u=r.TargetWeight,f=r.AverageWeight,p=r.AverageGrowth,h=r.Comments_List,d=r.Comments;return n.state={Prediction:!1,isClosed:i,isVirtual:s,StartDate:o,EndDate:c,Animals:l,TargetWeight:u,AverageWeight:f,AverageGrowth:p,Comments_List:h,Comments:d},n}return qt()(a,[{key:"setData",value:function(e){var t,a,n,r,i,s,o,c,l=e.firebase.localDataStore,u=(e.firebase.currentData,l.batchs[this.props.firebase.currentData.batchId]),f=Ce(u,l);f&&(t=f.StartDate,a=f.EndDate,n=f.TargetWeight,f.PenCount,r=f.Animals,i=f.AverageWeight,s=f.AverageGrowth,o=f.isClosed,c=f.isVirtual);var p=null,h=[];return u&&u.state&&"Closed"===u.state&&u.closed&&u.closed.comments&&(p=[],Object.keys(u.pens).reverse().filter((function(e){return"__jsogObjectId"!==e})).forEach((function(e){var t=[];if(u.closed.comments[e]){t=u.closed.comments[e];for(var a=0;a<Object.keys(t).length;a++){var n=Object.keys(t)[a];if(n){var r=t[n];r&&r.time&&(r.pen=e,h.push(A()({},n,r)))}}}p=p.concat(t)}))),h=h.sort((function(e,t){return e.time>t.time?1:-1})),{isClosed:o,isVirtual:c,StartDate:t,EndDate:a,Animals:r,TargetWeight:n,AverageWeight:i,AverageGrowth:s,Comments_List:p,Comments:h}}},{key:"getData",value:function(){var e=this,t=this.props.firebase.localDataStore,a=this.props.firebase.currentData;if(a&&a.batchId&&t.batchs[a.batchId]){var n=t.batchs[a.batchId];this.props.getWeights(t.weighings?t.weighings.update_time:null,t.sections);var r=null;t.pens&&(r=t.pens.update_time),n.pens&&Object.keys(n.pens).filter((function(e){return"__jsogObjectId"!==e})).forEach((function(t){e.props.getPen(t,r)}));var i="";a.curveId&&(i=a.curveId),this.props.getCurve(i)}}},{key:"checkData",value:function(e){}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore)){var a=this.setData(this.props),n=a.isClosed,r=a.isVirtual,i=a.StartDate,s=a.EndDate,o=a.Animals,c=a.TargetWeight,l=a.AverageWeight,u=a.AverageGrowth,f=a.Comments_List,p=a.Comments;this.setState({Prediction:!1,isClosed:n,isVirtual:r,StartDate:i,EndDate:s,Animals:o,TargetWeight:c,AverageWeight:l,AverageGrowth:u,Comments_List:f,Comments:p})}}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.viewError,n=this.props.firebase.localDataStore,i=(this.props.firebase.currentData,this.state.StartDate),s=((new Date).getTime()-i)/864e5;s=s.toFixed(0),i=new Date(i).getDate()+"/"+(new Date(i).getMonth()+1)+"/"+new Date(i).getFullYear();var o=this.state.EndDate;o=new Date(o).getDate()+"/"+(new Date(o).getMonth()+1)+"/"+new Date(o).getFullYear();var c=String(this.state.isVirtual);return c=c.charAt(0).toUpperCase()+c.slice(1),r.a.createElement(za.a,{style:[va.fullSize,va.fill]},r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fill]},a?r.a.createElement(ka.a,{style:Da.error},a):r.a.createElement(r.a.Fragment,null),r.a.createElement(Fa,{Text:this.props.firebase.currentData.batchId?this.props.firebase.currentData.batchId:"-NON-"}),r.a.createElement(_t.a,null,r.a.createElement(_t.a,{style:[va.fullWidth,{justifyContent:"center"}]},r.a.createElement(Zn.a,{itemDimension:120,spacing:10,data:[{title:"Start",data:i},{title:"End Forecast",data:o},{title:"Target Weight",data:this.state.TargetWeight}],renderItem:function(e){var t=e.item;return r.a.createElement(_t.a,{style:[va.borderContainer,{textAlign:"center"}]},r.a.createElement(ka.a,null,t.title),r.a.createElement(ka.a,null,t.data))}})),r.a.createElement(_t.a,{style:[va.fullWidth,{justifyContent:"center"}]},r.a.createElement(Zn.a,{itemDimension:120,spacing:10,data:[{title:"Animals",data:this.state.Animals},{title:"Day",data:s},{title:"Avarage weight",data:this.state.AverageWeight},{title:"Average growth",data:this.state.AverageGrowth}],renderItem:function(e){var t=e.item;return r.a.createElement(_t.a,{style:[va.borderContainer,{textAlign:"center"}]},r.a.createElement(ka.a,null,t.title),r.a.createElement(ka.a,null,t.data))}})),r.a.createElement(La,{Text:"Show Predict",onPress:function(){e.setState({Prediction:!e.state.Prediction})}})),r.a.createElement(_t.a,{style:[va.fill,va.fullWidth,{minHeight:750}]},r.a.createElement(jr,{Predict:this.state.Prediction,weighings:n.weighings})),this.state.Comments_List?r.a.createElement(_t.a,{style:[va.fill,va.midWidth,{height:415}]},r.a.createElement(Ga,{texts:["Action log"],datas:[]}),r.a.createElement(_t.a,{style:{height:10}}),r.a.createElement(Hn.a,{data:this.state.Comments.filter((function(e){return"__jsogObjectId"!==e})),renderItem:function(t){var a=t.item,n=(t.index,e.state.Comments_List[0][Object.keys(a)[0]]);return n?r.a.createElement(Ga,{texts:[me(n.time)+":\n"+n.user],datas:[n.pen+": "+n.action+":\n"+n.data]}):null},numColumns:1,keyExtractor:function(e,t){return String(t)}})):r.a.createElement(r.a.Fragment,null)),(t||this.props.firebase.viewIsLoading)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"})))}}]),a}(n.Component),hi=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},getPen:function(t,a){return e(V.actionStarting(le.FETCH,ce.PENS,{PenId:t,DataTime:a}))},getWeights:function(t,a){return e(V.actionStarting(le.FETCH,ce.WEIGHING,{DataTime:t,MemSections:a}))},getBatch:function(t){return e(V.actionStarting(le.FETCH,ce.BATCHS,{}))},getCurve:function(t){return e(V.actionStarting(le.FETCH,ce.GRAPH,{GraphId:t}))},setCurve:function(t){return e(V.actionStarting(le.CREATE,ce.GRAPH,{Graph:t}))}}}))(pi);function di(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var gi=Object(Ht.a)({UserFront:{screen:_n,navigationOptions:function(){return{title:"User Data",headerLeft:function(e){return r.a.createElement(_t.a,{style:{padding:6,paddingLeft:15}},r.a.createElement(Na.a,{type:"ionicon",name:"md-arrow-back",size:25,color:"black",onPress:function(){"System Board"===e.label?_.nacigationPop():_.navigate("MainStack")}}))}}},path:"user_front"},UserDashBoard:{screen:Jn,navigationOptions:function(){return{title:"Dash Board"}},path:"user_dashboard"},UserPigs:{screen:ar,navigationOptions:function(){return{title:"Pigs"}},path:"user_pigs"},UserPens:{screen:cr,navigationOptions:function(){return{title:"Pens"}},path:"user_pens"},UserBatchs:{screen:mr,navigationOptions:function(){return{title:"Batchs"}},path:"user_batchs"},UserCurves:{screen:Lr,navigationOptions:function(){return{title:"Curves"}},path:"user_curves"},UserOperations:{screen:Nr,navigationOptions:function(){return{title:"Operations"}},path:"user_operations"},WeighingOperations:{screen:Br,navigationOptions:function(){return{title:"Operations"}},path:"user_operations"},DataEditor:{screen:Qr,navigationOptions:function(){return{title:"User Data"}},path:"user_dataedtior"},DataDisplay:{screen:ui,navigationOptions:function(){return{title:"User Data"}},path:"user_datadisplay"},DataPlotter:{screen:hi,navigationOptions:function(){return{title:"User Data"}},path:"user_dataplotter"}},{initialRouteName:"UserFront",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerTitleStyle:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?di(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):di(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Da.navigationHeader),headerRight:function(){return r.a.createElement(_t.a,{style:{padding:6}})}}});ta.a.create({});function mi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var bi=function(e){Xt()(a,e);var t=mi(a);function a(e){var n;return zt()(this,a),(n=t.call(this,e)).state={ISLOADPAGE:!0},n}return qt()(a,[{key:"getData",value:function(){}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.props.clearDataMem(),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.checkData(this.props)}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.firebaseUser;return r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[va.contentContainer,va.fullSize,va.fillColMain]},a?r.a.createElement(_t.a,{style:va.textContainer},r.a.createElement(ka.a,{style:Da.text},"Welcome: ",a.displayName?a.displayName:a.email)):r.a.createElement(r.a.Fragment,null),r.a.createElement(Ra,{Texts:["User Board","Systems"],Images:[ma.DashBoard,ma.System],onPress:function(e){switch(e.text){case"User Board":_.navigate("UserBoard");break;case"Systems":_.navigate("SystemBoard")}e.text}}),r.a.createElement(_t.a,{style:[va.buttonContainer,va.midWidth]},r.a.createElement(La,{Text:"LogOut",onPress:function(){e.props.logOut()}}))),(t||this.props.firebase.viewIsLoading)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"}))}}]),a}(n.Component),yi=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(V.setFirebaseError(t))},setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},clearDataMem:function(){return e(V.actionStarting(le.CLEAR,ce.USERSDATA))},logOut:function(){return e(V.actionStarting(le.SIGN,ce.USERSDATA))}}}))(bi);function vi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var Ei=function(e){Xt()(a,e);var t=vi(a);function a(e){var n;zt()(this,a);var r=(n=t.call(this,e)).setData(e).UserList;return n.state={UserList:r,User:""},n}return qt()(a,[{key:"getData",value:function(){this.props.getUsers()}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=null;return t&&t.users&&(a=Se(t.users)),{UserList:a}}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase&&this.props.firebase.localDataStore&&this.props.firebase.localDataStore.users&&JSON.stringify(this.state.UserList)!==JSON.stringify(Se(this.props.firebase.localDataStore.users)))){var a=this.setData(this.props).UserList;this.setState({UserList:a})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading;return r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[va.contentContainer,va.fullWidth,va.fill]},r.a.createElement(_t.a,{style:[va.fill,va.buttonContainer,va.fullWidth,ga.bottomMargin,va.column]},this.state.UserList?r.a.createElement(_t.a,{style:[va.fill,va.borderContainer,ga.smallHorizontalPadding,ga.smallVerticalPadding,{maxWidth:800,marginTop:10}]},r.a.createElement(qn.a,{style:Si.container},r.a.createElement(Hn.a,{data:Object.keys(this.state.UserList).filter((function(e){return"__jsogObjectId"!==e})),renderItem:function(t){var a=t.item,n=(t.index,e.state.UserList[a]);return r.a.createElement(_t.a,{style:[va.fill,va.rowCenter,va.fullWidth,{height:35}]},r.a.createElement(Va,{Title:n.name,itemStyle:[{minWidth:190,height:35}],onPress:function(){}}),r.a.createElement(Va,{itemStyle:[{width:70,height:35,justifyContent:"center"}],Title:"",onPress:function(){e.setState({User:n.name})}}),r.a.createElement(Va,{itemStyle:[{width:90,height:35}],Title:n.state,onPress:function(){e.setState({User:n.name})}}))},keyExtractor:function(e,t){return t.toString()}}))):r.a.createElement(r.a.Fragment,null),r.a.createElement(Na.b,{label:"User-tag:",containerStyle:[{borderWidth:1,marginTop:10}],style:[Da.input],onChangeText:function(t){e.setState({User:t})},value:this.state.User}))),(t||this.props.firebase.viewIsLoading)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"}))}}]),a}(n.Component),Si=ta.a.create({circle:{width:125,height:125,borderRadius:62.5,marginTop:ga.tiny,marginLeft:ga.tiny}}),Di=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(V.setFirebaseError(t))},setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},getUsers:function(){return e(V.actionStarting(le.FETCH,ce.USERS,{UserId:""}))}}}))(Ei);function wi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t()(e);if(t){var r=$t()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Zt()(this,a)}}var Pi=function(e){Xt()(a,e);var t=wi(a);function a(e){var n;zt()(this,a);var r=(n=t.call(this,e)).setData(e).FarmList;return n.state={FarmList:r,Farm:{name:""}},n}return qt()(a,[{key:"getData",value:function(){this.props.getFarms()}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=null;return t&&t.farms&&(a=Se(t.farms)),{FarmList:a}}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.props.setViewLoading(!1),this.props.setViewError(null),this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase&&this.props.firebase.localDataStore&&this.props.firebase.localDataStore.farms&&JSON.stringify(this.state.FarmList)!==JSON.stringify(Se(this.props.firebase.localDataStore.farms)))){var a=this.setData(this.props).FarmList;this.setState({FarmList:a})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading;return r.a.createElement(_t.a,{style:[va.mainContainer]},r.a.createElement(_t.a,{style:[va.contentContainer,va.fullWidth,va.fill]},r.a.createElement(_t.a,{style:[va.fill,va.buttonContainer,va.fullWidth,ga.bottomMargin,va.column]},this.state.FarmList?r.a.createElement(_t.a,{style:[va.fill,va.borderContainer,ga.smallHorizontalPadding,ga.smallVerticalPadding,{maxWidth:800,marginTop:10}]},r.a.createElement(qn.a,{style:Oi.container},r.a.createElement(Hn.a,{data:Object.keys(this.state.FarmList).filter((function(e){return"__jsogObjectId"!==e})),renderItem:function(t){var a=t.item,n=(t.index,e.state.FarmList[a]);return n.id=a,r.a.createElement(_t.a,{style:[va.fill,va.rowCenter,va.fullWidth,{height:35}]},r.a.createElement(Va,{Title:n.name,itemStyle:[{minWidth:100,height:35}],onPress:function(){}}),r.a.createElement(Va,{itemStyle:[{minWidth:150,height:35,justifyContent:"center"}],Title:n.manager,onPress:function(){e.setState({Farm:n})}}),r.a.createElement(Va,{itemStyle:[{minWidth:150,height:35}],Title:n.email,onPress:function(){e.setState({Farm:n})}}))},keyExtractor:function(e,t){return t.toString()}}))):r.a.createElement(r.a.Fragment,null),r.a.createElement(_t.a,{style:[va.rowCenter,va.fullWidth,{height:120}]},r.a.createElement(Na.b,{label:"Farm-tag:",containerStyle:[va.halvWidth,{borderWidth:1,marginTop:10}],style:[Da.input],editable:!1,onChangeText:function(t){var a=e.state.Farm;a.name=t,e.setState({Farm:a})},value:this.state.Farm.name}),r.a.createElement(La,{Text:"Consys",boxStyle:[{marginLeft:10}],onPress:function(){}}),r.a.createElement(La,{Text:"Farm Panel",boxStyle:[{marginLeft:10}],onPress:function(){""!==e.state.Farm.id&&(e.props.setUserFarm(e.state.Farm.id),_.navigate("UserPanel"))}})))),(t||this.props.firebase.viewIsLoading)&&r.a.createElement(gn.a,{style:va.loadingContainer,size:"large"}))}}]),a}(n.Component),Oi=ta.a.create({circle:{width:125,height:125,borderRadius:62.5,marginTop:ga.tiny,marginLeft:ga.tiny}}),Ci=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(V.setFirebaseError(t))},setViewLoading:function(t){return e(V.viewIsLoading(t))},setViewError:function(t){return e(V.setViewError(t))},getFarms:function(){return e(V.actionStarting(le.FETCH,ce.FARMS,{FarmId:""}))},setUserFarm:function(t){return e(V.actionStarting(le.UPDATE,ce.USERS,{farms:A()({},t,!0)}))}}}))(Pi);function ki(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Ti=Object(Ht.a)({AdminFront:{screen:yi,navigationOptions:function(){return{title:"Admin Panel",headerLeft:function(){return r.a.createElement(_t.a,{style:{padding:6,paddingLeft:15}},r.a.createElement(Na.a,{type:"ionicon",name:"md-arrow-back",size:25,color:"black",onPress:function(){return _.navigate("MainStack")}}))}}},path:"admin_front"},UserBoard:{screen:Di,navigationOptions:function(){return{title:"User Board"}},path:"admin_user_board"},SystemBoard:{screen:Ci,navigationOptions:function(){return{title:"System Board"}},path:"admin_system_board"},UserPanel:{screen:gi,navigationOptions:function(){return{title:"Admin Panel",headerLeft:function(){return r.a.createElement(_t.a,{style:{padding:6,paddingLeft:15}},r.a.createElement(Na.a,{type:"ionicon",name:"md-arrow-back",size:25,color:"black",onPress:function(){return _.navigate("SystemBoard")}}))}}},path:"admin_front"}},{initialRouteName:"AdminFront",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerTitleStyle:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(a),!0).forEach((function(t){A()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ki(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Da.navigationHeader),headerRight:function(){return r.a.createElement(_t.a,{style:{padding:6}})}}}),ji=Object(Ht.a)({SplashScreen:{screen:Ca,navigationOptions:function(){return{headerShown:!1}}},MainStack:{screen:wn,path:"Front"},AuthStack:Un,UserPanel:gi,AdminPanel:Ti,DeepLinkingScreen:{screen:Ta,path:"deeplink"}},{initialRouteName:"SplashScreen",headerMode:"none",defaultNavigationOptions:{headerTitleAlign:"center",headerRight:function(){return r.a.createElement(_t.a,{style:{padding:6}})}}}),Ii=Object(B.createAppContainer)(ji),Ai=function(){var e=Object(i.c)();return Object(n.useEffect)((function(){e(P.startup())}),[]),r.a.createElement(_t.a,{style:va.fill},r.a.createElement(Ii,{ref:function(e){_.setTopLevelNavigator(e)},uriPrefix:"agrisysapp://"}))},xi=function(e,t){var a=[],n=[],r=Object(c.b)();a.push(r),n.push(o.a.apply(void 0,a));var i=Object(l.b)(g,e),s=Object(o.e)(i,o.d.apply(void 0,n)),u=Object(l.c)(s);return r.run(t),{store:s,persistor:u}}(Object(o.c)({example:xt,firebase:Bt}),kt),Li=xi.store,Ri=xi.persistor;t.a=function(){return r.a.createElement(i.a,{store:Li},r.a.createElement(s.PersistGate,{loading:null,persistor:Ri},r.a.createElement(Ai,null)))}},362:function(e,t,a){e.exports=a(619)},486:function(e,t,a){e.exports=a.p+"static/media/Home.1fff8434.png"},487:function(e,t,a){e.exports=a.p+"static/media/Dashboard.26766c7a.png"},488:function(e,t,a){e.exports=a.p+"static/media/System.7e4af00c.png"},489:function(e,t,a){e.exports=a.p+"static/media/Feed-Curves.da739887.png"},490:function(e,t,a){e.exports=a.p+"static/media/Growth-curve.7f9a7fea.png"},491:function(e,t,a){e.exports=a.p+"static/media/User.d73be9fd.png"},492:function(e,t,a){e.exports=a.p+"static/media/Sow.beff0aff.png"},493:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABRCAYAAACuepoLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAq9JREFUeNrsnT1Lw1AUhk9FRFEhDhV0qgouLlrcjYOLi3XpasEfYjo62X/Quorg5iS0P0D8GBzVOAkWP6CVigg1197E0Naa3ER7b/K+cLig3tP4eJJz8g5XIig0JRS8Zr3Pn1+JUgE0JYgjK1JRqEz2y9DE1IJwgrdalRr1BxoZm6Th8aTvfVwvVqxacaE8zLXtQ+EEN+cHdH12QHPpLM0uZX3tbdSrdHmyS7VH0wY6w1caQNvwp5GxJC2v57+q2pJmRc7+HmAKaHBolGbTTkVvAGYIFdoBucfPp7p1rH8efwr280iJiu3ytUUr9iSY5+yZrqIqTAayzB+sIgOqHtJgq7vGD1IRpsaHUY3PTptWmCJjC5+/Ao8/7hlONZgZ/ow0OQylqkIGubv5Cl/3ATI4zFQUX+T7BRMCTMCM5mumqhf+fH8lvLdRqzqraJ7aU++pscznuyBvPk3XjEh/lKcpWZSVr8x+mMNufby/2p6m+rc58xRFZZvD0/O6b3PY/Zg5Pd5BA0I3B0yMRlsU3Ms0ALOlXAh5dwCzpZIVdwEh5uP4x+gGk1lwlYAQjDjCRAMCTMAETAgwARMwoZ5zphJiNpqonri73lrF8thu/U+C0x5Dpz0v2fWYKlcmGhC6OQSYMo1GMjnthkSsfr2WRFsD0lFfnlh5rswSyeO0y5BHyKiO4mgURh7POdCA0M0BEzAhwARMwIQAEzABEzAhwARMwIQ6FRen3fgPmHDaxVh5rswSwWnvlsOX4LQHzIEGhG4OmIAJASZgAiYEmIAJmPGEafJVBxZHi21sPCvH30Fv8W7uqMj3F/1uZCe6PtP3vxvQYg7TcO33dLe6LTh2ACk7Gpe5RxkeFcELKYd0m/UrT4q+zxMtBODgHOLcjHnc8oLyrMQvUDWKr3xX46cAAwCxt3YCfnN46AAAAABJRU5ErkJggg=="},494:function(e,t,a){e.exports=a.p+"static/media/Area_Colour.f4a4e098.png"},495:function(e,t,a){e.exports=a.p+"static/media/AutoPig.ec16c410.png"},496:function(e,t,a){e.exports=a.p+"static/media/Feed-Components.224ca1b3.png"},497:function(e,t,a){e.exports=a.p+"static/media/Hexagon-globe.fce26805.png"},498:function(e,t,a){e.exports=a.p+"static/media/Hexa-icon.5129d536.png"},499:function(e,t,a){e.exports=a.p+"static/media/Logo.9b051259.png"},500:function(e,t,a){e.exports=a.p+"static/media/TOM.c88886f3.png"}},[[362,1,2]]]);
//# sourceMappingURL=app.1a736ccb.chunk.js.map