(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{371:function(e,t,a){"use strict";var r=a(0),n=a.n(r),i=a(33),s=a(313),o=a(46),c=a(122),l=a(206),u=a(242),f=a.n(u),p=a(314),m=a.n(p),h=Object(l.a)((function(e,t){return f.a.encode(e)}),(function(e,t){return f.a.decode(e)})),d={key:"root",storage:m.a,transforms:[h],blacklist:[]},g=a(23),b=a.n(g),y=a(40),v=a(85),E=Object(v.createActions)({startup:null}),S=E.Types,D=E.Creators,O=S,P=D,C=Object(v.createActions)({fetchUser:null,fetchUserLoading:null,fetchUserSuccess:["user"],fetchUserFailure:["errorMessage"]}),w=C.Types,j=C.Creators,k=w,I=j,x=a(5),T=a.n(x);function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N,R,M=Object(v.createActions)({firebaseStartup:null,firebaseIsLoading:["loadingstate"],setFirebaseError:["errorMessage"],setCurrentData:["data"],actionStarting:["action","ref","params"],fetchStarting:["action","ref","params"],fetchSuccess:["data"],fetchFailure:["errorMessage"]}),L=M.Types,U=M.Creators,B=A({},L),H=A({},U),W=a(52);var z={navigate:function(e,t){if(R===e)return null;R=e,N.dispatch(W.NavigationActions.navigate({routeName:e,params:t}))},replace:function(e,t){if(R===e)return null;R=e,N.dispatch(W.StackActions.replace({routeName:e,params:t}))},navigateAndReset:function(e,t){if(R===e)return null;R=e,N.dispatch(W.StackActions.reset({index:0,key:null,actions:[W.NavigationActions.navigate({routeName:e,params:t})]}))},setTopLevelNavigator:function(e){N=e}},G=b.a.mark(_);function _(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.f)(H.firebaseStartup());case 2:z.navigateAndReset("MainStack");case 3:case"end":return e.stop()}}),G)}var V=a(335),J=a.n(V),Z=a(631),Y=a(628),q=a(629),X=Object(Z.a)(3,(function(e,t,a){var r=Object(Y.a)(Number);return r(e)&&r(t)&&r(a)&&Object(q.a)(a,e)&&Object(q.a)(t,a)}))(200,299),Q=J.a.create({baseURL:"https://jsonplaceholder.typicode.com/users/",headers:{Accept:"application/json","Content-Type":"application/json"},timeout:3e3});var K=function(){if(console.log("user fetch test"),Math.random()>.5)return new Promise((function(e,t){console.log("error"),e(null)}));var e=Math.floor(Math.random()/.1)+1;return Q.get(e.toString()).then((function(e){return X(e.status)?e.data:null}))},$=b.a.mark(ee);function ee(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.f)(I.fetchUserLoading());case 2:return t.next=4,Object(y.c)(K);case 4:if(!(e=t.sent)){t.next=10;break}return t.next=8,Object(y.f)(I.fetchUserSuccess(e));case 8:t.next=12;break;case 10:return t.next=12,Object(y.f)(I.fetchUserFailure("There was an error while fetching user informations."));case 12:case"end":return t.stop()}}),$)}var te=a(8),ae=a(151),re="starter",ne="free",ie="owner",se="admin",oe={USERS:"users",FARMS:"farms",SECTIONS:"farms_data/$farmid/sections",PENS:"farms_data/$farmid/pens",PIGS:"farms_data/$farmid/pigs",BATCHS:"farms_data/$farmid/batchs",WEIGHING:"farms_data/$farmid/pens/$penid/weighings/",GRAPH:"farms_data/$farmid/Graph/$graphid/",FARMDATAS:"farms_data/$farmid/datas/",SHARES:"shareData"},ce={SIGN:"sign",FETCH:"fetch",CREATE:"create",UPDATE:"update",MOVE:"move",DELETE:"delete"};function le(e){return e<10&&(e="0"+e),e}function ue(e){var t=new Date(parseInt(e));return le(t.getDate())+"/"+le(t.getMonth())+"/"+t.getFullYear()+" "+le(t.getHours())+":"+le(t.getMinutes())+":"+le(t.getSeconds())}var fe=/[^a-zA-Z]/g,pe=/[^0-9]/g;function me(e,t){var a=e.replace(fe,""),r=t.replace(fe,"");if(a===r){var n=parseInt(e.replace(pe,""),10),i=parseInt(t.replace(pe,""),10);return n===i?0:n>i?1:-1}return a>r?1:-1}function he(e){var t,a={},r=[];for(t in e)e.hasOwnProperty(t)&&"__jsogObjectId"!==t&&r.push(t);for(r.sort(me),t=0;t<r.length;t++)a[r[t]]=e[r[t]];return a}var de=a(24);a(277),a(234),a(278);function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ye(e){var t=e.Email,a=e.Pass;return new Promise((function(e,r){de.a.auth().createUserWithEmailAndPassword(t,a).then((function(){var t=de.a.auth().currentUser,a=t.displayName?t.displayName:t.email;Se(oe.USERS,ce.UPDATE,{UserId:t.uid,Data:{name:a,state:re}}).then((function(t){e(t)}))})).catch((function(t){console.log("UserCreate Error: ",t),"auth/email-already-in-use"===t.code&&e({error:"The email address is already in use."}),"aith/invalid-email"===t.code&&e({error:"The email addres is invalid."})}))}))}function ve(e){var t=e.Email,a=e.Pass;if(de.a.auth().currentUser){if(de.a.auth().currentUser.email==email)return new Promise((function(e,t){e(!0)}));Ee()}return new Promise((function(e,r){de.a.auth().signInWithEmailAndPassword(t,a).then((function(){e(!0)})).catch((function(t){console.log("User Signin Error: ",t),"auth/email-already-in-use"===t.code&&e("The email address is already in use."),"aith/invalid-email"===t.code?e("The email addres is invalid."):e("Could not singin")}))}))}function Ee(){return new Promise((function(e,t){de.a.auth().signOut().then((function(){e(!0)}))}))}function Se(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=de.a.auth().currentUser;switch(e){case oe.USERS:switch(t){case ce.FETCH:return De(a);case ce.CREATE:return a.hasOwnProperty("UserData")?new Promise((function(e,t){a[0];Ce({Data:{name:a.Farms.name}}).then((function(t){we({FarmId:t,Data:{sections:a.Sections,pens:a.Pens}}).then((function(){Oe({Data:{state:a.UserData.state,farms:T()({},t,!0)}}).then((function(){De(r.uid).then((function(t){e({userData:t})}))}))}))}))})):ye(a);case ce.UPDATE:return Oe(a);case ce.SIGN:return a?ve(a):Ee()}break;case oe.FARMS:switch(t){case ce.FETCH:return Pe(a);case ce.CREATE:break;case ce.UPDATE:console.log("??")}break;case oe.FARMDATAS:console.log("");break;case oe.SECTIONS:switch(t){case ce.FETCH:return je(a)}break;case oe.PENS:switch(t){case ce.FETCH:return ke(a);case ce.CREATE:return Ie(a);case ce.DELETE:return xe(a)}case oe.PIGS:switch(t){case ce.FETCH:return Te(a);case ce.CREATE:return Ae(a)}case oe.BATCHS:switch(t){case ce.FETCH:return Ne(a);case ce.CREATE:return Re(a);case ce.UPDATE:return Me(a)}break;case oe.WEIGHING:switch(t){case ce.FETCH:return Le(a);case ce.CREATE:return Ue(a)}case oe.GRAPH:switch(t){case ce.FETCH:return Be(a);case ce.CREATE:case ce.UPDATE:return He(a)}}return new Promise((function(e,t){e({error:"Unknown Action"})}))}function De(e){var t=e.UserId,a=t||de.a.auth().currentUser.uid;if(a){var r="users/"+a;return de.a.database().ref(r).once("value").then((function(e){return e.val()}))}return new Promise((function(e,t){console.log("User uid in fecth unknown"),e(null)}))}function Oe(e){var t=e.UserId,a=e.Data,r=t||de.a.auth().currentUser.uid;if(r){var n="users/"+r;return new Promise((function(e,t){de.a.database().ref(n).update(a).then((function(t){e(null)})).catch((function(t){"database/permission-denied"===t.code?console.log("User update was permission denied. "):t.code&&console.log("User update Error: ",t),e({error:"An error occurred"})}))}))}return new Promise((function(e,t){console.log("User uid in fecth unknown"),e(null)}))}function Pe(e){var t=e.FarmId;if(t){var a="farms/"+t;return de.a.database().ref(a).once("value").then((function(e){return{farms:e.val()}}))}return new Promise((function(e,t){console.log("Farm uid in fecth unknown"),e(null)}))}function Ce(e){var t=e.Data,a=de.a.auth().currentUser;a.uid;return new Promise((function(e,r){var n=de.a.database().ref("farms/").push(),i=n.key;n.set({email:a.email,manager:a.displayName?a.displayName:a.email,name:t.name}).then((function(){e(i)})).catch((function(t){console.log("Create Farm Error: ",t),e(!1)}))}))}function we(e){var t=e.FarmId,a=e.Data;if(t){var r="farms_data/"+t;return new Promise((function(e,t){de.a.database().ref(r).update(a).then((function(){e(null)})).catch((function(t){"database/permission-denied"===t.code?console.log("Farm data update was permission denied. "):t.code&&console.log("User update Error: ",t),e(!1)}))}))}return new Promise((function(e,t){console.log("Farm uid in fecth unknown"),e(null)}))}function je(e){var t=e.FarmId,a=e.SectionId;if(t){var r="farms_data/"+t+"/sections";return a&&(r+="/"+a),de.a.database().ref(r).once("value").then((function(e){return{sections:e.val()}}))}return new Promise((function(e,t){console.log("Fecth Pigs Error"),e(null)}))}function ke(e){var t=e.FarmId,a=e.PenId;if(t){var r="farms_data/"+t+"/pens";return a&&(r+="/"+a),de.a.database().ref(r).once("value").then((function(e){if(a){var t=e.val();return t||(t={}),t.datas||(t.datas={}),t.datas.gcurve||(t.datas.gcurve="default"),{pens:T()({},a,t)}}return{pens:e.val()}}))}return new Promise((function(e,t){console.log("Fecth Pens Error"),e(null)}))}function Ie(e){var t=e.FarmId,a=e.PenId,r=e.SectionId;if(t){var n="farms_data/"+t+"/";return new Promise((function(e,t){if(a){var i=n+"pens/"+a+"/";de.a.database().ref(i).set({section:r}).then((function(){de.a.database().ref(n+"sections/"+r+"/pens").update(T()({},a,!0)).then((function(){e(null)}))}))}}))}}function xe(e){var t=e.FarmId,a=e.PenId,r=e.SectionId;if(t&&a){var n="farms_data/"+t+"/";return new Promise((function(e,t){de.a.database().ref(n+"pens/"+a).remove().then((function(){r?de.a.database().ref(n+"sections/"+r+"/pens/"+a).remove().then((function(){e(null)})):e(null)}))}))}}function Te(e){var t=e.FarmId,a=e.TagId;if(t){var r="farms_data/"+t+"/pigs";return a&&(r+="/"+a),de.a.database().ref(r).once("value").then((function(e){if(a){var t=e.val();return t?(t.datas||(t.datas={}),t.datas.gcurve||(t.datas.gcurve="default"),{pigs:T()({},a,t)}):null}return{pigs:e.val()}}))}return new Promise((function(e,t){console.log("Fecth Pigs Error"),e(null)}))}function Fe(e){var t=e.FarmId,a=(e.TagId,e.PenId),r=e.Action;if(a){var n="farms_data/"+t+"/pens/"+a+"/datas";return new Promise((function(e,i){de.a.database().ref(n+"/count").once("value").then((function(i){var s=i.val();s||(s=0),s=r&&!isNaN(r)?parseInt(s)+parseInt(r):parseInt(s)+1,de.a.database().ref(n).update({count:s}).then((function(){ke({FarmId:t,PenId:a}).then((function(t){e(t)}))}))})).catch((function(t){console.log("Create new pig Error: ",t),e(null)}))}))}return new Promise((function(e,t){e(null)}))}function Ae(e){var t=e.FarmId,a=e.TagId,r=e.PenId;e.Action;if(t){var n="farms_data/"+t+"/";return new Promise((function(e,i){if(!a)return console.log("Firebase secive ???"),Fe({FarmId:t,TagId:a,PenId:r,Action:action});var s=n+"pigs/"+a+"/";Te({FarmId:t,TagId:a}).then((function(n){n&&n.pigs&&(n=n.pigs[a]?n.pigs[a]:null),n&&n.hasOwnProperty("pen")?r&&r!=n.pen?Fe({FarmId:t,TagId:a,PenId:n.pen,Action:-1}).then((function(n){Fe({FarmId:t,TagId:a,PenId:r,Action:1}).then((function(a){de.a.database().ref(s).update({pen:r}).then((function(){Te({FarmId:t}).then((function(t){e(t)}))}))}))})):e(null):de.a.database().ref(s).update({pen:0}).then((function(){Te({FarmId:t}).then((function(t){e(t)}))}))}))}))}}function Ne(e){var t=e.FarmId,a=e.BatchId,r=e.Data;e.Time;if(t){var n="farms_data/"+t+"/batchs";if(a&&(n+="/"+a),!r)return de.a.database().ref(n).once("value").then((function(e){if(a){var t=e.val();return t?(t.datas||(t.datas={}),t.pens||(t.pens=[]),t.datas.gcurve||(t.datas.gcurve="default"),{batchs:T()({},a,t)}):null}return{batchs:e.val()}}));if(a)switch(r){case oe.BATCHS:return n+="/datas",de.a.database().ref(n).once("value").then((function(e){return{batchs:T()({},a,{datas:e.val()})}}));case oe.PENS:return n+="/pens",de.a.database().ref(n).once("value").then((function(e){return{batchs:T()({},a,{pens:e.val()})}}));case oe.GRAPH:return n+="/gcurve",de.a.database().ref(n).once("value").then((function(e){return{batchs:T()({},a,{gcurve:e.val()})}}))}}return new Promise((function(e,t){console.log("Fecth Batchs Error"),e(null)}))}function Re(e){var t=e.FarmId,a=e.BatchId,r=e.Batch;if(t){var n="farms_data/"+t+"/batchs";return new Promise((function(e,i){if(r&&r.name){n+="/"+r.name+"/",delete r.name;var s=r.time.split(".");de.a.database().ref(n).set(be(be({},r),{},{time:new Date(s[0],s[1]-1,s[2]).getTime()})).then((function(){e(Ne({FarmId:t}))})).catch((function(t){"database/permission-denied"===t.code?console.log("Batch update was permission denied. "):t.code&&console.log("Batch update Error: ",t),e({error:"An error occurred"})}))}a&&(n+="/"+a+"/",de.a.database().ref(n).set({time:de.a.database.ServerValue.TIMESTAMP,pens:[],datas:{deviance:10}}).then((function(){e(Ne({FarmId:t}))})))}))}}function Me(e){var t=e.FarmId,a=e.BatchId,r=e.Batch;e.Data;if(t){var n="farms_data/"+t+"/batchs";return new Promise((function(e,i){a&&r?(n+="/"+a,Ne({FarmId:t,BatchId:a,Data:oe.PENS}).then((function(i){var s=i.batchs[a].pens;r.name&&delete r.name;var o=r.time.split(".");s={};r.pens.split(",").forEach((function(e){s[e]=!0})),console.log(s);var c=r.datas;de.a.database().ref(n).update(be(be({},r),{},{datas:be({},c),pens:s,time:new Date(o[0],o[1]-1,o[2]).getTime()})).then((function(){if(r.pens&&JSON.stringify(r.pens)!==JSON.stringify(s)){var e=s.filter((function(e){return r.pens.includes(e)}));e.forEach((function(e){updatePen({FarmId:t,PenId:e,Pen:{datas:{batch:""}}})}));var n=r.pens.filter((function(e){return!s.includes(e)}));n.concat(e),n.forEach((function(e){updatePen({FarmId:t,PenId:e,Pen:{datas:{batch:a}}})}))}return Ne({FarmId:t,BatchId:a})})).catch((function(t){"database/permission-denied"===t.code?console.log("Batch update was permission denied. "):t.code&&console.log("Batch update Error: ",t),console.log(t),e({error:"An error occurred"})})),e(null)}))):(console.log("Update Batchs Error"),e(null))}))}}function Le(e){var t=e.FarmId,a=e.PenId,r=e.SectionId,n=(e.limitStart,e.limitTo),i=void 0===n?5:n;if(t){var s="farms_data/"+t+"/weighings";return new Promise((function(e,n){var o={};a?(s+="/"+a,de.a.database().ref(s).orderByChild("time").limitToLast(i).once("value",(function(t){var a=T()({},t.key,{});t.forEach((function(e){a[t.key][e.key]=e.val()})),e({weighings:a})}))):je({FarmId:t,SectionId:r}).then((function(a){o=be(be({},o),a);var r=0,n=0;Object.keys(o.sections).forEach((function(a){n+=Object.keys(o.sections[a].pens).length,Object.keys(o.sections[a].pens).forEach((function(a){Le({FarmId:t,PenId:a,limitStart:0,limitTo:i}).then((function(t){r++;var a=be(be({},o.weighings),t.weighings);o=be(be({},o),{},{weighings:a}),r===n&&e(o)})).catch((function(t){console.log(t),e(o)}))}))}))})).catch((function(e){console.log(e)}))}))}return new Promise((function(e,t){console.log("Fecth Weights Error"),e(null)}))}function Ue(e){var t=e.FarmId,a=e.PenId,r=e.Weight;if(t){var n="farms_data/"+t+"/weighings";if(a)return n+="/"+a+"/",new Promise((function(e,i){var s=de.a.database().ref(n).push();s.key;s.set({time:de.a.database.ServerValue.TIMESTAMP,weight:r}).then((function(){Le({FarmId:t,PenId:a}).then((function(t){e(t)}))})).catch((function(t){console.log("Create Weight Error: ",t),e(null)}))}))}}function Be(e){var t=e.FarmId,a=e.GraphId;if(t){var r="farms_data/"+t+"/graph";return r=r+"/"+a,new Promise((function(e,t){de.a.database().ref(r).once("value").then((function(t){var r=null,n=t.val();if(n)if(a){var i=T()({},t.key,n);r=be(be({},r),i)}else r=be(be({},r),n);a?e(r):de.a.database().ref("farms_data/Agrisys/graph").once("value").then((function(t){var a=t.val();a&&(r=be(be({},a),r)),e({graphs:r})})).catch((function(t){console.log("Get Agrisys graph Error: ",t),e(r)}))})).catch((function(t){console.log("Get farm graph Error: ",t),e(null)}))}))}return new Promise((function(e,t){console.log("Fecth Graph Error"),e(null)}))}function He(e){var t=e.FarmId,a=e.Graph;if(t){var r="farms_data/"+t+"/graph";if(a.name)return r+="/"+a.name+"/",new Promise((function(e,n){de.a.database().ref(r).update({data:a.data,periode:a.periode}).then((function(){Be({FarmId:t,GraphId:a.name}).then((function(t){e(t)}))})).catch((function(t){console.log("Create Graph Error: ",t),e(null)}))}))}}var We=function(){return new Promise((function(e,t){"ios"!==te.a.OS&&"android"!=te.a.OS||function(){var e;return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.awrap(de.a.messaging().requestPermission());case 2:if(e=t.sent,e===de.a.messaging.AuthorizationStatus.AUTHORIZED||e===de.a.messaging.AuthorizationStatus.PROVISIONAL){t.next=7;break}return console.log("Authorization status:",e),t.abrupt("return",!1);case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),null,null,null,Promise)}()||e("This application needs premissions to be using notifications"),e(null)}))},ze=function(){return new Promise((function(e,t){var a;if(de.a.messaging.isSupported())try{a=function(){var e;return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e="",t.prev=1,t.next=4,b.a.awrap(de.a.messaging().getToken());case 4:e=t.sent,console.log("Device_token: ",e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:return t.abrupt("return",e);case 12:case"end":return t.stop()}}),null,null,[[1,8]],Promise)}()}catch(r){}a||e("Could not find Firebase messaging Token"),e(a)}))},Ge=function(e,t,a,r){return new Promise((function(n){ae.a.alert(e,t,[{text:a,onPress:function(){n()}}],{cancelable:r,onDismiss:function(){n()}})}))},_e=Se,Ve=a(251),Je=b.a.mark(Ke),Ze=b.a.mark((function(e){var t;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t={to:e,messageId:"test1",messageType:"test2",notification:{title:"Foo",body:"Bar"}},de.a.messaging().sendMessage(t).then((function(e){console.log(e)}));case 2:case"end":return a.stop()}}),Ze)})),Ye=b.a.mark($e),qe=b.a.mark(et),Xe=b.a.mark(tt),Qe=b.a.mark(at);function Ke(){var e,t;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(y.f)(H.setFirebaseError(null));case 2:return console.log(Ve.a.manifest.web.config.firebase),de.a.initializeApp(Ve.a.manifest.web.config.firebase),a.next=6,Object(y.c)(We);case 6:if(!(e=a.sent)){a.next=12;break}return a.next=10,Object(y.f)(H.fetchFailure(e));case 10:a.next=25;break;case 12:return a.next=14,Object(y.e)($e);case 14:return a.next=16,Object(y.e)(et);case 16:if(!de.a.messaging.isSupported()){a.next=21;break}return a.next=19,Object(y.e)(tt);case 19:return a.next=21,Object(y.e)(at);case 21:return a.next=23,Object(y.c)(ze);case 23:t=a.sent,console.log("Firebase Token: ",t);case 25:console.log("Firebase Startup : Done");case 26:case"end":return a.stop()}}),Je)}function $e(){var e,t,a,r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(c.c)((function(e){var t=de.a.auth().onAuthStateChanged((function(t){e(null==t?"NONE":t)}));return function(){t()}}),c.a.expanding(1));case 2:e=n.sent,n.prev=3;case 4:return t={localDataStore:{}},n.next=7,Object(y.h)(e);case 7:if(a=n.sent,t.firebaseUser="NONE"===a?null:a,!t.firebaseUser){n.next=14;break}return n.next=12,Object(y.c)(_e,oe.USERS,ce.FETCH,{UserId:a.uid});case 12:r=n.sent,t.localDataStore.userData=r;case 14:return n.next=16,Object(y.f)(H.fetchSuccess(t));case 16:console.log("New auth: ",t);case 17:n.next=4;break;case 19:return n.prev=19,n.next=22,Object(y.d)();case 22:if(!n.sent){n.next=24;break}e.close();case 24:return n.finish(19);case 25:case"end":return n.stop()}}),Ye,null,[[3,,19,25]])}function et(){var e,t,a,r,n;return b.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(y.a)(["ACTION_STARTING"]);case 2:e=i.sent;case 3:return i.next=5,Object(y.h)(e);case 5:if(t=i.sent,!Object.values(ce).includes(t.action)){i.next=23;break}if(!Object.values(oe).includes(t.ref)){i.next=23;break}return i.next=10,Object(y.g)((function(e){return e.firebase.localDataStore.userData}));case 10:return a=i.sent,!(r=t.params)&&t.action!=ce.SIGN&&a&&a.farms&&(r=[Object.keys(a.farms)[0]]),i.next=15,Object(y.c)(_e,t.ref,t.action,r);case 15:if(!(n=i.sent)||!n.error){i.next=21;break}return i.next=19,Object(y.f)(H.fetchFailure(n.error));case 19:i.next=23;break;case 21:return i.next=23,Object(y.f)(H.fetchSuccess({localDataStore:n}));case 23:i.next=3;break;case 25:case"end":return i.stop()}}),qe)}function tt(){var e,t;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(c.c)((function(e){var t=de.a.messaging().onMessage((function(t){e(t)}));return function(){t()}}),c.a.expanding(1));case 2:e=a.sent,a.prev=3;case 4:return a.next=6,Object(y.h)(e);case 6:if(t=a.sent,console.log("New Firebase message: ",t),!(t.notification&&t.notification.title&&t.notification.body)){a.next=13;break}return a.next=11,Object(y.c)(Ge,t.notification.title,t.notification.body,"Ok",!1);case 11:a.next=14;break;case 13:console.log("New Firebase data message: ",t);case 14:a.next=4;break;case 16:return a.prev=16,a.next=19,Object(y.d)();case 19:if(!a.sent){a.next=21;break}e.close();case 21:return a.finish(16);case 22:case"end":return a.stop()}}),Xe,null,[[3,,16,22]])}function at(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),Qe)}var rt=b.a.mark(nt);function nt(e){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.b)([Object(y.i)(O.STARTUP,_),Object(y.i)(k.FETCH_USER,ee),Object(y.i)(B.FIREBASE_STARTUP,Ke)]);case 2:case"end":return e.stop()}}),rt)}var it;function st(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ot(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?st(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):st(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ct,lt=Object(v.createReducer)({user:{},userIsLoading:!1,userErrorMessage:null},(it={},T()(it,k.FETCH_USER_LOADING,(function(e){return ot(ot({},e),{},{userIsLoading:!0,userErrorMessage:null})})),T()(it,k.FETCH_USER_SUCCESS,(function(e,t){var a=t.user;return ot(ot({},e),{},{user:a,userIsLoading:!1,userErrorMessage:null})})),T()(it,k.FETCH_USER_FAILURE,(function(e,t){var a=t.errorMessage;return ot(ot({},e),{},{user:{},userIsLoading:!1,userErrorMessage:a})})),it)),ut=a(14),ft=a.n(ut),pt=a(7),mt=a.n(pt),ht=a(336);function dt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function gt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var bt=(ct={},T()(ct,B.FIREBASE_IS_LOADING,(function(e,t){var a=t.loadingstate;return gt(gt({},e),{},{firebaseIsLoading:a})})),T()(ct,B.SET_FIREBASE_ERROR,(function(e,t){var a=t.errorMessage;return gt(gt({},e),{},{firebaseErrorMessage:a})})),T()(ct,B.SET_CURRENT_DATA,(function(e,t){var a=t.data;return gt(gt({},e),{},{currentData:a})})),T()(ct,B.ACTION_STARTING,(function(e){return gt(gt({},e),{},{firebaseErrorMessage:null})})),T()(ct,B.FETCH_STARTING,(function(e){return gt(gt({},e),{},{firebaseErrorMessage:null})})),T()(ct,B.FETCH_SUCCESS,(function(e,t){var a=t.data,r=gt({},e.localDataStore),n=gt({},e);if(a){var i=a.localDataStore,s=ft()(a,["localDataStore"]);i&&(r=0!==Object.keys(i).length?function e(t,a){var r=function(e){return e&&"object"===typeof e};return r(t)&&r(a)?(Object.keys(a).forEach((function(n){var i=t[n],s=a[n];Array.isArray(i)&&Array.isArray(s)||(r(i)&&r(s)?t[n]=e(mt()({},i),s):t[n]=s)})),t):a}(i,r):gt({},i)),n=Object(ht.a)(e,s)}return gt(gt({},n),{},{localDataStore:r,firebaseIsLoading:!1,firebaseErrorMessage:null})})),T()(ct,B.FETCH_FAILURE,(function(e,t){var a=t.errorMessage;return gt(gt({},e),{},{firebaseIsLoading:!1,firebaseErrorMessage:a})})),ct),yt=Object(v.createReducer)({firebaseIsLoading:!1,firebaseErrorMessage:null,firebaseUser:null,localDataStore:{},currentData:null},bt),vt=a(2),Et=a(630),St=a(9),Dt=a.n(St),Ot=a(10),Pt=a.n(Ot),Ct=a(11),wt=a.n(Ct),jt=a(12),kt=a.n(jt),It=a(6),xt=a.n(It),Tt=a(28),Ft=a(3),At="rgba(0,0,0,0)",Nt="#ffffff",Rt="#ffffff",Mt="#a3b9cf",Lt="#03a489",Ut="#dc3545",Bt="#4463ab",Ht={h1:{fontSize:38},h2:{fontSize:34},h3:{fontSize:30},normal:{fontSize:17}},Wt={tiny:5,small:10,normal:15,medium:30,tinyBottomMargin:{marginBottom:5},smallBottomMargin:{marginBottom:10},bottomMargin:{marginBottom:15},mediumBottomMargin:{marginBottom:30},tinyVerticalMargin:{marginVertical:5},smallVerticalMargin:{marginVertical:10},verticalMargin:{marginVertical:15},mediumVerticalMargin:{marginVertical:30},tinyHorizontalMargin:{marginHorizontal:5},smallHorizontalMargin:{marginHorizontal:10},horizontalMargin:{marginHorizontal:15},mediumHorizontalMargin:{marginHorizontal:30},tinyHorizontalPadding:{paddingHorizontal:5},smallHorizontalPadding:{paddingHorizontal:10},horizontalPadding:{paddingHorizontal:15},mediumHorizontalPadding:{paddingHorizontal:30},tinyVerticalPadding:{paddingVertical:5},smallVerticalPadding:{paddingVertical:10},verticalPadding:{paddingVertical:15},mediumVerticalPadding:{paddingVertical:30}},zt={Home:a(495),DashBoard:a(496),System:a(497),Curves:a(498),User:a(499),Sow:a(500),Section:a(501),Haxa_globe:a(502),Hexa_icon:a(503),Logo:a(504),logo:a(505)};function Gt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _t(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Gt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Vt={column:{flexDirection:"column"},colMain:{flexDirection:"column",justifyContent:"center"},colCenter:{flexDirection:"column",alignItems:"center",justifyContent:"center"},colCross:{flexDirection:"column",alignItems:"center"},columnReverse:{flexDirection:"column-reverse"},row:{flexDirection:"row"},rowMain:{flexDirection:"row",justifyContent:"center"},rowCenter:{flexDirection:"row",alignItems:"center",justifyContent:"center"},rowCross:{flexDirection:"row",alignItems:"center"},rowReverse:{flexDirection:"row-reverse"},center:{alignItems:"center",justifyContent:"center"},crossCenter:{alignItems:"center"},crossEnd:{alignItems:"flex-end"},crossStart:{alignItems:"flex-start"},crossStretch:{alignItems:"stretch"},fill:{flex:1},fillCenter:{flex:1,alignItems:"center",justifyContent:"center"},fillCol:{flex:1,flexDirection:"column"},fillColCenter:{flex:1,flexDirection:"column",alignItems:"center",justifyContent:"center"},fillColCross:{flex:1,flexDirection:"column",alignItems:"center"},fillColMain:{flex:1,flexDirection:"column",justifyContent:"center"},fillColReverse:{flex:1,flexDirection:"column-reverse"},fillRow:{flex:1,flexDirection:"row"},fillRowCenter:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center"},fillRowCross:{flex:1,flexDirection:"row",alignItems:"center"},fillRowMain:{flex:1,flexDirection:"row",justifyContent:"center"},fillRowReverse:{flex:1,flexDirection:"row-reverse"},fullSize:{height:"100%",width:"100%"},halvWidth:{width:"50%"},midWidth:{width:"75%"},fullWidth:{width:"100%"},mainCenter:{justifyContent:"center"},mainEnd:{justifyContent:"flex-end"},mainSpaceAround:{justifyContent:"space-around"},mainSpaceBetween:{justifyContent:"space-between"},mainStart:{justifyContent:"flex-start"},mainContainer:_t({flex:1,flexDirection:"column",alignItems:"center"},Wt.mediumHorizontalMargin),contentContainer:_t(_t({flex:1,flexDirection:"column",alignItems:"center"},Wt.mediumHorizontalMargin),{},{marginTop:Wt.small},Wt.bottomMargin),borderContainer:_t(_t(_t({borderWidth:1,borderColor:"#000",borderRadius:15},Wt.tinyHorizontalPadding),Wt.tinyVerticalPadding),{},{maxWidth:450}),textContainer:_t(_t({},Ht.normal),{},{marginBottom:Wt.normal,alignItems:"center"}),buttonContainer:{marginBottom:Wt.small,maxWidth:450},loadingContainer:{position:"absolute",left:0,right:0,top:0,bottom:0,alignItems:"center",justifyContent:"center",backgroundColor:"#F5FCFF88"},logoContainer:{width:"100%",height:220},backgroundReset:{backgroundColor:At},rotate90:{transform:[{rotate:"90deg"}]},rotate90Inverse:{transform:[{rotate:"-90deg"}]},mirror:{transform:[{scaleX:-1}]},scrollSpaceAround:{flexGrow:1,justifyContent:"space-around"},scrollSpaceBetween:{flexGrow:1,justifyContent:"space-between"},selfStretch:{alignSelf:"stretch"},textCenter:{textAlign:"center"},textJustify:{textAlign:"justify"},textLeft:{textAlign:"left"},textRight:{textAlign:"right"}};function Jt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Zt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Jt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Yt={button:{backgroundColor:Mt,color:Rt},buttonText:{color:Rt},error:Zt(Zt({},Ht.normal),{},{color:Ut,marginBottom:Wt.tiny,textAlign:"center"}),result:Zt(Zt({},Ht.normal),{},{marginBottom:Wt.tiny,textAlign:"center"}),text:Zt(Zt({},Ht.normal),{},{marginBottom:Wt.tiny,textAlign:"center"}),input:Zt(Zt({},Ht.normal),{},{height:24}),navigationHeader:{textAlign:"center",alignSelf:"center",flexGrow:1}},qt=Ft.a.create({container:{backgroundColor:Mt}});function Xt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=xt()(e);if(t){var n=xt()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return kt()(this,a)}}var Qt=function(e){wt()(a,e);var t=Xt(a);function a(e){return Dt()(this,a),t.call(this,e)}return Pt()(a,[{key:"getData",value:function(){"android"!==te.a.OS&&"ios"!==te.a.OS||(de.a.messaging().onNotificationOpenedApp((function(e){console.log("Notification caused app to open from background state:",e.notification),z.navigate(e.data.type)})),de.a.messaging().getInitialNotification().then((function(e){e&&(console.log("Notification caused app to open from quit state:",e.notification),z.navigate(e.data.type))})))}},{key:"checkData",value:function(e){}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.checkData(this.props)}},{key:"render",value:function(){return n.a.createElement(vt.a,{style:[Vt.fillRowCenter,qt.container]},n.a.createElement(vt.a,{style:[Vt.center,Vt.logoContainer]},n.a.createElement(Tt.a,{style:Vt.fullSize,source:zt.Hexa_icon,resizeMode:"contain"})))}}]),a}(r.Component),Kt=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{}}))(Qt),$t=a(17),ea=function(){return n.a.createElement(vt.a,{style:[Vt.fillCenter,Vt.rowMain,Wt.mediumHorizontalMargin]},n.a.createElement($t.a,null,"This is deep linking example screen which can be accessed using agrissysapp://deeplink scheme!"))},ta=a(30);function aa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ra(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):aa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var na=Ft.a.create({boxContainer:ra(ra({},Vt.center),Wt.tinyVerticalMargin),button:ra(ra(ra(ra({borderRadius:15},Vt.center),Vt.fullWidth),Wt.horizontalPadding),Yt.button),text:ra(ra(ra(ra({},Yt.buttonText),Wt.verticalPadding),Vt.center),{},{textAlign:"center"}),icon:ra(ra(ra({},Vt.colCenter),Wt.smallVerticalMargin),{},{width:"25%",height:50})}),ia=function(e){var t=[n.a.createElement($t.a,{style:[na.text,e.textStyle],key:0},e.Text)],a=[];if(e.icon){var r=n.a.createElement(Tt.a,{style:Vt.fullSize,source:e.icon,resizeMode:"contain"});a=n.a.createElement(vt.a,{style:[na.icon,e.iconStyle]},r)}return n.a.createElement(ta.a,{style:[na.boxContainer,e.boxStyle],onPress:e.onPress},e.icon?n.a.createElement(vt.a,{style:[na.button,e.buttonStyle,Vt.rowCenter]},n.a.createElement(vt.a,{style:[Vt.colCenter,Vt.fill]},t),a):n.a.createElement(vt.a,{style:[na.button,e.buttonStyle]},t))},sa=function(e){var t=e.Texts,a=e.Images,r=e.onPress,i=[];return t.forEach((function(t,s){var o=null;a&&a[s]&&(o=a[s]),i.push(n.a.createElement(ia,{key:s,Text:t,icon:o,iconStyle:e.iconStyle,itemStyle:e.itemStyle,onPress:function(){r&&r({index:s,text:t})}}))})),n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.midWidth,{marginBottom:30},e.style]},i)},oa=function(e){return n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.midWidth,Wt.bottomMargin]},n.a.createElement(ia,{Text:e.Text,icon:e.icon,buttonStyle:{backgroundColor:Bt},onPress:function(){e.onPress&&e.onPress()}}))},ca=a(31);function la(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ua(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?la(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):la(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var fa=Ft.a.create({listitem:ua(ua(ua({flex:1},Vt.borderContainer),Vt.center),{},{backgroundColor:"#fff",paddingVertical:5,paddingHorizontal:5})}),pa=function(e){var t=e.key?e.key:0;return n.a.createElement(ca.c,{key:t,containerStyle:[fa.listitem,{flexDirection:"column",borderRadius:0},e.itemStyle],button:!0,onPress:e.onPress},n.a.createElement(ca.c.Content,null,n.a.createElement(ca.c.Title,null,e.Title),e.hasOwnProperty("Subtitle")?n.a.createElement(ca.c.Subtitle,null,e.Subtitle):n.a.createElement(n.a.Fragment,null)))};function ma(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ha(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ma(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var da=Ft.a.create({contentBox:ha(ha(ha(ha({},Vt.fill),Vt.colCenter),Vt.borderContainer),{},{borderRadius:0,minHeight:30})}),ga=function(e){var t=[];e.texts&&e.texts.forEach((function(a,r){t.push(n.a.createElement(vt.a,{style:[da.contentBox,e.textsStyle],key:"text_"+r},n.a.createElement($t.a,null,a)))}));var a=[];e.datas&&e.datas.forEach((function(t,r){a.push(n.a.createElement(ta.a,{style:[da.contentBox,e.datasStyle],onLongPress:function(){e.onPress&&e.onPress({data:t,index:r})},key:"data_"+r},n.a.createElement($t.a,null,t)))}));for(var r=t.length>a.length?t.length:a.length,i=[],s=0;s<r;s++){var o=[];s<t.length?o.push(t[s]):o.push(n.a.createElement(vt.a,{style:[Vt.fill,Vt.colCenter],key:"leftSpace_"+s})),a.length>0&&(o.push(n.a.createElement(vt.a,{style:[Vt.fill,Vt.colCenter,{maxWidth:20}],key:"seperator_"+i.length})),s<a.length?o.push(a[s]):o.push(n.a.createElement(vt.a,{style:[Vt.fill,Vt.colCenter],key:"rightSpace_"+s}))),i.push(n.a.createElement(vt.a,{style:[e.datas?Vt.rowCenter:Vt.halvWidth,Wt.tinyVerticalMargin],key:"row_"+i.length},o))}return i},ba=(Ft.a.create({container:{backgroundColor:Mt}}),a(45)),ya=function(e){var t=Object(i.c)();if(e.pigTag||e.pig){var a=null,r=null;if(e.localDataStore&&e.PigsList&&e.PigsList[e.pigTag]&&e.PigsList[e.pigTag].pen&&0!=e.PigsList[e.pigTag].pen&&(a=e.PigsList[e.pigTag].pen,e.localDataStore.pens&&e.localDataStore.pens[a])){var s=e.localDataStore.pens[a];r=s.section}return n.a.createElement(vt.a,{style:[Vt.buttonContainer]},n.a.createElement(ia,{Text:"Add Pig",onPress:function(){t(H.actionStarting(ce.CREATE,oe.PIGS,{FarmId:e.farm,TagId:e.pigTag}))}}),n.a.createElement(ia,{Text:"Move Pig",onPress:function(){t(H.setCurrentData({type:oe.PIGS,action:ce.CREATE,pigtag:e.pigTag,data:{section:r},dataId:a})),z.navigate("DataEditor")}}))}return n.a.createElement(ba.a,{style:{paddingRight:5}},n.a.createElement(vt.a,{style:[Vt.buttonContainer]},n.a.createElement(ia,{Text:"Weight",onPress:function(){return z.navigate("WeighingOperations")}}),e.farm&&e.penid?n.a.createElement(vt.a,null,n.a.createElement(ia,{Text:"Add Pig",onPress:function(){t(H.actionStarting(ce.CREATE,oe.PIGS,{FarmId:e.farm,PenId:e.penid,Action:1}))}}),n.a.createElement(ia,{Text:"Move Pig",onPress:function(){t(H.actionStarting(ce.CREATE,oe.PIGS,{FarmId:e.farm,PenId:e.penid,Action:-1}))}})):n.a.createElement(n.a.Fragment,null),e.farm&&e.section?n.a.createElement(vt.a,{style:[{marginTop:40}]},n.a.createElement(ia,{Text:"Add Pen",onPress:function(){t(H.setCurrentData({type:oe.PENS,action:ce.CREATE})),z.navigate("DataEditor")}}),n.a.createElement(ia,{Text:"Remove Pen",onPress:function(){t(H.setCurrentData({type:oe.PENS,action:ce.DELETE})),z.navigate("DataEditor")}})):n.a.createElement(n.a.Fragment,null)))},va=a(15),Ea=function(e){var t=Object(r.useRef)(new va.a.Value(0)),a=e.progress;Object(r.useEffect)((function(){va.a.timing(t.current,{toValue:a,duration:100}).start()}),[a]);var i=t.current.interpolate({inputRange:[0,100],outputRange:["0%","100%"],extrapolate:"clamp"});return n.a.createElement(vt.a,{style:[Vt.borderContainer,Vt.fullWidth,{borderWidth:0,height:45}]},n.a.createElement(vt.a,{style:[Vt.fill,Vt.fullWidth,Vt.colMain,{alignContent:"center"}]},n.a.createElement($t.a,{style:{alignSelf:"flex-start"}},e.text),n.a.createElement(vt.a,{style:Sa.progressBar},n.a.createElement(va.a.View,{style:(Ft.a.absoluteFill,{backgroundColor:"#8BED4F",width:i})}))))},Sa=Ft.a.create({container:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",paddingTop:5,padding:8},progressBar:{flexDirection:"row",height:20,width:"100%",borderColor:"#000",borderWidth:2,borderRadius:5}});function Da(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Oa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Da(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Pa=Ft.a.create({logoContainer:Oa(Oa({},Vt.fullWidth),{},{height:190,marginTop:2*Wt.medium,marginBottom:Wt.medium})}),Ca=function(){var e=Object(i.c)();return Object(r.useEffect)((function(){e(H.setFirebaseError(null))}),[]),n.a.createElement(vt.a,{style:[Vt.mainContainer]},n.a.createElement(vt.a,{style:[Pa.logoContainer]},n.a.createElement(Tt.a,{style:[Vt.fullSize],source:zt.Logo,resizeMode:"contain"})),n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize]},n.a.createElement(vt.a,{style:[Vt.textContainer,Vt.fullWidth]},n.a.createElement($t.a,{style:Yt.text},"Wellcome to Agrisys App"),n.a.createElement($t.a,{style:Yt.text},"Please choose your action")),n.a.createElement(sa,{Texts:["Connect to Agrisys Cloud","Conect to Device"],Images:[zt.Haxa_globe,null],onPress:function(e){switch(e.index){case 0:z.navigate("AuthStack");break;case 1:z.navigate("DeviceScreen")}}})))},wa=a(185),ja=a(32),ka=function(e){if(Object.entries(e.example.user).length<=0)return null;return["Gwenborough","Wisokyburgh","McKenziehaven","South Elvis","Roscoeview"].includes(e.example.user.address.city)};function Ia(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function xa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ia(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ta=Ft.a.create({error:xa(xa({},Ht.normal),{},{color:Ut,marginBottom:Wt.tiny,textAlign:"center"}),instructions:xa(xa({},Ht.normal),{},{fontStyle:"italic",marginBottom:Wt.tiny,textAlign:"center"}),logoContainer:xa(xa({},Vt.fullWidth),{},{height:300,marginBottom:25}),result:xa(xa({},Ht.normal),{},{marginBottom:Wt.tiny,textAlign:"center"}),text:xa(xa({},Ht.normal),{},{marginBottom:Wt.tiny,textAlign:"center"})}),Fa=te.a.select({ios:"Press Cmd+R to reload,\nCmd+D or shake for dev menu.",android:"Double tap R on your keyboard to reload,\nShake or press menu button for dev menu."}),Aa=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){return e.example.user})),a=Object(i.d)((function(e){return e.example.userIsLoading})),s=Object(i.d)((function(e){return e.example.userErrorMessage}));return Object(r.useEffect)((function(){e(I.fetchUser())}),[]),n.a.createElement(vt.a,{style:[Vt.fillCenter,Vt.rowMain,Wt.mediumHorizontalMargin,Wt.mediumVerticalMargin]},a?n.a.createElement(ja.a,{size:"large",color:"#0000ff"}):n.a.createElement(vt.a,null,n.a.createElement(vt.a,{style:Ta.logoContainer},n.a.createElement(Tt.a,{style:Vt.fullSize,source:zt.logo,resizeMode:"contain"})),n.a.createElement($t.a,{style:Ta.text},"To get started, edit App.js"),n.a.createElement($t.a,{style:Ta.instructions},Fa),s?n.a.createElement($t.a,{style:Ta.error},s):n.a.createElement(vt.a,null,n.a.createElement($t.a,{style:Ta.result},"I'm a fake user, my name is ",t.name),n.a.createElement($t.a,{style:Ta.result},ka?"I live in Europe !":"I don't live in Europe.")),n.a.createElement(wa.a,{style:Yt.button,onPress:function(){return e(I.fetchUser())},title:"Refresh"})))},Na=Object(Et.a)({FrontScreen:{screen:Ca,navigationOptions:function(){return{headerMode:"none",headerShown:!1}},path:"main"},ExampleScreen:{screen:Aa,navigationOptions:function(){return{headerMode:"none"}},path:"example"}},{initialRouteName:"FrontScreen",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerRight:function(){return n.a.createElement(vt.a,{style:{padding:6}})}}});Ft.a.create({});function Ra(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=xt()(e);if(t){var n=xt()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return kt()(this,a)}}var Ma=function(e){wt()(a,e);var t=Ra(a);function a(e){var r;return Dt()(this,a),(r=t.call(this,e)).state={ISLOADPAGE:!0,Page:null},r}return Pt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null),null!==this.props.firebase.firebaseUser&&this.props.getUser(this.props.firebase.firebaseUser.uid)}},{key:"checkData",value:function(e){this.props.firebase.firebaseUser;var t=this.props.firebase.localDataStore,a=function(e){switch(e){case se:return"AdminPannel";case ie:return"ConsysPannel";case ne:return"UserPanel";case re:return"CreateUserData";default:return"LoginUser"}}(t.userData?t.userData.state:null);z.navigate(a)}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.checkData(this.props)}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=this.state.ISLOADPAGE;return n.a.createElement(vt.a,{style:[Vt.mainContainer]},t?n.a.createElement(vt.a,{style:[Vt.fillRowCenter,Vt.center,Vt.logoContainer]},n.a.createElement(Tt.a,{style:Vt.fullSize,source:zt.Hexa_icon,resizeMode:"contain"})):n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fillColMain]},n.a.createElement($t.a,{style:Yt.text},"This page contains an error."),n.a.createElement($t.a,{style:Yt.text},"If you are going back, please press back again.")),(e||t)&&n.a.createElement(ja.a,{style:Vt.loadingContainer,size:"large"}))}}]),a}(r.Component),La=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(H.setFirebaseError(t))},getUser:function(t){return e(H.actionStarting(ce.FETCH,oe.USERS,{UserId:t}))}}}))(Ma);function Ua(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=xt()(e);if(t){var n=xt()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return kt()(this,a)}}var Ba=function(e){wt()(a,e);var t=Ua(a);function a(e){var r;return Dt()(this,a),(r=t.call(this,e)).state={Email:"",Pass:"",NewUser:!1},r}return Pt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null)}},{key:"checkData",value:function(e){e.firebase&&e.firebase.firebaseUser&&e.firebase.localDataStore&&e.firebase.localDataStore.userData}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.checkData(this.props)}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=(this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage);return n.a.createElement(vt.a,{style:[Vt.mainContainer]},n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fillColMain]},a?n.a.createElement($t.a,{style:Yt.error},a):n.a.createElement(n.a.Fragment,null),this.state.NewUser?n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fillColMain]},n.a.createElement(vt.a,{style:[Vt.borderContainer,Vt.midWidth,{marginBottom:20}]},n.a.createElement(ca.b,{label:"Email",style:Yt.input,onChangeText:function(t){e.setState({Email:t})},value:this.state.Email}),n.a.createElement(ca.b,{label:"Password",style:Yt.input,onChangeText:function(t){e.setState({Pass:t})},value:this.state.Pass})),n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.midWidth]},n.a.createElement(ia,{Text:"Create User",onPress:function(){e.state.Email&&""!==e.state.Email?e.state.Pass&&""!==e.state.Pass?e.props.createUser(e.state.Email,e.state.Pass):e.props.setFirebaseError("Password is needed"):e.props.setFirebaseError("Email is needed")}}))):n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fillColMain]},n.a.createElement(vt.a,{style:[Vt.borderContainer,Vt.midWidth,{marginBottom:20}]},n.a.createElement(ca.b,{label:"Username",style:Yt.input,onChangeText:function(t){e.setState({Email:t})},value:this.state.Email}),n.a.createElement(ca.b,{label:"Password",style:Yt.input,onChangeText:function(t){e.setState({Pass:t})},value:this.state.Pass}),n.a.createElement(ia,{Text:"Login",icon:zt.User,onPress:function(){e.state.Email&&""!==e.state.Email?e.state.Pass&&""!==e.state.Pass?e.props.signIN(e.state.Email,e.state.Pass):e.props.setFirebaseError("Password is needed"):e.props.setFirebaseError("Email is needed")}})),n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.midWidth]},n.a.createElement(ia,{Text:"Create New User",onPress:function(){e.props.setFirebaseError(null),e.setState({Email:"",Pass:"",NewUser:!0})}}))),t&&n.a.createElement(ja.a,{style:Vt.loadingContainer,size:"large"})))}}]),a}(r.Component),Ha=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(H.setFirebaseError(t))},getUser:function(t){return e(H.actionStarting(ce.FETCH,oe.USERS,{UserId:t}))},signIN:function(t,a){return e(H.actionStarting(ce.SIGN,oe.USERS,{Email:t,Pass:a}))},createUser:function(t,a){return e(H.actionStarting(ce.CREATE,oe.USERS,{Email:t,Pass:a}))}}}))(Ba);function Wa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=xt()(e);if(t){var n=xt()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return kt()(this,a)}}var za=function(e){wt()(a,e);var t=Wa(a);function a(e){var r;return Dt()(this,a),(r=t.call(this,e)).state={Farm:"Test",Sections:1,Pens:1},r}return Pt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null)}},{key:"checkData",value:function(e){var t=e.firebase.localDataStore;!e.firebase||null===e.firebase.firebaseUser||!t.userData||t.userData.state}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.checkData(this.props)}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=(this.props.firebase.firebaseUser,this.props.firebase.localDataStore,this.props.firebase.firebaseErrorMessage);return n.a.createElement(vt.a,{style:[Vt.mainContainer]},n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fillColMain]},a?n.a.createElement($t.a,{style:Yt.error},a):n.a.createElement(n.a.Fragment,null),n.a.createElement(vt.a,{style:[Vt.borderContainer,Vt.midWidth,{marginBottom:20}]},n.a.createElement(ca.b,{label:"Farm Name",style:Yt.input,onChangeText:function(t){e.setState({Farm:t})},value:this.state.Farm}),n.a.createElement(ca.b,{label:"Number of Sections",style:Yt.input,onChangeText:function(t){isNaN||e.setState({Sections:t})},value:this.state.Sections}),n.a.createElement(ca.b,{label:"Number of Pens in Sections",style:Yt.input,onChangeText:function(t){isNaN||e.setState({Pens:t})},value:this.state.Pens})),n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.midWidth]},n.a.createElement(ia,{Text:"Create User",onPress:function(){var t={},a={},r={};if(e.state.Farm&&""!==e.state.Farm)if(e.state.Sections&&isNaN(e.state.Sections))e.props.setFirebaseError("Number of Sections have to be a number");else if(e.state.Pens&&isNaN(e.state.Pens))e.props.setFirebaseError("Number of Pens in Sections have to be a number");else{t={state:ne,farms:{}};var n,i,s=1;for(n=1;n<=e.state.Sections;n++){var o={};for(i=1;i<=e.state.Pens;i++)r["Pen_"+s]={section:"Section_"+n},o["Pen_"+s]=!0,s++;a["Section_"+n]={pens:o}}e.props.createUserData(t,e.state.Farm,a,r)}else e.props.setFirebaseError("Farm name is needed")}}))),t&&n.a.createElement(ja.a,{style:Vt.loadingContainer,size:"large"}))}}]),a}(r.Component),Ga=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(H.setFirebaseError(t))},createUserData:function(t,a,r,n){return e(H.actionStarting(ce.CREATE,oe.USERS,{UserData:t,Farms:{name:a},Sections:r,Pens:n}))}}}))(za);function _a(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var Va=Object(Et.a)({UserLoadingScreen:{screen:La,navigationOptions:function(){return{title:"User loading"}}},LoginUser:{screen:Ha,navigationOptions:function(){return{title:"User Login",headerLeft:function(){return n.a.createElement(vt.a,{style:{padding:6,paddingLeft:15}},n.a.createElement(ca.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){return z.navigate("MainStack")}}))}}}},CreateUserData:{screen:Ga,navigationOptions:function(){return{title:"Create Data"}}}},{initialRouteName:"UserLoadingScreen",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerTitleStyle:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_a(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_a(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Yt.navigationHeader),headerLeft:function(){return n.a.createElement(vt.a,{style:{padding:6,paddingLeft:15}},n.a.createElement(ca.a,{type:"ionicon",name:"md-arrow-back",size:25,color:"black",onPress:function(){return z.navigate("MainStack")}}))},headerRight:function(){return n.a.createElement(vt.a,{style:{padding:6}})}}});Ft.a.create({});function Ja(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=xt()(e);if(t){var n=xt()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return kt()(this,a)}}var Za=function(e){wt()(a,e);var t=Ja(a);function a(e){var r;return Dt()(this,a),(r=t.call(this,e)).state={ISLOADPAGE:!0},r}return Pt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null)}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){this.props!==e&&this.checkData(this.props)}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.firebaseUser;return n.a.createElement(vt.a,{style:[Vt.mainContainer]},n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fillColMain]},a?n.a.createElement(vt.a,{style:Vt.textContainer},n.a.createElement($t.a,{style:Yt.text},"Wellcome: ",a.displayName?a.displayName:a.email)):n.a.createElement(n.a.Fragment,null),n.a.createElement(sa,{Texts:["Dashboard","Pigs","Pens","Batchs","Growth curves","Operations"],Images:[zt.DashBoard,zt.Sow,"",zt.Section,zt.Curves,zt.System],onPress:function(e){switch(e.text){case"Dashboard":z.navigate("UserDashBoard");break;case"Pigs":z.navigate("UserPigs");break;case"Pens":z.navigate("UserPens");break;case"Batchs":z.navigate("UserBatchs");break;case"Growth curves":z.navigate("UserCurves");break;case"Operations":z.navigate("UserOperations")}e.text}}),n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.midWidth]},n.a.createElement(ia,{Text:"LogOut",onPress:function(){e.props.logOut()}}))),t&&n.a.createElement(ja.a,{style:Vt.loadingContainer,size:"large"}))}}]),a}(r.Component),Ya=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(H.setFirebaseError(t))},logOut:function(){return e(H.actionStarting(ce.SIGN,oe.USERS))}}}))(Za),qa=a(54);function Xa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=xt()(e);if(t){var n=xt()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return kt()(this,a)}}var Qa=function(e){wt()(a,e);var t=Xa(a);function a(e){var r;Dt()(this,a);var n=(r=t.call(this,e)).setData(e),i=n.Name,s=n.Manager,o=n.Mail,c=n.MaxCap,l=n.CurCap,u=n.BatchList;return r.state={farmName:i,farmManager:s,farmMail:o,MaxCap:c,CurCap:l,BatchList:u},r}return Pt()(a,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,a="Not set",r="Not set",n="Not set";if(t&&t.farms&&(a=t.farms.name?t.farms.name:a,r=t.farms.name?t.farms.manager:r,n=t.farms.name?t.farms.email:n),t&&t.sections&&t.pens){var i=0,s=0;Object.keys(t.sections).map((function(e){var a=t.sections[e].pens;a&&Object.keys(a).map((function(e){i++;var a=t.pens[e];a&&a.datas&&a.datas.count&&(s+=a.datas.count)}))}))}t.sections;var o=t.batchs;return{Name:a,Manager:r,Mail:n,MaxCap:i,CurCap:s,BatchList:o}}},{key:"getData",value:function(){this.props.setFirebaseError(null);var e=this.props.firebase.localDataStore;this.props.getFarm(Object.keys(e.userData.farms)[0]),this.props.getSections(Object.keys(e.userData.farms)[0]),this.props.getPen(Object.keys(e.userData.farms)[0]),this.props.getBatch(Object.keys(e.userData.farms)[0])}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore)){var a=this.props.firebase.localDataStore;if(a.farms&&(this.state.farmName!==a.farms.name||this.state.farmManager!==a.farms.manager||this.state.farmMail!==a.farms.email)||a.batchs&&JSON.stringify(this.state.BatchList)!==JSON.stringify(a.batchs)||a.sections&&JSON.stringify(this.state.SectionsList)!==JSON.stringify(a.sections)){var r=this.setData(this.props),n=r.Name,i=r.Manager,s=r.Mail,o=r.SectionsList,c=r.BatchList;this.setState({farmName:n,farmManager:i,farmMail:s,SectionsList:o,BatchList:c})}}}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=(this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage);this.props.firebase.localDataStore;return n.a.createElement(vt.a,{style:[Vt.mainContainer]},n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullWidth,Vt.fill]},t?n.a.createElement($t.a,{style:Yt.error},t):n.a.createElement(n.a.Fragment,null),n.a.createElement(oa,{Text:"Farm description"}),n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.fullWidth,{height:110}]},n.a.createElement(ga,{texts:["Farm name","Manager","E-mail"],datas:[this.state.farmName,this.state.farmManager,this.state.farmMail]})),n.a.createElement(Ea,{text:"Farm capacity:",progress:this.state.CurCap/this.state.MaxCap*100}),n.a.createElement(Ea,{text:"Farm performance:",progress:50}),this.state.BatchList?n.a.createElement(vt.a,{style:[Vt.borderContainer,Vt.fullWidth,{borderWidth:0,marginTop:10}]},n.a.createElement($t.a,null,"Batches:"),n.a.createElement(qa.a,{data:Object.keys(this.state.BatchList).filter((function(e){return"__jsogObjectId"!==e})),renderItem:function(e){var t=e.item;e.i;return n.a.createElement(Ea,{text:t+":",progress:40})},keyExtractor:function(e,t){return t.toString()}})):n.a.createElement(n.a.Fragment,null)),e&&n.a.createElement(ja.a,{style:Vt.loadingContainer,size:"large"}))}}]),a}(r.Component),Ka=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(H.setFirebaseError(t))},getFarm:function(t){return e(H.actionStarting(ce.FETCH,oe.FARMS,{FarmId:t}))},getSections:function(t){return e(H.actionStarting(ce.FETCH,oe.SECTIONS,{FarmId:t}))},getPen:function(t){return e(H.actionStarting(ce.FETCH,oe.PENS,{FarmId:t}))},getBatch:function(t){return e(H.actionStarting(ce.FETCH,oe.BATCHS,{FarmId:t}))}}}))(Qa),$a=a(98);function er(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function tr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?er(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):er(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ar=Ft.a.create({loading:{position:"absolute",left:0,right:0,top:0,bottom:0,alignItems:"center",justifyContent:"center",backgroundColor:"#F5FCFF88"},textContainer:tr(tr({},Ht.normal),{},{marginBottom:Wt.normal}),inputContainer:{marginBottom:Wt.small},input:tr(tr({},Ht.normal),{},{height:24})}),rr=a(239);function nr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ir(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function sr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=xt()(e);if(t){var n=xt()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return kt()(this,a)}}var or=function(e){wt()(a,e);var t=sr(a);function a(e){var r;Dt()(this,a);var n=(r=t.call(this,e)).setData(e).PigsList;return r.state={PigsList:n,PigTag:""},r}return Pt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null);var e=this.props.firebase.localDataStore;this.props.getPigs(Object.keys(e.userData.farms)[0]),this.props.getPens(Object.keys(e.userData.farms)[0])}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=null;return t&&t.pigs&&(a=he(t.pigs)),{PigsList:a}}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase&&this.props.firebase.localDataStore&&this.props.firebase.localDataStore.pigs&&JSON.stringify(this.state.PigsList)!==JSON.stringify(he(this.props.firebase.localDataStore.pigs)))){var a=this.setData(this.props).PigsList;this.setState({PigsList:a})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.firebaseUser,r=this.props.firebase.firebaseErrorMessage,i=this.props.firebase.localDataStore;return n.a.createElement(vt.a,{style:[Vt.mainContainer]},n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullWidth,Vt.fill]},r?n.a.createElement($t.a,{style:Yt.error},r):n.a.createElement(n.a.Fragment,null),a?n.a.createElement(vt.a,{style:[Vt.fill,Vt.buttonContainer,Vt.fullWidth,Wt.bottomMargin,Vt.column]},n.a.createElement(lr,{connectedState:null}),n.a.createElement(ur,{DeviceData:null}),this.state.PigsList?n.a.createElement(vt.a,{style:[Vt.fill,Vt.borderContainer,Wt.smallHorizontalPadding,Wt.smallVerticalPadding,{maxWidth:800,marginTop:10}]},n.a.createElement($a.a,{style:fr.container},n.a.createElement(qa.a,{data:Object.keys(this.state.PigsList),renderItem:function(t){var a=t.item,r="-",s="-";if(e.state.PigsList[a].pen&&0!=e.state.PigsList[a].pen&&(r=e.state.PigsList[a].pen,i.pens&&i.pens[r])){var o=i.pens[r];s=o.section}return console.log(a,r,s),n.a.createElement(vt.a,{style:[Vt.fill,Vt.rowCenter,Vt.fullWidth,{height:35}]},n.a.createElement(pa,{Title:a,itemStyle:[{width:160,height:35}],onPress:function(){dispatch(H.setCurrentData({pigId:a,type:oe.PIGS,section:s,dataId:r})),z.navigate("DataDisplay")}}),n.a.createElement(pa,{itemStyle:[{width:70,height:35,justifyContent:"center"}],Title:r,onPress:function(){e.setState({PigTag:a})}}),n.a.createElement(pa,{itemStyle:[{width:90,height:35}],Title:s,onPress:function(){e.setState({PigTag:a})}}))},keyExtractor:function(e){return e.id}}))):n.a.createElement(n.a.Fragment,null),n.a.createElement(ca.b,{label:"Pig-tag:",containerStyle:[{borderWidth:1,marginTop:10}],style:[Yt.input],onChangeText:function(t){e.setState({PigTag:t})},value:this.state.PigTag}),n.a.createElement(ya,{pig:!0,pigTag:this.state.PigTag,PigsList:this.state.PigsList,farm:Object.keys(i.userData.farms)[0],localDataStore:i})):n.a.createElement(n.a.Fragment,null)),t&&n.a.createElement(ja.a,{style:Vt.loadingContainer,size:"large"}))}}]),a}(r.Component),cr=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{getPens:function(t){return e(H.actionStarting(ce.FETCH,oe.PENS,{FarmId:t}))},getPigs:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e(H.actionStarting(ce.FETCH,oe.PIGS,{FarmId:t,TagId:a}))},setFirebaseError:function(t){return e(H.setFirebaseError(t))}}}))(or),lr=function(e){return"ios"===te.a.OS||"android"===te.a.OS?n.a.createElement(vt.a,{style:[Vt.fill,Vt.row,Vt.fullWidth]},n.a.createElement(vt.a,{style:[Vt.fill,Vt.column,{backgroundColor:"red"}]},n.a.createElement(vt.a,{style:[Vt.fill,Vt.row,Vt.fullWidth,{backgroundColor:"blue"}]},n.a.createElement(vt.a,{style:{justifyContent:"center",alignItems:"center"}})),n.a.createElement(vt.a,{style:[Vt.fill,Vt.row,Vt.fullWidth]},n.a.createElement($t.a,null,"Messages"),n.a.createElement($t.a,null,"Errors"))),n.a.createElement(vt.a,{style:[Vt.fill,Vt.column]},e.connectedState===ConnectionState.CONNECTED?n.a.createElement(vt.a,{style:ir(ir({},fr.circle),{},{backgroundColor:"green",justifyContent:"center",alignItems:"center"})},n.a.createElement($t.a,null,"Device is"),n.a.createElement($t.a,null,"connected")):n.a.createElement(vt.a,{style:ir(ir({},fr.circle),{},{backgroundColor:"red",justifyContent:"center",alignItems:"center"})},n.a.createElement($t.a,null,"No Device"),n.a.createElement($t.a,null,"connected")))):n.a.createElement(n.a.Fragment,null)},ur=function(e){if("ios"===te.a.OS||"android"===te.a.OS){var t=Object(i.c)(),a=e.DeviceData;return n.a.createElement(vt.a,{style:{flexDirection:"row",justifyContent:"space-between",borderWidth:1,borderColor:"#000",borderRadius:25,paddingHorizontal:15,paddingVertical:10,marginBottom:10}},n.a.createElement(vt.a,{style:(ar.textContainer,{paddingTop:10})},a.tagid?n.a.createElement(vt.a,{style:{marginBottom:5}},n.a.createElement($t.a,null,"TAG Id:"),n.a.createElement($t.a,null,a.tagid)):n.a.createElement(n.a.Fragment,null),a.FatLayers&&a.FatLayers>0?n.a.createElement(vt.a,{style:{marginBottom:5}},n.a.createElement($t.a,null,"Layers received: ",a.FatLayers),n.a.createElement($t.a,null,"Layer 1: ",a.FatL1),n.a.createElement($t.a,null,"Layer 2: ",a.FatL2),n.a.createElement($t.a,null,"Layer 3: ",a.FatL3)):n.a.createElement(n.a.Fragment,null)),a.tagid?n.a.createElement(vt.a,{style:{flexDirection:"row",justifyContent:"space-between"}},known?n.a.createElement(ia,{buttonStyle:{minWidth:0},Text:"Open data",onPress:function(){t(H.setCurrentData({pigId:known,type:oe.PIGS})),z.navigate("DataDisplay")}}):n.a.createElement(n.a.Fragment,null),n.a.createElement(ia,{buttonStyle:{minWidth:0},Text:"Save Tag",onPress:function(){}})):n.a.createElement(n.a.Fragment,null))}return n.a.createElement(n.a.Fragment,null)},fr=Ft.a.create({circle:{width:125,height:125,borderRadius:62.5,marginTop:Wt.tiny,marginLeft:Wt.tiny}});function pr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=xt()(e);if(t){var n=xt()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return kt()(this,a)}}var mr=function(e){wt()(a,e);var t=pr(a);function a(e){var r;Dt()(this,a);var n=(r=t.call(this,e)).setData(e),i=n.Sections,s=n.Mid;return r.state={Mid:s,Sections:i},r}return Pt()(a,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,a={};t&&t.sections&&(a=he(e.firebase.localDataStore.sections));var r=0;if(t&&t.weighings)for(var n in t.weighings)if(t.weighings[n]&&Object.keys(t.weighings[n]).length>0){var i=t.weighings[n][Object.keys(t.weighings[n])[0]].weight;i&&(r>0?r=(r+i)/2:r+=i)}return{Sections:a,Mid:r}}},{key:"getData",value:function(){this.props.setFirebaseError(null);var e=this.props.firebase.localDataStore;this.props.getSections(Object.keys(e.userData.farms)[0]),this.props.getPen(Object.keys(e.userData.farms)[0]),this.props.getWeights(Object.keys(e.userData.farms)[0]),this.props.getBatch(Object.keys(e.userData.farms)[0]),this.props.getCurve(Object.keys(e.userData.farms)[0])}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&this.props.firebase.localDataStore.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(he(this.props.firebase.localDataStore.sections)))){var a=this.setData(this.props),r=a.Sections,n=a.Mid;this.setState({Mid:n,Sections:r})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.firebaseUser,r=this.props.firebase.firebaseErrorMessage,i=this.props.firebase.localDataStore;return n.a.createElement(vt.a,{style:[Vt.mainContainer]},n.a.createElement(vt.a,{style:[Vt.fullSize,Vt.fill]},r?n.a.createElement($t.a,{style:Yt.error},r):n.a.createElement(n.a.Fragment,null),a&&this.state.Sections?n.a.createElement(ba.a,{style:[Wt.verticalMargin,{paddingRight:5}]},n.a.createElement(rr.a,{itemDimension:70,spacing:10,sections:Object.keys(this.state.Sections).map((function(t){var a=he(e.state.Sections[t].pens);return{title:t,data:Object.keys(a)}})),renderSectionHeader:function(e){var t=e.section;return n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.midWidth,{marginBottom:0}]},n.a.createElement(ia,{Text:t.title,buttonStyle:{backgroundColor:Bt},onPress:function(){}}))},renderItem:function(t){var a=t.item,r="white",s=null;if(i.weighings&&i.weighings[a]){var o=null;for(var c in i.weighings[a]){var l=i.weighings[a][c];l&&(!o||o.time<l.time)&&(o=l)}if(o){var u=o.weight;if(i.pens&&i.pens[a]){var f=i.pens[a];f.datas&&f.datas.count&&(u/=f.datas.count)}if(u&&!isNaN(u)){var p=null;for(var m in i.batchs){var h=i.batchs[m];if(h.hasOwnProperty("pens")&&null!=h.pens[a]){p=i.batchs[m];break}}if(p){var d=p;if(d&&d.time&&d.datas&&i.graphs&&i.graphs[d.gcurve]){for(var g=i.graphs[d.gcurve],b=Object.keys(g.data),y=o.time,v=new Date(d.time),E=0;E<g.data.length-1;E++)switch(g.periode){case"days":v=new Date(v.setDate(v.getDate()+1));break;case"Month":v=new Date(v.setMonth(v.getMonth()+1));break;case"Weeks":default:v=new Date(v.setDate(v.getDate()+7))}var S=S=v.getTime(),D=function(e,t,a,r,n){var i=null,s=null;if(a&&a<=e[1]){var o=e[1]-e[0],c=t[0],l=t[1],u=Math.atan((l-c)/(o-0));if(i=(a-e[0])*u+c,r&&n)s=u*(a-n)+r}return{ExValue:i,VirData:s}}([d.time,S],[g.data[b[0]],g.data[b.length-1]],(new Date).getTime(),u,y),O=D.ExValue,P=D.VirData,C=2;d.datas.deviance&&(C=d.datas.deviance);var w=O/100*C;O&&P<O&&P<O-w?r=Ut:O&&P>O&&P>O+w&&(r=Lt),s=Math.round(100*P)/100}}}}}return n.a.createElement(ta.a,{style:[Vt.borderContainer,{width:70,height:70,alignItems:"center",justifyContent:"center",backgroundColor:r}],onPress:function(){e.props.setCurrentData(a),z.navigate("DataDisplay")}},n.a.createElement($t.a,null,a),s?n.a.createElement($t.a,null,s+" kg"):n.a.createElement(n.a.Fragment,null))}})):n.a.createElement(vt.a,{style:[Vt.fillRowCenter,Vt.center,Vt.logoContainer]},n.a.createElement(Tt.a,{style:Vt.fullSize,source:zt.Hexa_icon,resizeMode:"contain"}))),t&&n.a.createElement(ja.a,{style:Vt.loadingContainer,size:"large"}))}}]),a}(r.Component),hr=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(H.setFirebaseError(t))},getSections:function(t){return e(H.actionStarting(ce.FETCH,oe.SECTIONS,{FarmId:t}))},getPen:function(t){return e(H.actionStarting(ce.FETCH,oe.PENS,{FarmId:t}))},getWeights:function(t){return e(H.actionStarting(ce.FETCH,oe.WEIGHING,{FarmId:t,limitTo:1}))},getBatch:function(t){return e(H.actionStarting(ce.FETCH,oe.BATCHS,{FarmId:t}))},getCurve:function(t){return e(H.actionStarting(ce.FETCH,oe.GRAPH,{FarmId:t,GraphId:""}))},setCurrentData:function(t){return e(H.setCurrentData({type:oe.PENS,penId:t}))}}}))(mr),dr=a(62);function gr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=xt()(e);if(t){var n=xt()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return kt()(this,a)}}var br=function(e){wt()(a,e);var t=gr(a);function a(e){var r;Dt()(this,a),(r=t.call(this,e)).onChange=function(e){var t=e.window,a=e.screen;r.setState({dimensions:{window:t,screen:a}})};var n=r.setData(e).BatchList,i=new Date;return r.state={BatchList:n,Display:0,BatchName:"",StartD:i.getFullYear()+"."+(i.getMonth()+1)+"."+i.getDate(),Curve:"",Deviance:"",Pens:""},r}return Pt()(a,[{key:"setData",value:function(e){return{BatchList:e.firebase.localDataStore.batchs}}},{key:"getData",value:function(){this.props.setFirebaseError(null);var e=this.props.firebase.localDataStore;this.props.getBatch(Object.keys(e.userData.farms)[0]),this.props.getCurve(Object.keys(e.userData.farms)[0])}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&this.props.firebase.localDataStore.batchs&&JSON.stringify(this.state.BatchList)!==JSON.stringify(this.props.firebase.localDataStore.batchs))){var a=this.setData(this.props).BatchList;this.setState({BatchList:a})}}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=(this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage),r=this.props.firebase.localDataStore;return n.a.createElement(vt.a,{style:[Vt.mainContainer]},n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fill]},a?n.a.createElement($t.a,{style:Yt.error},a):n.a.createElement(n.a.Fragment,null),0===this.state.Display?n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,{marginHorizontal:0,paddingHorizontal:-20}]},this.state.BatchList?n.a.createElement(vt.a,{style:[Vt.fill,Vt.fullWidth,Wt.smallHorizontalPadding,Wt.smallVerticalPadding,{maxWidth:800,marginTop:10}]},n.a.createElement(qa.a,{data:Object.keys(this.state.BatchList).filter((function(e){return"__jsogObjectId"!==e})),renderItem:function(t){var a=t.item;t.i;return n.a.createElement(ia,{Text:a,onPress:function(){var t="default";e.state.BatchList[a]&&e.state.BatchList[a].gcurve&&(t=e.state.BatchList[a].gcurve),e.props.setCurrentData(a,t),z.navigate("DataPlotter")}})},keyExtractor:function(e,t){return t.toString()}})):n.a.createElement(n.a.Fragment,null),n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.borderContainer,Vt.midWidth]},n.a.createElement(ia,{Text:"New Batch",onPress:function(){e.setState({Display:1})}}),this.state.BatchList?n.a.createElement(ia,{Text:"Edit Batch",onPress:function(){var t=e.state.BatchList[Object.keys(e.state.BatchList)[0]],a=he(t.pens),r=new Date(t.time);e.setState({Display:2,BatchName:Object.keys(e.state.BatchList)[0],StartD:r.getFullYear()+"."+(r.getMonth()+1)+"."+r.getDate(),Curve:t.gcurve,Deviance:t.datas.deviance,Pens:Object.keys(a).join(",")})}}):n.a.createElement(n.a.Fragment,null))):n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,{marginHorizontal:0,paddingHorizontal:-20}]},1===this.state.Display?n.a.createElement(ca.b,{label:"BatchName",containerStyle:[{borderWidth:1,marginTop:10}],style:[Yt.input],onChangeText:function(t){e.setState({BatchName:t})},value:this.state.BatchName}):n.a.createElement(vt.a,{style:[Vt.borderContainer,Vt.fullWidth,{height:60,borderRadius:0,alignItems:"center"}]},n.a.createElement(dr.a,{mode:"dropdown",selectedValue:this.state.BatchName,style:[Vt.fullWidth,{height:50,justifyContent:"flex-end"}],onValueChange:function(t,a){if(e.state.BatchList&&e.state.BatchList[t]){var r=e.state.BatchList[t],n=new Date(r.time),i=he(r.pens);e.setState({BatchName:t,StartD:n.getFullYear()+"."+(n.getMonth()+1)+"."+n.getDate(),Curve:r.gcurve,Deviance:r.datas.deviance,Pens:Object.keys(i).join(",")})}}},Object.keys(this.state.BatchList).map((function(e,t){return"__jsogObjectId"===e?null:n.a.createElement(dr.a.Item,{label:e,value:e,key:t})})))),n.a.createElement(vt.a,{style:[Vt.fullWidth,Vt.row]},n.a.createElement(ca.b,{label:"Start date.",containerStyle:[Vt.halvWidth,{borderWidth:1,marginTop:10}],style:[Yt.input],onChangeText:function(t){isNaN(t)&&!t.endsWith(".")||e.setState({StartD:t})},value:this.state.StartD}),n.a.createElement(ca.b,{label:"Deviance alert procentage",containerStyle:[Vt.halvWidth,{borderWidth:1,marginTop:10}],style:[Yt.input],onChangeText:function(t){isNaN(t)&&!t.endsWith(".")||e.setState({Deviance:t})},value:this.state.Deviance})),n.a.createElement(vt.a,{style:[Vt.borderContainer,Vt.fullWidth,{height:70,marginTop:10,paddingTop:0,borderRadius:0,alignItems:"center"}]},n.a.createElement(vt.a,{style:[Vt.fullWidth,{alignItems:"flex-start"}]},n.a.createElement($t.a,{style:[Yt.text,{marginHorizontal:5,marginTop:2}]},"Growth curve:")),n.a.createElement(vt.a,{style:[Vt.fullWidth,{alignItems:"center"}]},n.a.createElement(dr.a,{mode:"dropdown",selectedValue:this.state.Curve,style:[Vt.fullWidth,{height:25}],onValueChange:function(t,a){e.setState({Curve:t})}},Object.keys(r.graphs).map((function(e,t){return"__jsogObjectId"===e?null:n.a.createElement(dr.a.Item,{label:e,value:e,key:t})}))))),n.a.createElement(ca.b,{label:"Pens in Batch..",containerStyle:[{borderWidth:1,marginTop:10}],style:[Yt.input],onChangeText:function(t){e.setState({Pens:t})},value:this.state.Pens}),n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.borderContainer,Vt.midWidth,{marginTop:10}]},n.a.createElement(ia,{Text:"Save",onPress:function(){var t=!0;if(""!==e.state.BatchName){var a=e.state.BatchName;Object.keys(e.state.BatchList).includes(a)?1===e.state.Display&&(t=!1):2===e.state.Display&&(t=!1)}else t=!1;if(""!==e.state.StartD){var n=e.state.StartD.split(".");(3!==n.length||4!==n[0].length||isNaN(n[0])||n[1].length<=0&&n[1].length>=3||isNaN(n[1])||n[2].length<=0&&n[2].length>=3||isNaN(n[2]))&&(t=!1)}else t=!1;if(""!==e.state.Deviance){var i=e.state.Deviance;(i.length>3||isNaN(i)||i>100)&&(t=!1)}else t=!1;var s={};if(""!=e.state.Pens&&e.state.Pens.split(",").forEach((function(e){for(;e.startsWith(" ");)e=e.trimStart(" ");for(;e.endsWith(" ");)e=e.trimEnd(" ");s[e]=!0})),t){var o={name:e.state.BatchName,gcurve:e.state.Curve,pens:s,time:e.state.StartD,datas:{deviance:e.state.Deviance}};1===e.state.Display?e.props.setBatch(Object.keys(r.userData.farms)[0],o):2===e.state.Display&&e.props.updateBatch(Object.keys(r.userData.farms)[0],o)}e.setState({Display:0})}})))),t&&n.a.createElement(ja.a,{style:Vt.loadingContainer,size:"large"}))}}]),a}(r.Component),yr=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(H.setFirebaseError(t))},getCurve:function(t){return e(H.actionStarting(ce.FETCH,oe.GRAPH,{FarmId:t,GraphId:""}))},getBatch:function(t){return e(H.actionStarting(ce.FETCH,oe.BATCHS,{FarmId:t}))},setBatch:function(t,a){return e(H.actionStarting(ce.CREATE,oe.BATCHS,{FarmId:t,Batch:a}))},updateBatch:function(t,a){return e(H.actionStarting(ce.UPDATE,oe.BATCHS,{FarmId:t,BatchId:a.name,Batch:a}))},setCurrentData:function(t,a){return e(H.setCurrentData({type:oe.PENS,batchId:t,curveId:a}))}}}))(br),vr=a(36),Er=a.n(vr);function Sr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=xt()(e);if(t){var n=xt()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return kt()(this,a)}}var Dr=function(e){wt()(a,e);var t=Sr(a);function a(e){var r;Dt()(this,a);var n=(r=t.call(this,e)).setData(e).CurveList;new Date;return r.state={CurveList:n,Display:0,CurveName:"",DataPoints:[],Periode:"Weeks"},r}return Pt()(a,[{key:"setData",value:function(e){return{CurveList:e.firebase.localDataStore.graphs}}},{key:"getData",value:function(){this.props.setFirebaseError(null);var e=this.props.firebase.localDataStore;this.props.getCurve(Object.keys(e.userData.farms)[0])}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&this.props.firebase.localDataStore.graphs&&JSON.stringify(this.state.CurveList)!==JSON.stringify(this.props.firebase.localDataStore.graphs))){var a=this.setData(this.props).CurveList;this.setState({CurveList:a})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=(this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage),r=this.props.firebase.localDataStore;return n.a.createElement(vt.a,{style:[Vt.mainContainer]},n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fillColMain]},a?n.a.createElement($t.a,{style:Yt.error},a):n.a.createElement(n.a.Fragment,null),0===this.state.Display?n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,{marginHorizontal:0,paddingHorizontal:-20}]},this.state.CurveList?n.a.createElement(vt.a,{style:[Vt.fill,Vt.fullWidth,Wt.smallHorizontalPadding,Wt.smallVerticalPadding,{maxWidth:800,marginTop:10}]},n.a.createElement(qa.a,{data:Object.keys(this.state.CurveList).filter((function(e){return"__jsogObjectId"!==e})),renderItem:function(t){var a=t.item;return n.a.createElement(ia,{Text:a,onPress:function(){var t=e.state.CurveList[a],r=[];t.data.forEach((function(e){r.push({value:e})})),console.log(r),e.setState({Display:2,CurveName:a,DataPoints:r,Periode:t.periode})}})}})):n.a.createElement(n.a.Fragment,null),n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.borderContainer,Vt.midWidth]},n.a.createElement(ia,{Text:"New Curve",onPress:function(){e.setState({Display:1,DataPoints:[{value:"0"}]})}}))):n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,{marginHorizontal:0,paddingHorizontal:-20}]},1===this.state.Display?n.a.createElement(ca.b,{label:"CurveName",containerStyle:[{borderWidth:1,marginTop:10}],style:[Yt.input],onChangeText:function(t){e.setState({CurveName:t})},value:this.state.CurveName}):n.a.createElement(oa,{Text:this.state.CurveName}),n.a.createElement(vt.a,{style:[Vt.borderContainer,Vt.fill,Vt.fullWidth]},n.a.createElement(ga,{texts:["Data Points"],datas:["Periode: "+this.state.Periode]}),n.a.createElement(qa.a,{data:this.state.DataPoints,renderItem:function(t){var a=t.item,r=t.index;return n.a.createElement(ca.b,{label:"Point index: "+(r+1),containerStyle:[Vt.fullWidth,{borderWidth:1,marginTop:10}],style:[Yt.input],onChangeText:function(t){if(!isNaN(t)||t.endsWith(".")){var a=Er()(e.state.DataPoints);a[r].value=t,e.setState({DataPoints:a})}},value:""+a.value})},numColumns:1}),n.a.createElement(vt.a,{style:{height:20}}),n.a.createElement(ia,{Text:"New Point",onPress:function(){var t=Er()(e.state.DataPoints),a=e.state.DataPoints&&e.state.DataPoints.length>=1?e.state.DataPoints[e.state.DataPoints.length-1].value:"0";t.push({value:a}),e.setState({DataPoints:t})}})),n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.borderContainer,Vt.midWidth,{marginTop:10}]},n.a.createElement(ia,{Text:"Save",onPress:function(){var t=!0;if(""!==e.state.CurveName){var a=e.state.CurveName;Object.keys(e.state.CurveList).includes(a)?1===e.state.Display&&(t=!1):2===e.state.Display&&(t=!1)}else t=!1;if(t){var n={name:e.state.CurveName,periode:e.state.Periode},i=[],s=0;e.state.DataPoints.forEach((function(e){i[s]=parseFloat(e.value),s++})),n.data=i;var o=Object.keys(r.userData.farms)[0];e.props.updateCurve(o,n),e.setState({Display:0})}}})))),t&&n.a.createElement(ja.a,{style:Vt.loadingContainer,size:"large"}))}}]),a}(r.Component),Or=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(H.setFirebaseError(t))},getCurve:function(t){return e(H.actionStarting(ce.FETCH,oe.GRAPH,{FarmId:t,GraphId:""}))},updateCurve:function(t,a){return e(H.actionStarting(ce.UPDATE,oe.GRAPH,{FarmId:t,Graph:a}))}}}))(Dr);function Pr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=xt()(e);if(t){var n=xt()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return kt()(this,a)}}var Cr=function(e){wt()(a,e);var t=Pr(a);function a(e){var r;return Dt()(this,a),(r=t.call(this,e)).state={},r}return Pt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null),this.props.setCurrentData({})}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=(this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage),a=this.props.firebase.localDataStore;return n.a.createElement(vt.a,{style:[Vt.mainContainer]},n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fill]},t?n.a.createElement($t.a,{style:Yt.error},t):n.a.createElement(n.a.Fragment,null),n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.midWidth,Wt.bottomMargin,{marginBottom:60}]}),n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.halvWidth,Vt.fillColMain]},n.a.createElement(ya,{farm:Object.keys(a.userData.farms)[0],section:!0}))),e&&n.a.createElement(ja.a,{style:Vt.loadingContainer,size:"large"}))}}]),a}(r.Component),wr=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(H.setFirebaseError(t))},setCurrentData:function(t){return e(H.setCurrentData({type:oe.PENS,action:t}))}}}))(Cr);function jr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function kr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?jr(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ir(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=xt()(e);if(t){var n=xt()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return kt()(this,a)}}var xr=function(e){wt()(a,e);var t=Ir(a);function a(e){var r;Dt()(this,a);var n=(r=t.call(this,e)).setData(r.props),i=n.Sections,s=n.Section,o=n.Pens,c=n.Pen;return r.state={Sections:i,Section:s,Pens:o,Pen:c,weight:""},r}return Pt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null);var e=this.props.firebase.localDataStore;this.props.getSections(Object.keys(e.userData.farms)[0])}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=!1;t&&t.sections&&t.sections!==a&&(a=he(t.sections));var r=e.firebase.currentData,n=a?Object.keys(a)[0]:"";r&&r.data&&r.data.section&&a[r.data.section]&&r.data.section!=n&&(n=r.data.section);var i=a?he(a[n].pens):{},s=a?Object.keys(i)[0]:"";return r&&r.penId&&i[r.penId]&&r.penId!=s&&(s=r.penId),a||(a={}),{Sections:a,Section:n,Pens:i,Pen:s}}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&this.props.firebase.localDataStore.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(he(this.props.firebase.localDataStore.sections)))){var a=this.setData(this.props),r=a.Sections,n=a.Section,i=a.Pens,s=a.Pen;this.setState({Sections:r,Section:n,Pens:i,Pen:s,weight:""})}}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=this.props.firebase.firebaseUser,r=this.props.firebase.firebaseErrorMessage,i=this.props.firebase.localDataStore;return n.a.createElement(vt.a,{style:[Vt.mainContainer]},n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fill]},r?n.a.createElement($t.a,{style:Yt.error},r):n.a.createElement(n.a.Fragment,null),a?n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fill]},n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.midWidth,Wt.bottomMargin]},n.a.createElement(ia,{Text:"Weighing",buttonStyle:{backgroundColor:Bt},onPress:function(){}})),n.a.createElement(vt.a,{style:[Vt.borderContainer,Vt.midWidth,{marginBottom:20}]},n.a.createElement(dr.a,{mode:"dropdown",selectedValue:this.state.Section,style:{height:50,width:150},onValueChange:function(t,a){if(e.state.Sections[t]){var r=he(e.state.Sections[t].pens);e.setState({Section:t,Pens:r,Pen:Object.keys(r)[0]})}}},Object.keys(this.state.Sections).map((function(e,t){return n.a.createElement(dr.a.Item,{label:e,value:e,key:t})}))),n.a.createElement(dr.a,{mode:"dropdown",selectedValue:this.state.Pen,style:{height:50,width:150},onValueChange:function(t,a){e.setState({Pen:t})}},Object.keys(this.state.Pens).map((function(e,t){return n.a.createElement(dr.a.Item,{label:e,value:e,key:t})}))),n.a.createElement(ca.b,{label:"Weight",style:kr({},ar.input),onChangeText:function(t){e.setState({weight:t})},value:this.state.weight})),n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.midWidth]},n.a.createElement(ia,{Text:"Submit",onPress:function(){e.state.Section?e.state.Pen?isNaN(e.state.weight)||""===e.state.weight?e.props.setFirebaseError("Weight have to be a number"):(e.props.setFirebaseError(null),e.props.newWeight(Object.keys(i.userData.farms)[0],e.state.Pen,parseInt(e.state.weight)),e.setState({weight:""})):e.props.setFirebaseError("A pen is needed"):e.props.setFirebaseError("A section is needed")}}))):n.a.createElement(n.a.Fragment,null)),t&&n.a.createElement(ja.a,{style:Vt.loadingContainer,size:"large"}))}}]),a}(r.Component),Tr=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{getSections:function(t){return e(H.actionStarting(ce.FETCH,oe.SECTIONS,{FarmId:t}))},setFirebaseError:function(t){return e(H.setFirebaseError(t))},newWeight:function(t,a,r){return e(H.actionStarting(ce.CREATE,oe.WEIGHING,{FarmId:t,PenId:a,Weight:r}))}}}))(xr);function Fr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Ar(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Nr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=xt()(e);if(t){var n=xt()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return kt()(this,a)}}var Rr=function(e){wt()(a,e);var t=Nr(a);function a(e){var r;Dt()(this,a),r=t.call(this,e),e.firebase||console.log("??");var n=r.setData(e),i=n.Sections,s=n.Section,o=n.Pens,c=n.Pen;return r.state={Sections:i,Section:s,Pens:o,Pen:c,NewSection:!1},r}return Pt()(a,[{key:"getData",value:function(){this.props.setFirebaseError(null);var e=this.props.firebase.localDataStore;this.props.getSections(Object.keys(e.userData.farms)[0])}},{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=!1;t&&t.sections&&t.sections!==a&&(a=he(t.sections));var r=e.firebase.currentData,n=a?Object.keys(a)[0]:"";r&&r.data&&r.data.section&&a[r.data.section]&&r.data.section!=n&&(n=r.data.section);var i=a?he(a[n].pens):{},s=a?Object.keys(i)[0]:"";return r&&r.dataId&&i[r.dataId]&&r.dataId!=s&&(s=r.dataId),a||(a={}),{Sections:a,Section:n,Pens:i,Pen:s}}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase)){if(this.props.firebase.localDataStore&&this.props.firebase.localDataStore.sections&&JSON.stringify(this.state.Sections)!==JSON.stringify(he(this.props.firebase.localDataStore.sections))){var a=this.setData(this.props),r=a.Sections,n=a.Section,i=a.Pens,s=a.Pen;this.setState({Sections:r,Section:n,Pens:i,Pen:s})}this.props.firebase.currentData&&this.props.firebase.currentData!=e.firebase.currentData&&this.forceUpdate()}}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=(this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage),a=this.props.firebase.localDataStore,r=this.props.firebase.currentData,i=n.a.createElement(vt.a,null);switch(r.type){case oe.PENS:i=Mr(this,r,a);break;case oe.PIGS:i=Ur(this,r,a)}return n.a.createElement(vt.a,{style:[Vt.mainContainer]},n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fill]},t?n.a.createElement($t.a,{style:Yt.error},t):n.a.createElement(n.a.Fragment,null),i),e&&n.a.createElement(ja.a,{style:Vt.loadingContainer,size:"large"}))}}]),a}(r.Component),Mr=function(e,t,a){var r=e.state.Sections;return t.action===ce.CREATE&&(r["New Section"]={}),n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fill]},n.a.createElement(Lr,{CurrentAction:t.action}),n.a.createElement(vt.a,{style:[Vt.borderContainer,Vt.midWidth,{marginBottom:20}]},n.a.createElement(Br,{Control:e,CurrentData:t,localDataStore:a}),t.action===ce.CREATE?n.a.createElement(ca.b,{label:"Pen name",style:Ar({},ar.input),onChangeText:function(t){e.setState({Pen:t})},value:e.state.Pen}):n.a.createElement(n.a.Fragment,null),t.action===ce.DELETE?n.a.createElement(dr.a,{mode:"dropdown",selectedValue:e.state.Pen,style:{height:50,width:150},onValueChange:function(t,a){e.setState({Pen:t})}},Object.keys(e.state.Pens).map((function(e,t){return n.a.createElement(dr.a.Item,{label:e,value:e,key:t})}))):n.a.createElement(n.a.Fragment,null)),t.action===ce.CREATE||t.action===ce.DELETE?n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.midWidth]},n.a.createElement(ia,{Text:"Submit",onPress:function(){if(e.state.Section&&""!==e.state.Section)if(e.state.Pen&&""!==e.state.Pen)if(isNaN(e.state.Section)&&isNaN(e.state.Section[0]))if(isNaN(e.state.Pen)&&isNaN(e.state.Pen[0])){var r=!1;Object.keys(e.state.Sections).map((function(t,a){e.state.Sections[t].pens&&(Object.keys(e.state.Sections[t].pens).filter((function(t){return t===e.state.Pen})).length&&(r=!0))})),r&&t.action===ce.CREATE?e.props.setFirebaseError("Given pen name already exists"):r||t.action!==ce.DELETE?(e.props.setFirebaseError(null),e.props.penAction(t.action,Object.keys(a.userData.farms)[0],e.state.Section,e.state.Pen),z.navigate("UserOperations")):e.props.setFirebaseError("Cannot remove non-existing pen")}else e.props.setFirebaseError("Pen name cannot be or start with a number");else e.props.setFirebaseError("Section name cannot be or start with a number");else e.props.setFirebaseError("A pen name is needed");else e.props.setFirebaseError("A section is needed")}})):n.a.createElement(n.a.Fragment,null))},Lr=function(e){switch(e.CurrentAction){case ce.CREATE:return n.a.createElement(oa,{Text:"Add Pen"});case ce.DELETE:return n.a.createElement(oa,{Text:"Remove Pen"});default:return n.a.createElement(n.a.Fragment,null)}},Ur=function(e,t,a){e.state.Sections;return t.action,n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fill]},n.a.createElement(oa,{Text:"Add Pig: "+t.pigtag}),n.a.createElement(vt.a,{style:[Vt.borderContainer,Vt.midWidth,{marginBottom:20}]},n.a.createElement(Br,{Control:e,CurrentData:t,localDataStore:a}),e.state.NewSection?n.a.createElement(ca.b,{label:"Pen name",style:Ar({},ar.input),onChangeText:function(t){e.setState({Pen:t})},value:e.state.Pen}):n.a.createElement(dr.a,{mode:"dropdown",selectedValue:e.state.Pen,style:{height:50,width:150},onValueChange:function(t,a){e.setState({Pen:t})}},Object.keys(e.state.Pens).map((function(e,t){return n.a.createElement(dr.a.Item,{label:e,value:e,key:t})}))),t.action===ce.CREATE?n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.midWidth]},n.a.createElement(ia,{Text:"Submit",onPress:function(){if(e.state.Section&&""!==e.state.Section)if(e.state.Pen&&""!==e.state.Pen)if(isNaN(e.state.Section)&&isNaN(e.state.Section[0]))if(isNaN(e.state.Pen)&&isNaN(e.state.Pen[0])){var r=!1;Object.keys(e.state.Sections).map((function(t,a){e.state.Sections[t].pens&&(Object.keys(e.state.Sections[t].pens).filter((function(t){return t===e.state.Pen})).length&&(r=!0))})),r&&t.action===ce.CREATE&&e.state.NewSection?e.props.setFirebaseError("Given pen name already exists"):(e.props.setFirebaseError(null),e.props.pigAction(t.action,Object.keys(a.userData.farms)[0],t.pigtag,e.state.Pen),z.navigate("UserPigs"))}else e.props.setFirebaseError("Pen name cannot be or start with a number");else e.props.setFirebaseError("Section name cannot be or start with a number");else e.props.setFirebaseError("A pen name is needed");else e.props.setFirebaseError("A section is needed")}})):n.a.createElement(n.a.Fragment,null)))},Br=function(e){var t=e.Control,a=e.CurrentData;e.localDataStore;return t.state.NewSection&&a.action===ce.CREATE?n.a.createElement(ca.b,{label:"Section Name",style:Ar({},ar.input),onChangeText:function(e){t.setState({Section:e})},value:t.state.Section}):n.a.createElement(dr.a,{mode:"dropdown",selectedValue:t.state.Section,style:{height:50,width:150},onValueChange:function(e,r){var n=e,i=t.state.NewSection,s=t.state.Pens,o=t.state.Pen;"New Section"===e?(i=!0,n="Section_"+Object.keys(t.state.Sections).length):(s=he(t.state.Sections[e].pens),o=a.action===ce.DELETE?Object.keys(s)[Object.keys(s).length-1]:a.type==oe.PIGS?Object.keys(s)[0]:"Pen_"+(Object.keys(s).length+1)),t.setState({Section:n,NewSection:i,Pens:s,Pen:o})}},Object.keys(t.state.Sections).map((function(e,t){return n.a.createElement(dr.a.Item,{label:e,value:e,key:t})})))},Hr=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{getSections:function(t){return e(H.actionStarting(ce.FETCH,oe.SECTIONS,{FarmId:t}))},setFirebaseError:function(t){return e(H.setFirebaseError(t))},penAction:function(t,a,r,n){return e(H.actionStarting(t,oe.PENS,{FarmId:a,SectionId:r,PenId:n}))},pigAction:function(t,a,r,n){return e(H.actionStarting(t,oe.PIGS,{FarmId:a,TagId:r,PenId:n}))}}}))(Rr);function Wr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function zr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Gr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=xt()(e);if(t){var n=xt()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return kt()(this,a)}}var _r=function(e){wt()(a,e);var t=Gr(a);function a(e){var r;return Dt()(this,a),(r=t.call(this,e)).state={},r}return Pt()(a,[{key:"getData",value:function(){if(this.props.setFirebaseError(null),this.props.firebase&&this.props.firebase.localDataStore){var e=this.props.firebase.localDataStore;if(this.props.firebase.currentData&&this.props.firebase.currentData.type){var t=this.props.firebase.currentData;switch(t.type){case oe.PENS:this.props.getPens(Object.keys(e.userData.farms)[0]),this.props.getWeights(Object.keys(e.userData.farms)[0],t.penId)}}}}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack")}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData()}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this.props.firebase.firebaseIsLoading,t=(this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage),a=this.props.firebase.localDataStore,r=this.props.firebase.currentData,i=n.a.createElement(vt.a,null);switch(r.type){case oe.PENS:i=Jr(this,r,a);break;case oe.PIGS:i=Zr(this,r,a)}return n.a.createElement(ba.a,{style:[Vt.fullSize,Vt.fill]},n.a.createElement(vt.a,{style:[Vt.mainContainer]},n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fill]},t?n.a.createElement($t.a,{style:Yt.error},t):n.a.createElement(n.a.Fragment,null),i),e&&n.a.createElement(ja.a,{style:Vt.loadingContainer,size:"large"})))}}]),a}(r.Component);function Vr(e,t,a,r){var n=t.pens[a.penId].section,i=he(t.sections[n].pens);if(a.type===oe.PENS&&a.data&&i[a.penId]){var s=Object.keys(i).indexOf(a.penId);switch(r){case!0:s+=1;break;case!1:s-=1}s<0?s=Object.keys(i).length-1:s>=Object.keys(i).length&&(s=0),e.props.setCurrentData(Object.keys(i)[s]),z.replace("DataDisplay")}}var Jr=function(e,t,a){var r,i=[];if(a&&a.pens&&(r=he(a.pens))[t.penId]&&(t.data=r[t.penId]),a&&a.weighings&&a.weighings[t.penId]&&(i=a.weighings[t.penId]),t.data&&!t.data.datas&&(t.data.datas={}),!t.data)return n.a.createElement(vt.a,{style:[Vt.fillRowCenter,Vt.center,Vt.logoContainer]},n.a.createElement(Tt.a,{style:Vt.fullSize,source:zt.Hexa_icon,resizeMode:"contain"}));var s="NON";if(t.data.datas.batch&&a.batchs&&a.batchs[t.data.datas.batch]){var o=a.batchs[t.data.datas.batch],c=o.time;s=Math.floor((Date.now()-c)/864e5/7),t.data.datas.gcurve=o.gcurve}return n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fill]},n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.midWidth,Wt.bottomMargin,Vt.rowCenter]},n.a.createElement(vt.a,{style:{padding:6,paddingRight:15}},n.a.createElement(ca.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){return Vr(e,a,t,!1)}})),n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.midWidth]},n.a.createElement(ia,{Text:t.penId,buttonStyle:{backgroundColor:Bt},onPress:function(){}})),n.a.createElement(vt.a,{style:{padding:6,paddingLeft:15}},n.a.createElement(ca.a,{name:"md-arrow-forward",type:"ionicon",size:25,color:"black",onPress:function(){return Vr(e,a,t,!0)}}))),n.a.createElement(vt.a,{style:[Vt.fullWidth]},n.a.createElement(ga,{texts:["Batch","Pig count","Age","Weight","Growth Cruve","Mixtur","Correction","portion in kg"],onPress:function(e){return function(e,t){switch(e){case 1:switch(t.index){case 0:console.log("test")}}}(1,e)},datas:[t.data.datas.count?t.data.datas.count:0,t.data.datas.batch,s,"-",t.data.datas.gcurve?t.data.datas.gcurve:"default","-","-","-"]})),n.a.createElement(vt.a,{style:{height:20}}),n.a.createElement(vt.a,{style:[Vt.fill,Vt.midWidth,{height:160}]},n.a.createElement(ga,{texts:["Last weighings"],datas:[]}),n.a.createElement(vt.a,{style:{height:10}}),n.a.createElement(qa.a,{showsHorizontalScrollIndicator:!0,persistentScrollbar:!0,data:Object.keys(i).reverse(),renderItem:function(e){var t=e.item;return"__jsogObjectId"===t?n.a.createElement(n.a.Fragment,null):n.a.createElement(ga,{texts:[ue(i[t].time)],datas:[i[t].weight]})},numColumns:1,keyExtractor:function(e,t){return e.toString()}})),n.a.createElement(vt.a,{style:{height:30}}),n.a.createElement(vt.a,{style:[Vt.borderContainer,Vt.midWidth]},n.a.createElement(ya,{farm:Object.keys(a.userData.farms)[0],penid:t.penId})))},Zr=function(e,t,a){var r;if(a&&a.pigs&&(r=he(a.pigs))[t.TagId]&&(t.data=r[t.TagId]),t.data&&!t.data.datas&&(t.data.datas={}),!t.data)return n.a.createElement(vt.a,{style:[Vt.fillRowCenter,Vt.center,Vt.logoContainer]},n.a.createElement(Tt.a,{style:Vt.fullSize,source:zt.Hexa_icon,resizeMode:"contain"}));var i="android"===te.a.OS||"ios"===te.a.OS;return n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fill]},i?n.a.createElement(vt.a,{style:[Vt.fill,Vt.row,Vt.fullWidth]},n.a.createElement(vt.a,{style:[Vt.fill,Vt.column,{backgroundColor:"red"}]},n.a.createElement(vt.a,{style:[Vt.fill,Vt.row,Vt.fullWidth,{backgroundColor:"blue"}]},n.a.createElement(vt.a,{style:{justifyContent:"center",alignItems:"center"}})),n.a.createElement(vt.a,{style:[Vt.fill,Vt.row,Vt.fullWidth]},n.a.createElement($t.a,null,"Messages"),n.a.createElement($t.a,null,"Errors"))),n.a.createElement(vt.a,{style:[Vt.fill,Vt.column]},connectedState===ConnectionState.CONNECTED?n.a.createElement(vt.a,{style:zr(zr({},Yr.circle),{},{backgroundColor:"green",justifyContent:"center",alignItems:"center"})},n.a.createElement($t.a,null,"Device is"),n.a.createElement($t.a,null,"connected")):n.a.createElement(vt.a,{style:zr(zr({},Yr.circle),{},{backgroundColor:"red",justifyContent:"center",alignItems:"center"})},n.a.createElement($t.a,null,"No Device"),n.a.createElement($t.a,null,"connected")))):n.a.createElement(n.a.Fragment,null),n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.midWidth]},n.a.createElement(ia,{Text:t.TagId,buttonStyle:{backgroundColor:Bt},onPress:function(){}})),n.a.createElement(vt.a,{style:[Vt.fullWidth]},n.a.createElement(ga,{ingrid:!0,texts:["Section","Pen"],datas:[t.data.section,t.data.pen]}),n.a.createElement(vt.a,{style:{height:20}}),n.a.createElement(vt.a,{style:Vt.colCenter},n.a.createElement(ca.b,{label:"Comment:",multiline:!0,containerStyle:[{borderWidth:1}],style:[Yt.input],onChangeText:function(e){},value:"NONE"}))))},Yr=Ft.a.create({circle:{width:125,height:125,borderRadius:62.5,marginTop:Wt.tiny,marginLeft:Wt.tiny}}),qr=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{getPens:function(t){return e(H.actionStarting(ce.FETCH,oe.PENS,{FarmId:t}))},getWeights:function(t,a){return e(H.actionStarting(ce.FETCH,oe.WEIGHING,{FarmId:t,PenId:a}))},setFirebaseError:function(t){return e(H.setFirebaseError(t))},setCurrentData:function(t){return e(H.setCurrentData({type:oe.PENS,penId:t}))}}}))(_r),Xr=a(48),Qr=a.n(Xr),Kr=a(29),$r=a(372);function en(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function tn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?en(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):en(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function an(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=xt()(e);if(t){var n=xt()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return kt()(this,a)}}function rn(e,t){return Math.floor(Math.random()*(t-e+1))+e}var nn=Kr.a.get("window"),sn=Kr.a.get("screen");function on(e,t,a,r,n){var i=[],s=0;return e.forEach((function(e){if(r[e]){var o=r[e];if(Object.keys(o).length>=1){var c=[],l=[];for(Object.keys(o).sort((function(e,t){return o[e].time-o[t].time})).forEach((function(t){var r=o[t];if(r.weight&&r.time>=n){var i=r.weight;a&&a[e]&&a[e].datas&&a[e].datas.count&&(i/=a[e].datas.count),c.push(i),l.push(r.time),r.time>s&&(s=r.time)}}));c.length<t;)c.push(null),l.push(null);var u=function(){var e=[10,250],t=[10,250],a=[10,250],r=[.2,1],n=rn(e[0],e[1]),i=rn(t[0],t[1]),s=rn(a[0],a[1]),o=rn(100*r[0],100*r[1])/100;return{r:n,g:i,b:s,a:o,rgbaValue:"rgba("+n+","+i+","+s+","+o+")"}}();c.some((function(e){return null!==e}))&&i.push({Pen:e,data:c,dataX:l,color:function(){return u.rgbaValue}})}}})),{DataSets:i,EndDate:s}}var cn=function(e){wt()(a,e);var t=an(a);function a(e){var r;Dt()(this,a),(r=t.call(this,e)).onChange=function(e){var t=e.window,a=e.screen;r.setState({dimensions:{window:t,screen:a}})};var n=r.setData(e),i=n.Periode,s=n.Labels,o=n.TempGraph,c=n.Legends,l=n.DataSets,u=n.StartDate,f=n.EndDate;return r.state={dimensions:{window:nn,screen:sn},Periode:i,Labels:s,TempGraph:o,Legends:c,DataSets:l,StartDate:u,EndDate:f,ActiveCurve:null},r}return Pt()(a,[{key:"setData",value:function(e){var t=e.firebase.localDataStore,a=e.firebase.currentData,r=["Weeks",8],n=[],i=null,s=[],o=[],c=new Date,l=c.getTime(),u=new Date(c.setDate(c.getDate()+56));if(t){if(t.batchs&&a.batchId&&t.graphs&&a.curveId){i=t.graphs[a.curveId];l=t.batchs[a.batchId].time,i?i.name=a.curveId:t.graphs.gcurve&&((i=t.graphs.gcurve).name="Agrisys_Growth");var f=[];if(i.periode){r[0]=i.periode,r[1]=i.data.length;for(var p=new Date(l),m=0;m<r[1];m++)if(f.push(p.getTime()),m<r[1]-1)switch(r[0]){case"Days":p=new Date(p.setDate(p.getDate()+1));break;case"Month":p=new Date(p.setMonth(p.getMonth()+1));break;case"Weeks":default:p=new Date(p.setDate(p.getDate()+7))}u=p.getTime(),f.push(u)}o.push({data:i.data,dataX:f,color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;return"rgba(0, 0, 0, "+e+")"}})}if(t.weighings){s=s.concat(Object.keys(t.weighings).filter((function(e){return"__jsogObjectId"!==e})).reverse());var h=o,d=u,g=on(s,i.data.length,t.pens,t.weighings,l);o=g.DataSets,u=g.EndDate;o=h.concat(o),d>u&&(u=d),(s=s.filter((function(e){return"__jsogObjectId"!==e&&(e===i.name||o.some((function(t){return t.Pen===e})))}))).unshift(i.name)}var b=this.setGraphPeriode(r,l,u,!0);r=b.Periode,n=b.Labels}return{Periode:r,Labels:n,TempGraph:i,Legends:s,DataSets:o,StartDate:l,EndDate:u}}},{key:"setGraphPeriode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r||(e||(e=this.state.Periode),t=this.state.StartDate,a=this.state.EndDate),e[1]=0;for(var n=[],i=new Date(t);i.getTime()<=a;)switch(e[1]=e[1]+1,e[0]){case"Days":n.push(i.getDate()+"/"+(i.getMonth()+1)),i.setDate(i.getDate()+1);break;case"Months":n.push("Month"+e[1]),i.setMonth(i.getMonth()+1);break;case"Weeks":default:n.push(i.getDate()+"/"+(i.getMonth()+1)),i.setDate(i.getDate()+7)}if(e[1]=e[1]-1,r)return{Periode:e,Labels:n};this.setState({Periode:e,Labels:n})}},{key:"getData",value:function(){var e=this;this.props.setFirebaseError(null);var t=this.props.firebase.localDataStore,a=this.props.firebase.currentData;if(a&&a.batchId&&t.batchs[a.batchId]){var r=t.batchs[a.batchId];Object.keys(r.pens).forEach((function(a){if("__jsogObjectId"===a)return null;e.props.getPen(Object.keys(t.userData.farms)[0],a),e.props.getWeights(Object.keys(t.userData.farms)[0],a)}));var n="";a.curveId&&(n=a.curveId),this.props.getCurve(Object.keys(t.userData.farms)[0],n)}}},{key:"checkData",value:function(e){e.firebase&&null!==e.firebase.firebaseUser||z.navigate("AuthStack"),e.firebase.currentData&&e.firebase.currentData.batchId||z.navigate("UserBatchs")}},{key:"componentDidUpdate",value:function(e,t){if(this.props!==e&&(this.checkData(this.props),this.props.firebase.localDataStore&&this.props.firebase.localDataStore.graphs&&this.props.firebase.localDataStore.weighings)){var a=this.setData(this.props),r=a.Periode,n=a.Labels,i=a.TempGraph,s=a.Legends,o=a.DataSets,c=a.StartDate,l=a.EndDate;JSON.stringify(this.state.Periode)===JSON.stringify(r)&&JSON.stringify(this.state.Labels)===JSON.stringify(n)&&JSON.stringify(this.state.TempGraph)===JSON.stringify(i)&&JSON.stringify(this.state.Legends)===JSON.stringify(s)&&JSON.stringify(this.state.DataSets)===JSON.stringify(o)&&JSON.stringify(this.state.StartDate)===JSON.stringify(c)&&JSON.stringify(this.state.EndDate)===JSON.stringify(l)||this.setState({Periode:r,Labels:n,TempGraph:i,Legends:s,DataSets:o,StartDate:c,EndDate:l})}}},{key:"componentDidMount",value:function(){this.checkData(this.props),this.getData(),Kr.a.addEventListener("change",this.onChange)}},{key:"componentWillUnmount",value:function(){Kr.a.removeEventListener("change",this.onChange)}},{key:"render",value:function(){var e=this,t=this.props.firebase.firebaseIsLoading,a=(this.props.firebase.firebaseUser,this.props.firebase.firebaseErrorMessage),r=(this.props.firebase.localDataStore,this.state.dimensions.window.width>1e3),i=this.state.dimensions.window.height-140-Wt.medium*(this.state.ActiveCurve?5:4)-110;"ios"!==te.a.OS&&"android"!==te.a.OS||(i+=90);var s=2*(this.state.dimensions.window.width-2*Wt.normal)/(r?2.05:1);return n.a.createElement(vt.a,{style:[Vt.mainContainer]},n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fill]},a?n.a.createElement($t.a,{style:Yt.error},a):n.a.createElement(n.a.Fragment,null),n.a.createElement(oa,{Text:this.props.firebase.currentData.batchId?this.props.firebase.currentData.batchId:"-NON-"}),n.a.createElement(vt.a,{style:[Vt.contentContainer,Vt.fullSize,Vt.fill,{marginHorizontal:0,paddingHorizontal:-20}]},n.a.createElement(ba.a,{horizontal:!0,showsHorizontalScrollIndicator:!r,style:[Vt.fullSize]},this.state.TempGraph&&this.state.DataSets?n.a.createElement($r.a,{style:[{marginLeft:-35,marginRight:Wt.normal}],width:s,height:i,data:{labels:this.state.Labels,xMinMax:[this.state.StartDate,this.state.EndDate,this.state.Periode[1]],legend:this.state.Legends.slice(0,this.state.DataSets.length),datasets:this.state.DataSets},onDataPointClick:function(t){e.setState({ActiveCurve:t})},withShadow:!1,withVerticalLines:!0,fromZero:!1,segments:15,verticalLabelRotation:0,xLabelsOffset:0,chartConfig:{backgroundColor:Nt,backgroundGradientFrom:Nt,backgroundGradientTo:Nt,decimalPlaces:0,color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba(0, 0, 0, "+e+")"},labelColor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba(0, 0, 0, "+e+")"},style:{borderRadius:16,height:i},propsForDots:{r:"5",strokeWidth:"0.5",stroke:Nt}}}):n.a.createElement(n.a.Fragment,null))),n.a.createElement(ln,{control:this,props:this.props,state:this.state})),t&&n.a.createElement(ja.a,{style:Vt.loadingContainer,size:"large"}))}}]),a}(r.Component),ln=function(e){if("ios"===te.a.OS||"android"===te.a.OS){if(e.state.ActiveCurve){var t=e.state.Labels[e.state.ActiveCurve.index];if(e.state.ActiveCurve.dataset.dataX){var a=new Date(e.state.ActiveCurve.dataset.dataX[e.state.ActiveCurve.index]);t=a.getFullYear()+"."+(a.getMonth()+1)+"."+a.getDate()}var r=e.state.ActiveCurve.value;return n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.fullWidth,Vt.rowCenter,{maxHeight:100}]},n.a.createElement(vt.a,{style:[Vt.colCenter,Vt.borderContainer,{borderRadius:0}]},n.a.createElement($t.a,null,t)),n.a.createElement(vt.a,{style:[Vt.colCenter,Vt.borderContainer,{borderRadius:0}]},n.a.createElement($t.a,null,r," Kg.")))}return n.a.createElement(n.a.Fragment,null)}var i=n.a.useState(0),s=Qr()(i,2),o=s[0],c=s[1];return e.state.TempGraph?n.a.createElement(vt.a,{style:[Vt.buttonContainer,Vt.fullWidth,Vt.rowCenter,{maxHeight:100,marginTop:10}]},n.a.createElement(vt.a,{style:{padding:6,paddingRight:15}},n.a.createElement(ca.a,{name:"md-arrow-back",type:"ionicon",size:25,color:"black",onPress:function(){var t=o;(t-=1)<0&&(t=e.state.TempGraph.data.length-1),c(t)}})),n.a.createElement(ca.b,{label:e.state.Labels[o],containerStyle:[{width:"auto",borderWidth:1}],style:[Yt.input,Vt.borderContainer,{borderRadius:0}],onChangeText:function(t){if(!isNaN(t)){var a=e.state.TempGraph.data;a[o]=t,e.control.setState({TempGraph:tn(tn({},e.state.TempGraph),{},{data:a})})}},value:e.state.TempGraph.data[o]}),n.a.createElement(vt.a,{style:{padding:6,paddingRight:15}},n.a.createElement(ca.a,{name:"md-arrow-forward",type:"ionicon",size:25,color:"black",onPress:function(){var t=o;(t+=1)>e.state.TempGraph.data.length-1&&(t=0),c(t)}})),n.a.createElement(ca.b,{label:"Curve Name",containerStyle:[{width:"auto",borderWidth:1}],style:[Yt.input,Vt.borderContainer,{borderRadius:0}],onChangeText:function(t){var a=t;if(a=a.replace(" ","_"),isNaN(a[0])){var r=e.state.Legends;r[0]=a,e.control.setState({TempGraph:tn(tn({},e.state.TempGraph),{},{name:a}),Legends:r})}},value:e.state.TempGraph.name})):n.a.createElement(n.a.Fragment,null)},un=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{setFirebaseError:function(t){return e(H.setFirebaseError(t))},getPen:function(t,a){return e(H.actionStarting(ce.FETCH,oe.PENS,{FarmId:t,PenId:a}))},getWeights:function(t,a){return e(H.actionStarting(ce.FETCH,oe.WEIGHING,{FarmId:t,PenId:a,limitTo:99}))},getBatch:function(t,a){return e(H.actionStarting(ce.FETCH,oe.BATCHS,{FarmId:t}))},getCurve:function(t,a){return e(H.actionStarting(ce.FETCH,oe.GRAPH,{FarmId:t,GraphId:a}))},setCurve:function(t,a){return e(H.actionStarting(ce.CREATE,oe.GRAPH,{FarmId:t,Graph:a}))}}}))(cn);function fn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var pn=Object(Et.a)({UserFront:{screen:Ya,navigationOptions:function(){return{title:"User Data",headerLeft:function(){return n.a.createElement(vt.a,{style:{padding:6,paddingLeft:15}},n.a.createElement(ca.a,{type:"ionicon",name:"md-arrow-back",size:25,color:"black",onPress:function(){return z.navigate("MainStack")}}))}}},path:"user_front"},UserDashBoard:{screen:Ka,navigationOptions:function(){return{title:"Dash Board"}},path:"user_dashboard"},UserPigs:{screen:cr,navigationOptions:function(){return{title:"Pigs"}},path:"user_pigs"},UserPens:{screen:hr,navigationOptions:function(){return{title:"Pens"}},path:"user_pens"},UserBatchs:{screen:yr,navigationOptions:function(){return{title:"Batchs"}},path:"user_batchs"},UserCurves:{screen:Or,navigationOptions:function(){return{title:"Curves"}},path:"user_curves"},UserOperations:{screen:wr,navigationOptions:function(){return{title:"Operations"}},path:"user_operations"},WeighingOperations:{screen:Tr,navigationOptions:function(){return{title:"Operations"}},path:"user_operations"},DataEditor:{screen:Hr,navigationOptions:function(){return{title:"User Data"}},path:"user_dataedtior"},DataDisplay:{screen:qr,navigationOptions:function(){return{title:"User Data"}},path:"user_datadisplay"},DataPlotter:{screen:un,navigationOptions:function(){return{title:"User Data"}},path:"user_dataplotter"}},{initialRouteName:"UserFront",headerMode:"float",defaultNavigationOptions:{headerTitleAlign:"center",headerTitleStyle:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Yt.navigationHeader),headerRight:function(){return n.a.createElement(vt.a,{style:{padding:6}})}}}),mn=Object(Et.a)({SplashScreen:{screen:Kt,navigationOptions:function(){return{headerShown:!1}}},MainStack:Na,AuthStack:Va,UserPanel:pn,DeepLinkingScreen:{screen:ea,path:"deeplink"}},{initialRouteName:"SplashScreen",headerMode:"none",defaultNavigationOptions:{headerTitleAlign:"center",headerRight:function(){return n.a.createElement(vt.a,{style:{padding:6}})}}}),hn=Object(W.createAppContainer)(mn),dn=function(){var e=Object(i.c)();return Object(r.useEffect)((function(){e(P.startup())}),[]),n.a.createElement(vt.a,{style:Vt.fill},n.a.createElement(hn,{ref:function(e){z.setTopLevelNavigator(e)},uriPrefix:"agrisysapp://"}))},gn=function(e,t){var a=[],r=[],n=Object(c.b)();a.push(n),r.push(o.a.apply(void 0,a));var i=Object(l.b)(d,e),s=Object(o.e)(i,o.d.apply(void 0,r)),u=Object(l.c)(s);return n.run(t),{store:s,persistor:u}}(Object(o.c)({example:lt,firebase:yt}),nt),bn=gn.store,yn=gn.persistor;t.a=function(){return n.a.createElement(i.a,{store:bn},n.a.createElement(s.PersistGate,{loading:null,persistor:yn},n.a.createElement(dn,null)))}},374:function(e,t,a){e.exports=a(620)},495:function(e,t,a){e.exports=a.p+"static/media/Home.1fff8434.png"},496:function(e,t,a){e.exports=a.p+"static/media/Dashboard.26766c7a.png"},497:function(e,t,a){e.exports=a.p+"static/media/System.7e4af00c.png"},498:function(e,t,a){e.exports=a.p+"static/media/Feed-Curves.da739887.png"},499:function(e,t,a){e.exports=a.p+"static/media/User.d73be9fd.png"},500:function(e,t,a){e.exports=a.p+"static/media/Sow.beff0aff.png"},501:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABRCAYAAACuepoLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAq9JREFUeNrsnT1Lw1AUhk9FRFEhDhV0qgouLlrcjYOLi3XpasEfYjo62X/Quorg5iS0P0D8GBzVOAkWP6CVigg1197E0Naa3ER7b/K+cLig3tP4eJJz8g5XIig0JRS8Zr3Pn1+JUgE0JYgjK1JRqEz2y9DE1IJwgrdalRr1BxoZm6Th8aTvfVwvVqxacaE8zLXtQ+EEN+cHdH12QHPpLM0uZX3tbdSrdHmyS7VH0wY6w1caQNvwp5GxJC2v57+q2pJmRc7+HmAKaHBolGbTTkVvAGYIFdoBucfPp7p1rH8efwr280iJiu3ytUUr9iSY5+yZrqIqTAayzB+sIgOqHtJgq7vGD1IRpsaHUY3PTptWmCJjC5+/Ao8/7hlONZgZ/ow0OQylqkIGubv5Cl/3ATI4zFQUX+T7BRMCTMCM5mumqhf+fH8lvLdRqzqraJ7aU++pscznuyBvPk3XjEh/lKcpWZSVr8x+mMNufby/2p6m+rc58xRFZZvD0/O6b3PY/Zg5Pd5BA0I3B0yMRlsU3Ms0ALOlXAh5dwCzpZIVdwEh5uP4x+gGk1lwlYAQjDjCRAMCTMAETAgwARMwoZ5zphJiNpqonri73lrF8thu/U+C0x5Dpz0v2fWYKlcmGhC6OQSYMo1GMjnthkSsfr2WRFsD0lFfnlh5rswSyeO0y5BHyKiO4mgURh7POdCA0M0BEzAhwARMwIQAEzABEzAhwARMwIQ6FRen3fgPmHDaxVh5rswSwWnvlsOX4LQHzIEGhG4OmIAJASZgAiYEmIAJmPGEafJVBxZHi21sPCvH30Fv8W7uqMj3F/1uZCe6PtP3vxvQYg7TcO33dLe6LTh2ACk7Gpe5RxkeFcELKYd0m/UrT4q+zxMtBODgHOLcjHnc8oLyrMQvUDWKr3xX46cAAwCxt3YCfnN46AAAAABJRU5ErkJggg=="},502:function(e,t,a){e.exports=a.p+"static/media/Hexagon-globe.fce26805.png"},503:function(e,t,a){e.exports=a.p+"static/media/Hexa-icon.5129d536.png"},504:function(e,t,a){e.exports=a.p+"static/media/Logo.9b051259.png"},505:function(e,t,a){e.exports=a.p+"static/media/TOM.c88886f3.png"}},[[374,1,2]]]);
//# sourceMappingURL=app.3f195bc6.chunk.js.map